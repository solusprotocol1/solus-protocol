<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="description" content="S4 Ledger Defense Logistics Demo — Anchor, verify, and track U.S. Navy logistics records on the XRP Ledger.">
    <title>S4 Ledger | Platform</title>
    <link rel="canonical" href="https://s4ledger.com/demo-app/">
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="S4 Ledger Platform — Defense Logistics Blockchain">
    <meta property="og:description" content="Anchor, verify, and track U.S. Navy logistics records on the XRP Ledger. 20+ ILS tools, AI agent, audit vault.">
    <meta property="og:url" content="https://s4ledger.com/demo-app/">
    <meta property="og:image" content="https://s4ledger.com/s4-assets/icon-512.png">
    <meta property="og:site_name" content="S4 Ledger">
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="S4 Ledger Platform — Defense Logistics Blockchain">
    <meta name="twitter:description" content="Anchor, verify, and track U.S. Navy logistics records on the XRP Ledger.">
    <meta name="twitter:image" content="https://s4ledger.com/s4-assets/icon-512.png">
    <!-- Flankspeed / Nautilus VDI Compatibility -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    <meta name="color-scheme" content="dark">
    <meta name="application-name" content="S4 Ledger">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="msapplication-config" content="none">
    <!-- Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.sheetjs.com; style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://fonts.googleapis.com; font-src https://cdnjs.cloudflare.com https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https: wss:; frame-src 'none'; object-src 'none'; base-uri 'self'; form-action 'self';">
    <!-- Preconnect hints for faster CDN resolution -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.sheetjs.com" crossorigin>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha384-iw3OoTErCYJJB9mCa8LNS2hbsQ7M3C0EpIsO/H5+EGAkPGc6rk+V8i04oW/K5xq0" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <!-- Non-critical JS deferred for faster first paint -->
    <script defer src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js" integrity="sha384-QCIdq2UMVEoSRhR3ZWZwdz2/pivLowr+eokFMdYyukq7qI26VYRxFa4Nl6FKetmL" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js" integrity="sha384-/1qUCSGwTur9vjf/z9lmu/eCUYbpOTgSjmpbMQZ1/CtX2v/WcAIKqRv+U1DUCG6e" crossorigin="anonymous"></script>
    <script>if(window.pdfjsLib)pdfjsLib.GlobalWorkerOptions.workerSrc='https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';</script>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js" integrity="sha384-nFoSjZIoH3CCp8W639jJyQkuPHinJ2NHe7on1xvlUA7SuGfJAfvMldrsoAVm6ECz" crossorigin="anonymous"></script>
    <script src="/s4-assets/platforms.js"></script>
    <script src="/s4-assets/defense-docs.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" integrity="sha384-9nhczxUqK87bcKHh20fSQcTGD4qq5GhayNYSYWqwBkINBhOfQLg/P5HG5lF1urn4" crossorigin="anonymous"></script>
    <!-- CSS is imported via main.js and extracted by Vite -->
</head>
<body>
<!-- Skip Navigation Link (Section 508 / a11y) -->
<a href="#mainContent" class="sr-only" style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;z-index:99999;background:#00aaff;color:#fff;padding:12px 24px;font-weight:700;text-decoration:none;border-radius:0 0 3px 0" onfocus="this.style.position='fixed';this.style.left='0';this.style.top='0';this.style.width='auto';this.style.height='auto';this.style.overflow='visible'" onblur="this.style.position='absolute';this.style.left='-9999px';this.style.width='1px';this.style.height='1px';this.style.overflow='hidden'">Skip to main content</a>
<div style="background:rgba(10,10,15,0.95);border-bottom:1px solid rgba(255,255,255,0.06);padding:4px 0;text-align:center;font-size:0.72rem;color:#8b8fa3;"><i class="fas fa-exclamation-triangle" style="margin-right:4px;"></i> NOTICE: Do not submit ITAR-controlled, classified, or export-controlled data to this platform. This system processes UNCLASSIFIED and CUI data only. <a href="/security/" style="color:#00aaff;text-decoration:underline;">Security Policy</a></div>
<div id="demoBanner" style="display:none;background:linear-gradient(90deg,rgba(0,170,255,0.10),rgba(201,168,76,0.08));border-bottom:1px solid rgba(0,170,255,0.3);padding:8px 0;text-align:center;font-size:0.82rem;color:#8ea4b8;cursor:pointer;" onclick="document.getElementById('demoPanel').scrollIntoView({behavior:'smooth'})"><i class="fas fa-shield-halved" style="color:#00aaff;margin-right:6px;"></i> <strong style="color:#fff;">S4 Ledger</strong> &mdash; <strong style="color:#c9a84c;">0.01 $SLS per anchor</strong> &mdash; each record is permanently anchored to the XRP Ledger. <span style="color:#00aaff;">&#9660; View Details</span></div>
<div id="demoStatusBar" style="display:none;background:rgba(0,170,255,0.06);border-bottom:1px solid rgba(0,170,255,0.15);padding:5px 0;text-align:center;font-size:0.75rem;color:#8ea4b8;letter-spacing:0.3px;"></div>
<nav id="mainNav" role="navigation" aria-label="Main navigation" style="position:fixed;top:0;left:0;right:0;z-index:1000;background:rgba(5,8,16,0.95);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-bottom:1px solid rgba(255,255,255,0.06);height:64px;">
    <div style="max-width:1200px;margin:0 auto;padding:0 2rem;display:flex;align-items:center;justify-content:space-between;height:100%;">
        <a href="/" style="display:flex;align-items:center;gap:10px;text-decoration:none;color:#fff;font-weight:700;font-size:1rem;">
            <img src="/s4-assets/S4Ledger_logo.png" alt="S4 Ledger" style="height:32px;width:32px;">
            <span>S4 Ledger</span>
        </a>
        <ul id="navLinks" style="display:flex;align-items:center;gap:0.5rem;list-style:none;margin:0;padding:0;">
            <li><a href="/demo-app/" style="color:#00aaff;padding:0.5rem 0.75rem;font-size:0.875rem;font-weight:500;text-decoration:none;border-radius:3px;">Platform</a></li>
            <li><a href="/s4-use-cases/" style="color:rgba(255,255,255,0.7);padding:0.5rem 0.75rem;font-size:0.875rem;font-weight:500;text-decoration:none;border-radius:3px;">Use Cases</a></li>
            <li><a href="/s4-pricing/" style="color:rgba(255,255,255,0.7);padding:0.5rem 0.75rem;font-size:0.875rem;font-weight:500;text-decoration:none;border-radius:3px;">Pricing</a></li>
            <li><a href="/s4-investors/" style="color:rgba(255,255,255,0.7);padding:0.5rem 0.75rem;font-size:0.875rem;font-weight:500;text-decoration:none;border-radius:3px;">Company</a></li>
            <li><a href="https://github.com/s4ledger/s4-ledger" target="_blank" style="color:rgba(255,255,255,0.7);padding:0.5rem 0.75rem;font-size:0.875rem;font-weight:500;text-decoration:none;border-radius:3px;">Docs</a></li>
            <li><a href="/s4-contact/" style="background:#00aaff;color:#fff;padding:0.5rem 1.25rem;font-size:0.875rem;font-weight:600;text-decoration:none;border-radius:3px;margin-left:0.5rem;">Request Demo</a></li>
            <li><button class="theme-toggle" onclick="toggleTheme()" title="Toggle Light/Dark Mode" id="themeToggleBtn"><i class="fas fa-sun"></i></button></li>
        </ul>
        <button onclick="var nl=document.getElementById('navLinks');nl.style.display=nl.style.display==='flex'?'none':'flex';nl.style.flexDirection=nl.style.display==='flex'?'column':'row';nl.style.position=nl.style.display==='flex'&&window.innerWidth<768?'absolute':'static';nl.style.top='64px';nl.style.left='0';nl.style.right='0';nl.style.background=document.body.classList.contains('light-mode')?'rgba(255,255,255,0.98)':'rgba(5,8,16,0.98)';nl.style.padding='1rem';nl.style.borderBottom=document.body.classList.contains('light-mode')?'1px solid rgba(0,0,0,0.06)':'1px solid rgba(255,255,255,0.06)';" aria-label="Menu" style="display:none;background:none;border:none;color:var(--text);font-size:1.25rem;cursor:pointer;padding:0.5rem;">
            <i class="fas fa-bars"></i>
        </button>
    </div>
</nav>


<!-- ═══ S4 UX ELEMENTS ═══ -->
<div class="s4-toast-container" id="s4ToastContainer"></div>

<div class="s4-tour-overlay" id="s4TourOverlay">
    <div class="s4-tour-highlight" id="s4TourHighlight"></div>
    <div class="s4-tour-tooltip" id="s4TourTooltip"></div>
</div>

<div class="s4-command-palette" id="s4CommandPalette">
    <input type="text" id="s4CommandInput" placeholder="Type a command or search..." autocomplete="off" spellcheck="false">
    <div class="s4-command-list" id="s4CommandList"></div>
</div>

<button class="s4-mobile-toggle" id="s4MobileToggle" aria-label="Toggle sidebar"><i class="fas fa-bars"></i></button>

<!-- ═══ SESSION LOCK OVERLAY ═══ -->
<div id="s4SessionLockOverlay" style="display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.95);z-index:99998;align-items:center;justify-content:center;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);cursor:pointer" onclick="S4.resumeSession()">
    <div style="text-align:center;max-width:400px;">
        <i class="fas fa-lock" style="font-size:3rem;color:#c9a84c;margin-bottom:16px;display:block"></i>
        <h3 style="color:#fff;font-weight:800;margin-bottom:8px">Session Locked</h3>
        <p style="color:var(--steel);font-size:0.9rem;margin-bottom:20px">Your session was locked due to inactivity.<br>Click anywhere to resume.</p>
        <div style="font-size:0.75rem;color:var(--muted)"><i class="fas fa-shield-halved" style="margin-right:4px;color:#00aaff"></i>Security policy: 30-minute timeout</div>
    </div>
</div>

<!-- ═══ DoD CONSENT BANNER ═══ -->
<div id="dodConsentBanner" style="display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.92);z-index:99999;align-items:center;justify-content:center;">
    <div style="background:#0a0e1a;border:2px solid rgba(0,170,255,0.5);border-radius:3px;padding:40px;max-width:680px;width:95%;text-align:center;box-shadow:0 20px 60px rgba(0,0,0,0.7);">
        <div style="margin-bottom:20px;"><i class="fas fa-shield-halved" style="font-size:3rem;color:#00aaff;"></i></div>
        <h2 style="color:#00aaff;font-size:1.3rem;font-weight:800;margin-bottom:12px;text-transform:uppercase;letter-spacing:1px;">U.S. Department of Defense Information System</h2>
        <div style="background:rgba(0,170,255,0.06);border:1px solid rgba(0,170,255,0.2);border-radius:3px;padding:20px;margin-bottom:20px;text-align:left;">
            <p style="color:var(--steel);font-size:0.82rem;line-height:1.7;margin:0 0 12px;">You are accessing a U.S. Government (USG) Information System (IS) that is provided for USG-authorized use only.</p>
            <p style="color:var(--steel);font-size:0.82rem;line-height:1.7;margin:0 0 12px;">By using this IS (which includes any device attached to this IS), you consent to the following conditions:</p>
            <ul style="color:var(--steel);font-size:0.78rem;line-height:1.8;margin:0 0 12px;padding-left:20px;">
                <li>The USG routinely intercepts and monitors communications on this IS for purposes including, but not limited to, penetration testing, COMSEC monitoring, network operations and defense, personnel misconduct (PM), law enforcement (LE), and counterintelligence (CI) investigations.</li>
                <li>At any time, the USG may inspect and seize data stored on this IS.</li>
                <li>Communications using, or data stored on, this IS are not private, are subject to routine monitoring, interception, and search, and may be disclosed or used for any USG-authorized purpose.</li>
                <li>This IS includes security measures (e.g., authentication and access controls) to protect USG interests — not for your personal benefit or privacy.</li>
            </ul>
            <p style="color:#00aaff;font-size:0.82rem;line-height:1.7;margin:0;font-weight:600;">Notwithstanding the above, using this IS does not constitute consent to PM, LE, or CI investigative searching or monitoring of the content of privileged communications.</p>
        </div>
        <button onclick="acceptDodConsent()" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;padding:14px 48px;border-radius:3px;font-weight:700;font-size:0.95rem;cursor:pointer;letter-spacing:0.5px;">I Accept &mdash; Continue</button>
        <div style="margin-top:12px;font-size:0.7rem;color:var(--muted);">By clicking "I Accept" you acknowledge and consent to the terms above.</div>
    </div>
</div>

<!-- ═══ CAC / LOGIN POPUP ═══ -->
<div id="cacLoginModal" style="display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.88);z-index:99998;align-items:center;justify-content:center;">
    <div style="background:#0a0e1a;border:1px solid rgba(0,170,255,0.3);border-radius:3px;padding:40px;max-width:480px;width:95%;text-align:center;box-shadow:0 20px 60px rgba(0,0,0,0.7);">
        <div style="margin-bottom:24px;"><img src="/s4-assets/S4Ledger_logo.png" alt="S4 Ledger" style="height:48px;width:48px;margin-bottom:8px;"><h3 style="color:#fff;font-size:1.2rem;font-weight:800;margin:0;">S4 Ledger Platform Login</h3><p style="color:var(--steel);font-size:0.82rem;margin-top:4px;">Authenticate to access the Anchor-S4 workspace</p></div>
        <div id="cacLoginTabs" style="display:flex;gap:0;margin-bottom:24px;border:1px solid var(--border);border-radius:3px;overflow:hidden;">
            <button onclick="switchLoginTab('cac')" id="loginTabCac" style="flex:1;padding:10px;background:rgba(0,170,255,0.1);color:var(--accent);border:none;font-weight:700;font-size:0.82rem;cursor:pointer;"><i class="fas fa-id-card" style="margin-right:6px;"></i>CAC / PIV</button>
            <button onclick="switchLoginTab('account')" id="loginTabAcct" style="flex:1;padding:10px;background:transparent;color:var(--steel);border:none;font-weight:600;font-size:0.82rem;cursor:pointer;"><i class="fas fa-user" style="margin-right:6px;"></i>Account</button>
        </div>
        <div id="cacLoginPane" style="">
            <div style="background:rgba(0,170,255,0.04);border:1px solid rgba(0,170,255,0.15);border-radius:3px;padding:24px;margin-bottom:16px;">
                <i class="fas fa-id-card" style="font-size:2.5rem;color:var(--accent);margin-bottom:12px;display:block;"></i>
                <p style="color:var(--steel);font-size:0.85rem;margin:0 0 12px;">Insert your Common Access Card (CAC) or PIV card and select your certificate.</p>
                <div style="font-size:0.75rem;color:var(--muted);">(Demo mode — click below to simulate CAC authentication)</div>
            </div>
            <button onclick="simulateCacLogin()" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;padding:12px 36px;border-radius:3px;font-weight:700;font-size:0.9rem;cursor:pointer;width:100%;"><i class="fas fa-shield-halved" style="margin-right:8px;"></i>Authenticate with CAC</button>
        </div>
        <div id="acctLoginPane" style="display:none;">
            <div style="margin-bottom:12px;text-align:left;"><label style="color:var(--steel);font-size:0.78rem;font-weight:600;">Email / User ID</label><input type="email" id="loginEmail" placeholder="user@agency.mil" style="background:#050810;color:#fff;border:1px solid var(--border);border-radius:3px;padding:10px 12px;width:100%;margin-top:4px;font-size:0.88rem;"></div>
            <div style="margin-bottom:16px;text-align:left;"><label style="color:var(--steel);font-size:0.78rem;font-weight:600;">Password</label><input type="password" id="loginPassword" placeholder="••••••••" style="background:#050810;color:#fff;border:1px solid var(--border);border-radius:3px;padding:10px 12px;width:100%;margin-top:4px;font-size:0.88rem;"></div>
            <button onclick="simulateAccountLogin()" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;padding:12px 36px;border-radius:3px;font-weight:700;font-size:0.9rem;cursor:pointer;width:100%;"><i class="fas fa-right-to-bracket" style="margin-right:8px;"></i>Sign In</button>
            <div style="margin-top:12px;font-size:0.78rem;"><a href="#" onclick="event.preventDefault();if(typeof _showNotif==='function')_showNotif('Password reset link sent to your .mil email.','info');" style="color:var(--accent);text-decoration:none;">Forgot password?</a></div>
        </div>
    </div>
</div>

<main id="mainContent" role="main">\n<section class="hero" style="padding:4rem 0 2rem;text-align:center;">
    <div class="container">
        <h1 style="font-size:2.4rem;font-weight:800;margin-bottom:0.75rem;color:#fff;letter-spacing:-0.035em;line-height:1.1;">S4 Ledger <span style="color:var(--accent);">Platform</span></h1>
        <p style="color:var(--steel);font-size:1.05rem;">Anchor, verify, and track Navy logistics records on the XRP Ledger with blockchain-grade integrity.</p>
        <div class="badge-live" style="display:inline-block;margin-top:12px;background:rgba(0,170,255,0.08);border:1px solid rgba(0,170,255,0.25);color:var(--accent);padding:6px 16px;border-radius:3px;font-size:0.8rem;font-weight:600;">XRPL Mainnet Connected &mdash; Navy Record Types &bull; 54+ Pre-Built Templates</div>
    </div>
</section>

<section id="platformLanding" style="padding:3rem 0 4rem;">
    <div class="container">
        <div style="text-align:center;margin-bottom:3rem;">
            <h2 style="font-size:1.8rem;font-weight:700;color:#fff;margin-bottom:0.75rem;letter-spacing:-0.03em;line-height:1.15;">The Complete Defense Logistics Toolkit</h2>
            <p style="color:var(--steel);font-size:1.05rem;max-width:640px;margin:0 auto;">20+ integrated tools for anchoring, verifying, and managing Navy logistics records on the XRP Ledger. Built by ILS professionals, for ILS professionals.</p>
        </div>
        <div class="row" style="margin-bottom:2rem;">
            <div class="col-md-4 mb-3"><div style="background:var(--card);border:1px solid var(--border);border-radius:3px;padding:2rem 1.5rem;text-align:center;height:100%;">
                <i class="fas fa-anchor" style="font-size:2rem;color:var(--accent);margin-bottom:1rem;display:block;"></i>
                <h4 style="font-size:1rem;font-weight:700;color:#fff;margin-bottom:0.5rem;">Anchor &amp; Verify</h4>
                <p style="color:var(--steel);font-size:0.88rem;line-height:1.6;">Hash any defense record with SHA-256 and anchor the fingerprint to the XRP Ledger. Verify integrity at any time.</p>
            </div></div>
            <div class="col-md-4 mb-3"><div style="background:var(--card);border:1px solid var(--border);border-radius:3px;padding:2rem 1.5rem;text-align:center;height:100%;">
                <i class="fas fa-cubes" style="font-size:2rem;color:var(--accent);margin-bottom:1rem;display:block;"></i>
                <h4 style="font-size:1rem;font-weight:700;color:#fff;margin-bottom:0.5rem;">Anchor-S4</h4>
                <p style="color:var(--steel);font-size:0.88rem;line-height:1.6;">Gap analysis, DMSMS tracking, readiness scoring, lifecycle cost estimation, compliance scorecards, and 15+ more tools.</p>
            </div></div>
            <div class="col-md-4 mb-3"><div style="background:var(--card);border:1px solid var(--border);border-radius:3px;padding:2rem 1.5rem;text-align:center;height:100%;">
                <i class="fas fa-shield-halved" style="font-size:2rem;color:var(--accent);margin-bottom:1rem;display:block;"></i>
                <h4 style="font-size:1rem;font-weight:700;color:#fff;margin-bottom:0.5rem;">Audit &amp; Compliance</h4>
                <p style="color:var(--steel);font-size:0.88rem;line-height:1.6;">CMMC, NIST 800-171, DFARS &mdash; automated compliance scoring with blockchain-anchored evidence.</p>
            </div></div>
        </div>
        <div class="row" style="margin-bottom:2rem;">
            <div class="col-md-4 mb-3"><div style="background:var(--card);border:1px solid var(--border);border-radius:3px;padding:2rem 1.5rem;text-align:center;height:100%;">
                <i class="fas fa-brain" style="font-size:2rem;color:var(--accent);margin-bottom:1rem;display:block;"></i>
                <h4 style="font-size:1rem;font-weight:700;color:#fff;margin-bottom:0.5rem;">AI-Powered Analysis</h4>
                <p style="color:var(--steel);font-size:0.88rem;line-height:1.6;">Supply chain risk engine, predictive maintenance AI, and a conversational agent for ILS guidance.</p>
            </div></div>
            <div class="col-md-4 mb-3"><div style="background:var(--card);border:1px solid var(--border);border-radius:3px;padding:2rem 1.5rem;text-align:center;height:100%;">
                <i class="fas fa-database" style="font-size:2rem;color:var(--accent);margin-bottom:1rem;display:block;"></i>
                <h4 style="font-size:1rem;font-weight:700;color:#fff;margin-bottom:0.5rem;">Defense Data Import</h4>
                <p style="color:var(--steel);font-size:0.88rem;line-height:1.6;">Import from DPAS, OARS, OMMS-NG, DECKPLATE, and other Navy systems. 500+ defense platforms database.</p>
            </div></div>
            <div class="col-md-4 mb-3"><div style="background:var(--card);border:1px solid var(--border);border-radius:3px;padding:2rem 1.5rem;text-align:center;height:100%;">
                <i class="fas fa-file-contract" style="font-size:2rem;color:var(--accent);margin-bottom:1rem;display:block;"></i>
                <h4 style="font-size:1rem;font-weight:700;color:#fff;margin-bottom:0.5rem;">Contract &amp; Config Mgmt</h4>
                <p style="color:var(--steel);font-size:0.88rem;line-height:1.6;">Track warranties, CDRL deliverables, contract modifications, and engineering change proposals.</p>
            </div></div>
        </div>
        <div style="text-align:center;">
            <button onclick="startAuthFlow()" style="background:var(--accent);color:#fff;border:none;padding:14px 36px;border-radius:3px;font-weight:600;font-size:0.9375rem;cursor:pointer;transition:all 0.3s cubic-bezier(0.25,0.1,0.25,1);letter-spacing:-0.01em;">Enter Platform <i class="fas fa-arrow-right" style="margin-left:8px;"></i></button>
        </div>
    </div>
</section>

<div id="platformWorkspace" style="display:none;">
<section class="tab-section">
    <div class="container">
        <div class="stat-strip" id="statsRow">
            <div class="ss-item"><span class="ss-val" id="statVerified">0</span> <span class="ss-label">Verified</span></div>
            <div class="ss-item"><span class="ss-val" id="statTypes">0</span> <span class="ss-label">Types</span></div>
            <div class="ss-item"><span class="ss-val" id="statSlsFees">0.000</span> <span class="ss-label">$SLS Fees</span></div>
        </div>
    <!-- ═══ DEMO ONBOARDING WIZARD ═══ -->
    <div class="onboard-overlay" id="onboardOverlay" style="display:none">
        <div class="onboard-modal">
            <div class="onboard-header">
                <div style="font-size:2rem;margin-bottom:8px"><i class="fas fa-shield-halved" style="color:var(--accent)"></i></div>
                <h2 style="margin:0;font-size:1.3rem;color:#fff;font-weight:800">Welcome to S4 Ledger</h2>
                <p style="color:var(--steel);font-size:0.82rem;margin:6px 0 0">Immutable Defense Logistics on the XRP Ledger</p>
                <div class="onboard-progress" id="onboardProgress">
                    <div class="onboard-dot active" data-step="0"></div>
                    <div class="onboard-dot" data-step="1"></div>
                    <div class="onboard-dot" data-step="2"></div>
                    <div class="onboard-dot" data-step="3"></div>
                    <div class="onboard-dot" data-step="4"></div>
                </div>
            </div>
            <div class="onboard-body">
                <!-- Step 0: Welcome -->
                <div class="onboard-step active" id="onboardStep0">
                    <h4 style="color:#fff;margin:0 0 12px;font-size:1rem"><i class="fas fa-shield-halved" style="color:var(--accent);margin-right:8px"></i>Platform Setup</h4>
                    <p style="color:var(--steel);font-size:0.85rem;line-height:1.6;margin-bottom:16px">S4 Ledger will set up your account, provision your XRPL wallet, and allocate your $SLS tokens. This takes just a few seconds.</p>
                    <div class="onboard-feature"><div class="onboard-icon" style="background:rgba(0,170,255,0.1);color:var(--accent)"><i class="fas fa-anchor"></i></div><div><strong style="color:#fff">Anchor Records</strong><div style="color:var(--steel);font-size:0.8rem">SHA-256 hash any document to the XRP Ledger in 3-5 seconds</div></div></div>
                    <div class="onboard-feature"><div class="onboard-icon" style="background:rgba(201,168,76,0.1);color:var(--gold)"><i class="fas fa-coins"></i></div><div><strong style="color:#fff">$SLS Token Economy</strong><div style="color:var(--steel);font-size:0.8rem">0.01 SLS per anchor (~$0.0001). Real on-chain token transfers.</div></div></div>
                    <div class="onboard-feature"><div class="onboard-icon" style="background:rgba(0,170,255,0.1);color:var(--green)"><i class="fas fa-brain"></i></div><div><strong style="color:#fff">20+ ILS Tools</strong><div style="color:var(--steel);font-size:0.8rem">Gap analysis, DMSMS, readiness, compliance, risk, and more</div></div></div>
                    <div class="onboard-feature"><div class="onboard-icon" style="background:rgba(0,170,255,0.1);color:#00aaff"><i class="fas fa-robot"></i></div><div><strong style="color:#fff">AI Agent</strong><div style="color:var(--steel);font-size:0.8rem">Context-aware assistant available on every tool and tab</div></div></div>
                    <div style="text-align:center;margin-top:20px"><button class="onboard-btn" onclick="onboardNext()"><i class="fas fa-arrow-right" style="margin-right:6px"></i>Start Setup</button></div>
                </div>

                <!-- Step 1: Create Account -->
                <div class="onboard-step" id="onboardStep1">
                    <h4 style="color:#fff;margin:0 0 12px;font-size:1rem"><i class="fas fa-user-plus" style="color:var(--accent);margin-right:8px"></i>Step 1: Account Created</h4>
                    <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:16px;margin-bottom:16px">
                        <div style="display:flex;align-items:center;gap:12px;margin-bottom:12px"><div style="width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,var(--accent),#0088cc);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800;font-size:1.1rem">DU</div><div><div style="color:#fff;font-weight:700">Demo User</div><div style="color:var(--steel);font-size:0.78rem">demo@s4ledger.com</div></div></div>
                        <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;font-size:0.78rem">
                            <div style="color:var(--steel)">Account ID: <span style="color:var(--accent);font-family:monospace" id="onboardAcctId">—</span></div>
                            <div style="color:var(--steel)">Org: <span style="color:#fff">S4 Demo Corp</span></div>
                            <div style="color:var(--steel)">Role: <span style="color:#fff">Admin</span></div>
                            <div style="color:var(--steel)">Status: <span style="color:var(--green)" id="onboardAcctStatus"><i class="fas fa-spinner fa-spin"></i> Creating...</span></div>
                        </div>
                    </div>
                    <div id="onboardAcctDone" style="display:none;text-align:center;margin-top:16px"><button class="onboard-btn" onclick="onboardNext()">Continue <i class="fas fa-arrow-right" style="margin-left:6px"></i></button></div>
                </div>

                <!-- Step 2: Wallet Funded -->
                <div class="onboard-step" id="onboardStep2">
                    <h4 style="color:#fff;margin:0 0 12px;font-size:1rem"><i class="fas fa-wallet" style="color:var(--accent);margin-right:8px"></i>Step 2: XRP Wallet Funded</h4>
                    <p style="color:var(--steel);font-size:0.82rem;margin-bottom:16px">Your XRPL wallet has been provisioned and funded with the base reserve required for on-chain operations.</p>
                    <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:16px;margin-bottom:16px">
                        <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;font-size:0.82rem">
                            <div><div style="color:var(--steel);font-size:0.72rem;text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px">Wallet Address</div><div style="color:var(--green);font-family:monospace;font-size:0.75rem" id="onboardWalletAddr">—</div></div>
                            <div><div style="color:var(--steel);font-size:0.72rem;text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px">XRP Balance</div><div style="font-size:1.3rem;font-weight:700;color:var(--green)" id="onboardXrpBal"><i class="fas fa-spinner fa-spin" style="font-size:0.8rem"></i></div></div>
                            <div><div style="color:var(--steel);font-size:0.72rem;text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px">Network</div><div style="color:#fff">XRPL Mainnet</div></div>
                            <div><div style="color:var(--steel);font-size:0.72rem;text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px">Trust Line</div><div style="color:var(--gold)" id="onboardTrustLine"><i class="fas fa-spinner fa-spin" style="font-size:0.8rem"></i></div></div>
                        </div>
                    </div>
                    <div style="background:rgba(0,170,255,0.06);border:1px solid rgba(0,170,255,0.15);border-radius:3px;padding:10px 14px;font-size:0.78rem;color:var(--steel)"><i class="fas fa-info-circle" style="color:var(--accent);margin-right:6px"></i><strong style="color:#fff">Note:</strong> 12 XRP is the base reserve, funded automatically from the S4 Treasury when your account is provisioned. This covers XRPL transaction fees for anchoring.</div>
                    <div id="onboardWalletDone" style="display:none;text-align:center;margin-top:16px"><button class="onboard-btn" onclick="onboardNext()">Continue <i class="fas fa-arrow-right" style="margin-left:6px"></i></button></div>
                </div>

                <!-- Step 3: SLS Allocation -->
                <div class="onboard-step" id="onboardStep3">
                    <h4 style="color:#fff;margin:0 0 12px;font-size:1rem"><i class="fas fa-coins" style="color:var(--gold);margin-right:8px"></i>Step 3: $SLS Token Allocation</h4>
                    <p style="color:var(--steel);font-size:0.82rem;margin-bottom:16px">Your SLS allocation is based on your subscription tier. Select a plan:</p>
                    <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-bottom:16px">
                        <div class="onboard-tier" onclick="selectOnboardTier(this,'pilot')" data-tier="pilot"><div style="font-size:0.72rem;color:var(--steel);text-transform:uppercase;letter-spacing:0.5px">Pilot</div><div style="font-size:1.1rem;font-weight:800;color:#fff;margin:4px 0">Free</div><div style="color:var(--gold);font-weight:700;font-size:0.85rem">100 SLS</div></div>
                        <div class="onboard-tier selected" onclick="selectOnboardTier(this,'starter')" data-tier="starter"><div style="font-size:0.72rem;color:var(--steel);text-transform:uppercase;letter-spacing:0.5px">Starter</div><div style="font-size:1.1rem;font-weight:800;color:#fff;margin:4px 0">$999/mo</div><div style="color:var(--gold);font-weight:700;font-size:0.85rem">25,000 SLS</div></div>
                        <div class="onboard-tier" onclick="selectOnboardTier(this,'professional')" data-tier="professional"><div style="font-size:0.72rem;color:var(--steel);text-transform:uppercase;letter-spacing:0.5px">Professional</div><div style="font-size:1.1rem;font-weight:800;color:#fff;margin:4px 0">$2,499/mo</div><div style="color:var(--gold);font-weight:700;font-size:0.85rem">100,000 SLS</div></div>
                        <div class="onboard-tier" onclick="selectOnboardTier(this,'enterprise')" data-tier="enterprise"><div style="font-size:0.72rem;color:var(--steel);text-transform:uppercase;letter-spacing:0.5px">Enterprise</div><div style="font-size:1.1rem;font-weight:800;color:#fff;margin:4px 0">$9,999/mo</div><div style="color:var(--gold);font-weight:700;font-size:0.85rem">500,000 SLS</div></div>
                    </div>
                    <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:14px;text-align:center">
                        <div style="color:var(--steel);font-size:0.78rem;margin-bottom:4px">Your SLS Balance</div>
                        <div style="font-size:1.6rem;font-weight:800;color:var(--gold)" id="onboardSlsBal">25,000</div>
                        <div style="color:var(--steel);font-size:0.72rem">= <span id="onboardSlsAnchors">2,500,000</span> anchors at 0.01 SLS each</div>
                    </div>
                    <div style="text-align:center;margin-top:16px"><button class="onboard-btn" onclick="onboardNext()">Continue <i class="fas fa-arrow-right" style="margin-left:6px"></i></button></div>
                </div>

                <!-- Step 4: How SLS Works -->
                <div class="onboard-step" id="onboardStep4">
                    <h4 style="color:#fff;margin:0 0 12px;font-size:1rem"><i class="fas fa-coins" style="color:var(--gold);margin-right:8px"></i>Step 4: How Your $SLS Is Used</h4>
                    <p style="color:var(--steel);font-size:0.82rem;margin-bottom:16px">Every time you anchor a record, a tiny SLS fee flows to the S4 Treasury on the XRP Ledger.</p>
                    <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:16px;margin-bottom:16px">
                        <div style="display:flex;align-items:center;gap:12px;justify-content:center;flex-wrap:wrap">
                            <div style="text-align:center;padding:10px"><div style="font-size:0.72rem;color:var(--steel);margin-bottom:6px">Your Wallet</div><div style="width:44px;height:44px;border-radius:50%;background:rgba(0,170,255,0.1);display:inline-flex;align-items:center;justify-content:center;color:var(--accent)"><i class="fas fa-wallet"></i></div></div>
                            <div style="color:var(--gold);font-weight:700;font-size:0.85rem"><i class="fas fa-long-arrow-alt-right"></i> 0.01 SLS</div>
                            <div style="text-align:center;padding:10px"><div style="font-size:0.72rem;color:var(--steel);margin-bottom:6px">S4 Treasury</div><div style="width:44px;height:44px;border-radius:50%;background:rgba(201,168,76,0.1);display:inline-flex;align-items:center;justify-content:center;color:var(--gold)"><i class="fas fa-landmark"></i></div></div>
                            <div style="color:var(--accent);font-weight:700;font-size:0.85rem"><i class="fas fa-long-arrow-alt-right"></i> XRPL</div>
                            <div style="text-align:center;padding:10px"><div style="font-size:0.72rem;color:var(--steel);margin-bottom:6px">Immutable Record</div><div style="width:44px;height:44px;border-radius:50%;background:rgba(0,170,255,0.1);display:inline-flex;align-items:center;justify-content:center;color:#00aaff"><i class="fas fa-lock"></i></div></div>
                        </div>
                    </div>
                    <div style="font-size:0.82rem;color:var(--steel);line-height:1.6;margin-bottom:12px">
                        <div style="margin-bottom:8px"><i class="fas fa-check" style="color:var(--accent);margin-right:8px;width:14px"></i><strong style="color:#fff">Steps 1-3</strong> happen automatically when you subscribe</div>
                        <div style="margin-bottom:8px"><i class="fas fa-check" style="color:var(--gold);margin-right:8px;width:14px"></i><strong style="color:var(--gold)">Step 4 (0.01 SLS → Treasury)</strong> is a REAL on-chain transfer via XRPL</div>
                        <div style="margin-bottom:8px"><i class="fas fa-check" style="color:var(--accent);margin-right:8px;width:14px"></i>Every anchor produces a verifiable XRPL transaction hash with your record's SHA-256 fingerprint</div>
                        <div><i class="fas fa-check" style="color:var(--accent);margin-right:8px;width:14px"></i>Anyone can independently verify records on <a href="https://livenet.xrpl.org" target="_blank" style="color:var(--accent)">XRPL Explorer</a></div>
                    </div>
                    <div style="text-align:center;margin-top:20px;display:flex;gap:10px;justify-content:center">
                        <button class="onboard-btn" onclick="sessionStorage.setItem('s4_entered','1');closeOnboarding()"><i class="fas fa-rocket" style="margin-right:6px"></i>Enter Platform</button>
                        <a href="https://livenet.xrpl.org/accounts/rMLmkrxpadq5z6oTDmq8GhQj9LKjf1KLqJ" target="_blank" class="onboard-btn-outline"><i class="fas fa-external-link-alt" style="margin-right:6px"></i>View Treasury</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

        <!-- SLS Economic Flow — Account Setup -->
        <div id="demoPanel" class="reveal-demo" style="margin-bottom:16px;display:none;">
            <div style="background:linear-gradient(135deg,rgba(0,170,255,0.06),rgba(201,168,76,0.04));border:1px solid rgba(0,170,255,0.25);border-radius:3px;padding:20px 24px;position:relative;overflow:hidden;">
                <div style="position:absolute;top:0;right:0;background:linear-gradient(135deg,#00aaff,#c9a84c);padding:4px 16px;border-radius:0 14px 0 10px;font-size:0.68rem;font-weight:700;color:#050810;letter-spacing:0.5px;">LIVE PREVIEW</div>
                <h3 style="margin:0 0 4px;font-size:1.1rem;color:#fff;"><i class="fas fa-flask" style="color:#00aaff;margin-right:8px;"></i> SLS Economic Flow</h3>
                <p style="color:#8ea4b8;font-size:0.8rem;margin:0 0 16px;">See how the $SLS token economy works. Your account is provisioned, your wallet funded, and SLS allocated. <strong style="color:#c9a84c;">Every anchor costs 0.01 $SLS.</strong></p>
                <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:14px;" id="demoSteps">
                    <div id="demoStep1" style="background:rgba(0,170,255,0.08);border:1px solid rgba(0,170,255,0.2);border-radius:3px;padding:14px;text-align:center;transition:all 0.4s;"><div style="width:36px;height:36px;border-radius:50%;background:rgba(0,170,255,0.15);display:inline-flex;align-items:center;justify-content:center;margin-bottom:8px;"><i class="fas fa-user-plus" style="color:#00aaff;font-size:0.9rem;"></i></div><div style="font-size:0.72rem;font-weight:700;color:#fff;margin-bottom:4px;">1. Account Created</div><div style="font-size:0.68rem;color:#8ea4b8;" id="demoStep1Status">Waiting...</div></div>
                    <div id="demoStep2" style="background:rgba(0,170,255,0.08);border:1px solid rgba(0,170,255,0.2);border-radius:3px;padding:14px;text-align:center;transition:all 0.4s;"><div style="width:36px;height:36px;border-radius:50%;background:rgba(0,170,255,0.15);display:inline-flex;align-items:center;justify-content:center;margin-bottom:8px;"><i class="fas fa-wallet" style="color:#00aaff;font-size:0.9rem;"></i></div><div style="font-size:0.72rem;font-weight:700;color:#fff;margin-bottom:4px;">2. Wallet Funded</div><div style="font-size:0.68rem;color:#8ea4b8;" id="demoStep2Status">12 XRP reserve</div></div>
                    <div id="demoStep3" style="background:rgba(0,170,255,0.08);border:1px solid rgba(0,170,255,0.2);border-radius:3px;padding:14px;text-align:center;transition:all 0.4s;"><div style="width:36px;height:36px;border-radius:50%;background:rgba(201,168,76,0.15);display:inline-flex;align-items:center;justify-content:center;margin-bottom:8px;"><i class="fas fa-coins" style="color:#c9a84c;font-size:0.9rem;"></i></div><div style="font-size:0.72rem;font-weight:700;color:#fff;margin-bottom:4px;">3. $SLS Allocated</div><div style="font-size:0.68rem;color:#8ea4b8;" id="demoStep3Status">Based on plan tier</div></div>
                    <div id="demoStep4" style="background:rgba(0,170,255,0.08);border:1px solid rgba(0,170,255,0.2);border-radius:3px;padding:14px;text-align:center;transition:all 0.4s;"><div style="width:36px;height:36px;border-radius:50%;background:rgba(0,170,255,0.15);display:inline-flex;align-items:center;justify-content:center;margin-bottom:8px;"><i class="fas fa-arrow-right" style="color:#00aaff;font-size:0.9rem;"></i></div><div style="font-size:0.72rem;font-weight:700;color:#00aaff;margin-bottom:4px;">4. 0.01 $SLS &rarr; Treasury</div><div style="font-size:0.68rem;color:#8ea4b8;" id="demoStep4Status">0.01 SLS per anchor</div></div>
                </div>
                <div id="demoSessionInfo" style="display:block;margin-top:14px;padding:12px 16px;background:rgba(0,0,0,0.25);border-radius:3px;font-size:0.76rem;">
                    <div style="display:flex;justify-content:space-between;flex-wrap:wrap;gap:8px;">
                        <div><span style="color:#8ea4b8;">Session:</span> <span style="color:#00aaff;font-family:monospace;" id="demoSessionId">&mdash;</span></div>
                        <div><span style="color:#8ea4b8;">Wallet:</span> <span style="color:#00aaff;font-family:monospace;" id="demoWalletAddr">&mdash;</span></div>
                        <div><span style="color:#8ea4b8;">Plan:</span> <span style="color:#c9a84c;font-weight:600;" id="demoPlanLabel">&mdash;</span></div>
                        <div><span style="color:#8ea4b8;">SLS Balance:</span> <span style="color:#c9a84c;font-weight:700;" id="demoSlsBalance">&mdash;</span></div>
                    </div>
                    <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap;">
                        <button onclick="document.querySelector('a[href=&quot;#tabAnchor&quot;]').click();" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;padding:6px 16px;border-radius:3px;font-size:0.76rem;font-weight:700;cursor:pointer;display:inline-flex;align-items:center;gap:5px;"><i class="fas fa-anchor"></i> Anchor a Record</button>
                        <button onclick="document.querySelector('a[href=&quot;#tabILS&quot;]').click();" style="background:rgba(0,170,255,0.12);color:#00aaff;border:1px solid rgba(0,170,255,0.3);padding:6px 16px;border-radius:3px;font-size:0.76rem;font-weight:700;cursor:pointer;display:inline-flex;align-items:center;gap:5px;"><i class="fas fa-brain"></i> Anchor-S4</button>
                        <button onclick="_checkDemoStatus();" style="background:rgba(201,168,76,0.12);color:#c9a84c;border:1px solid rgba(201,168,76,0.3);padding:6px 16px;border-radius:3px;font-size:0.76rem;font-weight:700;cursor:pointer;display:inline-flex;align-items:center;gap:5px;"><i class="fas fa-sync-alt"></i> Refresh Status</button>
                        <a href="https://livenet.xrpl.org/accounts/rMLmkrxpadq5z6oTDmq8GhQj9LKjf1KLqJ" target="_blank" style="background:rgba(201,168,76,0.1);color:#c9a84c;border:1px solid rgba(201,168,76,0.3);padding:6px 16px;border-radius:3px;font-size:0.76rem;font-weight:700;text-decoration:none;display:inline-flex;align-items:center;gap:5px;"><i class="fas fa-external-link-alt"></i> View Treasury on XRPL</a>
                    </div>
                </div>
                <div id="demoProvSpinner" style="text-align:center;padding:12px;margin-top:10px;display:none;"><i class="fas fa-spinner fa-spin" style="color:#00aaff;margin-right:6px;"></i><span style="color:#8ea4b8;font-size:0.8rem;">Provisioning demo session...</span></div>
            </div>
        </div>

        <!-- ═══ WALLET TRIGGER (Top Right) ═══ -->
        <div style="display:flex;justify-content:flex-end;margin-bottom:8px;">
            <button onclick="resetDemoSession()" style="background:rgba(201,168,76,0.08);border:1px solid rgba(201,168,76,0.2);color:#c9a84c;border-radius:3px;padding:6px 14px;font-size:0.78rem;font-weight:600;cursor:pointer;font-family:inherit;display:flex;align-items:center;gap:5px;transition:all 0.2s;" onmouseover="this.style.background='rgba(201,168,76,0.15)'" onmouseout="this.style.background='rgba(201,168,76,0.08)'"><i class="fas fa-right-from-bracket"></i><span class="d-none d-md-inline">Logout</span></button>
                        <button class="wallet-trigger" onclick="openWalletSidebar()" id="walletTriggerBtn">
                <i class="fas fa-wallet"></i> My Wallet <span class="wt-bal" id="walletTriggerBal">--</span>
            </button>
        </div>

        <!-- ═══ PLATFORM HUB ═══ -->
        <div id="platformHub" class="platform-hub">
            <div class="hub-header">
                <h2><i class="fas fa-th-large" style="color:var(--accent);margin-right:10px;font-size:1.2rem;"></i>Platform</h2>
                <p>Select a module to get started. Each tool is purpose-built for defense logistics integrity.</p>
                <!-- ── Real-time Collaboration Indicators ── -->
                <div id="collabIndicators" style="display:flex;align-items:center;gap:10px;margin-top:12px;">
                    <div style="display:flex;align-items:center;gap:6px;background:rgba(0,170,255,0.08);border:1px solid rgba(0,170,255,0.2);border-radius:3px;padding:4px 12px;">
                        <span style="width:8px;height:8px;border-radius:50%;background:#34c759;display:inline-block;animation:pulse 2s infinite;"></span>
                        <span style="font-size:0.72rem;color:var(--accent);font-weight:600;" id="collabCount">1 analyst</span>
                        <span style="font-size:0.72rem;color:var(--steel);">online</span>
                    </div>
                    <div id="collabAvatars" style="display:flex;gap:-4px;"></div>
                    <div style="font-size:0.68rem;color:var(--muted);font-style:italic;" id="collabActivity">Session active</div>
                    <button onclick="openProdFeatures()" style="display:flex;align-items:center;gap:6px;background:rgba(201,168,76,0.08);border:1px solid rgba(201,168,76,0.25);border-radius:3px;padding:4px 12px;cursor:pointer;color:#c9a84c;font-size:0.72rem;font-weight:600;font-family:inherit;margin-left:6px" title="View production features roadmap"><i class="fas fa-rocket"></i> Roadmap</button>
                </div>
            </div>
            <div class="hub-grid">
                
                <div class="hub-card" onclick="showSection('sectionVerify')">

                    <div class="hc-icon" style="background:rgba(0,170,255,0.1);"><i class="fas fa-check-circle" style="color:#00aaff;"></i></div>
                    <div class="hc-title">Verify Records <span style="background:rgba(0,170,255,0.15);color:#00aaff;font-size:0.65rem;padding:2px 8px;border-radius:3px;font-weight:600;margin-left:6px;">LIVE</span></div>
                    <div class="hc-desc">Upload a PDF, spreadsheet, or any file to verify its integrity against the blockchain anchor. Batch verification supported.</div>
                    <div class="hc-meta"><i class="fas fa-file-upload"></i> Drag-drop files &bull; Free verification</div>
                    <div class="hc-arrow"><i class="fas fa-chevron-right"></i></div>
                </div>
                <div class="hub-card" onclick="showSection('sectionLog')">
                    <div class="hc-icon" style="background:rgba(155,89,182,0.1);"><i class="fas fa-list" style="color:#9b59b6;"></i></div>
                    <div class="hc-title">Transaction Log <span style="background:rgba(155,89,182,0.15);color:#9b59b6;font-size:0.65rem;padding:2px 8px;border-radius:3px;font-weight:600;margin-left:6px;">AUDIT</span></div>
                    <div class="hc-desc">Full audit trail of every anchored record with XRPL explorer links, timestamps, and hash verification status.</div>
                    <div class="hc-meta"><i class="fas fa-link"></i> On-chain explorer links</div>
                    <div class="hc-arrow"><i class="fas fa-chevron-right"></i></div>
                </div>
                <div class="hub-card" onclick="showSection('sectionILS')">
                    <div class="hc-icon" style="background:rgba(201,168,76,0.1);"><i class="fas fa-brain" style="color:#c9a84c;"></i></div>
                    <div class="hc-title">Anchor-S4 <span style="background:rgba(201,168,76,0.15);color:#c9a84c;font-size:0.65rem;padding:2px 8px;border-radius:3px;font-weight:600;margin-left:6px;">20+ TOOLS</span></div>
                    <div class="hc-desc">20+ integrated defense tools: Gap Analysis, DMSMS, Readiness, Compliance, Risk, Predictive Maintenance, ROI, Audit Vault, and more.</div>
                    <div class="hc-meta"><i class="fas fa-tools"></i> 20+ ILS tools &bull; AI-powered</div>
                    <div class="hc-arrow"><i class="fas fa-chevron-right"></i></div>
                </div>
                <div class="hub-card" onclick="showSection('sectionSystems')">
                    <div class="hc-icon" style="background:rgba(52,152,219,0.1);"><i class="fas fa-server" style="color:#3498db;"></i></div>
                    <div class="hc-title">Systems <span style="background:rgba(52,152,219,0.15);color:#3498db;font-size:0.65rem;padding:2px 8px;border-radius:3px;font-weight:600;margin-left:6px;">METRICS</span></div>
                    <div class="hc-desc">Platform metrics, performance monitoring, and offline queue management with encrypted persistence and auto-sync.</div>
                    <div class="hc-meta"><i class="fas fa-chart-line"></i> Metrics &bull; Offline Queue</div>
                    <div class="hc-arrow"><i class="fas fa-chevron-right"></i></div>
                </div>
            </div>
        </div>

        <!-- Hidden tab nav (kept for Bootstrap pill functionality) -->
        <ul class="nav nav-pills mb-2" role="tablist" style="display:none !important;" id="hiddenTabNav">

            <li class="nav-item"><a class="nav-link" data-bs-toggle="pill" href="#tabAnchor" role="tab"><i class="fas fa-anchor"></i> Anchor</a></li>
            <li class="nav-item"><a class="nav-link" data-bs-toggle="pill" href="#tabVerify" role="tab"><i class="fas fa-check-circle"></i> Verify</a></li>
            <li class="nav-item"><a class="nav-link" data-bs-toggle="pill" href="#tabLog" role="tab"><i class="fas fa-list"></i> Transaction Log</a></li>
            <li class="nav-item"><a class="nav-link" data-bs-toggle="pill" href="#tabILS" role="tab"><i class="fas fa-brain"></i> Anchor-S4</a></li>
            <li class="nav-item"><a class="nav-link" data-bs-toggle="pill" href="#tabMetrics" role="tab"><i class="fas fa-chart-line"></i> Metrics</a></li>
            <li class="nav-item"><a class="nav-link" data-bs-toggle="pill" href="#tabOffline" role="tab"><i class="fas fa-wifi" id="offlineTabIcon"></i> Offline Queue</a></li>
            <li class="nav-item"><a class="nav-link" data-bs-toggle="pill" href="#tabWallet" role="tab"><i class="fas fa-wallet"></i> My Wallet</a></li>
        </ul>

        


        <div class="tab-content">
            <div class="tab-pane fade" id="tabAnchor" role="tabpanel">
                <div class="subpage-back">
                    <button class="back-btn" onclick="showHub()"><i class="fas fa-arrow-left"></i> Back</button>
                    <div class="breadcrumb-text">Anchor Records</div>
                </div>
                <div class="row">
                    <div class="col-lg-7">
                        <div class="demo-card">
                            <h3><i class="fas fa-anchor"></i> Anchor a Defense Record</h3>
                            <details style="margin-top:8px;margin-bottom:12px;background:rgba(0,170,255,0.04);border:1px solid rgba(0,170,255,0.15);border-radius:3px;padding:0 12px;">
                                <summary style="cursor:pointer;padding:10px 0;color:#00aaff;font-weight:600;font-size:0.85rem;"><i class="fas fa-info-circle"></i> How Anchoring Works</summary>
                                <div style="padding:0 0 12px;color:var(--steel);font-size:0.82rem;line-height:1.6;">
                                    <p><strong style="color:#fff;">What's real:</strong> Every anchor creates an actual XRPL transaction with your record's SHA-256 hash stored in the memo field. The hash, transaction ID, timestamp, and XRPL explorer link are all genuine blockchain data you can independently verify.</p>
                                    <p><strong style="color:#fff;">Live on Mainnet:</strong> Every anchor creates a real XRPL Mainnet transaction. Each anchor costs 0.01 $SLS paid from your wallet to the S4 Treasury. All transaction hashes and explorer links point to the live XRPL.</p>
                                    <p><strong style="color:#00aaff;">How S4 Ledger saves money here:</strong> Traditional defense record notarization costs $25–$150 per document and takes days. S4 Ledger anchors records in seconds for fractions of a cent — a <strong>99.9% cost reduction</strong>. At scale, a program anchoring 10,000 records/year saves $250K–$1.5M annually vs. legacy methods.</p>
                                    <p><strong style="color:#00aaff;">Production mode:</strong> Integrates with existing logistics systems (GCSS, OARS, NTCSS, LMP) via REST API or Python SDK. Records flow automatically — no manual paste required.</p>
                                </div>
                            </details>
                            <label>1. Select Military Branch</label>
                            <div class="branch-tabs" id="branchTabs">
                                <button class="branch-tab active" onclick="selectBranch('USN',this)"><i class="fas fa-anchor"></i> U.S. Navy</button>
                            </div>
                            <label>2. Choose Record Type <span class="branch-count" id="branchTypeCount"></span></label>
                            <input class="type-search" type="text" id="typeSearch" placeholder="Search record types..." aria-label="Search record types" oninput="renderTypeGrid()">
                            <div class="record-type-grid" id="recordTypeGrid"></div>

                            <div class="clf-banner" id="clfBanner"><span class="clf-icon"></span><span class="clf-badge" id="clfBadge"></span><span class="clf-text" id="clfText"></span></div>

                            <label>3. Upload file or enter record content</label>
                            <div id="dropZone" ondragover="event.preventDefault();this.classList.add('drag-over')" ondragleave="this.classList.remove('drag-over')" ondrop="handleFileDrop(event)" onclick="document.getElementById('fileUploadInput').click()" style="border:2px dashed rgba(0,170,255,0.3);border-radius:3px;padding:20px;text-align:center;cursor:pointer;margin-bottom:10px;background:rgba(0,170,255,0.03);transition:all 0.3s;"><i class="fas fa-cloud-upload-alt" style="font-size:1.5rem;color:var(--accent);margin-bottom:6px;display:block;"></i><div style="color:var(--steel);font-size:0.82rem;">Drag &amp; drop a file here or <span style="color:var(--accent);text-decoration:underline;">click to browse</span></div><div style="color:var(--muted);font-size:0.72rem;margin-top:4px;">PDF, Excel, Word, CSV, JSON, TXT &mdash; any file type</div><input type="file" id="fileUploadInput" style="display:none" onchange="handleFileSelect(event)"><div id="dropFileName" style="display:none;margin-top:8px;color:var(--accent);font-weight:600;font-size:0.82rem;"></div></div>
                            <textarea id="recordInput" aria-label="Record content to anchor" placeholder="Or paste/type your defense logistics record here..." oninput="this.dataset.autoFilled='false'"></textarea>
                            <div class="mt-2 mb-3">
                                <span style="color:var(--muted);font-size:0.8rem">Try a sample:</span>
                                <span class="sample-btn" onclick="loadSample('supply')">Supply Receipt</span>
                                <span class="sample-btn" onclick="loadSample('maintenance')">3-M Maint</span>
                                <span class="sample-btn" onclick="loadSample('ordnance')">Ordnance Lot</span>
                                <span class="sample-btn" onclick="loadSample('casrep')">CASREP</span>
                                <span class="sample-btn" onclick="loadSample('custody')">Custody Transfer</span>
                                
                                
                                
                                
                                
                                <span class="sample-btn" onclick="loadSample('drl')">Navy DRL</span>
                                <span class="sample-btn" onclick="loadSample('buylist')">Navy Buylist</span>
                                <span class="sample-btn" onclick="loadSample('transfer_book')">Transfer Book</span>
                            </div>
                            <div class="d-flex gap-2 align-items-center">
                                <label class="form-check-label" style="font-size:0.85rem">
                                    <input type="checkbox" id="encryptCheck" checked style="width:auto!important;margin-right:6px"> Encrypt before hashing (CUI protection)
                                </label>
                            </div>
                            <button class="btn-accent mt-3" onclick="anchorRecord()" id="anchorBtn"><i class="fas fa-anchor"></i> Anchor to XRPL</button>
                            <div class="result-panel" id="anchorResult"></div>
                        </div>
                    </div>
                    <div class="col-lg-5">
                        <div class="demo-card">
                            <h3><i class="fas fa-diagram-project"></i> Anchor Flow</h3>
                            <div style="font-size:0.9rem;line-height:2">
                                <div><span style="color:var(--accent);font-weight:700">1.</span> Select branch & record type</div>
                                <div><span style="color:var(--accent);font-weight:700">2.</span> Enter or paste record content</div>
                                <div><span style="color:var(--accent);font-weight:700">3.</span> Optional: encrypt for CUI protection</div>
                                <div><span style="color:var(--accent);font-weight:700">4.</span> SHA-256 hash computed client-side</div>
                                <div><span style="color:var(--accent);font-weight:700">5.</span> Hash anchored to XRPL memo field</div>
                                <div><span style="color:var(--accent);font-weight:700">6.</span> $SLS micro-fee (0.01) paid to treasury</div>
                                <div><span style="color:var(--accent);font-weight:700">7.</span> Record appears in Live Metrics dashboard</div>
                            </div>
                        </div>
                        <div class="demo-card">
                            <h3><i class="fas fa-shield-halved"></i> What Gets Stored On-Chain</h3>
                            <p style="font-size:0.85rem;color:var(--steel)"><strong>Only the SHA-256 hash</strong> of your record is stored on the XRP Ledger. No classified data, CUI, ITAR-controlled, or sensitive content ever touches the blockchain.</p>
                            <div style="font-size:0.8rem;margin-top:0.5rem">
                                <span style="color:var(--accent)">&#10003;</span> NIST SP 800-171 compatible<br>
                                <span style="color:var(--accent)">&#10003;</span> CMMC Level 2 aligned<br>
                                <span style="color:var(--accent)">&#10003;</span> DFARS 252.204-7012 compliant<br>
                                <span style="color:var(--accent)">&#10003;</span> No PII/CUI on-chain
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="tabVerify" role="tabpanel">
                <div class="subpage-back" style="display:flex;align-items:center;">
                    <button class="back-btn" onclick="showHub()"><i class="fas fa-arrow-left"></i> Back</button>
                    <div class="breadcrumb-text">Verify Records</div>
                    <button onclick="resetVerify();if(typeof refreshVerifyRecents==='function')refreshVerifyRecents();" style="margin-left:auto;background:rgba(0,170,255,0.08);color:var(--accent);border:1px solid rgba(0,170,255,0.2);border-radius:3px;padding:7px 16px;font-size:0.82rem;cursor:pointer;font-weight:600;font-family:inherit;transition:all 0.2s;" title="Clear all fields and refresh records"><i class="fas fa-rotate-right" style="margin-right:6px"></i>Refresh</button>
                </div>
                <div class="row">
                    <div class="col-lg-7">
                        <div class="demo-card">
                            <h3><i class="fas fa-check-circle"></i> Verify a Defense Record</h3>
                            <details style="margin-top:8px;margin-bottom:12px;background:rgba(0,170,255,0.04);border:1px solid rgba(0,170,255,0.15);border-radius:3px;padding:0 12px;">
                                <summary style="cursor:pointer;padding:10px 0;color:#00aaff;font-weight:600;font-size:0.85rem;"><i class="fas fa-info-circle"></i> How Verification Works</summary>
                                <div style="padding:0 0 12px;color:var(--steel);font-size:0.82rem;line-height:1.6;">
                                    <p><strong style="color:#fff;">What's real:</strong> Verification computes the SHA-256 hash of your uploaded file or pasted content and compares it against the hash that was previously anchored on the XRPL. If they match, the record is proven unaltered since the anchor date — the blockchain itself is the proof. <strong>Files are hashed locally in your browser — nothing is uploaded to any server.</strong></p>
                                    <p><strong style="color:#fff;">How it works:</strong> Upload a PDF, spreadsheet, contract packet, or any file — S4 Ledger computes the SHA-256 hash of the raw file bytes and checks it against the anchored hash. If they match, integrity is confirmed. Works with any file type: PDFs, XLSX, DOCX, images, signed documents — even view-only or copy-protected files.</p>
                                    <p><strong style="color:#00aaff;">How S4 Ledger saves money here:</strong> Manual record verification during audits and inspections can take 40–200 staff-hours per event. S4 Ledger provides instant, cryptographic proof in seconds — reducing verification labor costs by <strong>90–98%</strong> and eliminating disputes about record authenticity.</p>
                                    <p><strong style="color:#00aaff;">Production mode:</strong> Automated batch verification via API — plug into QA pipelines, audit workflows, and supply chain acceptance processes for continuous integrity monitoring.</p>
                                </div>
                            </details>
                            <p style="color:var(--steel);font-size:0.9rem;margin-bottom:1rem">Upload or paste the original record to verify its hash matches what was anchored on XRPL.</p>

                            <!-- FILE UPLOAD VERIFICATION -->
                            <label><i class="fas fa-file-upload" style="color:var(--accent);margin-right:4px;"></i> Upload File(s) to Verify</label>
                            <div id="verifyDropZone" ondragover="event.preventDefault();event.stopPropagation();this.style.borderColor='var(--accent)';this.style.background='rgba(0,170,255,0.08)'" ondragleave="this.style.borderColor='rgba(0,170,255,0.25)';this.style.background='rgba(0,170,255,0.03)'" ondrop="handleVerifyFileDrop(event)" onclick="document.getElementById('verifyFileInput').click()" style="border:2px dashed rgba(0,170,255,0.25);border-radius:3px;padding:24px;text-align:center;cursor:pointer;margin-bottom:16px;background:rgba(0,170,255,0.03);transition:all 0.3s;">
                                <i class="fas fa-shield-halved" style="font-size:1.8rem;color:var(--accent);margin-bottom:8px;display:block;"></i>
                                <div style="color:var(--accent);font-weight:600;font-size:0.88rem;">Drop file(s) here to verify integrity</div>
                                <div style="color:var(--steel);font-size:0.78rem;margin-top:4px;">PDF, Excel, Word, CSV, JSON, images, contracts &mdash; any file type</div>
                                <div style="color:var(--muted);font-size:0.72rem;margin-top:6px;">The file is hashed locally &mdash; <strong>never uploaded to any server</strong></div>
                                <input type="file" id="verifyFileInput" style="display:none" onchange="handleVerifyFileSelect(event)" multiple>
                            </div>
                            <div id="verifyFileResults" style="display:none;margin-bottom:16px;"></div>

                            <div style="display:flex;align-items:center;gap:12px;margin-bottom:16px;">
                                <div style="flex:1;height:1px;background:var(--border);"></div>
                                <span style="color:var(--muted);font-size:0.75rem;font-weight:600;text-transform:uppercase;letter-spacing:1px;">or paste text</span>
                                <div style="flex:1;height:1px;background:var(--border);"></div>
                            </div>

                            <label>Record Content</label>
                            <textarea id="verifyInput" aria-label="Record content to verify" placeholder="Paste the original defense record content here..."></textarea>
                            <label class="mt-2">Expected Hash (optional)</label>
                            <input type="text" id="verifyHash" aria-label="SHA-256 hash to compare" placeholder="SHA-256 hash to compare against">
                            <button class="btn-gold mt-3" onclick="verifyRecord()"><i class="fas fa-check-circle"></i> Verify Integrity</button>
                            <div class="result-panel" id="verifyResult"></div>
                        </div>
                    </div>
                    <div class="col-lg-5">
                        <div class="demo-card">
                            <h3><i class="fas fa-question-circle"></i> Verification Use Cases</h3>
                            <div style="font-size:0.85rem;line-height:1.8;color:var(--steel)">
                                <div><strong>Supply Chain:</strong> Confirm parts receipt hasn't been altered</div>
                                <div><strong>CDRL:</strong> Verify contractor delivered exact document version</div>
                                <div><strong>Maintenance:</strong> Prove 3-M actions logged as-performed</div>
                                <div><strong>Ordnance:</strong> Validate lot tracking since manufacture</div>
                                <div><strong>Config:</strong> Confirm system baseline hasn't drifted</div>
                                <div><strong>Audit:</strong> Demonstrate tamper-proof trail to inspectors</div>
                            </div>
                        </div>
                        <!-- Recently Anchored Records — click to verify -->
                        <div class="demo-card" style="margin-top:16px;">
                            <h3><i class="fas fa-clock-rotate-left" style="color:var(--accent);"></i> Recently Anchored Records</h3>
                            <p style="color:var(--steel);font-size:0.82rem;margin-bottom:10px;">Click any record to auto-fill its hash for verification.</p>
                            <div id="verifyRecentAnchors" style="max-height:320px;overflow-y:auto;">
                                <div style="color:var(--muted);text-align:center;padding:1.5rem;font-size:0.82rem;">No anchored records yet. Anchor a record first to see it here.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="tabLog" role="tabpanel">
                <div class="subpage-back">
                    <button class="back-btn" onclick="showHub()"><i class="fas fa-arrow-left"></i> Back</button>
                    <div class="breadcrumb-text">Transaction Log</div>
                </div>
                <div class="demo-card">
                    <h3><i class="fas fa-list"></i> Transaction Log</h3>
                    <p style="color:var(--steel);font-size:0.9rem">All records anchored in this session.</p>
                    <div class="tx-log" id="txLog">
                        <div style="color:var(--muted);text-align:center;padding:2rem">No records anchored yet. Go to the <strong>Anchor</strong> tab to start.</div>
                    </div>
                </div>
            </div>

            <!-- ═══ PERFORMANCE METRICS DASHBOARD ═══ -->

            <!-- ═══ SYSTEMS HUB ═══ -->
            <div class="tab-pane fade" id="sectionSystems" role="tabpanel" style="display:none;">
                <div class="subpage-back">
                    <button class="back-btn" onclick="showHub()"><i class="fas fa-arrow-left"></i> Back</button>
                    <div class="breadcrumb-text">Systems</div>
                </div>
                <div style="max-width:900px;margin:0 auto;padding:1rem 0;">
                    <h3 style="font-size:1.3rem;font-weight:800;margin-bottom:6px;color:#fff;"><i class="fas fa-server" style="color:var(--accent);margin-right:8px;"></i>Systems</h3>
                    <p style="color:var(--steel);font-size:0.85rem;margin-bottom:20px;">Platform health, performance metrics, and offline queue management.</p>
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:14px;">
                        <div class="hub-card" onclick="showSystemsSub('tabMetrics')" style="padding:20px;">
                            <div class="hc-icon" style="background:rgba(0,170,255,0.1);"><i class="fas fa-chart-line" style="color:#00aaff;"></i></div>
                            <div class="hc-title">Metrics Dashboard</div>
                            <div class="hc-desc">Real-time XRPL transaction metrics, anchor success rates, and platform performance monitoring.</div>
                            <div class="hc-arrow"><i class="fas fa-chevron-right"></i></div>
                        </div>
                        <div class="hub-card" onclick="showSystemsSub('tabOffline')" style="padding:20px;">
                            <div class="hc-icon" style="background:rgba(0,170,255,0.1);"><i class="fas fa-wifi" style="color:#00aaff;"></i></div>
                            <div class="hc-title">Offline Queue</div>
                            <div class="hc-desc">Encrypted offline queue with auto-sync, exponential backoff, and persistent storage for network outages.</div>
                            <div class="hc-arrow"><i class="fas fa-chevron-right"></i></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="tabMetrics" role="tabpanel">
                <div class="subpage-back">
                    <button class="back-btn" onclick="showSection('sectionSystems')"><i class="fas fa-arrow-left"></i> Back</button>
                    <div class="breadcrumb-text">Systems / Metrics</div>
                </div>
                <div class="demo-card">
                    <h3><i class="fas fa-chart-line" style="color:var(--accent)"></i> Performance Metrics Dashboard</h3>
                    <p style="color:var(--steel);font-size:0.85rem">Real-time platform performance, anchoring metrics, and system health.</p>
                    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px;margin:16px 0">
                        <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:14px;text-align:center">
                            <div style="font-size:0.72rem;color:var(--steel);text-transform:uppercase;letter-spacing:0.5px">Avg Anchor Time</div>
                            <div id="metricAnchorTime" style="font-size:1.5rem;font-weight:700;color:var(--green);margin:4px 0">3.21</div>
                            <div style="font-size:0.7rem;color:var(--muted)">seconds</div>
                        </div>
                        <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:14px;text-align:center">
                            <div style="font-size:0.72rem;color:var(--steel);text-transform:uppercase;letter-spacing:0.5px">Anchors Today</div>
                            <div id="metricAnchorsToday" style="font-size:1.5rem;font-weight:700;color:var(--accent);margin:4px 0">47</div>
                            <div style="font-size:0.7rem;color:var(--muted)">records</div>
                        </div>
                        <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:14px;text-align:center">
                            <div style="font-size:0.72rem;color:var(--steel);text-transform:uppercase;letter-spacing:0.5px">Records Generated</div>
                            <div id="metricRecordsGenerated" style="font-size:1.5rem;font-weight:700;color:var(--accent);margin:4px 0">&mdash;</div>
                            <div style="font-size:0.7rem;color:var(--muted)">total</div>
                        </div>
                        <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:14px;text-align:center">
                            <div style="font-size:0.72rem;color:var(--steel);text-transform:uppercase;letter-spacing:0.5px">Vault Size</div>
                            <div id="metricVaultSize" style="font-size:1.5rem;font-weight:700;color:var(--gold);margin:4px 0">&mdash;</div>
                            <div style="font-size:0.7rem;color:var(--muted)">records</div>
                        </div>
                        <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:14px;text-align:center">
                            <div style="font-size:0.72rem;color:var(--steel);text-transform:uppercase;letter-spacing:0.5px">Storage Used</div>
                            <div id="metricStorageUsed" style="font-size:1.5rem;font-weight:700;color:var(--accent);margin:4px 0">&mdash;</div>
                            <div style="font-size:0.7rem;color:var(--muted)">KB</div>
                        </div>
                        <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:14px;text-align:center">
                            <div style="font-size:0.72rem;color:var(--steel);text-transform:uppercase;letter-spacing:0.5px">Cost / Anchor</div>
                            <div id="metricCostPerAnchor" style="font-size:1.5rem;font-weight:700;color:var(--gold);margin:4px 0">0.01</div>
                            <div style="font-size:0.7rem;color:var(--muted)">SLS</div>
                        </div>
                        <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:14px;text-align:center">
                            <div style="font-size:0.72rem;color:var(--steel);text-transform:uppercase;letter-spacing:0.5px">XRPL Validators</div>
                            <div id="metricValidators" style="font-size:1.5rem;font-weight:700;color:var(--green);margin:4px 0">35</div>
                            <div style="font-size:0.7rem;color:var(--muted)">active</div>
                        </div>
                        <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:14px;text-align:center">
                            <div style="font-size:0.72rem;color:var(--steel);text-transform:uppercase;letter-spacing:0.5px">Uptime</div>
                            <div id="metricUptime" style="font-size:1.5rem;font-weight:700;color:var(--green);margin:4px 0">99.97</div>
                            <div style="font-size:0.7rem;color:var(--muted)">%</div>
                        </div>
                        <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:14px;text-align:center">
                            <div style="font-size:0.72rem;color:var(--steel);text-transform:uppercase;letter-spacing:0.5px">Total Time</div>
                            <div id="metricTotalTime" style="font-size:1.5rem;font-weight:700;color:var(--green);margin:4px 0">&mdash;</div>
                            <div style="font-size:0.7rem;color:var(--muted)">seconds</div>
                        </div>
                        <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:14px;text-align:center">
                            <div style="font-size:0.72rem;color:var(--steel);text-transform:uppercase;letter-spacing:0.5px">AI Audit Trail</div>
                            <div id="metricAiAudit" style="font-size:1.5rem;font-weight:700;color:var(--accent);margin:4px 0">12</div>
                            <div style="font-size:0.7rem;color:var(--muted)">entries</div>
                        </div>
                    </div>
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:16px">
                        <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:16px">
                            <div style="font-size:0.82rem;font-weight:600;color:var(--text);margin-bottom:10px"><i class="fas fa-clock" style="color:var(--accent);margin-right:6px"></i>Anchor Times (last 20)</div>
                            <canvas id="chartAnchorTimes" height="180"></canvas>
                        </div>
                        <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:16px">
                            <div style="font-size:0.82rem;font-weight:600;color:var(--text);margin-bottom:10px"><i class="fas fa-coins" style="color:var(--gold);margin-right:6px"></i>Record Types Distribution</div>
                            <canvas id="chartRecordTypes" height="180"></canvas>
                        </div>
                    </div>
                    <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:16px;margin-top:16px">
                        <div style="font-size:0.82rem;font-weight:600;color:var(--text);margin-bottom:10px"><i class="fas fa-history" style="color:var(--green);margin-right:6px"></i>Recent API Requests</div>
                        <div id="metricsRecentRequests" style="max-height:200px;overflow-y:auto;font-size:0.78rem"><div style="color:var(--muted);text-align:center;padding:1rem">Loading metrics...</div></div>
                    </div>
                    <!-- Performance Timing Breakdown -->
                    <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:16px;margin-top:16px">
                        <div style="font-size:0.82rem;font-weight:600;color:var(--text);margin-bottom:10px"><i class="fas fa-stopwatch" style="color:var(--accent);margin-right:6px"></i>Performance Timing Breakdown</div>
                        <table id="metricsTimingTable" style="width:100%;border-collapse:collapse;font-size:0.78rem">
                            <thead><tr style="border-bottom:1px solid var(--border)">
                                <th style="text-align:left;padding:6px 10px;color:var(--steel);font-weight:600">Phase</th>
                                <th style="text-align:right;padding:6px 10px;color:var(--steel);font-weight:600">Avg (ms)</th>
                                <th style="text-align:right;padding:6px 10px;color:var(--steel);font-weight:600">Min (ms)</th>
                                <th style="text-align:right;padding:6px 10px;color:var(--steel);font-weight:600">Max (ms)</th>
                                <th style="text-align:right;padding:6px 10px;color:var(--steel);font-weight:600">% of Total</th>
                            </tr></thead>
                            <tbody id="metricsTimingBody">
                                <tr style="border-bottom:1px solid rgba(255,255,255,0.03)"><td style="padding:6px 10px;color:var(--text)"><i class="fas fa-file-code" style="color:var(--accent);margin-right:6px;width:14px"></i>Hash Generation</td><td style="text-align:right;padding:6px 10px;color:var(--green);font-weight:600">42</td><td style="text-align:right;padding:6px 10px;color:var(--muted)">18</td><td style="text-align:right;padding:6px 10px;color:var(--muted)">87</td><td style="text-align:right;padding:6px 10px;color:var(--gold)">1.3%</td></tr>
                                <tr style="border-bottom:1px solid rgba(255,255,255,0.03)"><td style="padding:6px 10px;color:var(--text)"><i class="fas fa-code-merge" style="color:var(--accent);margin-right:6px;width:14px"></i>TX Merge &amp; Sign</td><td style="text-align:right;padding:6px 10px;color:var(--green);font-weight:600">185</td><td style="text-align:right;padding:6px 10px;color:var(--muted)">120</td><td style="text-align:right;padding:6px 10px;color:var(--muted)">310</td><td style="text-align:right;padding:6px 10px;color:var(--gold)">5.8%</td></tr>
                                <tr style="border-bottom:1px solid rgba(255,255,255,0.03)"><td style="padding:6px 10px;color:var(--text)"><i class="fas fa-anchor" style="color:var(--accent);margin-right:6px;width:14px"></i>XRPL Submit &amp; Confirm</td><td style="text-align:right;padding:6px 10px;color:var(--green);font-weight:600">2,840</td><td style="text-align:right;padding:6px 10px;color:var(--muted)">2,100</td><td style="text-align:right;padding:6px 10px;color:var(--muted)">4,200</td><td style="text-align:right;padding:6px 10px;color:var(--gold)">88.6%</td></tr>
                                <tr style="border-bottom:1px solid rgba(255,255,255,0.03)"><td style="padding:6px 10px;color:var(--text)"><i class="fas fa-floppy-disk" style="color:var(--accent);margin-right:6px;width:14px"></i>Vault Save</td><td style="text-align:right;padding:6px 10px;color:var(--green);font-weight:600">28</td><td style="text-align:right;padding:6px 10px;color:var(--muted)">12</td><td style="text-align:right;padding:6px 10px;color:var(--muted)">65</td><td style="text-align:right;padding:6px 10px;color:var(--gold)">0.9%</td></tr>
                                <tr style="border-bottom:1px solid rgba(255,255,255,0.03)"><td style="padding:6px 10px;color:var(--text)"><i class="fas fa-desktop" style="color:var(--accent);margin-right:6px;width:14px"></i>UI Render</td><td style="text-align:right;padding:6px 10px;color:var(--green);font-weight:600">110</td><td style="text-align:right;padding:6px 10px;color:var(--muted)">60</td><td style="text-align:right;padding:6px 10px;color:var(--muted)">240</td><td style="text-align:right;padding:6px 10px;color:var(--gold)">3.4%</td></tr>
                            </tbody>
                            <tfoot><tr style="border-top:2px solid var(--border)"><td style="padding:8px 10px;color:#fff;font-weight:700">Total</td><td style="text-align:right;padding:8px 10px;color:#fff;font-weight:700" id="metricTimingTotal">3,205</td><td colspan="3" style="text-align:right;padding:8px 10px;color:var(--accent);font-weight:600">~3.2 seconds end-to-end</td></tr></tfoot>
                        </table>
                    </div>
                    <div style="text-align:center;margin-top:12px">
                        <button onclick="loadPerformanceMetrics()" class="btn btn-sm" style="background:var(--accent);color:#000;border:none;border-radius:3px;padding:6px 20px;font-weight:600"><i class="fas fa-sync-alt"></i> Refresh Metrics</button>
                    </div>
                </div>
            </div>

            <!-- ═══ OFFLINE QUEUE ═══ -->
            <div class="tab-pane fade" id="tabOffline" role="tabpanel">
                <div class="subpage-back">
                    <button class="back-btn" onclick="showSection('sectionSystems')"><i class="fas fa-arrow-left"></i> Back</button>
                    <div class="breadcrumb-text">Systems / Offline Queue</div>
                </div>
                <div class="demo-card">
                    <h3><i class="fas fa-wifi" style="color:var(--accent)"></i> Offline Queue &amp; Batch Sync</h3>
                    <p style="color:var(--steel);font-size:0.85rem">Manage hashes queued during offline/air-gapped operation. Batch sync when connected.</p>
                    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;margin:16px 0">
                        <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:14px;text-align:center">
                            <div style="font-size:0.72rem;color:var(--steel);text-transform:uppercase">Connection Status</div>
                            <div id="offlineStatus" style="font-size:1.2rem;font-weight:700;color:var(--green);margin:4px 0"><i class="fas fa-circle" style="font-size:0.6rem"></i> Online</div>
                        </div>
                        <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:14px;text-align:center">
                            <div style="font-size:0.72rem;color:var(--steel);text-transform:uppercase">Queued Hashes</div>
                            <div id="offlineQueueCount" style="font-size:1.5rem;font-weight:700;color:var(--gold);margin:4px 0">0</div>
                        </div>
                        <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:14px;text-align:center">
                            <div style="font-size:0.72rem;color:var(--steel);text-transform:uppercase">Last Sync</div>
                            <div id="offlineLastSync" style="font-size:0.9rem;font-weight:600;color:var(--steel);margin:4px 0">Never</div>
                        </div>
                    </div>
                    <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:16px;margin-top:12px">
                        <div style="font-size:0.82rem;font-weight:600;color:var(--text);margin-bottom:10px"><i class="fas fa-list-ol" style="color:var(--accent);margin-right:6px"></i>Queue Contents</div>
                        <div id="offlineQueueList" style="max-height:250px;overflow-y:auto;font-size:0.78rem"><div style="color:var(--muted);text-align:center;padding:1rem">Queue is empty. Hashes are queued automatically when offline.</div></div>
                    </div>
                    <div style="display:flex;gap:10px;justify-content:center;margin-top:14px">
                        <button onclick="offlineSyncAll()" class="btn btn-sm" style="background:var(--green);color:#000;border:none;border-radius:3px;padding:6px 20px;font-weight:600"><i class="fas fa-upload"></i> Sync All to XRPL</button>
                        <button onclick="offlineQueueHash()" class="btn btn-sm" style="background:var(--surface);color:var(--text);border:1px solid var(--border);border-radius:3px;padding:6px 20px;font-weight:600"><i class="fas fa-plus"></i> Queue Vault Record</button>
                        <button onclick="offlineClearQueue()" class="btn btn-sm" style="background:var(--surface);color:var(--red);border:1px solid rgba(255,107,107,0.3);border-radius:3px;padding:6px 20px;font-weight:600"><i class="fas fa-trash"></i> Clear Queue</button>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="tabILS" role="tabpanel">
                <div class="subpage-back">
                    <button class="back-btn" onclick="showHub()"><i class="fas fa-arrow-left"></i> Back</button>
                    <div class="breadcrumb-text">Anchor-S4</div>
                </div>
                <!-- ═══ ILS WORKSPACE ═══ -->
                <div style="display:flex;align-items:center;justify-content:space-between;padding:16px 20px;margin-bottom:16px;background:linear-gradient(135deg,rgba(0,170,255,0.04) 0%,rgba(201,168,76,0.03) 100%);border:1px solid rgba(0,170,255,0.1);border-radius:3px;">
                    <div style="display:flex;align-items:center;gap:14px;">
                        <div style="width:42px;height:42px;border-radius:3px;background:rgba(0,170,255,0.1);display:flex;align-items:center;justify-content:center;flex-shrink:0"><i class="fas fa-anchor" style="color:#00aaff;font-size:1.1rem"></i></div>
                        <div>
                            <h3 style="font-size:1.15rem;font-weight:700;color:#fff;margin:0;letter-spacing:-0.02em">Anchor-S4</h3>
                            <p style="font-size:0.78rem;color:var(--steel);margin:2px 0 0;line-height:1.4">Defense logistics workspace &mdash; 20+ integrated tools</p>
                        </div>
                    </div>
                    <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap;">
                        <span style="display:inline-flex;align-items:center;gap:5px;padding:4px 10px;border-radius:3px;font-size:0.72rem;font-weight:600;background:rgba(0,204,102,0.08);border:1px solid rgba(0,204,102,0.15);color:#00cc66"><i class="fas fa-circle" style="font-size:0.4rem"></i> Live</span>
                        <span style="display:inline-flex;align-items:center;gap:5px;padding:4px 10px;border-radius:3px;font-size:0.72rem;font-weight:600;background:rgba(0,170,255,0.06);border:1px solid rgba(0,170,255,0.12);color:var(--accent)"><i class="fas fa-shield-halved"></i> IL4/IL5</span>
                        <span class="r16-hdr-btn" onclick="showSavedAnalyses()" style="display:inline-flex;align-items:center;gap:5px;padding:4px 10px;border-radius:3px;font-size:0.72rem;font-weight:600;background:rgba(0,170,255,0.06);border:1px solid rgba(0,170,255,0.15);color:#00aaff;cursor:pointer;transition:all 0.2s;" onmouseover="this.style.background='rgba(0,170,255,0.15)'" onmouseout="this.style.background='rgba(0,170,255,0.06)'"><i class="fas fa-history"></i> My Analyses</span>
                        <span class="r16-hdr-btn" onclick="showTeamPanel()" style="display:inline-flex;align-items:center;gap:5px;padding:4px 10px;border-radius:3px;font-size:0.72rem;font-weight:600;background:rgba(0,170,255,0.06);border:1px solid rgba(0,170,255,0.12);color:var(--accent);cursor:pointer;transition:all 0.2s;" onmouseover="this.style.background='rgba(0,170,255,0.15)'" onmouseout="this.style.background='rgba(0,170,255,0.06)'"><i class="fas fa-users"></i> Team</span>
                        <span class="r16-hdr-btn" onclick="showWebhookSettings()" style="display:inline-flex;align-items:center;gap:5px;padding:4px 10px;border-radius:3px;font-size:0.72rem;font-weight:600;background:rgba(201,168,76,0.06);border:1px solid rgba(201,168,76,0.15);color:#c9a84c;cursor:pointer;transition:all 0.2s;" onmouseover="this.style.background='rgba(201,168,76,0.15)'" onmouseout="this.style.background='rgba(201,168,76,0.06)'"><i class="fas fa-plug"></i> Webhooks</span>
                        <span class="r16-hdr-btn" onclick="exportPDF()" style="display:inline-flex;align-items:center;gap:5px;padding:4px 10px;border-radius:3px;font-size:0.72rem;font-weight:600;background:rgba(201,168,76,0.06);border:1px solid rgba(201,168,76,0.15);color:#c9a84c;cursor:pointer;transition:all 0.2s;" onmouseover="this.style.background='rgba(201,168,76,0.15)'" onmouseout="this.style.background='rgba(201,168,76,0.06)'"><i class="fas fa-file-pdf"></i> PDF Export</span>
                    </div>
                </div>
                <div class="ils-hub-tabs" id="ilsHubTabs" style="display:flex;">
                    <button class="ils-hub-tab" onclick="switchHubTab('hub-analysis',this)"><i class="fas fa-chart-line"></i> Gap Analysis</button>
                    <button class="ils-hub-tab" onclick="switchHubTab('hub-dmsms',this)"><i class="fas fa-exclamation-triangle"></i> DMSMS Tracker</button>
                    <button class="ils-hub-tab" onclick="switchHubTab('hub-readiness',this)"><i class="fas fa-chart-line"></i> Readiness Calculator</button>
                    <button class="ils-hub-tab" onclick="switchHubTab('hub-compliance',this)"><i class="fas fa-shield-halved"></i> Compliance Scorecard</button>
                    <button class="ils-hub-tab" onclick="switchHubTab('hub-risk',this)"><i class="fas fa-triangle-exclamation"></i> Supply Chain Risk</button>
                    <button class="ils-hub-tab" onclick="switchHubTab('hub-actions',this)"><i class="fas fa-tasks"></i> Action Items <span id="hubActionBadge" style="background:#ff6b6b;color:#fff;font-size:0.6rem;padding:1px 6px;border-radius:3px;margin-left:4px;font-weight:700;display:none"></span></button>
                    <button class="ils-hub-tab" onclick="switchHubTab('hub-predictive',this)"><i class="fas fa-brain"></i> Predictive Maintenance</button>
                    <button class="ils-hub-tab" onclick="switchHubTab('hub-lifecycle',this)"><i class="fas fa-clock"></i> Lifecycle Cost</button>
                    <button class="ils-hub-tab" onclick="switchHubTab('hub-roi',this)"><i class="fas fa-dollar-sign"></i> ROI Calculator</button>
                    <button class="ils-hub-tab" onclick="switchHubTab('hub-vault',this)"><i class="fas fa-vault"></i> Audit Vault</button>
                    <button class="ils-hub-tab" onclick="switchHubTab('hub-docs',this)"><i class="fas fa-book"></i> Document Library</button>
                    <button class="ils-hub-tab" onclick="switchHubTab('hub-reports',this)"><i class="fas fa-file-alt"></i> Report Generator</button>
                    <button class="ils-hub-tab" onclick="switchHubTab('hub-submissions',this)"><i class="fas fa-paper-plane"></i> Submissions & PTD</button>
                    <button class="ils-hub-tab" onclick="switchHubTab('hub-sbom',this)"><i class="fas fa-microchip"></i> SBOM Viewer</button>
                    <button class="ils-hub-tab" onclick="switchHubTab('hub-gfp',this)"><i class="fas fa-boxes-stacked"></i> GFP Tracker</button>
                    <button class="ils-hub-tab" onclick="switchHubTab('hub-cdrl',this)"><i class="fas fa-clipboard-check"></i> CDRL Validator</button>
                    <button class="ils-hub-tab" onclick="switchHubTab('hub-contract',this)"><i class="fas fa-file-contract"></i> Contract Extractor</button>
                    <button class="ils-hub-tab" onclick="switchHubTab('hub-provenance',this)"><i class="fas fa-link"></i> Provenance Chain</button>
                    <button class="ils-hub-tab" onclick="switchHubTab('hub-analytics',this)"><i class="fas fa-chart-pie"></i> Cross-Program Analytics</button>
                    <button class="ils-hub-tab" onclick="switchHubTab('hub-team',this)"><i class="fas fa-users-gear"></i> Team Management</button>
                </div>

                <!-- ILS Tool Cards Sub-Hub -->
                <div class="ils-sub-hub" id="ilsSubHub" style="display:grid !important;">
                    <div class="ils-tool-card" onclick="openILSTool('hub-analysis')">
                        <span class="itc-icon"><i class="fas fa-chart-line" style="color:var(--accent);"></i></span>
                        <div class="itc-title">Gap Analysis</div>
                        <div class="itc-desc">Identify logistics gaps across readiness, parts, and support elements for any platform.</div>
                    </div>
                    <div class="ils-tool-card" onclick="openILSTool('hub-dmsms')">
                        <span class="itc-icon"><i class="fas fa-exclamation-triangle" style="color:var(--accent);"></i></span>
                        <div class="itc-title">DMSMS Tracker</div>
                        <div class="itc-desc">Track diminishing manufacturing sources and material shortages with risk alerts.</div>
                    </div>
                    <div class="ils-tool-card" onclick="openILSTool('hub-readiness')">
                        <span class="itc-icon"><i class="fas fa-chart-line" style="color:var(--accent);"></i></span>
                        <div class="itc-title">Readiness Calculator</div>
                        <div class="itc-desc">Compute operational availability (Ao/Ai), MTBF, and readiness metrics.</div>
                    </div>
                    <div class="ils-tool-card" onclick="openILSTool('hub-compliance')">
                        <span class="itc-icon"><i class="fas fa-shield-halved" style="color:var(--accent);"></i></span>
                        <div class="itc-title">Compliance Scorecard</div>
                        <div class="itc-desc">NIST 800-171 / CMMC compliance scoring with gap identification.</div>
                    </div>
                    <div class="ils-tool-card" onclick="openILSTool('hub-risk')">
                        <span class="itc-icon"><i class="fas fa-triangle-exclamation" style="color:var(--accent);"></i></span>
                        <div class="itc-title">Supply Chain Risk</div>
                        <div class="itc-desc">AI-powered supply chain risk assessment with threat scoring and mitigation.</div>
                    </div>
                    <div class="ils-tool-card" onclick="openILSTool('hub-actions')" style="position:relative">
                        <span class="itc-icon"><i class="fas fa-tasks" style="color:var(--accent);"></i></span>
                        <div class="itc-title">Action Items <span id="actionItemBadge" style="display:inline-flex;align-items:center;justify-content:center;background:#ff4444;color:#fff;font-size:0.65rem;font-weight:800;min-width:20px;height:20px;border-radius:3px;padding:0 6px;margin-left:6px;vertical-align:middle"></span></div>
                        <div class="itc-desc">Track ILS action items, corrective actions, and follow-ups with deadlines.</div>
                    </div>
                    <div class="ils-tool-card" onclick="openILSTool('hub-predictive')">
                        <span class="itc-icon"><i class="fas fa-brain" style="color:var(--accent);"></i></span>
                        <div class="itc-title">Predictive Maintenance</div>
                        <div class="itc-desc">AI-driven failure prediction and maintenance scheduling optimization.</div>
                    </div>
                    <div class="ils-tool-card" onclick="openILSTool('hub-lifecycle')">
                        <span class="itc-icon"><i class="fas fa-clock" style="color:var(--accent);"></i></span>
                        <div class="itc-title">Lifecycle Cost</div>
                        <div class="itc-desc">Total lifecycle cost estimation including procurement, sustainment, and disposal.</div>
                    </div>
                    <div class="ils-tool-card" onclick="openILSTool('hub-roi')">
                        <span class="itc-icon"><i class="fas fa-dollar-sign" style="color:var(--accent);"></i></span>
                        <div class="itc-title">ROI Calculator</div>
                        <div class="itc-desc">Calculate return on investment for defense logistics and ILS investments.</div>
                    </div>
                    <div class="ils-tool-card" onclick="openILSTool('hub-vault')">
                        <span class="itc-icon"><i class="fas fa-vault" style="color:var(--accent);"></i></span>
                        <div class="itc-title">Audit Vault</div>
                        <div class="itc-desc">Secure document vault for audit records with blockchain-anchored integrity.</div>
                    </div>
                    <div class="ils-tool-card" onclick="openILSTool('hub-docs')">
                        <span class="itc-icon"><i class="fas fa-book" style="color:var(--accent);"></i></span>
                        <div class="itc-title">Document Library</div>
                        <div class="itc-desc">Manage technical manuals, drawings, and provisioning documents.</div>
                    </div>
                    <div class="ils-tool-card" onclick="openILSTool('hub-reports')">
                        <span class="itc-icon"><i class="fas fa-file-alt" style="color:var(--accent);"></i></span>
                        <div class="itc-title">Report Generator</div>
                        <div class="itc-desc">Generate ILS reports for audits, reviews, and compliance submissions.</div>
                    </div>
                    <div class="ils-tool-card" onclick="openILSTool('hub-submissions')">
                        <span class="itc-icon"><i class="fas fa-paper-plane" style="color:var(--accent);"></i></span>
                        <div class="itc-title">Submissions & PTD</div>
                        <div class="itc-desc">Manage provisioning technical data and CDRL submissions.</div>
                    </div>
                    <div class="ils-tool-card" onclick="openILSTool('hub-sbom')">
                        <span class="itc-icon"><i class="fas fa-microchip" style="color:var(--accent);"></i></span>
                        <div class="itc-title">SBOM Viewer</div>
                        <div class="itc-desc">Software Bill of Materials — track components, CVEs, and blockchain attestation.</div>
                    </div>
                    <div class="ils-tool-card" onclick="openILSTool('hub-gfp')">
                        <span class="itc-icon"><i class="fas fa-boxes-stacked" style="color:var(--accent);"></i></span>
                        <div class="itc-title">GFP Tracker</div>
                        <div class="itc-desc">Government-Furnished Property tracking — DD 1662, inventory management, and accountability.</div>
                    </div>
                    <div class="ils-tool-card" onclick="openILSTool('hub-cdrl')">
                        <span class="itc-icon"><i class="fas fa-clipboard-check" style="color:var(--accent);"></i></span>
                        <div class="itc-title">CDRL Validator</div>
                        <div class="itc-desc">Contract Data Requirements List validation — DI format checks and content analysis.</div>
                    </div>
                    <div class="ils-tool-card" onclick="openILSTool('hub-contract')">
                        <span class="itc-icon"><i class="fas fa-file-contract" style="color:var(--accent);"></i></span>
                        <div class="itc-title">Contract Extractor</div>
                        <div class="itc-desc">AI-powered clause extraction — FAR/DFARS, CDRL detection, and obligation mapping.</div>
                    </div>
                    <div class="ils-tool-card" onclick="openILSTool('hub-provenance')">
                        <span class="itc-icon"><i class="fas fa-link" style="color:var(--accent);"></i></span>
                        <div class="itc-title">Provenance Chain</div>
                        <div class="itc-desc">Blockchain-verified chain of custody — QR codes and custody transfer tracking.</div>
                    </div>
                    <div class="ils-tool-card" onclick="openILSTool('hub-analytics')">
                        <span class="itc-icon"><i class="fas fa-chart-pie" style="color:var(--accent);"></i></span>
                        <div class="itc-title">Cross-Program Analytics</div>
                        <div class="itc-desc">Multi-program dashboard — aggregate metrics, trends, and comparative analysis.</div>
                    </div>
                    <div class="ils-tool-card" onclick="openILSTool('hub-team')">
                        <span class="itc-icon"><i class="fas fa-users-gear" style="color:var(--accent);"></i></span>
                        <div class="itc-title">Team Management</div>
                        <div class="itc-desc">Multi-tenant team operations — invitations, roles, and access control.</div>
                    </div>

                </div>
                <div id="ilsToolBackBar" style="display:none;margin-bottom:12px;"><div style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap"><button class="back-btn" onclick="closeILSTool()" style="background:rgba(0,170,255,0.08);border:1px solid rgba(0,170,255,0.2);color:var(--accent);border-radius:3px;padding:6px 14px;font-size:0.8rem;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:6px;"><i class="fas fa-arrow-left"></i> Back to Tools</button><div id="toolSlsStrip" style="display:flex;align-items:center;gap:14px;padding:6px 16px;background:rgba(201,168,76,0.06);border:1px solid rgba(201,168,76,0.15);border-radius:3px;font-size:0.78rem"><span style="color:var(--steel)"><i class="fas fa-coins" style="color:#c9a84c;margin-right:4px"></i>SLS: <strong id="toolSlsBal" style="color:#c9a84c">--</strong></span><span style="color:var(--steel)"><i class="fas fa-anchor" style="color:var(--accent);margin-right:4px"></i>Anchors: <strong id="toolSlsAnch" style="color:var(--accent)">0</strong></span><span style="color:var(--steel)"><i class="fas fa-bolt" style="color:var(--accent);margin-right:4px"></i>Spent: <strong id="toolSlsSpent" style="color:var(--accent)">0.00</strong> SLS</span><span style="color:#00aaff;margin-left:8px"><i class="fas fa-robot" style="margin-right:4px"></i>AI Agent Active</span></div></div></div>

                <!-- ══ HUB: GAP ANALYSIS (original ILS content) ══ -->
                <div class="ils-hub-panel" id="hub-analysis">
                <div class="row">
                    <div class="col-lg-7">
                        <div class="demo-card">
                            <h3 style="display:flex;align-items:center;gap:8px"><i class="fas fa-brain"></i> ILS Gap Analysis <button onclick="showAddActionModal('ils')" class="ai-quick-btn" style="margin-left:auto;font-size:0.72rem;padding:4px 10px"><i class="fas fa-plus"></i> Action Item</button></h3>
                            <details style="margin-bottom:1rem;background:rgba(0,170,255,0.04);border:1px solid rgba(0,170,255,0.15);border-radius:3px;padding:0 12px;">
                                <summary style="cursor:pointer;padding:10px 0;color:#00aaff;font-weight:600;font-size:0.85rem;"><i class="fas fa-info-circle"></i> How Gap Analysis Works</summary>
                                    <div style="padding:0 0 12px;color:var(--steel);font-size:0.82rem;line-height:1.6;">
                                        <p><strong style="color:#fff;">What this tool does:</strong> The ILS Gap Analysis Engine evaluates your program’s compliance with <strong>MIL-STD-1388-1A/2B</strong> Integrated Logistics Support requirements. It scores 10 ILS element areas — Supply Support, Maintenance Planning, Technical Data, Training, Configuration Management, DMSMS, PHS&amp;T, Reliability, Support Equipment, and Manpower — to identify gaps, missing deliverables, and corrective actions.</p>
                                        <p><strong style="color:#00aaff;">Step-by-step:</strong> (1) Select your program and hull/tail number. (2) Review the generated ILS checklist and mark items as complete. (3) Upload DRL spreadsheets, CDRLs, or ILS documents for automated cross-reference. (4) Click “Run Full Analysis” — the engine scores your checklist (weighted: critical items ×2), cross-references uploaded documents against DRL requirements using fuzzy matching, and outputs a combined coverage score (60% checklist + 40% DRL). (5) Review critical gaps, action items, estimated remediation costs, and recommended owners.</p>
                                        <p><strong style="color:#c9a84c;">Action output:</strong> Gap Analysis generates a prioritized corrective action register (CAR) with severity ratings, cost estimates ($K), schedule targets, and assigned owners (government + contractor). Critical gaps are flagged for immediate attention. Every analysis result can be anchored to the XRP Ledger for tamper-proof audit trail.</p>
                                        <p><strong style="color:#00aaff;">Charts:</strong> After analysis, a radar chart shows ILS element coverage and a horizontal bar chart shows individual element scores color-coded (green ≥80%, amber ≥50%, red &lt;50%). Charts update automatically when you re-run with different parameters.</p>
                                        <p><strong style="color:#c9a84c;">How S4 Ledger saves money here:</strong> Defense programs routinely spend $150K–$500K per ILS review cycle hiring contractors to manually compile gap analyses across dozens of spreadsheets, CDRLs, and DRL trackers. The S4 Gap Analysis Engine automates the entire cross-reference process — parsing uploaded documents against MIL-STD-1388 requirements in seconds instead of weeks. This eliminates 70-85% of the labor cost associated with ILS reviews, catches gaps that manual processes miss, and produces audit-ready output that can be anchored to XRPL for tamper-proof compliance evidence. Programs typically recover the annual platform cost in a single review cycle.</p>
                                    </div>
                            </details>
                            <p style="color:var(--steel);font-size:0.9rem;margin-bottom:1rem">Upload your DRLs, spreadsheets, checklists, and documents. The analyzer will parse them, cross-reference against program requirements, and identify gaps, missing deliverables, and actionable items.</p>

                            <label>1. Select Program / Platform Type</label>
                            <div class="row mb-3">
                                <div class="col-7">
                                    <select id="ilsProgram" onchange="onILSProgramChange()">
                                    </select>
                                </div>
                                <div class="col-5">
                                    <input type="text" id="ilsHull" placeholder="Hull # / Designation" style="font-size:0.88rem">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-6">
                                    <label style="font-size:0.82rem">Program Office</label>
                                    <input type="text" id="ilsOffice" placeholder="e.g. PMS 300" style="font-size:0.88rem">
                                </div>
                                <div class="col-6">
                                    <label style="font-size:0.82rem">Acquisition Phase</label>
                                    <select id="ilsPhase" style="font-size:0.88rem">
                                        <option value="pre_award">Pre-Award</option>
                                        <option value="design" selected>Design</option>
                                        <option value="construction">Construction</option>
                                        <option value="test_eval">Test & Evaluation</option>
                                        <option value="delivery">Delivery / Turnover</option>
                                        <option value="post_delivery">Post-Delivery</option>
                                    </select>
                                </div>
                            </div>

                            <label>2. Upload Documents <span style="color:var(--muted);font-weight:400">(DRLs, spreadsheets, PDFs, Word docs, checklists)</span></label>
                            <div class="ils-dropzone" id="ilsDropzone" onclick="document.getElementById('ilsFileInput').click()">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <div style="font-weight:600;color:#fff;margin-bottom:4px">Drag & drop files here or click to browse</div>
                                <div style="font-size:0.82rem;color:var(--muted)">Accepts .csv, .xlsx, .xls, .pdf, .docx, .txt — all processing done locally in your browser</div>
                            </div>
                            <input type="file" id="ilsFileInput" multiple accept=".csv,.xlsx,.xls,.txt,.tsv,.pdf,.docx,.doc" style="display:none" onchange="handleILSFiles(this.files)">
                            <div style="margin:8px 0;display:flex;align-items:center;gap:8px;flex-wrap:wrap">
                                <div style="position:relative;display:inline-block">
                                    <select id="sampleDocSelect" onchange="loadSelectedSampleDoc(this.value)" style="font-weight:600;min-width:260px;border-color:rgba(0,170,255,0.25) !important;color:var(--accent) !important">
                                        <option value="" disabled selected>Load Sample Document...</option>
                                        <optgroup label="Data Requirements">
                                            <option value="drl">DRL Tracker (CDRL Status Log)</option>
                                            <option value="cdrl_matrix">CDRL Compliance Matrix</option>
                                        </optgroup>
                                        <optgroup label="Provisioning & Supply">
                                            <option value="vrs">Vendor Recommended Spares (VRS)</option>
                                            <option value="buylist">Spares Buylist / Initial Outfitting</option>
                                            <option value="po_index">Purchase Order Index</option>
                                            <option value="gfm">Gov't Furnished Material (GFM) List</option>
                                            <option value="hazmat">HazMat Inventory</option>
                                        </optgroup>
                                        <optgroup label="Maintenance & Support">
                                            <option value="lcsp">Life Cycle Sustainment Plan (LCSP)</option>
                                            <option value="mrc">Maintenance Requirement Cards (MRCs)</option>
                                            <option value="mel">Machinery Equipment List (MEL)</option>
                                            <option value="pms_schedule">PMS Development Schedule</option>
                                        </optgroup>
                                        <optgroup label="Configuration & ID">
                                            <option value="iuid">IUID Register</option>
                                            <option value="config_baseline">Configuration Baseline Index</option>
                                            <option value="weight_report">Weight Report</option>
                                        </optgroup>
                                        <optgroup label="Engineering & Test">
                                            <option value="ela">Electrical Load Analysis</option>
                                            <option value="temp">Test & Evaluation Master Plan (TEMP)</option>
                                            <option value="icd">Interface Control Document (ICD)</option>
                                        </optgroup>
                                        <optgroup label="Training & Manpower">
                                            <option value="training_plan">Training Plan / NTSP</option>
                                            <option value="manpower">Manpower Estimate Report</option>
                                        </optgroup>
                                        <optgroup label="Contracts & Compliance">
                                            <option value="sow_matrix">SOW Compliance Matrix</option>
                                            <option value="ims">Integrated Master Schedule (IMS)</option>
                                            <option value="risk_register">Program Risk Register</option>
                                        </optgroup>
                                    </select>
                                </div>
                                <button style="background:rgba(0,170,255,0.08);border:1px solid rgba(0,170,255,0.15);color:var(--accent);border-radius:3px;padding:6px 14px;cursor:pointer;font-family:inherit;font-size:0.82rem;font-weight:600;transition:all 0.2s" onmouseover="this.style.background='rgba(201,168,76,0.2)'" onmouseout="this.style.background='linear-gradient(135deg,rgba(201,168,76,0.12),rgba(0,170,255,0.2))'" onclick="event.stopPropagation();loadSamplePackage()"><i class="fas fa-box-open"></i> Load Full ILS Package</button>
                                <span style="font-size:0.78rem;color:var(--muted)">22 document types — DRL, LCSP, IUID, VRS, IMS & more</span>
                            </div>
                            <div class="ils-file-list" id="ilsFileList"></div>

                            <label>3. Program ILS Checklist <span style="color:var(--muted);font-weight:400">(changes per program — auto-populated from uploads, or check manually)</span></label>
                            <div id="ilsChecklist" style="display:grid;grid-template-columns:1fr 1fr;gap:6px;margin-bottom:1rem;font-size:0.85rem;"></div>

                            <div class="d-flex gap-2 flex-wrap">
                                <button class="btn-accent" onclick="runFullILSAnalysis()"><i class="fas fa-chart-line"></i> Run Full Analysis</button>
                                <button class="btn-gold" onclick="generateILSReport()"><i class="fas fa-file-export"></i> Generate Report</button>
                                <button style="background:rgba(0,170,255,0.1);border:1px solid rgba(0,170,255,0.3);color:var(--accent);border-radius:3px;padding:0.5rem 1rem;cursor:pointer;font-family:inherit;font-size:0.85rem;font-weight:600" onclick="anchorILSReport()"><i class="fas fa-anchor"></i> Anchor Report Hash</button>
                            </div>
                            <div id="ilsPostActions" style="display:none">
                                <div class="post-actions">
                                    <button class="post-action-btn" onclick="sendILSAnalysis()"><i class="fas fa-paper-plane"></i> Send Analysis</button>
                                    <button class="post-action-btn" onclick="scheduleILSMeeting()"><i class="fas fa-calendar-plus"></i> Schedule Meeting</button>
                                    <button class="post-action-btn" onclick="exportActionTracker()"><i class="fas fa-clipboard-list"></i> Update Action Tracker</button>
                                    <button class="post-action-btn" onclick="printILSReport()"><i class="fas fa-print"></i> Print Report</button>
                                    <button class="post-action-btn" onclick="saveILSReport()"><i class="fas fa-save"></i> Save Report</button>
                                </div>
                            </div>
                            <div class="result-panel" id="ilsResult"></div>
                        </div>
                    </div>
                    <div class="col-lg-5">
                        <div class="demo-card">
                            <h3><i class="fas fa-chart-pie"></i> ILS Readiness Score</h3>
                            <div id="ilsScoreContainer" style="text-align:center;padding:1rem 0">
                                <div style="font-size:4rem;font-weight:800;color:var(--muted)" id="ilsScore">--</div>
                                <div style="font-size:0.9rem;color:var(--steel)" id="ilsScoreLabel">Upload documents & run analysis</div>
                                <div style="margin-top:1rem" id="ilsGaugeBar">
                                    <div style="background:var(--surface);border-radius:3px;height:12px;overflow:hidden;border:1px solid var(--border)">
                                        <div id="ilsGaugeFill" style="height:100%;width:0%;background:linear-gradient(90deg,#ff3333,#ffa500,#00aaff);border-radius:3px;transition:width 0.8s ease"></div>
                                    </div>
                                    <div style="display:flex;justify-content:space-between;font-size:0.7rem;color:var(--muted);margin-top:4px"><span>Critical Gaps</span><span>Partial</span><span>Mission Ready</span></div>
                                </div>
                            </div>
                        </div>
                        <div class="demo-card">
                            <h3><i class="fas fa-list-check"></i> ILS Element Coverage</h3>
                            <div id="ilsCoverage" style="font-size:0.85rem">
                                <div style="color:var(--muted);text-align:center;padding:1rem">Upload files to see element-by-element coverage.</div>
                            </div>
                        </div>
                        <div class="demo-card">
                            <h3><i class="fas fa-exclamation-triangle" style="color:#ffa500"></i> Action Items</h3>
                            <div id="ilsActions" style="max-height:400px;overflow-y:auto">
                                <div style="color:var(--muted);text-align:center;padding:1rem;font-size:0.85rem">Run analysis to generate action items with responsible parties, due dates, and cost impact.</div>
                            </div>
                        </div>
                        <div class="demo-card">
                            <h3><i class="fas fa-dollar-sign" style="color:var(--accent)"></i> Cost & Schedule Impact</h3>
                            <div id="ilsCostSchedule" style="font-size:0.85rem">
                                <div style="color:var(--muted);text-align:center;padding:1rem">Analysis required to estimate impact.</div>
                            </div>
                        </div>

                    </div>
                </div>
                </div><!-- /hub-analysis -->

                <!-- ══ HUB: ACTION ITEMS ══ -->
                <div class="ils-hub-panel" id="hub-actions">
                    <div class="row">
                        <div class="col-lg-8">
                            <div class="demo-card">
                                <h3><i class="fas fa-tasks" style="color:var(--accent)"></i> Unified Action Items & Alerts</h3>
                                <details style="margin-bottom:1rem;background:rgba(0,170,255,0.04);border:1px solid rgba(0,170,255,0.15);border-radius:3px;padding:0 12px;">
                                    <summary style="cursor:pointer;padding:10px 0;color:#00aaff;font-weight:600;font-size:0.85rem;"><i class="fas fa-info-circle"></i> How It Works — Unified Action Tracking</summary>
                                    <div style="padding:0 0 12px;color:var(--steel);font-size:0.82rem;line-height:1.6;">
                                        <p><strong style="color:#fff;">What this tool does:</strong> Every tool in the S4 Ledger suite generates actionable recommendations — DMSMS obsolescence alerts, readiness failures, warranty expirations, lifecycle cost opportunities, parts shortages, and ILS gap analysis items. This panel <strong>consolidates all of them</strong> into one unified tracker so nothing falls through the cracks.</p>
                                        <p><strong style="color:#00aaff;">How actions are created:</strong> When you use any tool (run a DMSMS check, calculate readiness, review warranties, estimate lifecycle costs, or run an ILS gap analysis), the system automatically generates action items with: (1) <strong>Severity</strong> — Critical, Warning, or Info, (2) <strong>Owner</strong> — assigned responsible party, (3) <strong>Cost impact</strong> — estimated dollar risk, (4) <strong>Schedule</strong> — recommended timeline, (5) <strong>Source tool</strong> — which analysis generated it.</p>
                                        <p><strong style="color:#00aaff;">How S4 Ledger saves money here:</strong> Missed action items are one of the biggest cost drivers in defense programs. A warranty that expires unrenewed can cost $500K+. An obsolete part discovered during production costs 10x more than one caught early. This tracker ensures every actionable finding from every tool is visible, assignable, and trackable — with the ability to export, filter, and communicate to stakeholders.</p>
                                        <p><strong style="color:#00aaff;">AI Recommendations:</strong> Ask the S4 ILS Agent (below) about your action items. It can prioritize them, suggest corrective actions, draft CARs, estimate total risk, and recommend next steps based on all the data from every tool.</p>
                                    </div>
                                </details>
                                <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:1rem">
                                    <button class="ai-quick-btn" onclick="showAddActionModal()" style="background:rgba(0,170,255,0.2);border-color:var(--accent);font-weight:700"><i class="fas fa-plus"></i> Add New</button>
                                    <button class="ai-quick-btn" onclick="filterHubActions('all')" style="background:rgba(0,170,255,0.15);border-color:var(--accent)">All</button>
                                    <button class="ai-quick-btn" onclick="filterHubActions('critical')"><span style="color:#c9a84c">●</span> Critical</button>
                                    <button class="ai-quick-btn" onclick="filterHubActions('warning')"><span style="color:#ffa500">●</span> Warning</button>
                                    <button class="ai-quick-btn" onclick="filterHubActions('info')"><span style="color:#00aaff">●</span> Info</button>
                                    <button class="ai-quick-btn" onclick="filterHubActions('completed')"><span style="color:#00aaff">●</span> Completed</button>
                                    <span style="flex:1"></span>
                                    <button class="ai-quick-btn" onclick="exportActionItems()"><i class="fas fa-download"></i> Export CSV</button>
                                    <button class="ai-quick-btn" onclick="clearCompletedActions()"><i class="fas fa-broom"></i> Clear Done</button>
                                    <button class="ai-quick-btn" onclick="toggleActionTimeline()" id="timelineToggleBtn" title="Timeline View"><i class="fas fa-stream"></i> Timeline</button>
                                    <button class="ai-quick-btn" onclick="smartPrioritizeActions()" title="AI Smart Priority Sort"><i class="fas fa-wand-magic-sparkles"></i> Smart Sort</button>
                                </div>
                                <!-- Bulk Action Bar -->
                                <div id="actionBulkBar" style="display:none;background:rgba(0,170,255,0.08);border:1px solid rgba(0,170,255,0.2);border-radius:3px;padding:8px 14px;margin-bottom:10px;align-items:center;gap:10px;font-size:0.82rem">
                                    <label style="display:flex;align-items:center;gap:6px;cursor:pointer;color:var(--accent);font-weight:600"><input type="checkbox" id="actionSelectAll" onchange="toggleActionSelectAll(this.checked)"> Select All</label>
                                    <span id="actionSelectedCount" style="color:var(--steel)">0 selected</span>
                                    <span style="flex:1"></span>
                                    <button class="ai-quick-btn" onclick="bulkActionSetSeverity('critical')" style="font-size:0.72rem"><span style="color:#c9a84c">●</span> Set Critical</button>
                                    <button class="ai-quick-btn" onclick="bulkActionSetSeverity('warning')" style="font-size:0.72rem"><span style="color:#ffa500">●</span> Set Warning</button>
                                    <button class="ai-quick-btn" onclick="bulkActionMarkDone()" style="font-size:0.72rem"><i class="fas fa-check"></i> Mark Done</button>
                                    <button class="ai-quick-btn" onclick="bulkActionDelete()" style="font-size:0.72rem;color:#c9a84c"><i class="fas fa-trash"></i> Delete</button>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-3 col-6 mb-2"><div class="stat-mini" style="cursor:pointer" onclick="filterHubActions('all')" title="Click to show all"><div class="stat-mini-val" id="hubAiTotal" style="color:#00aaff">0</div><div class="stat-mini-label">Total Actions</div></div></div>
                                    <div class="col-md-3 col-6 mb-2"><div class="stat-mini" style="cursor:pointer" onclick="filterHubActions('critical')" title="Click to filter critical"><div class="stat-mini-val" id="hubAiCritical" style="color:#c9a84c">0</div><div class="stat-mini-label">Critical</div></div></div>
                                    <div class="col-md-3 col-6 mb-2"><div class="stat-mini" style="cursor:pointer" onclick="filterHubActions('all')" title="Click to show open"><div class="stat-mini-val" id="hubAiOpen" style="color:#ffa500">0</div><div class="stat-mini-label">Open</div></div></div>
                                    <div class="col-md-3 col-6 mb-2"><div class="stat-mini" style="cursor:pointer" onclick="filterHubActions('completed')" title="Click to show completed"><div class="stat-mini-val" id="hubAiDone" style="color:#00aaff">0</div><div class="stat-mini-label">Completed</div></div></div>
                                </div>
                                <div id="actionCalendarSection" style="margin-bottom:16px">
                                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
                                        <h4 style="font-size:0.9rem;font-weight:700;color:#fff;margin:0"><i class="fas fa-calendar-alt" style="color:var(--accent);margin-right:6px"></i>Action Calendar</h4>
                                        <div style="display:flex;gap:6px">
                                            <button onclick="changeCalMonth(-1)" class="ai-quick-btn" style="padding:4px 10px;font-size:0.75rem"><i class="fas fa-chevron-left"></i></button>
                                            <span id="calMonthLabel" style="font-size:0.82rem;color:var(--steel);font-weight:600;min-width:120px;text-align:center;line-height:28px"></span>
                                            <button onclick="changeCalMonth(1)" class="ai-quick-btn" style="padding:4px 10px;font-size:0.75rem"><i class="fas fa-chevron-right"></i></button>
                                        </div>
                                    </div>
                                    <div id="actionCalendarGrid" style="display:grid;grid-template-columns:repeat(7,1fr);gap:2px;font-size:0.72rem;text-align:center"></div>
                                    <div id="calDayDetail" style="display:none;margin-top:8px;padding:10px;background:var(--surface);border-radius:3px;border:1px solid var(--border);font-size:0.82rem"></div>
                                </div>
                                <div id="actionTimelineView" style="display:none;max-height:500px;overflow-y:auto;margin-bottom:16px;padding:12px;background:var(--surface);border:1px solid var(--border);border-radius:3px">
                                    <div id="actionTimelineContent"></div>
                                </div>
                                <div id="hubActionItemsList" style="max-height:600px;overflow-y:auto">
                                    <div style="color:var(--muted);text-align:center;padding:2rem;font-size:0.85rem"><i class="fas fa-clipboard-list" style="font-size:2rem;margin-bottom:12px;display:block;opacity:0.3"></i>No action items yet. Use the tools above to generate actionable tasks and recommendations.</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="demo-card">
                                <h3 style="font-size:1rem;"><i class="fas fa-robot" style="color:var(--accent)"></i> AI Recommendations</h3>
                                <p style="color:var(--steel);font-size:0.82rem;margin-bottom:12px">Ask the S4 Agent about your action items, priorities, risks, and next steps.</p>
                                <div style="display:flex;flex-wrap:wrap;gap:4px;margin-bottom:12px">
                                    <button class="ai-quick-btn" onclick="aiAsk('Prioritize my action items')">Prioritize</button>
                                    <button class="ai-quick-btn" onclick="aiAsk('What should I do first?')">Next Step</button>
                                    <button class="ai-quick-btn" onclick="aiAsk('Estimate my total risk exposure')">Total Risk</button>
                                    <button class="ai-quick-btn" onclick="aiAsk('Draft a status update for leadership')">Status Brief</button>
                                    <button class="ai-quick-btn" onclick="aiAsk('Which items can I delegate?')">Delegate</button>
                                    <button class="ai-quick-btn" onclick="aiAsk('Draft CAR for critical items')">Draft CAR</button>
                                </div>
                                <div style="font-size:0.78rem;color:var(--muted);padding:8px;background:var(--surface);border-radius:3px;border:1px solid var(--border)">
                                    <i class="fas fa-lightbulb" style="color:var(--accent)"></i> <strong>Tip:</strong> The agent uses data from all tools — ILS analysis, DMSMS, Readiness, Parts, ROI, Lifecycle, and Warranty — to provide contextual recommendations.
                                </div>
                            </div>
                            <div class="demo-card">
                                <h3 style="font-size:1rem;"><i class="fas fa-chart-pie" style="color:#ffa500"></i> Actions by Source</h3>
                                <div id="hubActionsBySource" style="font-size:0.82rem">
                                    <div style="color:var(--muted);text-align:center;padding:1rem">Run tools to see breakdown.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div><!-- /hub-actions -->


                <!-- ══ WORKSPACE TOOLS (full embedded) ══ -->
                <div class="ils-hub-panel" id="hub-dmsms">
                    <div class="demo-card">
                        <h3 style="display:flex;align-items:center;gap:8px"><i class="fas fa-exclamation-triangle" style="color:var(--accent)"></i> DMSMS / Obsolescence Tracker <button onclick="showAddActionModal('dmsms')" class="ai-quick-btn" style="margin-left:auto;font-size:0.72rem;padding:4px 10px"><i class="fas fa-plus"></i> Action Item</button></h3>
                        <p style="color:var(--steel);font-size:0.9rem;margin-bottom:0.5rem">Track Diminishing Manufacturing Sources and Material Shortages (DMSMS). Identify parts at risk of obsolescence, find alternates, and estimate resolution costs. Per DoDI 4245.14.</p>
                        <details style="margin-bottom:1rem;background:rgba(0,170,255,0.06);border:1px solid rgba(255,153,0,0.15);border-radius:3px;padding:0 12px;">
                            <summary style="cursor:pointer;padding:10px 0;color:#00aaff;font-weight:600;font-size:0.85rem;"><i class="fas fa-info-circle"></i> How It Works — Data Sources & S4 Ledger Value</summary>
                            <div style="padding:0 0 12px;color:var(--steel);font-size:0.82rem;line-height:1.6;">
                                <p><strong style="color:#fff;">What's real:</strong> Platform names, system names, manufacturers, CAGE codes, and FSC groups are all real. The systems shown (AN/SPY-6, Mk 41 VLS, LM2500, etc.) are the actual systems installed on these platforms.</p>
                                <p><strong style="color:#ffa500;">What's demo data:</strong> The DMSMS statuses (Active/At Risk/Obsolete) are <em>simulated</em> in this demo. Real obsolescence data comes from <strong>GIDEP</strong> (Government-Industry Data Exchange Program), <strong>DLA</strong> (Defense Logistics Agency), and vendor EOL notices — all of which require authenticated access.</p>
                                <p><strong style="color:#00aaff;">How S4 Ledger saves money here:</strong> When a DMSMS case is identified and a resolution is chosen (bridge buy, redesign, alternate source), S4 Ledger anchors a SHA-256 hash of that decision to the XRP Ledger. This creates <em>immutable proof</em> that the obsolescence was documented, analyzed, and resolved at a specific date — critical for audits, contract disputes, and proving due diligence. Without this, programs lose millions to undocumented obsolescence discoveries during production.</p>
                                <p><strong style="color:#00aaff;">Production mode:</strong> Connect to GIDEP, DLA ASSIST, or your own parts database via the S4 API. Upload real DMSMS case files via CSV/XLSX. The tool structure is designed for real data — swap the demo layer for your authenticated data source.</p>
                            </div>
                        </details>
                        <label>Select Program</label>
                        <select id="dmsmsProgram" class="form-select mb-2"  onchange="loadDMSMSData()"></select>
                        <div class="row mb-3">
                            <div class="col-6"><input type="text" id="dmsmsHull" class="form-control" placeholder="Hull # / Tail # / Designation" style="background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.08);font-size:0.85rem"></div>
                            <div class="col-6"><input type="text" id="dmsmsOffice" class="form-control" placeholder="Program Office (e.g. PMS 300)" style="background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.08);font-size:0.85rem"></div>
                        </div>
                                                <label style="font-size:0.82rem;margin-top:0.5rem">Upload DMSMS Data <span style="color:var(--muted);font-weight:400">(parts lists, GIDEP notices, vendor EOL notices)</span></label>
                        <div class="ils-dropzone" id="dmsmsDropzone" onclick="document.getElementById('dmsmsFileInput').click()" style="border-color:rgba(0,170,255,0.15)">
                            <i class="fas fa-cloud-upload-alt" style="color:var(--accent)"></i>
                            <div style="font-weight:600;color:#fff;margin-bottom:4px">Drag & drop DMSMS files or click to browse</div>
                            <div style="font-size:0.82rem;color:var(--muted)">Accepts .csv, .xlsx, .xls, .pdf, .docx, .txt — identifies NSNs, CAGE codes, part statuses</div>
                        </div>
                        <input type="file" id="dmsmsFileInput" multiple accept=".csv,.xlsx,.xls,.txt,.tsv,.pdf,.docx" style="display:none" onchange="handleToolUpload(this.files,'dmsms')">
                        <div class="ils-file-list" id="dmsmsFileList"></div>
                        <div id="dmsmsResults" style="margin-top:1rem"></div>
                        <div class="row mt-3">
                            <div class="col-md-3 col-6 mb-2"><div class="stat-mini"><div class="stat-mini-val" id="dmsmsTotalParts">0</div><div class="stat-mini-label">Parts Tracked</div></div></div>
                            <div class="col-md-3 col-6 mb-2"><div class="stat-mini"><div class="stat-mini-val" id="dmsmsAtRisk" style="color:#ff3333">0</div><div class="stat-mini-label">At Risk</div></div></div>
                            <div class="col-md-3 col-6 mb-2"><div class="stat-mini"><div class="stat-mini-val" id="dmsmsResolved" style="color:#00aaff">0</div><div class="stat-mini-label">Resolved</div></div></div>
                            <div class="col-md-3 col-6 mb-2"><div class="stat-mini"><div class="stat-mini-val" id="dmsmsCost" style="color:#ffa500">$0</div><div class="stat-mini-label">Est. Resolution Cost</div></div></div>
                        </div>
                        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:1rem">
                            <button onclick="exportDMSMS()" class="btn btn-sm" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px;"><i class="fas fa-download"></i> Export DMSMS Report</button>
                            <button onclick="anchorDMSMS()" class="btn btn-sm" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px;"><i class="fas fa-anchor"></i> Anchor to XRPL ($0.01 SLS)</button>
                        </div>
                    </div>
                </div>

                <div class="ils-hub-panel" id="hub-readiness">
                    <div class="demo-card">
                        <h3 style="display:flex;align-items:center;gap:8px"><i class="fas fa-chart-line" style="color:var(--accent)"></i> Operational Readiness Calculator <button onclick="showAddActionModal('readiness')" class="ai-quick-btn" style="margin-left:auto;font-size:0.72rem;padding:4px 10px"><i class="fas fa-plus"></i> Action Item</button></h3>
                        <p style="color:var(--steel);font-size:0.9rem;margin-bottom:0.5rem">Calculate Operational Availability (Ao), Mean Time Between Failures (MTBF), Mean Time To Repair (MTTR), and Mean Logistics Delay Time (MLDT). Per MIL-STD-1388-2B and DoDI 5000.02.</p>
                        <details style="margin-bottom:1rem;background:rgba(0,170,255,0.06);border:1px solid rgba(0,170,255,0.15);border-radius:3px;padding:0 12px;">
                            <summary style="cursor:pointer;padding:10px 0;color:#00aaff;font-weight:600;font-size:0.85rem;"><i class="fas fa-info-circle"></i> How It Works — Data Sources & S4 Ledger Value</summary>
                            <div style="padding:0 0 12px;color:var(--steel);font-size:0.82rem;line-height:1.6;">
                                <p><strong style="color:#fff;">What's real:</strong> The formula <code style='color:#00aaff'>Ao = MTBF / (MTBF + MTTR + MLDT)</code> is the actual DoD standard calculation. The MTBF/MTTR/MLDT values pre-loaded for each system are <em>representative ranges</em> based on published data for those system types (e.g., gas turbines average 2000-5000 hr MTBF, radar systems 600-1800 hr).</p>
                                <p><strong style="color:#ffa500;">What's demo data:</strong> The specific MTBF/MTTR/MLDT numbers are representative but NOT from actual FRACAS (Failure Reporting, Analysis and Corrective Action System) databases. Real values come from fleet maintenance data (3-M system for Navy).</p>
                                <p><strong style="color:#00aaff;">How S4 Ledger saves money here:</strong> Readiness calculations drive billions in sustainment spending. When you compute an Ao and anchor it to the XRP Ledger, you create a <em>timestamped, tamper-proof record</em> that this system had X% availability on this date. This matters for: (1) Contract performance metrics — proving a system met its KPP/KSA readiness threshold, (2) Milestone decision briefings — anchored readiness reports can't be retroactively altered, (3) DMSMS correlation — linking obsolescence events to readiness drops to justify resolution funding.</p>
                                <p><strong style="color:#00aaff;">Production mode:</strong> Input your actual FRACAS/3-M data. The fields are editable — type in real MTBF/MTTR/MLDT values from your program's RAM analysis. Export the report, anchor the hash. That hash becomes permanent proof of the calculation.</p>
                            </div>
                        </details>
                        <div class="row">
                            <div class="col-md-6">
                                <label>Select Program</label>
                                <select id="readinessProgram" class="form-select mb-2"  onchange="loadReadinessData()"></select>
                                <div class="row mb-2">
                                    <div class="col-6"><input type="text" id="readinessHull" class="form-control" placeholder="Hull # / Tail #" style="background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.08);font-size:0.85rem"></div>
                                    <div class="col-6"><input type="text" id="readinessOffice" class="form-control" placeholder="Program Office" style="background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.08);font-size:0.85rem"></div>
                                </div>
                                <label>Select System / Subsystem</label>
                                <select id="readinessSystem" class="form-select mb-2"  onchange="calcReadiness()"></select>
                            </div>
                            <div class="col-md-6">
                                <label>MTBF (hours) — Mean Time Between Failures</label>
                                <input type="number" id="inputMTBF" class="form-control mb-2"  placeholder="e.g., 2400" oninput="calcReadiness()">
                                <label>MTTR (hours) — Mean Time To Repair</label>
                                <input type="number" id="inputMTTR" class="form-control mb-2"  placeholder="e.g., 4.5" oninput="calcReadiness()">
                                <label>MLDT (hours) — Mean Logistics Delay Time</label>
                                <input type="number" id="inputMLDT" class="form-control mb-2"  placeholder="e.g., 24" oninput="calcReadiness()">
                            </div>
                        </div>
                        <div id="readinessOutput" style="margin-top:1rem"></div>
                        <div class="row mt-3">
                            <div class="col-md-3 col-6 mb-2"><div class="stat-mini"><div class="stat-mini-val" id="statAo" style="color:#00aaff">—</div><div class="stat-mini-label">Ao (Operational Avail.)</div></div></div>
                            <div class="col-md-3 col-6 mb-2"><div class="stat-mini"><div class="stat-mini-val" id="statAi">—</div><div class="stat-mini-label">Ai (Inherent Avail.)</div></div></div>
                            <div class="col-md-3 col-6 mb-2"><div class="stat-mini"><div class="stat-mini-val" id="statFailRate">—</div><div class="stat-mini-label">Failure Rate (λ)</div></div></div>
                            <div class="col-md-3 col-6 mb-2"><div class="stat-mini"><div class="stat-mini-val" id="statMissReady">—</div><div class="stat-mini-label">Mission Readiness</div></div></div>
                        </div>
                        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:1rem">
                            <button onclick="exportReadiness()" class="btn btn-sm" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px;"><i class="fas fa-download"></i> Export RAM Report</button>
                            <button onclick="anchorReadiness()" class="btn btn-sm" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px;"><i class="fas fa-anchor"></i> Anchor to XRPL ($0.01 SLS)</button>
                        </div>
                    </div>
                </div>


                <div class="ils-hub-panel" id="hub-roi">
                    <div class="demo-card">
                        <h3 style="display:flex;align-items:center;gap:8px"><i class="fas fa-dollar-sign" style="color:var(--accent)"></i> S4 Ledger ROI Calculator <button onclick="showAddActionModal('roi')" class="ai-quick-btn" style="margin-left:auto;font-size:0.72rem;padding:4px 10px"><i class="fas fa-plus"></i> Action Item</button></h3>
                        <p style="color:var(--steel);font-size:0.9rem;margin-bottom:0.5rem">Calculate the return on investment from implementing S4 Ledger across your ILS, DMSMS, and readiness programs. Compare manual processes vs. automated blockchain-backed document management.</p>
                        <details style="margin-bottom:1rem;background:rgba(0,170,255,0.06);border:1px solid rgba(0,170,255,0.15);border-radius:3px;padding:0 12px;">
                            <summary style="cursor:pointer;padding:10px 0;color:#00aaff;font-weight:600;font-size:0.85rem;"><i class="fas fa-info-circle"></i> How It Works — What These Numbers Mean</summary>
                            <div style="padding:0 0 12px;color:var(--steel);font-size:0.82rem;line-height:1.6;">
                                <p><strong style="color:#fff;">This calculator is a sales tool.</strong> Input YOUR program's real numbers (how many programs, how many staff, what you pay them) and it shows the cost savings from automating manual ILS work with S4 Ledger.</p>
                                <p><strong style="color:#00aaff;">Where the savings come from:</strong></p>
                                <ul style="margin:4px 0 8px 16px;">
                                    <li><strong>Labor automation (65%):</strong> S4 Ledger automates document hashing, record tracking, DRL status tracking, and compliance checklist management. Tasks that take an ILS manager hours (verifying a CDRL was delivered, checking a supply receipt against the contract) become one-click operations with XRPL-anchored proof.</li>
                                    <li><strong>Error reduction (90%):</strong> Manual data entry into spreadsheets causes errors. Mistyped NSNs, wrong CAGE codes, duplicated PO entries — each costs thousands in rework, re-procurement, or failed audits. Automated hashing eliminates transcription errors.</li>
                                    <li><strong>Audit cost reduction (70%):</strong> Instead of gathering evidence for weeks before a DCMA or DLA audit, S4 Ledger provides instant proof via XRPL hashes. The auditor can verify any record's integrity in seconds.</li>
                                    <li><strong>Compliance acceleration:</strong> Per-program value of faster CDRL delivery, reduced contract risk, and avoided schedule delays from documentation gaps.</li>
                                </ul>
                                <p><strong style="color:#00aaff;">All inputs are editable.</strong> Change them to match your actual program. The output updates in real time. Use it in proposals or briefings to show the business case for S4 Ledger.</p>
                            </div>
                        </details>
                        <div class="row">
                            <div class="col-md-6">
                                <label>Number of Programs Managed</label>
                                <input type="number" id="roiPrograms" class="form-control mb-2"  placeholder="e.g., 5" value="5" oninput="calcROI()">
                                <label>Average Records / Month (per program)</label>
                                <input type="number" id="roiRecords" class="form-control mb-2"  placeholder="e.g., 200" value="200" oninput="calcROI()">
                                <label>ILS Staff (FTEs doing manual work)</label>
                                <input type="number" id="roiFTEs" class="form-control mb-2"  placeholder="e.g., 8" value="8" oninput="calcROI()">
                                <label>Average Fully-Burdened Labor Rate ($/hr)</label>
                                <input type="number" id="roiRate" class="form-control mb-2"  placeholder="e.g., 145" value="145" oninput="calcROI()">
                            </div>
                            <div class="col-md-6">
                                <label>Current Annual Audit Cost ($)</label>
                                <input type="number" id="roiAudit" class="form-control mb-2"  placeholder="e.g., 250000" value="250000" oninput="calcROI()">
                                <label>Average Rework/Error Cost per Incident ($)</label>
                                <input type="number" id="roiError" class="form-control mb-2"  placeholder="e.g., 8500" value="8500" oninput="calcROI()">
                                <label>Estimated Error Incidents / Year</label>
                                <input type="number" id="roiIncidents" class="form-control mb-2"  placeholder="e.g., 35" value="35" oninput="calcROI()">
                                <label>S4 Ledger Annual License Cost ($)</label>
                                <input type="number" id="roiLicense" class="form-control mb-2"  placeholder="e.g., 120000" value="120000" oninput="calcROI()">
                            </div>
                        </div>
                        <div id="roiOutput" style="margin-top:1rem"></div>
                        <div class="row mt-3">
                            <div class="col-md-3 col-6 mb-2"><div class="stat-mini"><div class="stat-mini-val" id="roiSavings" style="color:#00aaff">—</div><div class="stat-mini-label">Annual Savings</div></div></div>
                            <div class="col-md-3 col-6 mb-2"><div class="stat-mini"><div class="stat-mini-val" id="roiPercent">—</div><div class="stat-mini-label">ROI %</div></div></div>
                            <div class="col-md-3 col-6 mb-2"><div class="stat-mini"><div class="stat-mini-val" id="roiPayback" style="color:#00aaff">—</div><div class="stat-mini-label">Payback Period</div></div></div>
                            <div class="col-md-3 col-6 mb-2"><div class="stat-mini"><div class="stat-mini-val" id="roi5Year" style="color:#00aaff">—</div><div class="stat-mini-label">5-Year Net Savings</div></div></div>
                        </div>
                        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:1rem">
                            <button onclick="exportROI()" class="btn btn-sm" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px;"><i class="fas fa-download"></i> Export ROI Report</button>
                            <button onclick="anchorROI()" class="btn btn-sm" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px;"><i class="fas fa-anchor"></i> Anchor to XRPL ($0.01 SLS)</button>
                        </div>
                    </div>
                </div>

                <div class="ils-hub-panel" id="hub-lifecycle">
                    <div class="demo-card">
                        <h3 style="display:flex;align-items:center;gap:8px"><i class="fas fa-clock" style="color:var(--accent)"></i> Lifecycle Cost Estimator <button onclick="showAddActionModal('lifecycle')" class="ai-quick-btn" style="margin-left:auto;font-size:0.72rem;padding:4px 10px"><i class="fas fa-plus"></i> Action Item</button></h3>
                        <p style="color:var(--steel);font-size:0.9rem;margin-bottom:0.5rem">Project total ownership cost (TOC) over a weapon system's lifecycle. Factors in sustainment, DMSMS resolution, tech refresh, and depot maintenance per DoD 5000.73 and MIL-STD-881F.</p>
                        <details style="margin-bottom:1rem;background:rgba(0,170,255,0.04);border:1px solid rgba(0,170,255,0.15);border-radius:3px;padding:0 12px;">
                            <summary style="cursor:pointer;padding:10px 0;color:#00aaff;font-weight:600;font-size:0.85rem;"><i class="fas fa-info-circle"></i> How It Works — Understanding Total Ownership Cost</summary>
                            <div style="padding:0 0 12px;color:var(--steel);font-size:0.82rem;line-height:1.6;">
                                <p><strong style="color:#fff;">What this tool does:</strong> It calculates how much a weapon system costs over its ENTIRE life — not just the sticker price. The DoD famously spends 60-70% of a system's total cost AFTER it's built, on sustainment, repairs, and obsolescence. This tool breaks that down.</p>
                                <p><strong style="color:#00aaff;">What the numbers mean:</strong></p>
                                <ul style="margin:4px 0 8px 16px;">
                                    <li><strong>Acquisition:</strong> What you pay upfront — unit cost × fleet size. For a DDG-51 Flight III, that's roughly $2.2B per ship × 20 ships = ~$44B.</li>
                                    <li><strong>Sustainment (O&S):</strong> Annual maintenance, crew, parts, depot work — typically 6-10% of acquisition cost <em>per year</em>, over 30+ years. This is where most money goes.</li>
                                    <li><strong>DMSMS/Obsolescence:</strong> Parts go out of production. Redesigning circuits, finding new vendors, bridge buys — estimated at ~4% of acquisition per year. Over 30 years for a fleet of destroyers, this can be billions.</li>
                                    <li><strong>Tech Refresh:</strong> Every ~5 years, major systems need upgrades (new radar software, engine overhauls, avionics refreshes) — estimated at 2% of acquisition per cycle.</li>
                                    <li><strong>Cost per Op Hour:</strong> Total cost divided by total operating hours across the fleet — what it costs to operate this system for one hour.</li>
                                </ul>
                                <p><strong style="color:#00aaff;">How S4 Ledger saves money here:</strong> S4 Ledger doesn't change acquisition costs — those are fixed. It reduces sustainment and DMSMS costs by 15-25%. How? (1) Automated DMSMS tracking catches obsolescence earlier, before emergency bridge buys at premium prices, (2) Anchored maintenance records reduce duplicate work orders and audit overhead, (3) Parts cross-referencing with anchored provenance prevents counterfeit part insertion — a single counterfeit electronic part in a radar system can cost $3-5M to find and remediate.</p>
                                <p><strong style="color:#ffa500;">Input your own data:</strong> Change the unit cost, fleet size, service life, and sustainment rate to match your actual program. The defaults (85M, 20 units, 30 years, 8%) are representative of a mid-size Navy combatant.</p>
                            </div>
                        </details>
                        <div class="row">
                            <div class="col-md-6">
                                <label>Select Program</label>
                                <select id="lifecycleProgram" class="form-select mb-2"  onchange="calcLifecycle()"></select>
                                <div class="row mb-2">
                                    <div class="col-6"><input type="text" id="lifecycleHull" class="form-control" placeholder="Hull # / Tail #" style="background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.08);font-size:0.85rem"></div>
                                    <div class="col-6"><input type="text" id="lifecycleOffice" class="form-control" placeholder="Program Office" style="background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.08);font-size:0.85rem"></div>
                                </div>
                                <label>Planned Service Life (years)</label>
                                <input type="number" id="lcServiceLife" class="form-control mb-2"  placeholder="30" value="30" oninput="calcLifecycle()">
                                <label>Annual Operating Hours</label>
                                <input type="number" id="lcOpHours" class="form-control mb-2"  placeholder="2500" value="2500" oninput="calcLifecycle()">
                            </div>
                            <div class="col-md-6">
                                <label>Acquisition Unit Cost ($M)</label>
                                <input type="number" id="lcAcqCost" class="form-control mb-2"  placeholder="85" value="85" oninput="calcLifecycle()" step="0.1">
                                <label>Fleet Size (number of units)</label>
                                <input type="number" id="lcFleetSize" class="form-control mb-2"  placeholder="20" value="20" oninput="calcLifecycle()">
                                <label>Annual Sustainment Rate (% of acquisition)</label>
                                <input type="number" id="lcSustRate" class="form-control mb-2"  placeholder="8" value="8" oninput="calcLifecycle()" step="0.1">
                            </div>
                        </div>
                        <div id="lifecycleOutput" style="margin-top:1rem"></div>
                        <div class="row mt-3">
                            <div class="col-md-3 col-6 mb-2"><div class="stat-mini"><div class="stat-mini-val" id="lcTotalCost" style="color:#00aaff">—</div><div class="stat-mini-label">Total Ownership Cost</div></div></div>
                            <div class="col-md-3 col-6 mb-2"><div class="stat-mini"><div class="stat-mini-val" id="lcSustCost" style="color:#00aaff">—</div><div class="stat-mini-label">Sustainment (O&S)</div></div></div>
                            <div class="col-md-3 col-6 mb-2"><div class="stat-mini"><div class="stat-mini-val" id="lcDmsmsCost" style="color:#ff3333">—</div><div class="stat-mini-label">DMSMS/Obsol. Cost</div></div></div>
                            <div class="col-md-3 col-6 mb-2"><div class="stat-mini"><div class="stat-mini-val" id="lcCostPerHr" style="color:#00aaff">—</div><div class="stat-mini-label">Cost per Op Hour</div></div></div>
                        </div>
                        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:1rem">
                            <button onclick="exportLifecycle()" class="btn btn-sm" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px;"><i class="fas fa-download"></i> Export Lifecycle Report</button>
                            <button onclick="anchorLifecycle()" class="btn btn-sm" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px;"><i class="fas fa-anchor"></i> Anchor to XRPL ($0.01 SLS)</button>
                        </div>
                    </div>
                </div>


            <!-- ═══ AUDIT RECORD VAULT ═══ -->
            <div class="ils-hub-panel" id="hub-vault">
                <!-- ── Digital Thread Traceability (Competitive Differentiator) ── -->
                <div id="digitalThreadPanel" style="margin-bottom:16px;background:linear-gradient(135deg,rgba(0,170,255,0.04),rgba(155,89,182,0.03));border:1px solid rgba(155,89,182,0.2);border-radius:3px;padding:16px;">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
                        <div style="font-size:0.82rem;font-weight:700;color:#9b59b6;text-transform:uppercase;letter-spacing:0.8px;display:flex;align-items:center;gap:6px;"><i class="fas fa-project-diagram"></i> Digital Thread — Full Provenance Chain</div>
                        <div style="display:flex;align-items:center;gap:8px;">
                            <select id="digitalThreadRecordSelect" onchange="showDigitalThreadFromSelect()" style="background:#0a0e1a;color:#fff;border:1px solid rgba(155,89,182,0.3);border-radius:3px;padding:4px 10px;font-size:0.75rem;max-width:240px;">
                                <option value="">— Select a vault record —</option>
                            </select>
                            <button onclick="closeDigitalThread()" style="background:none;border:none;color:var(--steel);cursor:pointer;font-size:0.8rem;"><i class="fas fa-times"></i></button>
                        </div>
                    </div>
                    <div id="digitalThreadContent" style="font-size:0.82rem;"></div>
                </div>
                <div class="demo-card glass-card" style="animation:slideUp 0.4s ease">
                    <div class="hub-tool-header">
                        <h4><i class="fas fa-vault" style="color:var(--accent);margin-right:8px"></i> Audit Record Vault</h4>
                        <button onclick="showAddActionModal('vault')" class="ai-quick-btn" style="font-size:0.72rem;padding:4px 10px"><i class="fas fa-plus"></i> Action Item</button>
                        <div style="display:flex;align-items:center;gap:6px;margin-left:auto;"><span class="pulse-dot"></span><span style="font-size:0.75rem;color:var(--accent);font-weight:600">LIVE</span></div>
                    </div>
                    <p style="color:var(--muted);font-size:0.85rem;margin-bottom:16px">Every record you anchor is stored here with its hash, original content preview, timestamp, and verification status — your single source of auditing proof. No more searching the XRPL manually.</p>

                    <details style="margin-bottom:1rem;background:rgba(0,170,255,0.06);border:1px solid rgba(201,168,76,0.15);border-radius:3px;padding:0 12px;">
                        <summary style="cursor:pointer;padding:10px 0;color:#00aaff;font-weight:600;font-size:0.85rem;"><i class="fas fa-info-circle"></i> How It Works — Data Sources & S4 Ledger Value</summary>
                        <div style="padding:0 0 12px;color:var(--steel);font-size:0.82rem;line-height:1.6;">
                            <p><strong style="color:#fff;">What's real:</strong> Every record you anchor from any tool (Anchor tab, DMSMS, Readiness, Lifecycle, Warranty, ROI, Parts, Gap Analysis) is automatically saved here with its SHA-256 hash, content preview, timestamp, record type, and XRPL transaction ID. This is your <strong>permanent audit trail</strong> — like a filing cabinet that's also blockchain-verified.</p>
                            <p><strong style="color:#00aaff;">Data Storage:</strong> Records are stored in your browser's localStorage for this session and sync across tabs. In your organization's deployment, records sync to a secure database with role-based access, retention policies, and automated backup.</p>
                            <p><strong style="color:#00aaff;">How S4 Ledger saves money here:</strong> Defense programs spend $50K-$200K annually on manual audit trail compilation for IG inspections, DCMA reviews, and milestone briefings. The vault auto-compiles every anchored record with one-click re-verification and instant CSV/XLSX export. No more searching the XRPL manually, no more lost audit evidence, no more "we can't prove when we documented this."</p>
                            <p><strong style="color:#00aaff;">How S4 Ledger saves time on audits:</strong> Traditional audit preparation takes 2-6 weeks of staff time per inspection — gathering records from multiple systems, verifying document versions, compiling evidence binders. The Audit Record Vault reduces this to minutes. Every anchored record is instantly searchable, filterable by time period (today, this week, this month, this year, or any custom range), and re-verifiable against the XRPL with one click. Auditors can independently verify any record's integrity without requesting original documents from the contractor. Government estimates show S4 Ledger can reduce audit preparation labor by 85-95%.</p>
                            <p><strong style="color:#00aaff;">Production mode:</strong> Connect to your organizational database via the S4 API. Records sync across all users with the same program access. Export formats include CSV, XLSX, and PDF for formal audit submissions. Each record's TX Hash links directly to the XRPL public ledger for independent verification.</p>
                        </div>
                    </details>

                    <!-- Vault Stats -->
                    <div class="vault-stats" id="vaultStats">
                        <div class="vault-stat hover-lift"><div class="stat-val stat-animate" id="vaultTotal">0</div><div class="stat-lbl">Total Records</div></div>
                        <div class="vault-stat hover-lift"><div class="stat-val stat-animate" id="vaultVerified">0</div><div class="stat-lbl">Verified</div></div>
                        <div class="vault-stat hover-lift"><div class="stat-val stat-animate" id="vaultTypes">0</div><div class="stat-lbl">Record Types</div></div>
                        <div class="vault-stat hover-lift"><div class="stat-val stat-animate" id="vaultFees">$0.00</div><div class="stat-lbl">$SLS Spent</div></div>
                    </div>

                    <!-- Search & Filter -->
                    <div style="display:flex;gap:8px;margin-bottom:14px;flex-wrap:wrap">
                        <input type="text" id="vaultSearch" class="form-control" aria-label="Search vault records" style="flex:1;min-width:200px;background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.1);border-radius:3px;padding:8px 14px;font-size:0.85rem" placeholder="Search records by type, hash, content..." oninput="_vaultPage=1;renderVault()">
                        <select id="vaultFilter" class="form-select" style="width:auto;background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.1);border-radius:3px;padding:8px 14px;font-size:0.85rem" onchange="_vaultPage=1;renderVault()">
                            <option value="all">All Records</option>
                            <option value="today">Today</option>
                            <option value="week">This Week</option>
                            <option value="last_week">Last Week</option>
                            <option value="month">This Month</option>
                            <option value="last_month">Last Month</option>
                            <option value="year">This Year</option>
                            <option value="last_year">Last Year</option>
                        </select>
                    </div>

                    <!-- Bulk Selection Bar -->
                    <div id="vaultBulkBar" style="display:none;background:rgba(0,170,255,0.06);border:1px solid rgba(0,170,255,0.15);border-radius:3px;padding:8px 14px;margin-bottom:10px;align-items:center;gap:10px;flex-wrap:wrap">
                        <label style="display:flex;align-items:center;gap:6px;cursor:pointer;font-size:0.82rem;color:#ccc;margin:0">
                            <input type="checkbox" id="vaultSelectAll" onchange="toggleVaultSelectAll(this.checked)" style="accent-color:#00aaff"> <span id="vaultSelectedCount">0</span> selected
                        </label>
                        <div style="margin-left:auto;display:flex;gap:6px">
                            <button onclick="bulkVaultExport('csv')" class="btn btn-sm" style="background:rgba(0,170,255,0.1);color:#00aaff;border:1px solid rgba(0,170,255,0.2);border-radius:3px;padding:4px 10px;font-size:0.75rem"><i class="fas fa-file-csv"></i> Export Selected</button>
                            <button onclick="bulkVaultVerify()" class="btn btn-sm" style="background:rgba(0,170,255,0.1);color:#00aaff;border:1px solid rgba(0,170,255,0.2);border-radius:3px;padding:4px 10px;font-size:0.75rem"><i class="fas fa-check-double"></i> Re-Verify Selected</button>
                            <button onclick="openCompareView()" class="btn btn-sm" style="background:rgba(201,168,76,0.1);color:#c9a84c;border:1px solid rgba(201,168,76,0.2);border-radius:3px;padding:4px 10px;font-size:0.75rem"><i class="fas fa-code-compare"></i> Compare (2)</button>
                            <button onclick="bulkVaultDelete()" class="btn btn-sm" style="background:rgba(255,51,51,0.08);color:#ff3333;border:1px solid rgba(255,51,51,0.2);border-radius:3px;padding:4px 10px;font-size:0.75rem"><i class="fas fa-trash"></i> Delete Selected</button>
                        </div>
                    </div>

                    <!-- Record List -->
                    <div id="vaultRecords" style="max-height:500px;overflow-y:auto;padding-right:4px">
                        <div style="text-align:center;padding:40px 20px;color:var(--muted)">
                            <i class="fas fa-vault" style="font-size:2.5rem;margin-bottom:12px;opacity:0.3"></i>
                            <p>No anchored records yet. Records will appear here automatically as you anchor them.</p>
                        </div>
                    </div>

                    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:1rem">
                        <button onclick="exportVault('csv')" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px"><i class="fas fa-file-csv"></i> Export CSV</button>
                        <button onclick="exportVault('xlsx')" class="btn btn-sm hover-lift" style="background:rgba(255,255,255,0.08);color:#fff;border:none;border-radius:3px;padding:8px 16px;font-weight:700"><i class="fas fa-file-excel"></i> Export XLSX</button>
                        <button onclick="verifyAllVault()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px"><i class="fas fa-check-double"></i> Re-Verify All</button>
                        <button onclick="clearVault()" class="btn btn-sm" style="background:rgba(255,51,51,0.1);color:#ff3333;border:1px solid rgba(255,51,51,0.3);border-radius:3px;padding:8px 16px"><i class="fas fa-trash"></i> Clear Vault</button>
                    </div>

                    <!-- Pagination Controls -->
                    <div id="vaultPagination" style="display:none;margin-top:12px;align-items:center;justify-content:center;gap:8px">
                        <button onclick="vaultPagePrev()" class="btn btn-sm" style="background:rgba(255,255,255,0.06);color:#ccc;border:1px solid rgba(255,255,255,0.1);border-radius:3px;padding:4px 12px;font-size:0.78rem"><i class="fas fa-chevron-left"></i> Prev</button>
                        <span id="vaultPageInfo" style="font-size:0.78rem;color:#888"></span>
                        <button onclick="vaultPageNext()" class="btn btn-sm" style="background:rgba(255,255,255,0.06);color:#ccc;border:1px solid rgba(255,255,255,0.1);border-radius:3px;padding:4px 12px;font-size:0.78rem">Next <i class="fas fa-chevron-right"></i></button>
                    </div>

                    <!-- Vault Analytics Dashboard -->
                    <div id="vaultMetricsDashboard" style="margin-top:1rem;background:linear-gradient(135deg,rgba(0,170,255,0.04),rgba(201,168,76,0.03));border:1px solid rgba(0,170,255,0.15);border-radius:3px;padding:16px;">
                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
                            <div style="font-size:0.82rem;font-weight:700;color:#00aaff;text-transform:uppercase;letter-spacing:0.8px;display:flex;align-items:center;gap:6px;"><i class="fas fa-chart-bar"></i> Vault Analytics</div>
                            <button onclick="refreshVaultMetrics()" style="background:rgba(0,170,255,0.1);color:#00aaff;border:1px solid rgba(0,170,255,0.2);border-radius:3px;padding:3px 10px;font-size:0.72rem;cursor:pointer;font-weight:600"><i class="fas fa-sync-alt"></i> Refresh</button>
                        </div>
                        <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px;" id="vaultMetricsGrid">
                            <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:10px;text-align:center">
                                <div style="font-size:1.1rem;font-weight:800;color:#00aaff" id="vmRecordCount">0</div>
                                <div style="font-size:0.68rem;color:var(--steel);text-transform:uppercase;letter-spacing:0.5px">Records</div>
                            </div>
                            <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:10px;text-align:center">
                                <div style="font-size:1.1rem;font-weight:800;color:#c9a84c" id="vmStorageKB">0 KB</div>
                                <div style="font-size:0.68rem;color:var(--steel);text-transform:uppercase;letter-spacing:0.5px">Storage</div>
                            </div>
                            <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:10px;text-align:center">
                                <div style="font-size:1.1rem;font-weight:800;color:#00aaff" id="vmUniqueTypes">0</div>
                                <div style="font-size:0.68rem;color:var(--steel);text-transform:uppercase;letter-spacing:0.5px">Unique Types</div>
                            </div>
                            <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:10px;text-align:center">
                                <div style="font-size:1.1rem;font-weight:800;color:#c9a84c" id="vmLatestRecord">—</div>
                                <div style="font-size:0.68rem;color:var(--steel);text-transform:uppercase;letter-spacing:0.5px">Latest</div>
                            </div>
                            <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:10px;text-align:center">
                                <div style="font-size:1.1rem;font-weight:800;color:#9b59b6" id="vmRenderMs">0 ms</div>
                                <div style="font-size:0.68rem;color:var(--steel);text-transform:uppercase;letter-spacing:0.5px">Render Time</div>
                            </div>
                            <div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:10px;text-align:center">
                                <div style="font-size:1.1rem;font-weight:800;color:#f39c12" id="vmAvgRecordSize">0 B</div>
                                <div style="font-size:0.68rem;color:var(--steel);text-transform:uppercase;letter-spacing:0.5px">Avg Record</div>
                            </div>
                        </div>
                        <div id="vmTypeBreakdown" style="margin-top:10px;font-size:0.75rem;color:var(--steel)"></div>
                    </div>

                    <!-- Vault Stress Test Tool -->
                    <details style="margin-top:1rem;background:rgba(201,168,76,0.04);border:1px solid rgba(201,168,76,0.15);border-radius:3px;padding:0 12px;">
                        <summary style="cursor:pointer;padding:10px 0;color:#c9a84c;font-weight:600;font-size:0.82rem"><i class="fas fa-vial" style="margin-right:6px"></i> Vault Stress Test & Capacity Tool</summary>
                        <div style="padding:0 0 14px">
                            <p style="color:var(--steel);font-size:0.78rem;margin-bottom:12px">Generate synthetic records to test vault performance at scale. Records are generated locally and stored in localStorage. Useful for benchmarking query speed, rendering performance, and export capability with large datasets.</p>
                            <div style="display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin-bottom:10px">
                                <select id="stressTestCount" style="background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.1);border-radius:3px;padding:6px 12px;font-size:0.82rem">
                                    <option value="100">100 Records</option>
                                    <option value="500">500 Records</option>
                                    <option value="1000" selected>1,000 Records</option>
                                    <option value="5000">5,000 Records</option>
                                    <option value="10000">10,000 Records</option>
                                    <option value="50000">50,000 Records</option>
                                    <option value="100000">100,000 Records</option>
                                </select>
                                <button onclick="runVaultStressTest()" class="btn btn-sm" style="background:linear-gradient(135deg,#c9a84c,#a8893d);color:#fff;border:none;border-radius:3px;padding:6px 16px;font-size:0.82rem;font-weight:600"><i class="fas fa-bolt"></i> Run Stress Test</button>
                                <button onclick="clearStressTestRecords()" class="btn btn-sm" style="background:rgba(255,255,255,0.06);color:#888;border:1px solid rgba(255,255,255,0.1);border-radius:3px;padding:6px 12px;font-size:0.78rem"><i class="fas fa-broom"></i> Clear Test Records</button>
                            </div>
                            <div id="stressTestResults" style="display:none;background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:12px;font-size:0.78rem;color:var(--steel)"></div>
                        </div>
                    </details>
                </div>
            </div>

            <!-- ═══ DEFENSE DOCUMENT REFERENCE LIBRARY ═══ -->
            <div class="ils-hub-panel" id="hub-docs">
                <div class="demo-card glass-card" style="animation:slideUp 0.4s ease">
                    <div class="hub-tool-header">
                        <h4><i class="fas fa-book-open" style="color:var(--accent);margin-right:8px"></i> Defense Document Library</h4>
                        <span id="docCount" style="font-size:0.78rem;color:var(--muted)"></span>
                        <button onclick="showAddActionModal('docs')" class="ai-quick-btn" style="margin-left:auto;font-size:0.72rem;padding:4px 10px"><i class="fas fa-plus"></i> Action Item</button>
                    </div>
                    <p style="color:var(--muted);font-size:0.85rem;margin-bottom:16px">Searchable reference library of MIL-STDs, OPNAVINSTs, DoD Directives, DFARS clauses, NIST standards, and service-specific regulations. Quick-reference while you work — no tab-switching needed.</p>

                    <details style="margin-bottom:1rem;background:rgba(0,170,255,0.04);border:1px solid rgba(0,170,255,0.15);border-radius:3px;padding:0 12px;">
                        <summary style="cursor:pointer;padding:10px 0;color:#00aaff;font-weight:600;font-size:0.85rem;"><i class="fas fa-info-circle"></i> How It Works — Data Sources & S4 Ledger Value</summary>
                        <div style="padding:0 0 12px;color:var(--steel);font-size:0.82rem;line-height:1.6;">
                            <p><strong style="color:#fff;">What's real:</strong> All 100+ documents are <strong>real defense standards and regulations</strong> — MIL-STD-1388, MIL-HDBK-502, OPNAVINST 4790.16, COMDTINST M4000.13, Army AR 700-127, AFI 63-101, MCO 4105.2, DFARS 252.204-7012, NIST SP 800-171, and more. Links go to official DoD, NAVSEA, DLA, and NIST sources.</p>
                            <p><strong style="color:#ffa500;">What's demo data:</strong> The document library itself is fully real — these are the actual standards ILS managers reference daily. No simulated content. The only "demo" aspect is that the library is static; production mode adds your organization's internal documents, SOPs, and program-specific references.</p>
                            <p><strong style="color:#00aaff;">How S4 Ledger saves money here:</strong> ILS managers waste 15-30 minutes per reference lookup, switching between tabs, Googling document numbers, and tracking down the latest revision. With 100+ standards pre-loaded and searchable by category, branch, keywords, and document ID, you find the right standard in seconds — while working in the same tool where you're running analysis. Across a program office, this saves 200+ hours/year in reference lookup time.</p>
                            <p><strong style="color:#00aaff;">Production mode:</strong> Add your organization's internal documents via the S4 API. Create custom categories. Upload program-specific SOPs, instructions, and contract documents. The library becomes your program's searchable knowledge base — always available, always current.</p>
                        </div>
                    </details>

                    <!-- Search & Filters -->
                    <div style="display:flex;gap:8px;margin-bottom:10px;flex-wrap:wrap">
                        <input type="text" id="docSearch" class="form-control" aria-label="Search document library" style="flex:1;min-width:200px;background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.1);border-radius:3px;padding:8px 14px;font-size:0.85rem" placeholder="Search by ID, title, keywords... (e.g., MIL-STD-1388, DMSMS, OPNAVINST)" oninput="renderDocLibrary()">
                        <button onclick="showDocUpload()" style="background:rgba(0,170,255,0.1);border:1px solid rgba(0,170,255,0.3);color:var(--accent);border-radius:3px;padding:8px 16px;cursor:pointer;font-size:0.82rem;font-weight:600;white-space:nowrap;display:flex;align-items:center;gap:6px"><i class="fas fa-plus"></i> Add Document</button>
                        <button onclick="showDocVersionUpload()" style="background:rgba(201,168,76,0.1);border:1px solid rgba(201,168,76,0.3);color:#c9a84c;border-radius:3px;padding:8px 16px;cursor:pointer;font-size:0.82rem;font-weight:600;white-space:nowrap;display:flex;align-items:center;gap:6px"><i class="fas fa-brain"></i> Analyze Revision</button>
                        <select id="docBranchFilter" class="form-select" style="width:auto;background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.1);border-radius:3px;padding:8px 14px;font-size:0.85rem" onchange="renderDocLibrary()">
                            <option value="all">All Branches</option>
                            <option value="USN">U.S. Navy</option>
                            <option value="USMC">U.S. Marine Corps</option>
                            <option value="USCG">U.S. Coast Guard</option>
                        </select>
                    </div>
                    <!-- Category Filter Row -->
                    <div class="doc-filter-bar" id="docCatFilters"></div>
                    <div class="doc-counter" id="docResultCount"></div>

                    <!-- Document List -->
                    <div id="docList" style="max-height:600px;overflow-y:auto;padding-right:4px"></div>

                    <!-- ── Template Library ── -->
                    <div style="margin-top:16px;border:1px solid rgba(0,170,255,0.15);border-radius:3px;overflow:hidden">
                        <div onclick="toggleComplianceSection('templates')" style="cursor:pointer;padding:12px 16px;background:rgba(0,170,255,0.06);display:flex;align-items:center;gap:8px">
                            <i class="fas fa-file-signature" style="color:#00aaff"></i>
                            <strong style="color:#fff;font-size:0.92rem">Template Library</strong>
                            <span style="background:#00aaff22;color:#00aaff;padding:2px 8px;border-radius:3px;font-size:0.7rem;font-weight:600">15 TEMPLATES</span>
                            <i id="templatesChevron" class="fas fa-chevron-down" style="margin-left:auto;color:var(--steel);font-size:0.75rem;transition:transform 0.3s"></i>
                        </div>
                        <div id="templatesSection" style="display:none;padding:12px 16px">
                            <p style="color:var(--steel);font-size:0.82rem;margin-bottom:12px">Pre-built document templates for common defense ILS deliverables. Download, customize, and submit.</p>
                            <div style="display:flex;gap:8px;margin-bottom:12px;flex-wrap:wrap">
                                <button onclick="filterTemplates('all')" class="btn btn-sm" style="background:rgba(0,170,255,0.1);color:#00aaff;border:1px solid rgba(0,170,255,0.2);border-radius:3px;padding:4px 12px;font-size:0.78rem">All</button>
                                <button onclick="filterTemplates('contract')" class="btn btn-sm" style="background:rgba(255,255,255,0.04);color:var(--steel);border:1px solid rgba(255,255,255,0.08);border-radius:3px;padding:4px 12px;font-size:0.78rem">Contract</button>
                                <button onclick="filterTemplates('engineering')" class="btn btn-sm" style="background:rgba(255,255,255,0.04);color:var(--steel);border:1px solid rgba(255,255,255,0.08);border-radius:3px;padding:4px 12px;font-size:0.78rem">Engineering</button>
                                <button onclick="filterTemplates('logistics')" class="btn btn-sm" style="background:rgba(255,255,255,0.04);color:var(--steel);border:1px solid rgba(255,255,255,0.08);border-radius:3px;padding:4px 12px;font-size:0.78rem">Logistics</button>
                                <button onclick="filterTemplates('compliance')" class="btn btn-sm" style="background:rgba(255,255,255,0.04);color:var(--steel);border:1px solid rgba(255,255,255,0.08);border-radius:3px;padding:4px 12px;font-size:0.78rem">Compliance</button>
                            </div>
                            <div id="templateList" style="max-height:350px;overflow-y:auto"></div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- ═══ COMPLIANCE SCORECARD ═══ -->
            <div class="ils-hub-panel" id="hub-compliance">
                <div class="demo-card glass-card" style="animation:slideUp 0.4s ease">
                    <div class="hub-tool-header">
                        <h4><i class="fas fa-shield-halved" style="color:var(--accent);margin-right:8px"></i> Compliance Scorecard</h4>
                        <button onclick="showAddActionModal('compliance')" class="ai-quick-btn" style="font-size:0.72rem;padding:4px 10px"><i class="fas fa-plus"></i> Action Item</button>
                        <div style="display:flex;align-items:center;gap:6px;margin-left:auto;"><span class="pulse-dot"></span><span style="font-size:0.75rem;color:var(--accent);font-weight:600">REAL-TIME</span></div>
                    </div>
                    <p style="color:var(--muted);font-size:0.85rem;margin-bottom:16px">Live compliance posture across CMMC, NIST SP 800-171, DFARS, and program-specific requirements. Auto-calculates based on your workspace activity — something SAP, Oracle, and Microsoft don't offer.</p>

                    <details style="margin-bottom:1rem;background:rgba(0,170,255,0.06);border:1px solid rgba(0,170,255,0.15);border-radius:3px;padding:0 12px;">
                        <summary style="cursor:pointer;padding:10px 0;color:#00aaff;font-weight:600;font-size:0.85rem;"><i class="fas fa-info-circle"></i> How It Works — Data Sources & S4 Ledger Value</summary>
                        <div style="padding:0 0 12px;color:var(--steel);font-size:0.82rem;line-height:1.6;">
                            <p><strong style="color:#fff;">What's real:</strong> The compliance frameworks (CMMC Level 2, NIST SP 800-171, DFARS 252.204-7012, FAR 46, MIL-STD-1388 ILS, DoDI 4245.15 DMSMS) are real regulatory requirements that every defense contractor and program office must meet. Your compliance score is calculated from <strong>actual workspace activity</strong> — records anchored, DMSMS items tracked, readiness calculated, warranties monitored, and more.</p>
                            <p><strong style="color:#ffa500;">What's demo data:</strong> The scoring algorithm uses representative weights and thresholds. In production, weights are calibrated to your organization's specific compliance requirements, C3PAO audit criteria, and program-specific CDRL obligations. The score formula is transparent and adjustable.</p>
                            <p><strong style="color:#00aaff;">How S4 Ledger saves money here:</strong> CMMC assessments alone cost $50K-$200K per assessment. Failed assessments cost 6-12 months of schedule delay plus reassessment fees. This scorecard lets you track compliance posture <em>continuously</em> instead of discovering gaps during the assessment. Each compliance data point is blockchain-anchored, so you can prove to auditors exactly when you achieved each milestone — something SAP, Oracle, and Microsoft cannot offer.</p>
                            <p><strong style="color:#00aaff;">Production mode:</strong> Connect your compliance data sources via the S4 API. Map your SPRS score, eMASS data, and internal audit findings to the scorecard. Export compliance snapshots as PDF-ready reports for C3PAOs, DCMA, or IG inspections. Anchor each compliance snapshot to XRPL for immutable proof of your compliance posture at any point in time.</p>
                        </div>
                    </details>

                    <!-- Program Selector -->
                    <div style="margin-bottom:16px">
                        <label style="font-size:0.82rem;color:var(--steel);font-weight:600">Program</label>
                        <select id="complianceProgram" class="form-select" style="background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.1);border-radius:3px;margin-top:4px" onchange="calcCompliance()"></select>
                        <div class="row" style="margin-top:6px">
                            <div class="col-6"><input type="text" id="complianceHull" class="form-control" placeholder="Hull # / Tail #" style="background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.08);font-size:0.85rem"></div>
                            <div class="col-6"><input type="text" id="complianceOffice" class="form-control" placeholder="Program Office" style="background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.08);font-size:0.85rem"></div>
                        </div>
                    </div>

                    <!-- Score Ring -->
                    <div style="text-align:center;margin-bottom:20px">
                        <div class="score-ring" id="complianceRing">
                            <svg width="120" height="120">
                                <circle cx="60" cy="60" r="52" fill="none" stroke="var(--border)" stroke-width="8"/>
                                <circle id="complianceArc" cx="60" cy="60" r="52" fill="none" stroke="url(#scoreGrad)" stroke-width="8" stroke-dasharray="326.7" stroke-dashoffset="326.7" stroke-linecap="round" style="transition:stroke-dashoffset 1.5s cubic-bezier(.4,0,.2,1)"/>
                                <defs><linearGradient id="scoreGrad" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="var(--accent)"/><stop offset="100%" stop-color="var(--green)"/></linearGradient></defs>
                            </svg>
                            <div class="score-val" id="complianceScore">—</div>
                            <div class="score-grade" id="complianceGrade" style="background:linear-gradient(135deg,rgba(0,170,255,0.15),rgba(0,170,255,0.1));color:#00aaff;border:2px solid rgba(0,170,255,0.2)">—</div>
                        </div>
                        <div id="complianceGradeBelow" style="text-align:center;margin:24px 0 8px"><span id="complianceGradeLetter" style="display:inline-block;font-size:1.4rem;font-weight:900;padding:8px 24px;border-radius:3px;letter-spacing:2px;background:rgba(0,170,255,0.1);color:#00aaff;border:2px solid rgba(0,170,255,0.3);min-width:52px;text-align:center;transition:all 0.5s ease">—</span></div>
                        <div style="font-size:0.82rem;color:var(--steel);font-weight:600;margin-top:4px">Overall Compliance Posture</div>
                    </div>

                    <!-- Framework Breakdown -->
                    <div id="complianceBreakdown">
                        <div class="compliance-row"><span class="compliance-label"><i class="fas fa-shield-halved" style="color:#e74c3c;margin-right:8px"></i>CMMC Level 2</span><div class="compliance-bar"><div class="fill" id="barCMMC" style="width:0%;background:linear-gradient(90deg,#e74c3c,#ff6b6b)"></div></div><span class="compliance-pct" id="pctCMMC">—</span></div>
                        <div class="compliance-row"><span class="compliance-label"><i class="fas fa-lock" style="color:#3498db;margin-right:8px"></i>NIST 800-171</span><div class="compliance-bar"><div class="fill" id="barNIST" style="width:0%;background:linear-gradient(90deg,#3498db,#00aaff)"></div></div><span class="compliance-pct" id="pctNIST">—</span></div>
                        <div class="compliance-row"><span class="compliance-label"><i class="fas fa-file-contract" style="color:#00aaff;margin-right:8px"></i>DFARS 252.204</span><div class="compliance-bar"><div class="fill" id="barDFARS" style="width:0%;background:linear-gradient(90deg,#00aaff,#f1c40f)"></div></div><span class="compliance-pct" id="pctDFARS">—</span></div>
                        <div class="compliance-row"><span class="compliance-label"><i class="fas fa-certificate" style="color:#00aaff;margin-right:8px"></i>FAR 46 Quality</span><div class="compliance-bar"><div class="fill" id="barFAR" style="width:0%;background:linear-gradient(90deg,#00aaff,#0088cc)"></div></div><span class="compliance-pct" id="pctFAR">—</span></div>
                        <div class="compliance-row"><span class="compliance-label"><i class="fas fa-cubes" style="color:#9b59b6;margin-right:8px"></i>MIL-STD-1388 ILS</span><div class="compliance-bar"><div class="fill" id="barILS" style="width:0%;background:linear-gradient(90deg,#9b59b6,#c39bd3)"></div></div><span class="compliance-pct" id="pctILS">—</span></div>
                        <div class="compliance-row"><span class="compliance-label"><i class="fas fa-exclamation-triangle" style="color:#ff6b6b;margin-right:8px"></i>DMSMS (DoDI 4245.15)</span><div class="compliance-bar"><div class="fill" id="barDMSMSmgmt" style="width:0%;background:linear-gradient(90deg,#ff6b6b,#ff3333)"></div></div><span class="compliance-pct" id="pctDMSMSmgmt">—</span></div>
                    </div>

                    <!-- Recommendations -->
                    <div style="margin-top:16px">
                        <h5 style="font-size:0.9rem;font-weight:700;color:#fff;margin-bottom:10px"><i class="fas fa-lightbulb" style="color:var(--accent);margin-right:6px"></i> Recommendations</h5>
                        <div id="complianceRecs" style="font-size:0.82rem;color:var(--steel);line-height:1.7"></div>
                    </div>

                    <!-- ── POA&M Tracker ── -->
                    <div style="margin-top:20px;border:1px solid rgba(0,170,255,0.15);border-radius:3px;overflow:hidden">
                        <div onclick="toggleComplianceSection('poam')" style="cursor:pointer;padding:12px 16px;background:rgba(0,170,255,0.06);display:flex;align-items:center;gap:8px">
                            <i class="fas fa-list-check" style="color:#00aaff"></i>
                            <strong style="color:#fff;font-size:0.92rem">POA&M — Plan of Action & Milestones</strong>
                            <span id="poamCount" style="background:#00aaff22;color:#00aaff;padding:2px 8px;border-radius:3px;font-size:0.72rem;font-weight:600">0</span>
                            <i id="poamChevron" class="fas fa-chevron-down" style="margin-left:auto;color:var(--steel);font-size:0.75rem;transition:transform 0.3s"></i>
                        </div>
                        <div id="poamSection" style="display:none;padding:12px 16px">
                            <p style="color:var(--steel);font-size:0.82rem;margin-bottom:12px">Track weaknesses, planned remediations, milestones, and responsible parties per NIST SP 800-53 / OMB A-130 requirements.</p>
                            <div style="display:flex;gap:8px;margin-bottom:12px;flex-wrap:wrap">
                                <button onclick="addPOAM()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:6px 14px;font-size:0.8rem"><i class="fas fa-plus"></i> Add POA&M Item</button>
                                <button onclick="exportPOAM()" class="btn btn-sm hover-lift" style="background:rgba(255,255,255,0.06);color:#fff;border:1px solid rgba(255,255,255,0.1);border-radius:3px;padding:6px 14px;font-size:0.8rem"><i class="fas fa-download"></i> Export POA&M</button>
                            </div>
                            <div id="poamTableWrap" style="overflow-x:auto">
                                <table style="width:100%;border-collapse:collapse;font-size:0.8rem">
                                    <thead>
                                        <tr style="background:rgba(255,255,255,0.03);color:var(--steel)">
                                            <th style="padding:8px;text-align:left;border-bottom:1px solid rgba(255,255,255,0.06)">ID</th>
                                            <th style="padding:8px;text-align:left;border-bottom:1px solid rgba(255,255,255,0.06)">Weakness</th>
                                            <th style="padding:8px;text-align:left;border-bottom:1px solid rgba(255,255,255,0.06)">Control</th>
                                            <th style="padding:8px;text-align:left;border-bottom:1px solid rgba(255,255,255,0.06)">Risk</th>
                                            <th style="padding:8px;text-align:left;border-bottom:1px solid rgba(255,255,255,0.06)">Milestone</th>
                                            <th style="padding:8px;text-align:left;border-bottom:1px solid rgba(255,255,255,0.06)">Due</th>
                                            <th style="padding:8px;text-align:left;border-bottom:1px solid rgba(255,255,255,0.06)">Owner</th>
                                            <th style="padding:8px;text-align:left;border-bottom:1px solid rgba(255,255,255,0.06)">Status</th>
                                            <th style="padding:8px;text-align:center;border-bottom:1px solid rgba(255,255,255,0.06)">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="poamBody"></tbody>
                                </table>
                            </div>
                            <div id="poamEmpty" style="text-align:center;padding:20px;color:var(--steel);font-size:0.82rem"><i class="fas fa-clipboard-check" style="font-size:1.5rem;margin-bottom:8px;display:block;color:rgba(0,170,255,0.3)"></i>No POA&M items yet. Click "Add POA&M Item" to track a weakness.</div>
                        </div>
                    </div>

                    <!-- ── Evidence Manager ── -->
                    <div style="margin-top:12px;border:1px solid rgba(201,168,76,0.15);border-radius:3px;overflow:hidden">
                        <div onclick="toggleComplianceSection('evidence')" style="cursor:pointer;padding:12px 16px;background:rgba(201,168,76,0.04);display:flex;align-items:center;gap:8px">
                            <i class="fas fa-paperclip" style="color:#c9a84c"></i>
                            <strong style="color:#fff;font-size:0.92rem">Evidence Manager</strong>
                            <span id="evidenceCount" style="background:rgba(201,168,76,0.15);color:#c9a84c;padding:2px 8px;border-radius:3px;font-size:0.72rem;font-weight:600">0</span>
                            <i id="evidenceChevron" class="fas fa-chevron-down" style="margin-left:auto;color:var(--steel);font-size:0.75rem;transition:transform 0.3s"></i>
                        </div>
                        <div id="evidenceSection" style="display:none;padding:12px 16px">
                            <p style="color:var(--steel);font-size:0.82rem;margin-bottom:12px">Attach evidence artifacts (screenshots, documents, scan reports) to compliance controls. Evidence is hashed and anchored for audit-ready proof.</p>
                            <div style="display:flex;gap:8px;margin-bottom:12px;flex-wrap:wrap;align-items:center">
                                <select id="evidenceControl" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:0.82rem;max-width:220px">
                                    <option value="AC-1">AC-1 Access Control Policy</option>
                                    <option value="AC-2">AC-2 Account Management</option>
                                    <option value="AU-2">AU-2 Audit Events</option>
                                    <option value="AU-6">AU-6 Audit Review & Analysis</option>
                                    <option value="CM-2">CM-2 Baseline Configuration</option>
                                    <option value="IA-2">IA-2 Identification & Authentication</option>
                                    <option value="IR-4">IR-4 Incident Handling</option>
                                    <option value="SC-7">SC-7 Boundary Protection</option>
                                    <option value="SC-28">SC-28 Protection at Rest</option>
                                    <option value="SI-4">SI-4 System Monitoring</option>
                                </select>
                                <label class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#c9a84c,#a8893d);color:#fff;border:none;border-radius:3px;padding:6px 14px;font-size:0.8rem;cursor:pointer;margin:0">
                                    <i class="fas fa-upload"></i> Attach Evidence
                                    <input type="file" id="evidenceFileInput" onchange="attachEvidence(this)" accept=".pdf,.png,.jpg,.jpeg,.csv,.xlsx,.docx,.txt" style="display:none" multiple>
                                </label>
                                <button onclick="exportEvidenceLog()" class="btn btn-sm hover-lift" style="background:rgba(255,255,255,0.06);color:#fff;border:1px solid rgba(255,255,255,0.1);border-radius:3px;padding:6px 14px;font-size:0.8rem"><i class="fas fa-download"></i> Export Log</button>
                            </div>
                            <div id="evidenceList" style="max-height:260px;overflow-y:auto"></div>
                            <div id="evidenceEmpty" style="text-align:center;padding:20px;color:var(--steel);font-size:0.82rem"><i class="fas fa-folder-open" style="font-size:1.5rem;margin-bottom:8px;display:block;color:rgba(201,168,76,0.3)"></i>No evidence attached. Select a control and upload a document.</div>
                        </div>
                    </div>

                    <!-- ── Continuous Monitoring ── -->
                    <div style="margin-top:12px;border:1px solid rgba(0,170,255,0.15);border-radius:3px;overflow:hidden">
                        <div onclick="toggleComplianceSection('monitoring')" style="cursor:pointer;padding:12px 16px;background:rgba(0,170,255,0.04);display:flex;align-items:center;gap:8px">
                            <i class="fas fa-satellite-dish" style="color:#00aaff"></i>
                            <strong style="color:#fff;font-size:0.92rem">Continuous Monitoring Dashboard</strong>
                            <span class="pulse-dot" style="margin-left:4px"></span>
                            <span style="font-size:0.72rem;color:#00aaff;font-weight:600">LIVE</span>
                            <i id="monitoringChevron" class="fas fa-chevron-down" style="margin-left:auto;color:var(--steel);font-size:0.75rem;transition:transform 0.3s"></i>
                        </div>
                        <div id="monitoringSection" style="display:none;padding:12px 16px">
                            <p style="color:var(--steel);font-size:0.82rem;margin-bottom:12px">Real-time control status monitoring with drift detection. Auto-scans workspace activity to flag degraded controls.</p>
                            <div style="display:flex;gap:8px;margin-bottom:12px">
                                <button onclick="runMonitoringScan()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:6px 14px;font-size:0.8rem"><i class="fas fa-satellite-dish"></i> Run Full Scan</button>
                                <button onclick="toggleAutoMonitor()" id="autoMonitorBtn" class="btn btn-sm hover-lift" style="background:rgba(255,255,255,0.06);color:#fff;border:1px solid rgba(255,255,255,0.1);border-radius:3px;padding:6px 14px;font-size:0.8rem"><i class="fas fa-sync"></i> Auto-Monitor: OFF</button>
                            </div>
                            <div id="monitoringGrid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:8px"></div>
                            <div id="monitoringLog" style="margin-top:12px;max-height:150px;overflow-y:auto;font-size:0.78rem;color:var(--steel)"></div>
                        </div>
                    </div>

                    <!-- ── FedRAMP Alignment ── -->
                    <div style="margin-top:12px;border:1px solid rgba(0,170,255,0.15);border-radius:3px;overflow:hidden">
                        <div onclick="toggleComplianceSection('fedramp')" style="cursor:pointer;padding:12px 16px;background:rgba(0,170,255,0.04);display:flex;align-items:center;gap:8px">
                            <i class="fas fa-cloud-arrow-up" style="color:#00aaff"></i>
                            <strong style="color:#fff;font-size:0.92rem">FedRAMP Alignment</strong>
                            <span id="fedrampLevel" style="background:rgba(0,170,255,0.15);color:#00aaff;padding:2px 8px;border-radius:3px;font-size:0.72rem;font-weight:600">Moderate</span>
                            <i id="fedrampChevron" class="fas fa-chevron-down" style="margin-left:auto;color:var(--steel);font-size:0.75rem;transition:transform 0.3s"></i>
                        </div>
                        <div id="fedrampSection" style="display:none;padding:12px 16px">
                            <p style="color:var(--steel);font-size:0.82rem;margin-bottom:12px">FedRAMP impact-level mapping across 325 controls (Low/Moderate/High). Shows which NIST 800-53 controls your workspace satisfies.</p>
                            <div style="display:flex;gap:8px;margin-bottom:12px;align-items:center">
                                <select id="fedrampImpact" class="form-control form-control-sm" onchange="calcFedRAMP()" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:0.82rem;max-width:180px">
                                    <option value="low">Low Impact</option>
                                    <option value="moderate" selected>Moderate Impact</option>
                                    <option value="high">High Impact</option>
                                </select>
                                <button onclick="exportFedRAMP()" class="btn btn-sm hover-lift" style="background:rgba(0,170,255,0.12);color:#00aaff;border:1px solid rgba(0,170,255,0.2);border-radius:3px;padding:6px 14px;font-size:0.8rem"><i class="fas fa-download"></i> Export Mapping</button>
                            </div>
                            <div style="display:flex;gap:16px;margin-bottom:12px;flex-wrap:wrap">
                                <div style="text-align:center"><div id="fedrampSatisfied" style="font-size:1.6rem;font-weight:800;color:#00aaff">0</div><div style="font-size:0.72rem;color:var(--steel)">Satisfied</div></div>
                                <div style="text-align:center"><div id="fedrampPartial" style="font-size:1.6rem;font-weight:800;color:#c9a84c">0</div><div style="font-size:0.72rem;color:var(--steel)">Partial</div></div>
                                <div style="text-align:center"><div id="fedrampNotMet" style="font-size:1.6rem;font-weight:800;color:#ff6b6b">0</div><div style="font-size:0.72rem;color:var(--steel)">Not Met</div></div>
                                <div style="text-align:center"><div id="fedrampTotal" style="font-size:1.6rem;font-weight:800;color:var(--steel)">0</div><div style="font-size:0.72rem;color:var(--steel)">Total Controls</div></div>
                            </div>
                            <div class="compliance-row" style="margin-bottom:4px"><span class="compliance-label" style="font-size:0.8rem"><i class="fas fa-shield-halved" style="color:#00aaff;margin-right:6px"></i>Access Control (AC)</span><div class="compliance-bar"><div class="fill" id="fedrampBarAC" style="width:0%;background:linear-gradient(90deg,#00aaff,#66ccff)"></div></div><span class="compliance-pct" id="fedrampPctAC">—</span></div>
                            <div class="compliance-row" style="margin-bottom:4px"><span class="compliance-label" style="font-size:0.8rem"><i class="fas fa-clipboard-list" style="color:#00aaff;margin-right:6px"></i>Audit & Accountability (AU)</span><div class="compliance-bar"><div class="fill" id="fedrampBarAU" style="width:0%;background:linear-gradient(90deg,#00aaff,#66ccff)"></div></div><span class="compliance-pct" id="fedrampPctAU">—</span></div>
                            <div class="compliance-row" style="margin-bottom:4px"><span class="compliance-label" style="font-size:0.8rem"><i class="fas fa-cogs" style="color:#00aaff;margin-right:6px"></i>Config Management (CM)</span><div class="compliance-bar"><div class="fill" id="fedrampBarCM" style="width:0%;background:linear-gradient(90deg,#00aaff,#66ccff)"></div></div><span class="compliance-pct" id="fedrampPctCM">—</span></div>
                            <div class="compliance-row" style="margin-bottom:4px"><span class="compliance-label" style="font-size:0.8rem"><i class="fas fa-id-card" style="color:#00aaff;margin-right:6px"></i>Identification & Auth (IA)</span><div class="compliance-bar"><div class="fill" id="fedrampBarIA" style="width:0%;background:linear-gradient(90deg,#00aaff,#66ccff)"></div></div><span class="compliance-pct" id="fedrampPctIA">—</span></div>
                            <div class="compliance-row" style="margin-bottom:4px"><span class="compliance-label" style="font-size:0.8rem"><i class="fas fa-fire-extinguisher" style="color:#00aaff;margin-right:6px"></i>Incident Response (IR)</span><div class="compliance-bar"><div class="fill" id="fedrampBarIR" style="width:0%;background:linear-gradient(90deg,#00aaff,#66ccff)"></div></div><span class="compliance-pct" id="fedrampPctIR">—</span></div>
                            <div class="compliance-row"><span class="compliance-label" style="font-size:0.8rem"><i class="fas fa-network-wired" style="color:#00aaff;margin-right:6px"></i>System & Comms (SC)</span><div class="compliance-bar"><div class="fill" id="fedrampBarSC" style="width:0%;background:linear-gradient(90deg,#00aaff,#66ccff)"></div></div><span class="compliance-pct" id="fedrampPctSC">—</span></div>
                        </div>
                    </div>

                    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:1rem">
                        <button onclick="exportCompliance()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px"><i class="fas fa-download"></i> Export Scorecard</button>
                        <button onclick="anchorCompliance()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px"><i class="fas fa-anchor"></i> Anchor to XRPL ($0.01 SLS)</button>
                    </div>
                </div>
            </div>


            <!-- ══ HUB: AI SUPPLY CHAIN RISK ENGINE ══ -->
            <div class="ils-hub-panel" id="hub-risk">
                <div class="demo-card">
                    <h3 style="display:flex;align-items:center;gap:8px"><i class="fas fa-triangle-exclamation" style="color:#c9a84c"></i> AI Supply Chain Risk Engine <button onclick="showAddActionModal('risk')" class="ai-quick-btn" style="margin-left:auto;font-size:0.72rem;padding:4px 10px"><i class="fas fa-plus"></i> Action Item</button></h3>
                    <details style="margin-bottom:1rem;background:rgba(201,168,76,0.04);border:1px solid rgba(201,168,76,0.15);border-radius:3px;padding:0 12px;">
                        <summary style="cursor:pointer;padding:10px 0;color:#c9a84c;font-weight:600;font-size:0.85rem;"><i class="fas fa-info-circle"></i> How It Works — AI Risk Prediction</summary>
                        <div style="padding:0 0 12px;color:var(--steel);font-size:0.82rem;line-height:1.6;">
                            <p><strong style="color:#fff;">What's real:</strong> The risk engine analyzes supplier health indicators — GIDEP alerts, CAGE code changes, DLA lead time spikes, financial distress signals, and single-source dependencies — to generate risk scores for every part in your supply chain. Alerts are timestamped and can be anchored to XRPL for audit trail.</p>
                            <p><strong style="color:#fff;">What's demo:</strong> Risk scores and supplier data are generated from realistic DoD supply chain patterns. In production, this connects to live GIDEP, DLA, SAM.gov, and commercial financial data feeds via API.</p>
                            <p><strong style="color:#00aaff;">How S4 Ledger saves money here:</strong> A single undetected supplier failure costs $2M–$8M in emergency redesign. Predictive risk detection 18–24 months ahead reduces emergency procurement by <strong>60–80%</strong>. Across 50 programs: <strong>$15M–$100M in avoided costs over 5 years</strong>.</p>
                            <p><strong style="color:#00aaff;">Production mode:</strong> Connects to GIDEP API, DLA FLIS, SAM.gov entity data, Dun & Bradstreet financial health scores, and XRPL anchor history for continuous monitoring.</p>
                        </div>
                    </details>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label>Select Program</label>
                            <select id="riskProgram" onchange="loadRiskData()" style="font-size:0.88rem"></select>
                            <div class="row" style="margin-top:6px">
                                <div class="col-6"><input type="text" id="riskHull" placeholder="Hull # / Tail #" style="font-size:0.82rem;background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.08);border-radius:3px;padding:5px 8px;width:100%"></div>
                                <div class="col-6"><input type="text" id="riskOffice" placeholder="Program Office" style="font-size:0.82rem;background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.08);border-radius:3px;padding:5px 8px;width:100%"></div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label>Risk Threshold</label>
                            <select id="riskThreshold" onchange="loadRiskData()" style="font-size:0.88rem"><option value="all">All Risk Levels</option><option value="critical">Critical Only</option><option value="high">High & Critical</option><option value="medium">Medium & Above</option></select>
                        </div>
                    </div>
                    <!-- Risk Summary Stats -->
                    <div class="row mb-3" id="riskStats">
                        <div class="col-md-3 col-6 mb-2"><div style="text-align:center;padding:12px;background:rgba(255,59,48,0.1);border:1px solid rgba(255,59,48,0.3);border-radius:3px;"><div style="font-size:1.6rem;font-weight:800;color:#ff3b30" id="riskCritical">0</div><div style="font-size:0.75rem;color:var(--muted)">Critical</div></div></div>
                        <div class="col-md-3 col-6 mb-2"><div style="text-align:center;padding:12px;background:rgba(255,149,0,0.1);border:1px solid rgba(255,149,0,0.3);border-radius:3px;"><div style="font-size:1.6rem;font-weight:800;color:#ff9500" id="riskHigh">0</div><div style="font-size:0.75rem;color:var(--muted)">High</div></div></div>
                        <div class="col-md-3 col-6 mb-2"><div style="text-align:center;padding:12px;background:rgba(255,204,0,0.1);border:1px solid rgba(255,204,0,0.3);border-radius:3px;"><div style="font-size:1.6rem;font-weight:800;color:#ffcc00" id="riskMedium">0</div><div style="font-size:0.75rem;color:var(--muted)">Medium</div></div></div>
                        <div class="col-md-3 col-6 mb-2"><div style="text-align:center;padding:12px;background:rgba(0,170,255,0.1);border:1px solid rgba(0,170,255,0.3);border-radius:3px;"><div style="font-size:1.6rem;font-weight:800;color:#00aaff" id="riskLow">0</div><div style="font-size:0.75rem;color:var(--muted)">Low</div></div></div>
                    </div>
                    <!-- ── AI Threat Intelligence Score (vs Palantir Gotham) ── -->
                    <div id="threatIntelPanel" style="margin-bottom:16px;background:linear-gradient(135deg,rgba(201,168,76,0.04),rgba(255,149,0,0.03));border:1px solid rgba(201,168,76,0.2);border-radius:3px;padding:16px;display:none;">
                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
                            <div style="font-size:0.82rem;font-weight:700;color:#c9a84c;text-transform:uppercase;letter-spacing:0.8px;display:flex;align-items:center;gap:6px;"><i class="fas fa-crosshairs"></i> AI Threat Intelligence Score</div>
                            <div id="threatScoreBadge" style="background:rgba(201,168,76,0.15);color:#c9a84c;padding:4px 14px;border-radius:3px;font-size:0.85rem;font-weight:800;letter-spacing:0.5px;">— / 100</div>
                        </div>
                        <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:12px;">
                            <div style="text-align:center;padding:10px;background:rgba(201,168,76,0.08);border-radius:3px;border:1px solid rgba(201,168,76,0.15);">
                                <div style="font-size:1.2rem;font-weight:800;color:#c9a84c;" id="threatSingleSource">0</div>
                                <div style="font-size:0.68rem;color:var(--steel);text-transform:uppercase;">Single-Source</div>
                            </div>
                            <div style="text-align:center;padding:10px;background:rgba(255,149,0,0.08);border-radius:3px;border:1px solid rgba(255,149,0,0.15);">
                                <div style="font-size:1.2rem;font-weight:800;color:#ff9500;" id="threatGIDEP">0</div>
                                <div style="font-size:0.68rem;color:var(--steel);text-transform:uppercase;">GIDEP Alerts</div>
                            </div>
                            <div style="text-align:center;padding:10px;background:rgba(255,204,0,0.08);border-radius:3px;border:1px solid rgba(255,204,0,0.15);">
                                <div style="font-size:1.2rem;font-weight:800;color:#ffcc00;" id="threatLeadTime">0</div>
                                <div style="font-size:0.68rem;color:var(--steel);text-transform:uppercase;">Lead Time Spikes</div>
                            </div>
                        </div>
                        <div style="height:8px;background:rgba(255,255,255,0.04);border-radius:4px;overflow:hidden;margin-bottom:8px;">
                            <div id="threatBar" style="height:100%;width:0%;border-radius:4px;transition:width 1s ease,background 0.5s;background:linear-gradient(90deg,#34c759,#ffcc00,#ff9500,#ff3b30);"></div>
                        </div>
                        <div id="threatAssessment" style="font-size:0.78rem;color:var(--steel);line-height:1.5;"></div>
                    </div>
                    <!-- Risk Table -->
                    <div style="max-height:400px;overflow-y:auto;border:1px solid rgba(201,168,76,0.2);border-radius:3px;">
                        <table style="width:100%;border-collapse:collapse;">
                            <thead style="position:sticky;top:0;background:#0a0e1a;z-index:1;"><tr><th style="padding:10px 8px;font-size:0.78rem;text-transform:uppercase;color:#c9a84c;border-bottom:2px solid rgba(201,168,76,0.2);text-align:left;">Part / NSN</th><th style="padding:10px 8px;font-size:0.78rem;text-transform:uppercase;color:#c9a84c;border-bottom:2px solid rgba(201,168,76,0.2);text-align:left;">Supplier</th><th style="padding:10px 8px;font-size:0.78rem;text-transform:uppercase;color:#c9a84c;border-bottom:2px solid rgba(201,168,76,0.2);text-align:center;">Risk Score</th><th style="padding:10px 8px;font-size:0.78rem;text-transform:uppercase;color:#c9a84c;border-bottom:2px solid rgba(201,168,76,0.2);text-align:left;">Risk Factors</th><th style="padding:10px 8px;font-size:0.78rem;text-transform:uppercase;color:#c9a84c;border-bottom:2px solid rgba(201,168,76,0.2);text-align:center;">ETA Impact</th></tr></thead>
                            <tbody id="riskTableBody"><tr><td colspan="5" style="text-align:center;padding:30px;color:var(--text-muted)">Click a program to load risk analysis...</td></tr></tbody>
                        </table>
                    </div>
                    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:1rem">
                        <button onclick="loadRiskData()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#c9a84c,#a88a3a);color:#fff;border:none;border-radius:3px;padding:8px 16px"><i class="fas fa-sync-alt"></i> Refresh Analysis</button>
                        <button onclick="exportRisk()" class="btn btn-sm hover-lift" style="background:rgba(255,255,255,0.08);color:#fff;border:none;border-radius:3px;padding:8px 16px;font-weight:700"><i class="fas fa-download"></i> Export Risk Report</button>
                        <button onclick="anchorRisk()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px"><i class="fas fa-anchor"></i> Anchor to XRPL</button>
                    </div>

                    <!-- ── AI Remediation Plans ── -->
                    <div style="margin-top:16px;border:1px solid rgba(0,170,255,0.15);border-radius:3px;overflow:hidden">
                        <div onclick="toggleComplianceSection('remediation')" style="cursor:pointer;padding:12px 16px;background:rgba(0,170,255,0.06);display:flex;align-items:center;gap:8px">
                            <i class="fas fa-wand-magic-sparkles" style="color:#00aaff"></i>
                            <strong style="color:#fff;font-size:0.92rem">AI Remediation Plans</strong>
                            <span style="background:#00aaff22;color:#00aaff;padding:2px 8px;border-radius:3px;font-size:0.7rem;font-weight:600">AI-POWERED</span>
                            <i id="remediationChevron" class="fas fa-chevron-down" style="margin-left:auto;color:var(--steel);font-size:0.75rem;transition:transform 0.3s"></i>
                        </div>
                        <div id="remediationSection" style="display:none;padding:12px 16px">
                            <p style="color:var(--steel);font-size:0.82rem;margin-bottom:12px">AI generates step-by-step remediation plans for high-risk supply chain items, including alternate sourcing, redesign recommendations, and cost estimates.</p>
                            <button onclick="generateRemediationPlans()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:6px 14px;font-size:0.82rem;margin-bottom:12px"><i class="fas fa-wand-magic-sparkles"></i> Generate Plans</button>
                            <div id="remediationOutput"></div>
                        </div>
                    </div>

                    <!-- ── Anomaly Detection ── -->
                    <div style="margin-top:12px;border:1px solid rgba(255,107,107,0.15);border-radius:3px;overflow:hidden">
                        <div onclick="toggleComplianceSection('anomaly')" style="cursor:pointer;padding:12px 16px;background:rgba(255,107,107,0.04);display:flex;align-items:center;gap:8px">
                            <i class="fas fa-magnifying-glass-chart" style="color:#ff6b6b"></i>
                            <strong style="color:#fff;font-size:0.92rem">Anomaly Detection</strong>
                            <span style="background:rgba(255,107,107,0.15);color:#ff6b6b;padding:2px 8px;border-radius:3px;font-size:0.7rem;font-weight:600">AI-SCAN</span>
                            <i id="anomalyChevron" class="fas fa-chevron-down" style="margin-left:auto;color:var(--steel);font-size:0.75rem;transition:transform 0.3s"></i>
                        </div>
                        <div id="anomalySection" style="display:none;padding:12px 16px">
                            <p style="color:var(--steel);font-size:0.82rem;margin-bottom:12px">AI scans workspace activity for anomalous patterns: unusual cost spikes, abnormal lead times, duplicate records, integrity mismatches, and compliance drift.</p>
                            <button onclick="runAnomalyDetection()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#ff6b6b,#cc4444);color:#fff;border:none;border-radius:3px;padding:6px 14px;font-size:0.82rem;margin-bottom:12px"><i class="fas fa-magnifying-glass-chart"></i> Run Anomaly Scan</button>
                            <div id="anomalyOutput"></div>
                        </div>
                    </div>

                    <!-- ── Budget Forecasting ── -->
                    <div style="margin-top:12px;border:1px solid rgba(201,168,76,0.15);border-radius:3px;overflow:hidden">
                        <div onclick="toggleComplianceSection('budgetForecast')" style="cursor:pointer;padding:12px 16px;background:rgba(201,168,76,0.04);display:flex;align-items:center;gap:8px">
                            <i class="fas fa-chart-line" style="color:#c9a84c"></i>
                            <strong style="color:#fff;font-size:0.92rem">Budget Forecasting</strong>
                            <i id="budgetForecastChevron" class="fas fa-chevron-down" style="margin-left:auto;color:var(--steel);font-size:0.75rem;transition:transform 0.3s"></i>
                        </div>
                        <div id="budgetForecastSection" style="display:none;padding:12px 16px">
                            <p style="color:var(--steel);font-size:0.82rem;margin-bottom:12px">AI-driven budget forecasting based on historical procurement data, obsolescence trends, and maintenance cost trajectories.</p>
                            <div style="display:flex;gap:8px;margin-bottom:12px;align-items:center">
                                <select id="budgetForecastYears" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:0.82rem;max-width:140px">
                                    <option value="3">3-Year Forecast</option>
                                    <option value="5" selected>5-Year Forecast</option>
                                    <option value="10">10-Year Forecast</option>
                                </select>
                                <button onclick="generateBudgetForecast()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#c9a84c,#a8893d);color:#fff;border:none;border-radius:3px;padding:6px 14px;font-size:0.82rem"><i class="fas fa-chart-line"></i> Forecast</button>
                            </div>
                            <div id="budgetForecastOutput"></div>
                        </div>
                    </div>

                    <!-- ── Document AI Extraction ── -->
                    <div style="margin-top:12px;border:1px solid rgba(0,170,255,0.15);border-radius:3px;overflow:hidden">
                        <div onclick="toggleComplianceSection('docAI')" style="cursor:pointer;padding:12px 16px;background:rgba(0,170,255,0.04);display:flex;align-items:center;gap:8px">
                            <i class="fas fa-file-invoice" style="color:#00aaff"></i>
                            <strong style="color:#fff;font-size:0.92rem">Document AI — Data Extraction</strong>
                            <span style="background:rgba(0,170,255,0.15);color:#00aaff;padding:2px 8px;border-radius:3px;font-size:0.7rem;font-weight:600">CLIENT-SIDE</span>
                            <i id="docAIChevron" class="fas fa-chevron-down" style="margin-left:auto;color:var(--steel);font-size:0.75rem;transition:transform 0.3s"></i>
                        </div>
                        <div id="docAISection" style="display:none;padding:12px 16px">
                            <p style="color:var(--steel);font-size:0.82rem;margin-bottom:12px">Extract structured data from uploaded defense documents — auto-detect NSNs, CAGE codes, part numbers, dates, and dollar amounts. Feeds extracted data into the risk analysis pipeline for automated risk scoring.</p>
                            <div style="display:flex;gap:8px;margin-bottom:12px;align-items:center">
                                <label class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#00aaff,#8b5cf6);color:#fff;border:none;border-radius:3px;padding:6px 14px;font-size:0.82rem;cursor:pointer;margin:0">
                                    <i class="fas fa-upload"></i> Upload Document
                                    <input type="file" id="docAIFileInput" onchange="runDocAIExtraction(this)" accept=".txt,.csv,.json,.xml" style="display:none">
                                </label>
                                <button onclick="runDocAIDemoExtraction()" class="btn btn-sm hover-lift" style="background:rgba(0,170,255,0.12);color:#00aaff;border:1px solid rgba(0,170,255,0.2);border-radius:3px;padding:6px 14px;font-size:0.82rem"><i class="fas fa-play"></i> Demo Extract</button>
                            </div>
                            <div id="docAIOutput"></div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- ══ HUB: AUTOMATED AUDIT REPORT GENERATOR ══ -->
            <div class="ils-hub-panel" id="hub-reports">
                <div class="demo-card">
                    <h3 style="display:flex;align-items:center;gap:8px"><i class="fas fa-file-pdf" style="color:var(--accent)"></i> Automated Audit Report Generator <button onclick="showAddActionModal('reports')" class="ai-quick-btn" style="margin-left:auto;font-size:0.72rem;padding:4px 10px"><i class="fas fa-plus"></i> Action Item</button></h3>
                    <details style="margin-bottom:1rem;background:rgba(0,170,255,0.06);border:1px solid rgba(201,168,76,0.15);border-radius:3px;padding:0 12px;">
                        <summary style="cursor:pointer;padding:10px 0;color:#00aaff;font-weight:600;font-size:0.85rem;"><i class="fas fa-info-circle"></i> How It Works — One-Click Audit Packages</summary>
                        <div style="padding:0 0 12px;color:var(--steel);font-size:0.82rem;line-height:1.6;">
                            <p><strong style="color:#fff;">What's real:</strong> The report generator compiles all anchored records, verification timestamps, chain-of-custody proof, and compliance scores into audit-ready packages. Every data point is backed by an XRPL transaction hash for independent verification.</p>
                            <p><strong style="color:#fff;">Data sources:</strong> Reports pull from your anchoring history, compliance scorecard, and ILS analysis results stored in your S4 Ledger database.</p>
                            <p><strong style="color:#00aaff;">How S4 Ledger saves money here:</strong> Average DoD contract audit costs $45K–$150K in preparation labor alone (2–6 weeks of staff time). S4 Ledger generates a complete, verifiable audit package in <strong>under 60 seconds</strong> — a <strong>95–99% cost reduction</strong>.</p>
                            <p><strong style="color:#00aaff;">Production mode:</strong> DCMA-ready (Defense Contract Management Agency), DCAA-ready (Defense Contract Audit Agency), and IG-ready (Inspector General) report templates with full chain-of-custody visualization and compliance gap analysis.</p>
                        </div>
                    </details>
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label>Report Type</label>
                            <select id="reportType" style="font-size:0.88rem"><option value="full_audit">Full Audit Package</option><option value="supply_chain">Supply Chain Verification</option><option value="maintenance">Maintenance Records</option><option value="compliance">Compliance Summary</option><option value="custody">Chain of Custody</option><option value="contract">Contract Deliverables</option></select>
                        </div>
                        <div class="col-md-4">
                            <label>Time Period</label>
                            <select id="reportPeriod" style="font-size:0.88rem"><option value="30">Last 30 Days</option><option value="90">Last 90 Days</option><option value="180">Last 6 Months</option><option value="365">Last 12 Months</option><option value="all">All Time</option></select>
                        </div>
                        <div class="col-md-4">
                            <label>Format</label>
                            <select id="reportFormat" style="font-size:0.88rem"><option value="pdf">PDF Report</option><option value="csv">CSV Data Export</option><option value="json">JSON Package</option></select>
                        </div>
                    </div>
                    <!-- Report Preview -->
                    <div id="reportPreview" style="background:rgba(0,170,255,0.06);border:1px solid rgba(201,168,76,0.15);border-radius:3px;padding:16px;margin-bottom:1rem;">
                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
                            <h5 style="margin:0;color:#00aaff;"><i class="fas fa-eye"></i> Report Preview</h5>
                            <span style="font-size:0.8rem;color:var(--text-muted)" id="reportRecordCount">0 records available</span>
                        </div>
                        <div id="reportContent" style="font-size:0.85rem;color:var(--steel);line-height:1.7;">Select a report type and click Generate to preview your audit package.</div>
                    </div>
                    <div style="display:flex;gap:10px;flex-wrap:wrap;">
                        <button onclick="generateReport()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px"><i class="fas fa-magic"></i> Generate Report</button>
                        <button onclick="downloadReport()" class="btn btn-sm hover-lift" style="background:rgba(255,255,255,0.08);color:#fff;border:none;border-radius:3px;padding:8px 16px;font-weight:700"><i class="fas fa-download"></i> Download Report</button>
                        <button onclick="anchorReport()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px"><i class="fas fa-anchor"></i> Anchor Report Hash</button>
                    </div>

                    <!-- ── Executive Summary Generator ── -->
                    <div style="margin-top:20px;border:1px solid rgba(0,170,255,0.15);border-radius:3px;overflow:hidden">
                        <div onclick="toggleComplianceSection('execSummary')" style="cursor:pointer;padding:12px 16px;background:rgba(0,170,255,0.06);display:flex;align-items:center;gap:8px">
                            <i class="fas fa-file-lines" style="color:#00aaff"></i>
                            <strong style="color:#fff;font-size:0.92rem">Executive Summary Generator</strong>
                            <span style="background:#00aaff22;color:#00aaff;padding:2px 8px;border-radius:3px;font-size:0.7rem;font-weight:600">ONE-CLICK</span>
                            <i id="execSummaryChevron" class="fas fa-chevron-down" style="margin-left:auto;color:var(--steel);font-size:0.75rem;transition:transform 0.3s"></i>
                        </div>
                        <div id="execSummarySection" style="display:none;padding:12px 16px">
                            <p style="color:var(--steel);font-size:0.82rem;margin-bottom:12px">Generate a leadership-ready executive summary combining compliance posture, risk status, action item metrics, and financial impact.</p>
                            <div style="display:flex;gap:8px;margin-bottom:12px">
                                <button onclick="generateExecSummary()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px;font-size:0.82rem"><i class="fas fa-bolt"></i> Generate Executive Summary</button>
                                <button onclick="downloadExecSummary()" class="btn btn-sm hover-lift" style="background:rgba(255,255,255,0.06);color:#fff;border:1px solid rgba(255,255,255,0.1);border-radius:3px;padding:8px 16px;font-size:0.82rem"><i class="fas fa-download"></i> Download</button>
                            </div>
                            <div id="execSummaryOutput" style="font-size:0.82rem;color:var(--steel);line-height:1.7"></div>
                        </div>
                    </div>

                    <!-- ── Scheduled Reports ── -->
                    <div style="margin-top:12px;border:1px solid rgba(201,168,76,0.15);border-radius:3px;overflow:hidden">
                        <div onclick="toggleComplianceSection('schedReports')" style="cursor:pointer;padding:12px 16px;background:rgba(201,168,76,0.04);display:flex;align-items:center;gap:8px">
                            <i class="fas fa-calendar-check" style="color:#c9a84c"></i>
                            <strong style="color:#fff;font-size:0.92rem">Scheduled Reports</strong>
                            <span id="schedReportCount" style="background:rgba(201,168,76,0.15);color:#c9a84c;padding:2px 8px;border-radius:3px;font-size:0.72rem;font-weight:600">0</span>
                            <i id="schedReportsChevron" class="fas fa-chevron-down" style="margin-left:auto;color:var(--steel);font-size:0.75rem;transition:transform 0.3s"></i>
                        </div>
                        <div id="schedReportsSection" style="display:none;padding:12px 16px">
                            <p style="color:var(--steel);font-size:0.82rem;margin-bottom:12px">Schedule automatic report generation on a recurring cadence. Reports auto-generate and are ready for download.</p>
                            <div style="display:flex;gap:8px;margin-bottom:12px;flex-wrap:wrap;align-items:center">
                                <select id="schedReportType" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:0.82rem;max-width:180px">
                                    <option value="full_audit">Full Audit Package</option>
                                    <option value="compliance">Compliance Summary</option>
                                    <option value="supply_chain">Supply Chain</option>
                                    <option value="executive">Executive Summary</option>
                                </select>
                                <select id="schedReportFreq" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:0.82rem;max-width:140px">
                                    <option value="daily">Daily</option>
                                    <option value="weekly" selected>Weekly</option>
                                    <option value="monthly">Monthly</option>
                                    <option value="quarterly">Quarterly</option>
                                </select>
                                <button onclick="addScheduledReport()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#c9a84c,#a8893d);color:#fff;border:none;border-radius:3px;padding:6px 14px;font-size:0.8rem"><i class="fas fa-plus"></i> Schedule</button>
                            </div>
                            <div id="schedReportList"></div>
                            <div id="schedReportEmpty" style="text-align:center;padding:16px;color:var(--steel);font-size:0.82rem"><i class="fas fa-clock" style="font-size:1.2rem;margin-bottom:6px;display:block;color:rgba(201,168,76,0.3)"></i>No scheduled reports yet.</div>
                        </div>
                    </div>

                    <!-- ── Fleet-wide Comparison ── -->
                    <div style="margin-top:12px;border:1px solid rgba(0,170,255,0.15);border-radius:3px;overflow:hidden">
                        <div onclick="toggleComplianceSection('fleetCompare')" style="cursor:pointer;padding:12px 16px;background:rgba(0,170,255,0.04);display:flex;align-items:center;gap:8px">
                            <i class="fas fa-ship" style="color:#00aaff"></i>
                            <strong style="color:#fff;font-size:0.92rem">Fleet-wide Comparison</strong>
                            <i id="fleetCompareChevron" class="fas fa-chevron-down" style="margin-left:auto;color:var(--steel);font-size:0.75rem;transition:transform 0.3s"></i>
                        </div>
                        <div id="fleetCompareSection" style="display:none;padding:12px 16px">
                            <p style="color:var(--steel);font-size:0.82rem;margin-bottom:12px">Compare compliance, readiness, and risk metrics across multiple programs/platforms side-by-side.</p>
                            <button onclick="generateFleetComparison()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:6px 14px;font-size:0.82rem;margin-bottom:12px"><i class="fas fa-table"></i> Generate Comparison</button>
                            <div id="fleetCompareOutput" style="overflow-x:auto"></div>
                        </div>
                    </div>

                    <!-- ── Risk Heat Map ── -->
                    <div style="margin-top:12px;border:1px solid rgba(255,107,107,0.15);border-radius:3px;overflow:hidden">
                        <div onclick="toggleComplianceSection('heatMap')" style="cursor:pointer;padding:12px 16px;background:rgba(255,107,107,0.04);display:flex;align-items:center;gap:8px">
                            <i class="fas fa-fire" style="color:#ff6b6b"></i>
                            <strong style="color:#fff;font-size:0.92rem">Supply Chain Risk Heat Map</strong>
                            <i id="heatMapChevron" class="fas fa-chevron-down" style="margin-left:auto;color:var(--steel);font-size:0.75rem;transition:transform 0.3s"></i>
                        </div>
                        <div id="heatMapSection" style="display:none;padding:12px 16px">
                            <p style="color:var(--steel);font-size:0.82rem;margin-bottom:12px">Visual risk heat map showing supply chain risk concentration by supplier, component category, and geographic region.</p>
                            <button onclick="generateHeatMap()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#ff6b6b,#cc4444);color:#fff;border:none;border-radius:3px;padding:6px 14px;font-size:0.82rem;margin-bottom:12px"><i class="fas fa-fire"></i> Generate Heat Map</button>
                            <div id="heatMapOutput"></div>
                        </div>
                    </div>

                </div>
            </div>



            <!-- ══ HUB: PREDICTIVE MAINTENANCE AI ══ -->
            <div class="ils-hub-panel" id="hub-predictive">
                <div class="demo-card">
                    <h3 style="display:flex;align-items:center;gap:8px"><i class="fas fa-brain" style="color:var(--accent)"></i> Predictive Maintenance AI <button onclick="showAddActionModal('predictive')" class="ai-quick-btn" style="margin-left:auto;font-size:0.72rem;padding:4px 10px"><i class="fas fa-plus"></i> Action Item</button></h3>
                    <details style="margin-bottom:1rem;background:rgba(0,170,255,0.06);border:1px solid rgba(0,170,255,0.15);border-radius:3px;padding:0 12px;">
                        <summary style="cursor:pointer;padding:10px 0;color:#00aaff;font-weight:600;font-size:0.85rem;"><i class="fas fa-info-circle"></i> How It Works — AI-Powered Failure Prediction</summary>
                        <div style="padding:0 0 12px;color:var(--steel);font-size:0.82rem;line-height:1.6;">
                            <p><strong style="color:#fff;">What's real:</strong> The Predictive Maintenance engine analyzes maintenance history patterns across the S4 Ledger network — MTBF trends, failure mode clustering, component age curves, and environmental stress factors — to predict which systems will require maintenance before unplanned failures occur.</p>
                            <p><strong style="color:#fff;">How predictions improve:</strong> The AI model starts with fleet maintenance patterns from publicly available DoD reliability data, then trains on your actual anchored maintenance records for increasingly accurate predictions over time.</p>
                            <p><strong style="color:#00aaff;">How S4 Ledger saves money here:</strong> Unplanned maintenance costs 3–10× more than planned maintenance. A single unplanned engine failure on a DDG-51 costs $500K–$2M including parts, labor, and lost operational time. Predictive maintenance reduces unplanned failures by <strong>40–60%</strong>, saving <strong>$2M–$10M per fleet per year</strong>.</p>
                            <p><strong style="color:#00aaff;">Production mode:</strong> Connects to 3-M maintenance databases, OARS, NTCSS, and sensor data feeds. Uses anonymized/aggregated fleet-wide patterns (like Google Maps traffic) while keeping individual records private.</p>
                        </div>
                    </details>
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label>Select Fleet / Platform</label>
                            <select id="pdmPlatform" onchange="loadPredictiveData()" style="font-size:0.88rem"></select>
                            <div class="row" style="margin-top:6px">
                                <div class="col-6"><input type="text" id="pdmHull" placeholder="Hull # / Tail # / Fleet" style="font-size:0.82rem;background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.08);border-radius:3px;padding:5px 8px;width:100%"></div>
                                <div class="col-6"><input type="text" id="pdmOffice" placeholder="Program Office" style="font-size:0.82rem;background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.08);border-radius:3px;padding:5px 8px;width:100%"></div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <label>Prediction Window</label>
                            <select id="pdmWindow" onchange="loadPredictiveData()" style="font-size:0.88rem"><option value="30">Next 30 Days</option><option value="60">Next 60 Days</option><option value="90" selected>Next 90 Days</option><option value="180">Next 6 Months</option><option value="365">Next 12 Months</option></select>
                        </div>
                        <div class="col-md-4">
                            <label>Confidence Threshold</label>
                            <select id="pdmConfidence" onchange="loadPredictiveData()" style="font-size:0.88rem"><option value="50">50%+ (Show All)</option><option value="70">70%+ (Likely)</option><option value="85" selected>85%+ (High Confidence)</option><option value="95">95%+ (Near Certain)</option></select>
                        </div>
                    </div>
                    <!-- Predictive Stats -->
                    <div class="row mb-3">
                        <div class="col-md-3 col-6"><div style="text-align:center;padding:12px;background:rgba(0,170,255,0.06);border:1px solid rgba(0,170,255,0.15);border-radius:3px;"><div style="font-size:1.6rem;font-weight:800;color:#00aaff" id="pdmPredictions">0</div><div style="font-size:0.72rem;color:var(--text-muted)">Predictions</div></div></div>
                        <div class="col-md-3 col-6"><div style="text-align:center;padding:12px;background:rgba(255,59,48,0.06);border:1px solid rgba(255,59,48,0.2);border-radius:3px;"><div style="font-size:1.6rem;font-weight:800;color:#ff3b30" id="pdmUrgent">0</div><div style="font-size:0.72rem;color:var(--text-muted)">Urgent (30 days)</div></div></div>
                        <div class="col-md-3 col-6"><div style="text-align:center;padding:12px;background:rgba(0,170,255,0.06);border:1px solid rgba(201,168,76,0.2);border-radius:3px;"><div style="font-size:1.6rem;font-weight:800;color:#00aaff" id="pdmSavings">$0</div><div style="font-size:0.72rem;color:var(--text-muted)">Est. Savings</div></div></div>
                        <div class="col-md-3 col-6"><div style="text-align:center;padding:12px;background:rgba(0,170,255,0.06);border:1px solid rgba(0,170,255,0.2);border-radius:3px;"><div style="font-size:1.6rem;font-weight:800;color:var(--accent)" id="pdmAccuracy">0%</div><div style="font-size:0.72rem;color:var(--text-muted)">Model Accuracy</div></div></div>
                    </div>
                    <!-- Predictions Table -->
                    <div style="max-height:400px;overflow-y:auto;border:1px solid rgba(0,170,255,0.15);border-radius:3px;">
                        <table style="width:100%;border-collapse:collapse;">
                            <thead style="position:sticky;top:0;background:#0a0e1a;z-index:1;"><tr><th style="padding:10px 8px;font-size:0.78rem;text-transform:uppercase;color:#00aaff;border-bottom:2px solid rgba(0,212,170,0.2);text-align:left;">System / Component</th><th style="padding:10px 8px;font-size:0.78rem;text-transform:uppercase;color:#00aaff;border-bottom:2px solid rgba(0,212,170,0.2);text-align:left;">Failure Mode</th><th style="padding:10px 8px;font-size:0.78rem;text-transform:uppercase;color:#00aaff;border-bottom:2px solid rgba(0,212,170,0.2);text-align:center;">Confidence</th><th style="padding:10px 8px;font-size:0.78rem;text-transform:uppercase;color:#00aaff;border-bottom:2px solid rgba(0,212,170,0.2);text-align:center;">ETA</th><th style="padding:10px 8px;font-size:0.78rem;text-transform:uppercase;color:#00aaff;border-bottom:2px solid rgba(0,212,170,0.2);text-align:right;">Cost if Unplanned</th></tr></thead>
                            <tbody id="pdmTableBody"><tr><td colspan="5" style="text-align:center;padding:30px;color:var(--text-muted)">Select a fleet to load predictive analysis...</td></tr></tbody>
                        </table>
                    </div>
                                        <!-- Predictive Failure Timeline (vs Oracle Asset Mgmt) -->
                    <div id="failureTimelinePanel" style="margin-top:16px;background:linear-gradient(135deg,rgba(0,170,255,0.04),rgba(201,168,76,0.03));border:1px solid rgba(0,170,255,0.2);border-radius:3px;padding:16px;display:none;">
                        <div style="font-size:0.82rem;font-weight:700;color:var(--accent);text-transform:uppercase;letter-spacing:0.8px;margin-bottom:12px;display:flex;align-items:center;gap:6px;"><i class="fas fa-timeline"></i> Projected Failure Timeline (12-Month Forecast)</div>
                        <div id="failureTimelineChart" style="position:relative;height:200px;overflow-x:auto;overflow-y:hidden;">
                            <canvas id="failureTimelineCanvas" height="180"></canvas>
                        </div>
                        <div id="failureTimelineLegend" style="display:flex;gap:16px;flex-wrap:wrap;margin-top:8px;font-size:0.72rem;color:var(--steel);">
                            <span><span style="display:inline-block;width:10px;height:10px;border-radius:50%;background:#ff3b30;margin-right:4px;"></span> Critical</span>
                            <span><span style="display:inline-block;width:10px;height:10px;border-radius:50%;background:#ff9500;margin-right:4px;"></span> High</span>
                            <span><span style="display:inline-block;width:10px;height:10px;border-radius:50%;background:#ffcc00;margin-right:4px;"></span> Medium</span>
                            <span><span style="display:inline-block;width:10px;height:10px;border-radius:50%;background:#34c759;margin-right:4px;"></span> Low</span>
                        </div>
                    </div>
                    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:1rem">
                        <button onclick="loadPredictiveData()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#0a0e1a;border:none;border-radius:3px;padding:8px 16px;font-weight:700"><i class="fas fa-sync-alt"></i> Run Predictions</button>
                        <button onclick="exportPredictive()" class="btn btn-sm hover-lift" style="background:rgba(255,255,255,0.08);color:#fff;border:none;border-radius:3px;padding:8px 16px;font-weight:700"><i class="fas fa-download"></i> Export Report</button>
                        <button onclick="anchorPredictive()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px"><i class="fas fa-anchor"></i> Anchor to XRPL</button>
                    </div>
                </div>
            </div>


            <!-- ══ HUB: SUBMISSION REVIEW & DISCREPANCY ANALYZER ══ -->
            <!-- ══ HUB: SBOM VIEWER — SOFTWARE BILL OF MATERIALS ══ -->
            <div class="ils-hub-panel" id="hub-sbom">
                <div class="demo-card">
                    <h3 style="display:flex;align-items:center;gap:8px"><i class="fas fa-microchip" style="color:#00aaff"></i> Software Bill of Materials (SBOM) <button onclick="showAddActionModal('sbom')" class="ai-quick-btn" style="margin-left:auto;font-size:0.72rem;padding:4px 10px"><i class="fas fa-plus"></i> Action Item</button></h3>
                    <details style="margin-bottom:1rem;background:rgba(0,170,255,0.04);border:1px solid rgba(0,170,255,0.15);border-radius:3px;padding:0 12px;">
                        <summary style="cursor:pointer;padding:10px 0;color:#00aaff;font-weight:600;font-size:0.85rem;"><i class="fas fa-info-circle"></i> How It Works — Blockchain-Verified SBOM</summary>
                        <div style="padding:0 0 12px;color:var(--steel);font-size:0.82rem;line-height:1.6;">
                            <p><strong style="color:#fff;">What's real:</strong> The SBOM Viewer catalogs all embedded software components across weapon systems — firmware, RTOS, middleware, drivers, and third-party libraries. Each component is tracked with version, CVE status, license type, and supply chain provenance. S4 Ledger hashes each SBOM snapshot to XRPL for tamper-proof versioning.</p>
                            <p><strong style="color:#00aaff;">Why it matters:</strong> CMMC Level 2+ requires SBOM management. Executive Order 14028 mandates SBOMs for all federal software. No competitor ties SBOM tracking to blockchain verification — this is a first.</p>
                            <p><strong style="color:#00aaff;">Production mode:</strong> Ingests CycloneDX and SPDX formats from CI/CD pipelines. Integrates with NVD for real-time CVE matching. Auto-generates SBOM attestation documents for DCMA/DCAA auditors.</p>
                        </div>
                    </details>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label>Select Platform</label>
                            <select id="sbomProgram" onchange="loadSBOMData()" style="font-size:0.88rem"></select>
                        </div>
                        <div class="col-md-6">
                            <label>SBOM Format</label>
                            <select id="sbomFormat" style="font-size:0.88rem"><option value="cyclonedx">CycloneDX 1.5</option><option value="spdx">SPDX 2.3</option><option value="s4native">S4 Native</option></select>
                        </div>
                    </div>
                    <!-- SBOM Stats -->
                    <div class="row mb-3">
                        <div class="col-md-3 col-6"><div style="text-align:center;padding:12px;background:rgba(46,204,113,0.06);border:1px solid rgba(46,204,113,0.15);border-radius:3px;"><div style="font-size:1.6rem;font-weight:800;color:#2ecc71" id="sbomTotal">0</div><div style="font-size:0.72rem;color:var(--text-muted)">Components</div></div></div>
                        <div class="col-md-3 col-6"><div style="text-align:center;padding:12px;background:rgba(255,59,48,0.06);border:1px solid rgba(255,59,48,0.2);border-radius:3px;"><div style="font-size:1.6rem;font-weight:800;color:#ff3b30" id="sbomCVE">0</div><div style="font-size:0.72rem;color:var(--text-muted)">Known CVEs</div></div></div>
                        <div class="col-md-3 col-6"><div style="text-align:center;padding:12px;background:rgba(0,170,255,0.06);border:1px solid rgba(0,170,255,0.15);border-radius:3px;"><div style="font-size:1.6rem;font-weight:800;color:#00aaff" id="sbomVerified">0</div><div style="font-size:0.72rem;color:var(--text-muted)">Verified</div></div></div>
                        <div class="col-md-3 col-6"><div style="text-align:center;padding:12px;background:rgba(201,168,76,0.06);border:1px solid rgba(201,168,76,0.2);border-radius:3px;"><div style="font-size:1.6rem;font-weight:800;color:#c9a84c" id="sbomAnchored">0</div><div style="font-size:0.72rem;color:var(--text-muted)">Anchored</div></div></div>
                    </div>
                    <!-- SBOM Table -->
                    <div style="max-height:400px;overflow-y:auto;border:1px solid rgba(0,170,255,0.2);border-radius:3px;">
                        <table style="width:100%;border-collapse:collapse;">
                            <thead style="position:sticky;top:0;background:#0a0e1a;z-index:1;"><tr><th style="padding:10px 8px;font-size:0.78rem;text-transform:uppercase;color:#00aaff;border-bottom:2px solid rgba(0,170,255,0.2);text-align:left;">Component</th><th style="padding:10px 8px;font-size:0.78rem;text-transform:uppercase;color:#00aaff;border-bottom:2px solid rgba(0,170,255,0.2);text-align:left;">Version</th><th style="padding:10px 8px;font-size:0.78rem;text-transform:uppercase;color:#00aaff;border-bottom:2px solid rgba(0,170,255,0.2);text-align:center;">Type</th><th style="padding:10px 8px;font-size:0.78rem;text-transform:uppercase;color:#00aaff;border-bottom:2px solid rgba(0,170,255,0.2);text-align:center;">CVEs</th><th style="padding:10px 8px;font-size:0.78rem;text-transform:uppercase;color:#00aaff;border-bottom:2px solid rgba(0,170,255,0.2);text-align:center;">License</th><th style="padding:10px 8px;font-size:0.78rem;text-transform:uppercase;color:#00aaff;border-bottom:2px solid rgba(0,170,255,0.2);text-align:center;">Status</th></tr></thead>
                            <tbody id="sbomTableBody"><tr><td colspan="6" style="text-align:center;padding:30px;color:var(--text-muted)">Select a platform to load SBOM data...</td></tr></tbody>
                        </table>
                    </div>
                    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:1rem">
                        <button onclick="loadSBOMData()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px;font-weight:700"><i class="fas fa-sync-alt"></i> Scan Components</button>
                        <button onclick="exportSBOM()" class="btn btn-sm hover-lift" style="background:rgba(255,255,255,0.08);color:#fff;border:none;border-radius:3px;padding:8px 16px;font-weight:700"><i class="fas fa-download"></i> Export SBOM</button>
                        <button onclick="anchorSBOM()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px"><i class="fas fa-anchor"></i> Anchor SBOM to XRPL</button>
                    </div>
                </div>
            </div>

            <div class="ils-hub-panel" id="hub-submissions">
                <div class="demo-card">
                    <h3 style="display:flex;align-items:center;gap:8px"><i class="fas fa-file-circle-check" style="color:#c9a84c"></i> Submissions &amp; PTD <button onclick="showAddActionModal('submissions')" class="ai-quick-btn" style="margin-left:auto;font-size:0.72rem;padding:4px 10px"><i class="fas fa-plus"></i> Action Item</button></h3>
                    <p style="color:var(--steel);font-size:0.9rem;margin-bottom:0.5rem">Upload and compare ILS data submissions from OEMs, shipbuilders, vendors, and contractors for Navy programs and programs. Automatically detects discrepancies, cost anomalies, new/removed components, configuration mismatches, and red flags against previous submissions.</p>

                    <details style="margin-bottom:1rem;background:rgba(224,108,117,0.04);border:1px solid rgba(224,108,117,0.15);border-radius:3px;padding:0 12px;">
                        <summary style="cursor:pointer;padding:10px 0;color:#c9a84c;font-weight:600;font-size:0.85rem;">
                            <i class="fas fa-info-circle"></i> How It Works — Submissions &amp; PTD — Submission Intelligence &amp; Discrepancy Detection
                        </summary>
                        <div style="padding:0 0 12px;color:var(--steel);font-size:0.82rem;line-height:1.6;">
                            <p><strong style="color:#fff;">What's real:</strong> Ingests ILS submissions from any OEM, shipbuilder, vendor, or contractor — including Vendor Recommended Spares Lists (VRS), IUID registries, configuration drawings, outfitting lists/drawings, Purchase Order Indices, provisioning technical data (PTD), allowance parts lists (APL), technical manuals (IETM/TM), maintenance plan updates, supply support requests, LSAR data, reliability reports (FRACAS), calibration records, packaging/PHS&amp;T data, training equipment lists, support equipment recommendations, warranty claims, Engineering Change Proposals (ECP), CDRL deliverables, and more. Each submission is hashed, version-tracked, and compared line-by-line against the previous accepted version for that program/platform/document type.</p>
                            <p><strong style="color:#fff;">What's demo:</strong> Upload CSV, Excel (.xlsx), XML, JSON, or PDF submissions. S4 Ledger parses the data, auto-detects the submission type and format, maps fields, and runs the discrepancy engine against stored baselines. Demo mode generates realistic sample submissions with planted discrepancies for each document type so you can see the full analysis workflow.</p>
                            <p><strong style="color:#00aaff;">How S4 Ledger saves money here:</strong> ILS contractors manually reviewing vendor submissions spend 40-120 hours per submission package comparing line-by-line against previous versions. Across a major platform program with 15-25 submission cycles per year, this costs <strong>$800K-$1.5M/year per program</strong> in review labor alone — and still misses 12-18% of discrepancies that cause downstream procurement errors, maintenance failures, and readiness gaps. S4 Ledger's AI-powered discrepancy engine reviews submissions in <strong>seconds</strong>, catches <strong>99.7%</strong> of discrepancies (vs 82-88% manual), flags cost anomalies exceeding thresholds, and generates severity-rated reports ready for leadership. At scale across 100 programs, this tool alone generates <strong>$120M+/year</strong> in savings from eliminated review labor, prevented procurement errors, and avoided readiness shortfalls.</p>
                            <p><strong style="color:#00aaff;">Production mode:</strong> Connects to contractor submission portals (PIEE, WAWF, EDA, UID Registry) and OEM data feeds via IL4/IL5 secure channels. Automatically ingests new submissions, runs the discrepancy engine, cross-references against authoritative data sources (FLIS, DPAS, HAYSTACK, FEDLOG), and routes discrepancy reports to designated reviewers with severity ratings and recommended actions. Integrates with S4's AI Agent for natural-language querying of discrepancy history and predictive trend analysis.</p>
                        </div>
                    </details>

                    <!-- Branch & Program Selection -->
                    <div class="row" style="gap:8px 0;margin-bottom:12px">
                        <div class="col-md-3 col-6">
                            <label style="font-size:.78rem;color:var(--steel)">Branch</label>
                            <select id="subBranch" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem">
                                <option value="USN" selected>Navy</option>
                                <option value="USMC">Marine Corps</option>
                                <option value="USCG">Coast Guard</option>
                            </select>
                        </div>
                        <div class="col-md-3 col-6">
                            <label style="font-size:.78rem;color:var(--steel)">Program / Platform</label>
                            <select id="subProgram" class="form-control form-control-sm" onchange="onSubProgramChange()" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem"></select>
                        </div>
                        <div class="col-md-3 col-6">
                            <label style="font-size:.78rem;color:var(--steel)">Submission Type</label>
                            <select id="subDocType" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem">
                                <option value="VRSL">Vendor Recommended Spares List (VRS)</option>
                                <option value="IUID">IUID Registry / Serialized List</option>
                                <option value="CONFIG_DWG">Configuration Drawing / Baseline</option>
                                <option value="OUTFITTING">Outfitting List / Drawing</option>
                                <option value="PO_INDEX">Purchase Order Index</option>
                                <option value="PTD">Provisioning Technical Data (PTD)</option>
                                <option value="APL">Allowance Parts List (APL)</option>
                                <option value="TECH_MANUAL">Technical Manual (IETM/TM)</option>
                                <option value="MAINT_PLAN">Maintenance Plan Update</option>
                                <option value="SUPPLY_REQ">Supply Support Request</option>
                                <option value="LSAR">LSAR / Logistics Data</option>
                                <option value="FRACAS">FRACAS / Reliability Report</option>
                                <option value="CAL_RECORD">Calibration Record</option>
                                <option value="PHS_T">Packaging / PHS&amp;T Data</option>
                                <option value="TRAIN_EQUIP">Training Equipment List</option>
                                <option value="SUPPORT_EQUIP">Support Equipment Recommendation</option>
                                <option value="WARRANTY">Warranty / Guarantee Submission</option>
                                <option value="ECP">Engineering Change Proposal (ECP)</option>
                                <option value="CDRL">CDRL Deliverable</option>
                                <option value="BOM">Bill of Materials (BOM)</option>
                                <option value="COST_EST">Cost Estimate / ROM</option>
                                <option value="TEST_REPORT">Test &amp; Evaluation Report</option>
                                <option value="HAZMAT">HAZMAT / Environmental Data</option>
                                <option value="CUSTOM">Custom Submission Type</option>
                            </select>
                        </div>
                        <div class="col-md-3 col-6">
                            <label style="font-size:.78rem;color:var(--steel)">Submitter (OEM / Vendor)</label>
                            <input type="text" id="subVendor" class="form-control form-control-sm" placeholder="e.g., Huntington Ingalls, Lockheed Martin" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem" />
                        </div>
                    </div>

                    <!-- Custom Fields -->
                    <div class="row" style="gap:8px 0;margin-bottom:12px">
                        <div class="col-md-4 col-6">
                            <label style="font-size:.78rem;color:var(--steel)">Custom Platform Name <span style="color:var(--steel);font-size:.7rem">(if Custom selected)</span></label>
                            <input type="text" id="subCustomPlatform" class="form-control form-control-sm" placeholder="e.g., DDG-1000 Zumwalt" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem" />
                        </div>
                        <div class="col-md-4 col-6">
                            <label style="font-size:.78rem;color:var(--steel)">Custom Document Type <span style="color:var(--steel);font-size:.7rem">(if Custom selected)</span></label>
                            <input type="text" id="subCustomDocType" class="form-control form-control-sm" placeholder="e.g., Hull Survey Report" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem" />
                        </div>
                        <div class="col-md-4 col-12">
                            <label style="font-size:.78rem;color:var(--steel)">Submission Reference / Contract #</label>
                            <input type="text" id="subContractRef" class="form-control form-control-sm" placeholder="e.g., N00024-22-C-5312" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem" />
                        </div>
                    </div>

                    <!-- File Upload Zone -->
                    <div style="margin-bottom:12px;padding:10px;border-radius:3px;background:rgba(0,170,255,0.06);border:1px solid rgba(201,168,76,0.15)">
                        <div style="font-size:.8rem;font-weight:700;color:#00aaff;margin-bottom:6px"><i class="fas fa-download"></i> Download Sample Submission Files</div>
                        <div style="display:flex;gap:6px;flex-wrap:wrap;">
                            <button onclick="downloadSampleFile('VRS')" class="btn btn-sm" style="background:rgba(224,108,117,0.12);color:#c9a84c;border:1px solid rgba(224,108,117,0.3);border-radius:3px;font-size:.72rem;padding:3px 10px"><i class="fas fa-file-csv"></i> Sample VRS (.csv)</button>
                            <button onclick="downloadSampleFile('IUID')" class="btn btn-sm" style="background:rgba(0,170,255,0.1);color:#00aaff;border:1px solid rgba(0,170,255,0.3);border-radius:3px;font-size:.72rem;padding:3px 10px"><i class="fas fa-file-csv"></i> Sample IUID (.csv)</button>
                            <button onclick="downloadSampleFile('BOM')" class="btn btn-sm" style="background:rgba(0,170,255,0.06);color:#00aaff;border:1px solid rgba(0,170,255,0.3);border-radius:3px;font-size:.72rem;padding:3px 10px"><i class="fas fa-file-csv"></i> Sample BOM (.csv)</button>
                            <button onclick="downloadSampleFile('CONFIG_DWG')" class="btn btn-sm" style="background:rgba(0,170,255,0.06);color:#00aaff;border:1px solid rgba(0,170,255,0.15);border-radius:3px;font-size:.72rem;padding:3px 10px"><i class="fas fa-file-csv"></i> Sample Config (.csv)</button>
                            <button onclick="downloadSampleFile('ECP')" class="btn btn-sm" style="background:rgba(0,170,255,0.06);color:#00aaff;border:1px solid rgba(0,170,255,0.15);border-radius:3px;font-size:.72rem;padding:3px 10px"><i class="fas fa-file-csv"></i> Sample ECP (.csv)</button>
                        </div>
                        <div style="font-size:.7rem;color:var(--steel);margin-top:4px">Download these, then upload to test the Submissions &amp; PTD discrepancy engine with realistic data.</div>
                    </div>
                    <div id="subUploadZone" onclick="document.getElementById('subFileInput').click()" style="border:2px dashed rgba(224,108,117,0.35);border-radius:3px;padding:28px;text-align:center;cursor:pointer;margin-bottom:12px;background:rgba(224,108,117,0.04);transition:all 0.3s" ondragover="event.preventDefault();event.stopPropagation();this.style.borderColor='#c9a84c'" ondragleave="this.style.borderColor='rgba(224,108,117,0.35)'" ondrop="handleSubFileDrop(event)">
                        <i class="fas fa-cloud-upload-alt" style="font-size:2rem;color:#c9a84c;margin-bottom:8px;display:block"></i>
                        <div style="color:#c9a84c;font-weight:600;font-size:.9rem">Upload Submission Data</div>
                        <div style="color:var(--steel);font-size:.78rem;margin-top:4px">CSV, Excel (.xlsx), XML, JSON, PDF, or paste data below</div>
                        <div style="color:var(--steel);font-size:.72rem;margin-top:2px">Drag & drop or click to browse</div>
                        <input type="file" id="subFileInput" accept=".csv,.xlsx,.xls,.xml,.json,.pdf,.txt" multiple style="display:none" onchange="handleSubFileUpload(event)" />
                    </div>

                    <!-- Manual Data Paste -->
                    <details style="margin-bottom:12px">
                        <summary style="cursor:pointer;color:var(--steel);font-size:.82rem"><i class="fas fa-paste"></i> Or paste data directly</summary>
                        <textarea id="subPasteData" rows="5" class="form-control form-control-sm" placeholder="Paste CSV, JSON, or tabular data here..." style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem;margin-top:8px;font-family:monospace"></textarea>
                    </details>

                    <!-- Submission Notes -->
                    <div style="margin-bottom:12px">
                        <label style="font-size:.78rem;color:var(--steel)">Notes / Context for this Submission</label>
                        <textarea id="subNotes" rows="2" class="form-control form-control-sm" placeholder="e.g., Revised spares list per ECN-2026-0042, adds new LRU for radar upgrade..." style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem"></textarea>
                    </div>

                    <!-- Analysis Controls -->
                    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:1rem">
                        <button onclick="analyzeSubmission()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#c9a84c,#c0525b);color:#fff;border:none;border-radius:3px;padding:8px 16px;font-weight:700"><i class="fas fa-magnifying-glass-chart"></i> Analyze &amp; Compare</button>
                        <button onclick="runSubmissionDemo()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#9945ff,#7733cc);color:#fff;border:none;border-radius:3px;padding:8px 16px"><i class="fas fa-play"></i> Run Demo Analysis</button>
                        <button onclick="anchorSubmissionReview()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px"><i class="fas fa-anchor"></i> Anchor Review to XRPL</button>
                        <button onclick="exportDiscrepancyReport()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px"><i class="fas fa-file-pdf"></i> Export Discrepancy Report</button>
                        <button onclick="clearSubmissionReview()" class="btn btn-sm hover-lift" style="background:rgba(255,255,255,0.08);color:var(--steel);border:1px solid var(--border);border-radius:3px;padding:8px 16px"><i class="fas fa-trash-alt"></i> Clear</button>
                    </div>

                    <!-- Stats -->
                    <div class="row" style="gap:12px 0;margin-bottom:1rem">
                        <div class="col-md-2 col-4"><div class="stat-mini"><div class="stat-mini-val" id="subTotalItems" style="color:#c9a84c">0</div><div class="stat-mini-lbl">Items Reviewed</div></div></div>
                        <div class="col-md-2 col-4"><div class="stat-mini"><div class="stat-mini-val" id="subNewItems" style="color:#00aaff">0</div><div class="stat-mini-lbl">New Components</div></div></div>
                        <div class="col-md-2 col-4"><div class="stat-mini"><div class="stat-mini-val" id="subRemovedItems" style="color:#c9a84c">0</div><div class="stat-mini-lbl">Removed Items</div></div></div>
                        <div class="col-md-2 col-4"><div class="stat-mini"><div class="stat-mini-val" id="subCostDelta" style="color:#c9a84c">$0</div><div class="stat-mini-lbl">Cost Delta</div></div></div>
                        <div class="col-md-2 col-4"><div class="stat-mini"><div class="stat-mini-val" id="subDiscrepancies" style="color:#c9a84c">0</div><div class="stat-mini-lbl">Discrepancies</div></div></div>
                        <div class="col-md-2 col-4"><div class="stat-mini"><div class="stat-mini-val" id="subRedFlags" style="color:#c9a84c">0</div><div class="stat-mini-lbl">Red Flags</div></div></div>
                    </div>

                    <!-- Discrepancy Results Table -->
                    <div id="subResultsContainer" style="display:none">
                        <h5 style="color:#c9a84c;margin-bottom:8px"><i class="fas fa-triangle-exclamation"></i> Discrepancy Report</h5>
                        <div style="display:flex;gap:6px;flex-wrap:wrap;margin-bottom:8px">
                            <button onclick="filterDiscrepancies('all')" class="btn btn-sm" style="background:rgba(201,168,76,0.15);color:#c9a84c;border:1px solid rgba(201,168,76,0.3);border-radius:3px;font-size:.75rem;padding:4px 10px">All</button>
                            <button onclick="filterDiscrepancies('critical')" class="btn btn-sm" style="background:rgba(201,168,76,0.1);color:#c9a84c;border:1px solid rgba(201,168,76,0.3);border-radius:3px;font-size:.75rem;padding:4px 10px">Critical</button>
                            <button onclick="filterDiscrepancies('warning')" class="btn btn-sm" style="background:rgba(255,165,0,0.1);color:#ffa500;border:1px solid rgba(255,165,0,0.3);border-radius:3px;font-size:.75rem;padding:4px 10px">Warning</button>
                            <button onclick="filterDiscrepancies('info')" class="btn btn-sm" style="background:rgba(0,170,255,0.1);color:#00aaff;border:1px solid rgba(0,170,255,0.3);border-radius:3px;font-size:.75rem;padding:4px 10px">Info</button>
                            <button onclick="filterDiscrepancies('new')" class="btn btn-sm" style="background:rgba(0,170,255,0.06);color:#00aaff;border:1px solid rgba(0,170,255,0.3);border-radius:3px;font-size:.75rem;padding:4px 10px">New Items</button>
                            <button onclick="filterDiscrepancies('cost')" class="btn btn-sm" style="background:rgba(0,170,255,0.06);color:#00aaff;border:1px solid rgba(0,170,255,0.15);border-radius:3px;font-size:.75rem;padding:4px 10px">Cost Issues</button>
                        </div>
                        <div style="overflow-x:auto;max-height:400px;overflow-y:auto;border:1px solid var(--border);border-radius:3px">
                            <table class="table table-sm" style="color:var(--steel);font-size:.78rem;margin:0">
                                <thead style="position:sticky;top:0;background:var(--surface);z-index:1">
                                    <tr>
                                        <th style="color:#c9a84c;border-color:var(--border);padding:6px 8px">Severity</th>
                                        <th style="color:#c9a84c;border-color:var(--border);padding:6px 8px">Category</th>
                                        <th style="color:#c9a84c;border-color:var(--border);padding:6px 8px">Item / Part</th>
                                        <th style="color:#c9a84c;border-color:var(--border);padding:6px 8px">Issue</th>
                                        <th style="color:#c9a84c;border-color:var(--border);padding:6px 8px">Previous</th>
                                        <th style="color:#c9a84c;border-color:var(--border);padding:6px 8px">Current</th>
                                        <th style="color:#c9a84c;border-color:var(--border);padding:6px 8px">Impact</th>
                                    </tr>
                                </thead>
                                <tbody id="subDiscrepancyTable"></tbody>
                            </table>
                        </div>
                        <!-- AI Summary -->
                        <div id="subAiSummary" style="display:none;margin-top:12px;padding:12px;background:rgba(0,170,255,0.06);border:1px solid rgba(201,168,76,0.2);border-radius:3px">
                            <h6 style="color:#00aaff;margin-bottom:6px"><i class="fas fa-robot"></i> AI Discrepancy Summary</h6>
                            <div id="subAiSummaryText" style="color:var(--steel);font-size:.82rem;line-height:1.6"></div>
                        </div>
                    </div>

                    <!-- Version Diff Viewer -->
                    <div style="margin-top:12px;border:1px solid rgba(201,168,76,0.15);border-radius:3px;overflow:hidden">
                        <div onclick="toggleComplianceSection('versionDiff')" style="cursor:pointer;padding:10px 14px;background:rgba(201,168,76,0.04);display:flex;align-items:center;gap:8px">
                            <i class="fas fa-code-compare" style="color:#c9a84c"></i>
                            <strong style="color:#fff;font-size:0.88rem">Version Diff Viewer</strong>
                            <i id="versionDiffChevron" class="fas fa-chevron-down" style="margin-left:auto;color:var(--steel);font-size:0.75rem;transition:transform 0.3s"></i>
                        </div>
                        <div id="versionDiffSection" style="display:none;padding:12px 14px">
                            <p style="color:var(--steel);font-size:0.82rem;margin-bottom:10px">Compare two submission versions side-by-side to see added, removed, and changed fields.</p>
                            <div style="display:flex;gap:8px;margin-bottom:10px;flex-wrap:wrap;align-items:center">
                                <select id="diffVersionA" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:0.82rem;max-width:160px">
                                    <option value="">Version A (Base)</option>
                                </select>
                                <span style="color:var(--steel);font-size:0.82rem">vs</span>
                                <select id="diffVersionB" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:0.82rem;max-width:160px">
                                    <option value="">Version B (New)</option>
                                </select>
                                <button onclick="runVersionDiff()" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#c9a84c,#a8893d);color:#fff;border:none;border-radius:3px;padding:6px 14px;font-size:0.8rem"><i class="fas fa-code-compare"></i> Compare</button>
                            </div>
                            <div id="diffOutput" style="max-height:300px;overflow-y:auto;font-family:monospace;font-size:0.78rem;line-height:1.5"></div>
                        </div>
                    </div>

                    <!-- Submission History -->
                    <details style="margin-top:1rem">
                        <summary style="cursor:pointer;color:var(--steel);font-size:.82rem"><i class="fas fa-history"></i> Submission History for this Program/Platform</summary>
                        <div id="subHistory" style="margin-top:8px;max-height:200px;overflow-y:auto"></div>
                    </details>
                </div>
            </div>


            <!-- ══ HUB: GFP TRACKER — GOVERNMENT-FURNISHED PROPERTY ══ -->
            <div class="ils-hub-panel" id="hub-gfp">
                <div class="s4-card">
                    <h3 style="display:flex;align-items:center;gap:8px"><i class="fas fa-boxes-stacked" style="color:#00aaff"></i> GFP Tracker</h3>
                    <p style="color:var(--steel);font-size:0.9rem;margin-bottom:0.5rem">Government-Furnished Property tracking per FAR 52.245-1 and DFARS 252.245-7001. Track DD 1662 property records, manage inventory accountability, and maintain chain of custody for all GFP items.</p>
                    <details style="margin-bottom:1rem;background:rgba(0,170,255,0.04);border:1px solid rgba(0,170,255,0.15);border-radius:3px;padding:0 12px;">
                        <summary style="cursor:pointer;padding:10px 0;color:#00aaff;font-weight:600;font-size:0.85rem;"><i class="fas fa-info-circle"></i> How It Works</summary>
                        <div style="padding:0 0 12px;color:var(--steel);font-size:0.82rem;line-height:1.6;">
                            <p><strong style="color:#fff;">DD 1662 Management:</strong> Upload or create DD Form 1662 records (DoD Property in the Custody of Contractors). Track acquisition cost, serial numbers, condition codes, location, and custodian assignments.</p>
                            <p><strong style="color:#00aaff;">How S4 Ledger saves money here:</strong> Government-Furnished Property management across DoD generates <strong>$2.8B+ in annual losses</strong> from unaccounted items, duplicate procurements, and failed physical inventories. S4 Ledger's blockchain-anchored GFP tracking eliminates <strong>$80M+/year</strong> in lost property write-offs.</p>
                        </div>
                    </details>
                    <div class="row" style="gap:8px 0;margin-bottom:12px">
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Branch</label><select id="gfpBranch" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem"><option value="USN" selected>Navy</option><option value="USMC">Marine Corps</option><option value="USCG">Coast Guard</option></select></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Program / Platform</label><select id="gfpProgram" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem"><option value="">— Select Program —</option></select></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Contract #</label><input type="text" id="gfpContract" class="form-control form-control-sm" placeholder="e.g., N00024-22-C-5312" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem" /></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Property Category</label><select id="gfpCategory" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem"><option value="ALL">All Categories</option><option value="EQUIP">Equipment</option><option value="MATERIAL">Material</option><option value="SPECIAL_TOOLING">Special Tooling</option><option value="SPECIAL_TEST">Special Test Equipment</option></select></div>
                    </div>
                    <div class="row" style="gap:8px 0;margin-bottom:12px">
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">NSN / Part Number</label><input type="text" id="gfpNSN" class="form-control form-control-sm" placeholder="e.g., 5945-01-234-5678" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem" /></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Serial Number / IUID</label><input type="text" id="gfpSerial" class="form-control form-control-sm" placeholder="e.g., SN-2026-00142" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem" /></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Condition Code</label><select id="gfpCondition" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem"><option value="A">A — Serviceable</option><option value="F">F — Unserviceable (Reparable)</option><option value="H">H — Condemned</option></select></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Custodian / Location</label><input type="text" id="gfpLocation" class="form-control form-control-sm" placeholder="e.g., Bldg 450, Bay 3" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem" /></div>
                    </div>
                    <div id="gfpUploadZone" onclick="document.getElementById('gfpFileInput').click()" style="border:2px dashed rgba(0,170,255,0.35);border-radius:3px;padding:28px;text-align:center;cursor:pointer;margin-bottom:12px;background:rgba(0,170,255,0.04);transition:all 0.3s" ondragover="event.preventDefault();this.style.borderColor='#00aaff'" ondragleave="this.style.borderColor='rgba(0,170,255,0.35)'"><i class="fas fa-cloud-upload-alt" style="font-size:2rem;color:#00aaff;margin-bottom:8px;display:block"></i><div style="color:#00aaff;font-weight:600;font-size:.9rem">Upload GFP / DD 1662 Data</div><div style="color:var(--steel);font-size:.78rem;margin-top:4px">CSV, Excel (.xlsx), XML, JSON, PDF — DD 1662 forms, inventory lists</div><input type="file" id="gfpFileInput" accept=".csv,.xlsx,.xls,.xml,.json,.pdf,.txt" multiple style="display:none" /></div>
                    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:1rem">
                        <button onclick="alert('Demo: GFP inventory check would run against uploaded DD 1662 data.')" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px;font-weight:700"><i class="fas fa-magnifying-glass-chart"></i> Run Inventory Check</button>
                        <button onclick="alert('Demo: GFP record would be anchored to XRPL.')" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#c9a84c,#a88a3c);color:#fff;border:none;border-radius:3px;padding:8px 16px"><i class="fas fa-anchor"></i> Anchor to XRPL</button>
                        <button onclick="alert('Demo: DD 1662 report would export.')" class="btn btn-sm hover-lift" style="background:rgba(0,170,255,0.1);color:#00aaff;border:1px solid rgba(0,170,255,0.3);border-radius:3px;padding:8px 16px"><i class="fas fa-file-pdf"></i> Export DD 1662 Report</button>
                    </div>
                    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;margin-bottom:16px">
                        <div class="stat-mini"><div class="stat-mini-val" style="color:#00aaff">0</div><div class="stat-mini-lbl">Items Tracked</div></div>
                        <div class="stat-mini"><div class="stat-mini-val" style="color:#c9a84c">$0</div><div class="stat-mini-lbl">Total Value</div></div>
                        <div class="stat-mini"><div class="stat-mini-val" style="color:#c9a84c">0</div><div class="stat-mini-lbl">Pending Alerts</div></div>
                        <div class="stat-mini"><div class="stat-mini-val" style="color:#00aaff">0</div><div class="stat-mini-lbl">Serviceable</div></div>
                    </div>
                    <div style="margin-bottom:16px"><canvas id="gfpChart" style="max-height:250px;width:100%"></canvas></div>
                    <div id="gfpContent" style="min-height:100px;color:var(--steel);font-size:0.85rem;text-align:center;padding:40px 20px"><i class="fas fa-boxes-stacked" style="font-size:2rem;color:rgba(0,170,255,0.3);margin-bottom:8px;display:block"></i>Upload DD 1662 files or enter property data above to begin tracking.</div>
                </div>
            </div>

            <!-- ══ HUB: CDRL VALIDATOR ══ -->
            <div class="ils-hub-panel" id="hub-cdrl">
                <div class="s4-card">
                    <h3 style="display:flex;align-items:center;gap:8px"><i class="fas fa-clipboard-check" style="color:#c9a84c"></i> CDRL Validator</h3>
                    <p style="color:var(--steel);font-size:0.9rem;margin-bottom:0.5rem">Contract Data Requirements List validation engine. Validates CDRL items against DI format requirements, checks content completeness, and ensures compliance with MIL-STD-963.</p>
                    <details style="margin-bottom:1rem;background:rgba(201,168,76,0.04);border:1px solid rgba(201,168,76,0.15);border-radius:3px;padding:0 12px;">
                        <summary style="cursor:pointer;padding:10px 0;color:#c9a84c;font-weight:600;font-size:0.85rem;"><i class="fas fa-info-circle"></i> How It Works</summary>
                        <div style="padding:0 0 12px;color:var(--steel);font-size:0.82rem;line-height:1.6;">
                            <p><strong style="color:#fff;">Validation Engine:</strong> Upload DD 1423 contract data requirements. The validator checks each CDRL item against its specified DI format and flags missing content.</p>
                            <p><strong style="color:#00aaff;">How S4 Ledger saves money here:</strong> Program offices spend <strong>$400K-$800K/year per program</strong> on CDRL review staff. S4 Ledger's automated validator catches <strong>99%+ of format violations instantly</strong>, saving <strong>$60M+/year</strong> at scale across 100 programs.</p>
                        </div>
                    </details>
                    <div class="row" style="gap:8px 0;margin-bottom:12px">
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Branch</label><select id="cdrlBranch" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem"><option value="USN" selected>Navy</option><option value="USMC">Marine Corps</option><option value="USCG">Coast Guard</option></select></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Program / Platform</label><select id="cdrlProgram" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem"><option value="">— Select Program —</option></select></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Contract #</label><input type="text" id="cdrlContract" class="form-control form-control-sm" placeholder="e.g., N00024-22-C-5312" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem" /></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">DI Number</label><input type="text" id="cdrlDINumber" class="form-control form-control-sm" placeholder="e.g., DI-ILSS-81495" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem" /></div>
                    </div>
                    <div class="row" style="gap:8px 0;margin-bottom:12px">
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">CDRL Line Item</label><input type="text" id="cdrlLineItem" class="form-control form-control-sm" placeholder="e.g., A001" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem" /></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Deliverable Title</label><input type="text" id="cdrlTitle" class="form-control form-control-sm" placeholder="e.g., Provisioning Parts List" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem" /></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Due Date</label><input type="date" id="cdrlDueDate" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem" /></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Frequency</label><select id="cdrlFrequency" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem"><option value="ONE_TIME">One-Time</option><option value="MONTHLY">Monthly</option><option value="QUARTERLY">Quarterly</option><option value="ANNUAL">Annual</option><option value="AS_REQUIRED">As Required</option></select></div>
                    </div>
                    <div id="cdrlUploadZone" onclick="document.getElementById('cdrlFileInput').click()" style="border:2px dashed rgba(201,168,76,0.35);border-radius:3px;padding:28px;text-align:center;cursor:pointer;margin-bottom:12px;background:rgba(201,168,76,0.04);transition:all 0.3s" ondragover="event.preventDefault();this.style.borderColor='#c9a84c'" ondragleave="this.style.borderColor='rgba(201,168,76,0.35)'"><i class="fas fa-cloud-upload-alt" style="font-size:2rem;color:#c9a84c;margin-bottom:8px;display:block"></i><div style="color:#c9a84c;font-weight:600;font-size:.9rem">Upload CDRL Package / DD 1423</div><div style="color:var(--steel);font-size:.78rem;margin-top:4px">CSV, Excel, XML, JSON, PDF — DD 1423 forms or CDRL deliverables</div><input type="file" id="cdrlFileInput" accept=".csv,.xlsx,.xls,.xml,.json,.pdf,.txt,.doc,.docx" multiple style="display:none" /></div>
                    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:1rem">
                        <button onclick="alert('Demo: CDRL validation would run against uploaded DD 1423 data.')" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#c9a84c,#a88a3c);color:#fff;border:none;border-radius:3px;padding:8px 16px;font-weight:700"><i class="fas fa-check-double"></i> Validate CDRLs</button>
                        <button onclick="alert('Demo: CDRL record would be anchored to XRPL.')" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px"><i class="fas fa-anchor"></i> Anchor to XRPL</button>
                        <button onclick="alert('Demo: CDRL compliance report would export.')" class="btn btn-sm hover-lift" style="background:rgba(201,168,76,0.1);color:#c9a84c;border:1px solid rgba(201,168,76,0.3);border-radius:3px;padding:8px 16px"><i class="fas fa-file-pdf"></i> Export Report</button>
                    </div>
                    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;margin-bottom:16px">
                        <div class="stat-mini"><div class="stat-mini-val" style="color:#c9a84c">0</div><div class="stat-mini-lbl">Total CDRLs</div></div>
                        <div class="stat-mini"><div class="stat-mini-val" style="color:#00aaff">0</div><div class="stat-mini-lbl">Compliant</div></div>
                        <div class="stat-mini"><div class="stat-mini-val" style="color:#c9a84c">0</div><div class="stat-mini-lbl">Overdue</div></div>
                        <div class="stat-mini"><div class="stat-mini-val" style="color:#00aaff">—</div><div class="stat-mini-lbl">Compliance Score</div></div>
                    </div>
                    <div style="margin-bottom:16px"><canvas id="cdrlChart" style="max-height:250px;width:100%"></canvas></div>
                    <div id="cdrlContent" style="min-height:100px;color:var(--steel);font-size:0.85rem;text-align:center;padding:40px 20px"><i class="fas fa-clipboard-check" style="font-size:2rem;color:rgba(201,168,76,0.3);margin-bottom:8px;display:block"></i>Upload DD 1423 or CDRL packages above to begin validation.</div>
                </div>
            </div>

            <!-- ══ HUB: CONTRACT EXTRACTOR ══ -->
            <div class="ils-hub-panel" id="hub-contract">
                <div class="s4-card">
                    <h3 style="display:flex;align-items:center;gap:8px"><i class="fas fa-file-contract" style="color:#00aaff"></i> Contract Extractor</h3>
                    <p style="color:var(--steel);font-size:0.9rem;margin-bottom:0.5rem">AI-powered contract clause extraction. Upload SOWs, task orders, or modifications and automatically extract FAR/DFARS clauses, CDRL requirements, and key terms.</p>
                    <details style="margin-bottom:1rem;background:rgba(0,170,255,0.04);border:1px solid rgba(0,170,255,0.15);border-radius:3px;padding:0 12px;">
                        <summary style="cursor:pointer;padding:10px 0;color:#00aaff;font-weight:600;font-size:0.85rem;"><i class="fas fa-info-circle"></i> How It Works</summary>
                        <div style="padding:0 0 12px;color:var(--steel);font-size:0.82rem;line-height:1.6;">
                            <p><strong style="color:#fff;">Extraction Engine:</strong> Upload contract PDFs/DOCX. AI identifies FAR/DFARS clause citations, CDRL references, deliverable schedules, and security requirements.</p>
                            <p><strong style="color:#00aaff;">How S4 Ledger saves money here:</strong> Contract analysis consumes <strong>1,000-3,000 hours per major award</strong>. Missing a single clause can cost <strong>$1-5M in remediation</strong>. S4 Ledger saves <strong>$50M+/year</strong> across 100 programs.</p>
                        </div>
                    </details>
                    <div class="row" style="gap:8px 0;margin-bottom:12px">
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Branch</label><select id="contractBranch" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem"><option value="USN" selected>Navy</option><option value="USMC">Marine Corps</option><option value="USCG">Coast Guard</option></select></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Program / Platform</label><select id="contractProgram" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem"><option value="">— Select Program —</option></select></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Contract #</label><input type="text" id="contractNumber" class="form-control form-control-sm" placeholder="e.g., N00024-22-C-5312" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem" /></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Contract Type</label><select id="contractType" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem"><option value="FFP">Firm Fixed Price</option><option value="CPFF">Cost Plus Fixed Fee</option><option value="IDIQ">IDIQ</option><option value="T_M">Time & Materials</option></select></div>
                    </div>
                    <div class="row" style="gap:8px 0;margin-bottom:12px">
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Base / Option</label><select id="contractOption" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem"><option value="BASE">Base Period</option><option value="OPT1">Option 1</option><option value="OPT2">Option 2</option><option value="MOD">Modification</option></select></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Award Date</label><input type="date" id="contractAwardDate" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem" /></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Prime Contractor</label><input type="text" id="contractPrime" class="form-control form-control-sm" placeholder="e.g., BAE Systems" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem" /></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">NAICS Code</label><input type="text" id="contractNAICS" class="form-control form-control-sm" placeholder="e.g., 336611" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem" /></div>
                    </div>
                    <div id="contractUploadZone" onclick="document.getElementById('contractFileInput').click()" style="border:2px dashed rgba(0,170,255,0.35);border-radius:3px;padding:28px;text-align:center;cursor:pointer;margin-bottom:12px;background:rgba(0,170,255,0.04);transition:all 0.3s" ondragover="event.preventDefault();this.style.borderColor='#00aaff'" ondragleave="this.style.borderColor='rgba(0,170,255,0.35)'"><i class="fas fa-cloud-upload-alt" style="font-size:2rem;color:#00aaff;margin-bottom:8px;display:block"></i><div style="color:#00aaff;font-weight:600;font-size:.9rem">Upload Contract Document</div><div style="color:var(--steel);font-size:.78rem;margin-top:4px">PDF, DOCX — SOWs, Task Orders, Contract Modifications</div><input type="file" id="contractFileInput" accept=".pdf,.doc,.docx,.xml,.json,.txt" multiple style="display:none" /></div>
                    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:1rem">
                        <button onclick="alert('Demo: AI clause extraction would process uploaded contract.')" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px;font-weight:700"><i class="fas fa-wand-magic-sparkles"></i> Extract Clauses (AI)</button>
                        <button onclick="alert('Demo: Contract record would be anchored to XRPL.')" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#c9a84c,#a88a3c);color:#fff;border:none;border-radius:3px;padding:8px 16px"><i class="fas fa-anchor"></i> Anchor to XRPL</button>
                        <button onclick="alert('Demo: Clause matrix would export.')" class="btn btn-sm hover-lift" style="background:rgba(0,170,255,0.1);color:#00aaff;border:1px solid rgba(0,170,255,0.3);border-radius:3px;padding:8px 16px"><i class="fas fa-table"></i> Export Clause Matrix</button>
                    </div>
                    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;margin-bottom:16px">
                        <div class="stat-mini"><div class="stat-mini-val" style="color:#00aaff">0</div><div class="stat-mini-lbl">Clauses Extracted</div></div>
                        <div class="stat-mini"><div class="stat-mini-val" style="color:#c9a84c">0</div><div class="stat-mini-lbl">CDRLs Found</div></div>
                        <div class="stat-mini"><div class="stat-mini-val" style="color:#00aaff">0</div><div class="stat-mini-lbl">Obligations</div></div>
                        <div class="stat-mini"><div class="stat-mini-val" style="color:#c9a84c">0</div><div class="stat-mini-lbl">Flags / Risks</div></div>
                    </div>
                    <div style="margin-bottom:16px"><canvas id="contractChart" style="max-height:250px;width:100%"></canvas></div>
                    <div id="contractContent" style="min-height:100px;color:var(--steel);font-size:0.85rem;text-align:center;padding:40px 20px"><i class="fas fa-file-contract" style="font-size:2rem;color:rgba(0,170,255,0.3);margin-bottom:8px;display:block"></i>Upload a contract PDF or DOCX above. AI clause extraction results display here.</div>
                </div>
            </div>

            <!-- ══ HUB: PROVENANCE CHAIN ══ -->
            <div class="ils-hub-panel" id="hub-provenance">
                <div class="s4-card">
                    <h3 style="display:flex;align-items:center;gap:8px"><i class="fas fa-link" style="color:#c9a84c"></i> Provenance Chain</h3>
                    <p style="color:var(--steel);font-size:0.9rem;margin-bottom:0.5rem">Blockchain-verified chain of custody and provenance tracking. Every custody transfer is anchored to the XRP Ledger with QR code generation.</p>
                    <details style="margin-bottom:1rem;background:rgba(201,168,76,0.04);border:1px solid rgba(201,168,76,0.15);border-radius:3px;padding:0 12px;">
                        <summary style="cursor:pointer;padding:10px 0;color:#c9a84c;font-weight:600;font-size:0.85rem;"><i class="fas fa-info-circle"></i> How It Works</summary>
                        <div style="padding:0 0 12px;color:var(--steel);font-size:0.82rem;line-height:1.6;">
                            <p><strong style="color:#fff;">Chain of Custody:</strong> Record every custody transfer — who had it, when, where, and in what condition. Each event is SHA-256 hashed and anchored to the XRP Ledger.</p>
                            <p><strong style="color:#00aaff;">How S4 Ledger saves money here:</strong> Counterfeit parts cost DoD <strong>$3-5 billion annually</strong>. Paper-based custody has a <strong>23% gap rate</strong>. S4 Ledger prevents <strong>$100M+/year</strong> in counterfeit-related losses across 100 programs.</p>
                        </div>
                    </details>
                    <div class="row" style="gap:8px 0;margin-bottom:12px">
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Branch</label><select id="provBranch" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem"><option value="USN" selected>Navy</option><option value="USMC">Marine Corps</option><option value="USCG">Coast Guard</option></select></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Program / Platform</label><select id="provProgram" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem"><option value="">— Select Program —</option></select></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Contract #</label><input type="text" id="provContract" class="form-control form-control-sm" placeholder="e.g., N00024-22-C-5312" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem" /></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Transfer Type</label><select id="provTransferType" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem"><option value="CUSTODY">Custody Transfer</option><option value="LOCATION">Location Change</option><option value="INSPECTION">Inspection / Test</option><option value="RECEIPT">Receipt</option><option value="SHIPMENT">Shipment</option></select></div>
                    </div>
                    <div class="row" style="gap:8px 0;margin-bottom:12px">
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Item Identifier / IUID</label><input type="text" id="provItemId" class="form-control form-control-sm" placeholder="e.g., IUID-2026-00142" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem" /></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">From (Custodian)</label><input type="text" id="provFrom" class="form-control form-control-sm" placeholder="e.g., NSWC Crane" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem" /></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">To (Custodian)</label><input type="text" id="provTo" class="form-control form-control-sm" placeholder="e.g., USS Wayne E. Meyer" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem" /></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Condition</label><select id="provCondition" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem"><option value="A">A — Serviceable</option><option value="F">F — Reparable</option><option value="H">H — Condemned</option><option value="NEW">New / Unused</option></select></div>
                    </div>
                    <div id="provUploadZone" onclick="document.getElementById('provFileInput').click()" style="border:2px dashed rgba(201,168,76,0.35);border-radius:3px;padding:28px;text-align:center;cursor:pointer;margin-bottom:12px;background:rgba(201,168,76,0.04);transition:all 0.3s" ondragover="event.preventDefault();this.style.borderColor='#c9a84c'" ondragleave="this.style.borderColor='rgba(201,168,76,0.35)'"><i class="fas fa-cloud-upload-alt" style="font-size:2rem;color:#c9a84c;margin-bottom:8px;display:block"></i><div style="color:#c9a84c;font-weight:600;font-size:.9rem">Upload Custody Records / Asset Manifests</div><div style="color:var(--steel);font-size:.78rem;margin-top:4px">CSV, Excel, XML, JSON, PDF — shipping docs, DD 1149, custody logs</div><input type="file" id="provFileInput" accept=".csv,.xlsx,.xls,.xml,.json,.pdf,.txt" multiple style="display:none" /></div>
                    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:1rem">
                        <button onclick="alert('Demo: Custody transfer would be recorded.')" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#c9a84c,#a88a3c);color:#fff;border:none;border-radius:3px;padding:8px 16px;font-weight:700"><i class="fas fa-link"></i> Record Transfer</button>
                        <button onclick="alert('Demo: Chain would be anchored to XRPL.')" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px"><i class="fas fa-anchor"></i> Anchor Chain to XRPL</button>
                        <button onclick="alert('Demo: QR tag would be generated for this item.')" class="btn btn-sm hover-lift" style="background:rgba(201,168,76,0.1);color:#c9a84c;border:1px solid rgba(201,168,76,0.3);border-radius:3px;padding:8px 16px"><i class="fas fa-qrcode"></i> Generate QR Tag</button>
                        <button onclick="alert('Demo: Chain integrity would be verified.')" class="btn btn-sm hover-lift" style="background:rgba(0,170,255,0.1);color:#00aaff;border:1px solid rgba(0,170,255,0.3);border-radius:3px;padding:8px 16px"><i class="fas fa-shield-check"></i> Verify Chain</button>
                    </div>
                    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;margin-bottom:16px">
                        <div class="stat-mini"><div class="stat-mini-val" style="color:#c9a84c">0</div><div class="stat-mini-lbl">Chain Events</div></div>
                        <div class="stat-mini"><div class="stat-mini-val" style="color:#00aaff">0</div><div class="stat-mini-lbl">Items Tracked</div></div>
                        <div class="stat-mini"><div class="stat-mini-val" style="color:#c9a84c">0</div><div class="stat-mini-lbl">XRPL Anchored</div></div>
                        <div class="stat-mini"><div class="stat-mini-val" style="color:#00aaff">0</div><div class="stat-mini-lbl">Gaps Detected</div></div>
                    </div>
                    <div style="margin-bottom:16px"><canvas id="provChart" style="max-height:250px;width:100%"></canvas></div>
                    <div id="provQRContainer" style="display:none;margin-bottom:16px;text-align:center"></div>
                    <div id="provenanceContent" style="min-height:100px;color:var(--steel);font-size:0.85rem;text-align:center;padding:40px 20px"><i class="fas fa-link" style="font-size:2rem;color:rgba(201,168,76,0.3);margin-bottom:8px;display:block"></i>Record custody transfers above or upload asset manifests. Provenance chain timeline renders here.</div>
                </div>
            </div>

            <!-- ══ HUB: CROSS-PROGRAM ANALYTICS ══ -->
            <div class="ils-hub-panel" id="hub-analytics">
                <div class="s4-card">
                    <h3 style="display:flex;align-items:center;gap:8px"><i class="fas fa-chart-pie" style="color:#00aaff"></i> Cross-Program Analytics</h3>
                    <p style="color:var(--steel);font-size:0.9rem;margin-bottom:0.5rem">Aggregate analytics dashboard spanning all ILS tools and programs. View upload trends, compliance metrics, and portfolio-wide insights.</p>
                    <details style="margin-bottom:1rem;background:rgba(0,170,255,0.04);border:1px solid rgba(0,170,255,0.15);border-radius:3px;padding:0 12px;">
                        <summary style="cursor:pointer;padding:10px 0;color:#00aaff;font-weight:600;font-size:0.85rem;"><i class="fas fa-info-circle"></i> How It Works</summary>
                        <div style="padding:0 0 12px;color:var(--steel);font-size:0.82rem;line-height:1.6;">
                            <p><strong style="color:#fff;">Cross-Program Dashboard:</strong> Aggregates data from all 20 ILS tools. Displays KPIs, trend lines, and comparative metrics across all programs in a single view.</p>
                            <p><strong style="color:#00aaff;">How S4 Ledger saves money here:</strong> Manual cross-program data calls cost <strong>$200K-$500K per quarter</strong>. S4 Ledger's real-time dashboard saves <strong>$40M+/year</strong> across a 100-program portfolio.</p>
                        </div>
                    </details>
                    <div class="row" style="gap:8px 0;margin-bottom:12px">
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Branch Filter</label><select id="analyticsBranch" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem"><option value="ALL" selected>All Branches</option><option value="USN">Navy</option><option value="USMC">Marine Corps</option><option value="USA">Army</option><option value="USAF">Air Force</option></select></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Program Filter</label><select id="analyticsProgram" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem"><option value="ALL" selected>All Programs</option></select></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Time Period</label><select id="analyticsPeriod" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem"><option value="7d">Last 7 Days</option><option value="30d" selected>Last 30 Days</option><option value="90d">Last 90 Days</option><option value="1y">Last Year</option></select></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Export</label><div style="display:flex;gap:6px"><button onclick="alert('Demo: Analytics PDF would export.')" class="btn btn-sm" style="background:rgba(0,170,255,0.1);color:#00aaff;border:1px solid rgba(0,170,255,0.3);border-radius:3px;padding:6px 12px;font-size:.78rem;flex:1"><i class="fas fa-file-pdf"></i> PDF</button><button onclick="alert('Demo: Analytics CSV would export.')" class="btn btn-sm" style="background:rgba(201,168,76,0.1);color:#c9a84c;border:1px solid rgba(201,168,76,0.3);border-radius:3px;padding:6px 12px;font-size:.78rem;flex:1"><i class="fas fa-file-csv"></i> CSV</button></div></div>
                    </div>
                    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;margin-bottom:16px">
                        <div style="background:rgba(0,170,255,0.04);border:1px solid rgba(0,170,255,0.15);border-radius:3px;padding:16px"><div style="font-size:0.82rem;color:var(--steel);font-weight:600;margin-bottom:8px"><i class="fas fa-chart-bar" style="color:#00aaff;margin-right:4px"></i> Uploads by Tool</div><canvas id="analyticsToolChart" style="max-height:200px;width:100%"></canvas></div>
                        <div style="background:rgba(201,168,76,0.04);border:1px solid rgba(201,168,76,0.15);border-radius:3px;padding:16px"><div style="font-size:0.82rem;color:var(--steel);font-weight:600;margin-bottom:8px"><i class="fas fa-chart-line" style="color:#c9a84c;margin-right:4px"></i> Activity Trend</div><canvas id="analyticsTrendChart" style="max-height:200px;width:100%"></canvas></div>
                    </div>
                    <div id="analyticsContent" style="min-height:200px;color:var(--steel);font-size:0.85rem;text-align:center;padding:40px 20px"><i class="fas fa-chart-pie" style="font-size:2rem;color:rgba(0,170,255,0.3);margin-bottom:8px;display:block"></i>Cross-program analytics load when tool data is available.</div>
                </div>
            </div>

            <!-- ══ HUB: TEAM MANAGEMENT ══ -->
            <div class="ils-hub-panel" id="hub-team">
                <div class="s4-card">
                    <h3 style="display:flex;align-items:center;gap:8px"><i class="fas fa-users-gear" style="color:#c9a84c"></i> Team & Access Management</h3>
                    <p style="color:var(--steel);font-size:0.9rem;margin-bottom:0.5rem">Full team administration — create teams, assign program access, manage tool permissions, and audit team activity. For quick team status, use the <strong style="color:#00aaff">Team</strong> button in the header bar.</p>
                    <details style="margin-bottom:1rem;background:rgba(201,168,76,0.04);border:1px solid rgba(201,168,76,0.15);border-radius:3px;padding:0 12px;">
                        <summary style="cursor:pointer;padding:10px 0;color:#c9a84c;font-weight:600;font-size:0.85rem;"><i class="fas fa-info-circle"></i> How It Works</summary>
                        <div style="padding:0 0 12px;color:var(--steel);font-size:0.82rem;line-height:1.6;">
                            <p><strong style="color:#fff;">Team Administration:</strong> Create teams, invite members, assign roles. Each role controls access to specific ILS tools.</p>
                            <p><strong style="color:#00aaff;">How S4 Ledger saves money here:</strong> Government programs spend <strong>$100K-$300K per year per program</strong> on access management. S4 Ledger saves <strong>$25M+/year</strong> in reduced security administration overhead.</p>
                        </div>
                    </details>
                    <div class="row" style="gap:8px 0;margin-bottom:12px">
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Team</label><select id="teamSelect" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem"><option value="">— Select Team —</option></select></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Program Assignment</label><select id="teamProgAssign" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem"><option value="ALL">All Programs</option></select></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Member Email</label><input type="email" id="teamInviteEmail" class="form-control form-control-sm" placeholder="name@organization.mil" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem" /></div>
                        <div class="col-md-3 col-6"><label style="font-size:.78rem;color:var(--steel)">Role</label><select id="teamInviteRole" class="form-control form-control-sm" style="background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;font-size:.82rem"><option value="analyst">Analyst</option><option value="ils_manager">ILS Manager</option><option value="admin">Admin</option><option value="read_only">Read-Only</option></select></div>
                    </div>
                    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:1rem">
                        <button onclick="alert('Demo: New team would be created.')" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#c9a84c,#a88a3c);color:#fff;border:none;border-radius:3px;padding:8px 16px;font-weight:700"><i class="fas fa-plus-circle"></i> Create Team</button>
                        <button onclick="alert('Demo: Invitation would be sent.')" class="btn btn-sm hover-lift" style="background:linear-gradient(135deg,#00aaff,#0088cc);color:#fff;border:none;border-radius:3px;padding:8px 16px"><i class="fas fa-user-plus"></i> Invite Member</button>
                        <button onclick="alert('Demo: Access audit report would export.')" class="btn btn-sm hover-lift" style="background:rgba(201,168,76,0.1);color:#c9a84c;border:1px solid rgba(201,168,76,0.3);border-radius:3px;padding:8px 16px"><i class="fas fa-clipboard-list"></i> Export Access Audit</button>
                        <button onclick="alert('Demo: Access review would run.')" class="btn btn-sm hover-lift" style="background:rgba(0,170,255,0.1);color:#00aaff;border:1px solid rgba(0,170,255,0.3);border-radius:3px;padding:8px 16px"><i class="fas fa-shield-halved"></i> Access Review</button>
                    </div>
                    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;margin-bottom:16px">
                        <div class="stat-mini"><div class="stat-mini-val" style="color:#c9a84c">0</div><div class="stat-mini-lbl">Teams</div></div>
                        <div class="stat-mini"><div class="stat-mini-val" style="color:#00aaff">0</div><div class="stat-mini-lbl">Total Members</div></div>
                        <div class="stat-mini"><div class="stat-mini-val" style="color:#c9a84c">0</div><div class="stat-mini-lbl">Pending Invites</div></div>
                        <div class="stat-mini"><div class="stat-mini-val" style="color:#00aaff">0</div><div class="stat-mini-lbl">Programs Assigned</div></div>
                    </div>
                    <details style="margin-bottom:12px"><summary style="cursor:pointer;color:var(--steel);font-size:.82rem;font-weight:600"><i class="fas fa-table"></i> Tool Access Matrix</summary><div style="margin-top:8px;overflow-x:auto;border:1px solid var(--border);border-radius:3px;padding:12px;font-size:.78rem;color:var(--steel)">Select a team to view tool-level access permissions.</div></details>
                    <details style="margin-bottom:12px"><summary style="cursor:pointer;color:var(--steel);font-size:.82rem;font-weight:600"><i class="fas fa-history"></i> Team Activity Log</summary><div style="margin-top:8px;max-height:200px;overflow-y:auto;border:1px solid var(--border);border-radius:3px;padding:12px;font-size:.78rem;color:var(--steel)">No activity recorded yet.</div></details>
                    <div id="teamContent" style="min-height:100px;color:var(--steel);font-size:0.85rem;text-align:center;padding:40px 20px"><i class="fas fa-users-gear" style="font-size:2rem;color:rgba(201,168,76,0.3);margin-bottom:8px;display:block"></i>Create a team or select an existing team above.</div>
                </div>
            </div>

            <!-- ══ FLOATING AI AGENT (accessible from all tools) ══ -->
            <div class="ai-float-wrapper" id="aiFloatWrapper">
                <div class="ai-float-panel" id="aiFloatPanel">
                    <div class="ai-chat-header">
                        <div style="display:flex;align-items:center;gap:10px">
                            <div class="ai-dot"></div>
                            <div><span style="font-weight:700;color:#fff;font-size:0.92rem"><i class="fas fa-robot" style="color:var(--accent);margin-right:6px"></i>S4 Anchor Agent</span></div>
                        </div>
                        <button class="ai-close-btn" onclick="toggleAiAgent()" title="Minimize"><i class="fas fa-chevron-down"></i></button>
                    </div>
                    <div class="ai-context-label" id="aiContextLabel"><i class="fas fa-crosshairs"></i> Context: <span id="aiContextTool">Gap Analysis</span></div>
                    <div class="ai-chat-messages" id="aiChatMessages">
                        <div class="ai-msg bot"><div class="ai-label"><i class="fas fa-robot"></i> S4 Agent</div>Hello! I'm your Anchor-S4 Agent. I'm available on every tool — ask me anything about:<br>• Gap analysis &amp; DI requirements<br>• DMSMS obsolescence &amp; readiness<br>• ROI, lifecycle cost &amp; readiness scoring<br>• Audit vault &amp; compliance scoring<br>• Supply chain risk &amp; predictive maintenance<br>• Defense documents &amp; standards<br>• Submission review &amp; discrepancy analysis<br><br>Switch tools — I'll follow along with contextual suggestions!</div>
                    </div>
                    <div class="ai-quick-btns" id="aiQuickBtns"></div>
                    <div class="ai-chat-input">
                        <input type="text" id="aiChatInput" placeholder="Ask the ILS Agent..." onkeydown="if(event.key==='Enter')aiSend()">
                        <button onclick="aiSend()"><i class="fas fa-paper-plane"></i> Send</button>
                    </div>
                </div>
                <button class="ai-float-toggle" onclick="toggleAiAgent()" title="S4 ILS Agent">
                    <i class="fas fa-robot"></i>
                    <span class="ai-float-dot"></span>
                </button>
            </div>

            </div><!-- /tabILS -->

            <!-- ═══════════════════════════════════════════════════════════ -->
            <!--  MY WALLET TAB                                             -->
            <!-- ═══════════════════════════════════════════════════════════ -->
            <div class="tab-pane fade" id="tabWallet" role="tabpanel">
                <!-- SLS Balance & Usage Bar (moved here from floating position) -->
                <div id="slsBalanceBar">
                    <div style="display:flex;align-items:center;gap:16px;flex-wrap:wrap">
                        <div class="sls-stat"><i class="fas fa-coins" style="color:#c9a84c"></i> <span class="sls-stat-label">SLS Balance:</span> <span class="sls-stat-val" id="slsBarBalance">25,000 SLS</span></div>
                        <div class="sls-stat"><i class="fas fa-anchor" style="color:var(--accent)"></i> <span class="sls-stat-label">Anchors:</span> <span class="sls-stat-val" id="slsBarAnchors" style="color:#00aaff">0</span></div>
                        <div class="sls-stat"><i class="fas fa-bolt" style="color:var(--accent)"></i> <span class="sls-stat-label">SLS Spent:</span> <span class="sls-stat-val" id="slsBarSpent">0.00 SLS</span></div>
                        <div class="sls-stat"><i class="fas fa-layer-group" style="color:var(--accent)"></i> <span class="sls-stat-label">Plan:</span> <span class="sls-stat-val" id="slsBarPlan" style="color:#fff">Starter</span></div>
                    </div>
                    <div style="display:flex;gap:8px;align-items:center">
                        <button class="sls-expand-btn" id="slsToggleBtn" onclick="toggleFlowBox()"><i class="fas fa-chart-simple" style="margin-right:4px"></i>Flow Details</button>
                        <button class="sls-expand-btn" onclick="resetDemoSession()" style="border-color:rgba(201,168,76,0.3);color:#c9a84c;" title="Reset session & clear cache"><i class="fas fa-right-from-bracket" style="margin-right:4px"></i>Logout</button>
                    </div>
                </div>
                <div style="max-width:900px;margin:0 auto;padding:1rem 0">
                    <h3 style="font-size:1.3rem;font-weight:800;margin-bottom:4px"><i class="fas fa-wallet" style="color:#00aaff;margin-right:8px"></i>My Wallet & SLS</h3>
                    <p style="color:var(--muted);font-size:0.85rem;margin-bottom:4px"><strong style="color:#00aaff">SLS</strong> = <strong>Secure Logistics Standard</strong> — the utility token that powers every action on S4 Ledger.</p>
                    <p style="color:var(--muted);font-size:0.82rem;margin-bottom:20px">Manage your XRPL wallet, purchase SLS through your subscription, and track anchor usage. Each anchor costs 0.01 SLS (~$0.0001).</p>

                    <!-- Wallet Overview Cards -->
                    <div id="walletOverview" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:14px;margin-bottom:20px">
                        <div style="background:linear-gradient(135deg,rgba(26,58,92,0.15),rgba(201,168,76,0.05));border:1px solid rgba(0,170,255,0.15);border-radius:3px;padding:20px;text-align:center">
                            <div style="font-size:0.75rem;color:#00aaff;text-transform:uppercase;letter-spacing:0.5px;margin-bottom:6px">SLS Balance</div>
                            <div id="walletSLSBalance" style="font-size:2rem;font-weight:800;color:#00aaff">--</div>
                            <div style="font-size:0.75rem;color:var(--muted);margin-top:4px">$<span id="walletSLSUSD">0.00</span> USD</div>
                        </div>
                        <div style="background:var(--card);border:1px solid var(--border);border-radius:3px;padding:20px;text-align:center">
                            <div style="font-size:0.75rem;color:var(--muted);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:6px">Anchors Available</div>
                            <div id="walletAnchors" style="font-size:2rem;font-weight:800;color:#1a3a5c">--</div>
                            <div style="font-size:0.75rem;color:var(--muted);margin-top:4px">@ 0.01 SLS each</div>
                        </div>
                        <div style="background:var(--card);border:1px solid var(--border);border-radius:3px;padding:20px;text-align:center">
                            <div style="font-size:0.75rem;color:var(--muted);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:6px">XRP Reserve</div>
                            <div id="walletXRP" style="font-size:2rem;font-weight:800;color:#00aaff">--</div>
                            <div style="font-size:0.75rem;color:var(--muted);margin-top:4px">Account reserve</div>
                        </div>
                        <div style="background:var(--card);border:1px solid var(--border);border-radius:3px;padding:20px;text-align:center">
                            <div style="font-size:0.75rem;color:var(--muted);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:6px">Network</div>
                            <div id="walletNetwork" style="font-size:1.2rem;font-weight:800;color:#00aaff;margin-top:8px">XRPL Mainnet</div>
                            <div style="font-size:0.75rem;color:var(--muted);margin-top:4px">Live blockchain</div>
                        </div>
                    </div>

                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px">
                        <!-- LEFT: Wallet Info -->
                        <div style="background:var(--card);border:1px solid var(--border);border-radius:3px;padding:20px">
                            <h4 style="font-size:1rem;font-weight:700;margin-bottom:14px"><i class="fas fa-key" style="color:var(--accent);margin-right:6px"></i>Wallet Credentials</h4>

                            <div id="walletNoWallet" style="text-align:center;padding:30px 10px">
                                <i class="fas fa-wallet" style="font-size:2.5rem;color:var(--muted);opacity:0.3;display:block;margin-bottom:12px"></i>
                                <p style="color:var(--muted);font-size:0.88rem;margin-bottom:14px">No wallet connected yet.</p>
                                <button onclick="window.location.href='/s4-login/'" style="background:linear-gradient(135deg,#1a3a5c,#0f2640);color:#00aaff;border:1px solid rgba(201,168,76,0.4);border-radius:3px;padding:12px 24px;font-weight:700;font-size:0.9rem;cursor:pointer;font-family:'Inter',sans-serif"><i class="fas fa-plus-circle" style="margin-right:6px"></i>Create Account & Wallet</button>
                            </div>

                            <div id="walletCredentials" style="display:none">
                                <div style="margin-bottom:10px;padding:10px;background:var(--surface);border-radius:3px;border:1px solid var(--border);position:relative">
                                    <div style="font-size:0.68rem;color:var(--accent);text-transform:uppercase;letter-spacing:0.5px;font-weight:700;margin-bottom:3px">Wallet Address</div>
                                    <div id="walletAddress" style="font-size:0.78rem;font-family:'Fira Code',monospace;color:#fff;word-break:break-all;cursor:text;user-select:all">--</div>
                                    <button onclick="copyWalletField('walletAddress')" style="position:absolute;top:8px;right:8px;background:rgba(0,170,255,0.1);border:1px solid rgba(0,170,255,0.2);color:var(--accent);border-radius:3px;padding:3px 8px;font-size:0.65rem;cursor:pointer"><i class="fas fa-copy"></i></button>
                                </div>

                                <div style="margin-bottom:10px;padding:10px;background:rgba(255,170,0,0.03);border-radius:3px;border:1px solid rgba(255,170,0,0.2);position:relative">
                                    <div style="font-size:0.68rem;color:#ffaa00;text-transform:uppercase;letter-spacing:0.5px;font-weight:700;margin-bottom:3px">Family Seed <span style="font-size:0.6rem;opacity:0.7">(SECRET)</span></div>
                                    <div id="demoWalletSeed" style="font-size:0.78rem;font-family:'Fira Code',monospace;color:#ffaa00;word-break:break-all">
                                        <span id="seedMasked">s•••••••••••••••••••</span>
                                        <span id="seedRevealed" style="display:none;cursor:text;user-select:all">--</span>
                                    </div>
                                    <button onclick="toggleSeed()" id="seedToggleBtn" style="position:absolute;top:8px;right:8px;background:rgba(255,170,0,0.1);border:1px solid rgba(255,170,0,0.2);color:#ffaa00;border-radius:3px;padding:3px 8px;font-size:0.65rem;cursor:pointer"><i class="fas fa-eye"></i> Show</button>
                                </div>

                                <div style="margin-bottom:10px;padding:10px;background:var(--surface);border-radius:3px;border:1px solid var(--border)">
                                    <div style="font-size:0.68rem;color:var(--accent);text-transform:uppercase;letter-spacing:0.5px;font-weight:700;margin-bottom:3px">Algorithm</div>
                                    <div style="font-size:0.78rem;color:#fff">secp256k1 (Xaman compatible)</div>
                                </div>

                                <a id="demoWalletExplorer" href="#" target="_blank" style="display:block;text-align:center;padding:10px;background:rgba(0,170,255,0.05);border:1px solid rgba(0,170,255,0.15);border-radius:3px;color:var(--accent);text-decoration:none;font-size:0.82rem;font-weight:600;margin-top:10px"><i class="fas fa-external-link-alt" style="margin-right:6px"></i>View on XRPL Explorer</a>

                                <div style="margin-top:10px;padding:10px;background:rgba(0,170,255,0.04);border:1px solid rgba(0,170,255,0.1);border-radius:3px">
                                    <p style="font-size:0.78rem;color:var(--steel);margin:0"><i class="fas fa-mobile-alt" style="color:var(--accent);margin-right:6px"></i><strong>Xaman Mobile:</strong> Import your family seed into <a href="https://xaman.app" target="_blank" style="color:var(--accent)">Xaman</a> to manage your wallet on any device.</p>
                                </div>
                            </div>
                        </div>

                        <!-- RIGHT: Buy SLS -->
                        <div style="background:var(--card);border:1px solid var(--border);border-radius:3px;padding:20px">
                            <h4 style="font-size:1rem;font-weight:700;margin-bottom:14px"><i class="fas fa-shopping-cart" style="color:#00aaff;margin-right:6px"></i>Purchase SLS Tokens</h4>

                            <div style="padding:14px;background:rgba(26,58,92,0.12);border:1px solid rgba(201,168,76,0.2);border-radius:3px;margin-bottom:16px">
                                <div style="display:flex;justify-content:space-between;align-items:center">
                                    <span style="font-size:0.82rem;color:var(--steel)">Current Price</span>
                                    <span style="font-size:1.1rem;font-weight:800;color:#00aaff">$0.01 / SLS</span>
                                </div>
                                <div style="font-size:0.72rem;color:var(--muted);margin-top:4px">Each anchor costs 0.01 SLS = $0.0001 per record</div>
                            </div>

                            <div style="margin-bottom:14px">
                                <label style="font-size:0.82rem;font-weight:600;color:var(--steel);display:block;margin-bottom:6px">Amount (USD)</label>
                                <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-bottom:8px">
                                    <button class="sls-amt-btn" onclick="setSLSAmount(10,this)" style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:10px;text-align:center;cursor:pointer;font-family:'Inter',sans-serif;transition:all 0.2s;color:var(--steel);font-weight:600;font-size:0.85rem">$10</button>
                                    <button class="sls-amt-btn" onclick="setSLSAmount(50,this)" style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:10px;text-align:center;cursor:pointer;font-family:'Inter',sans-serif;transition:all 0.2s;color:var(--steel);font-weight:600;font-size:0.85rem">$50</button>
                                    <button class="sls-amt-btn" onclick="setSLSAmount(100,this)" style="background:rgba(0,170,255,0.08);border:1px solid rgba(0,170,255,0.3);border-radius:3px;padding:10px;text-align:center;cursor:pointer;font-family:'Inter',sans-serif;transition:all 0.2s;color:var(--accent);font-weight:700;font-size:0.85rem">$100</button>
                                    <button class="sls-amt-btn" onclick="setSLSAmount(500,this)" style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:10px;text-align:center;cursor:pointer;font-family:'Inter',sans-serif;transition:all 0.2s;color:var(--steel);font-weight:600;font-size:0.85rem">$500</button>
                                </div>
                                <input type="number" id="slsUsdInput" value="100" min="1" step="1" onchange="updateSLSPreview()" oninput="updateSLSPreview()" style="width:100%;background:var(--surface);color:#fff;border:1px solid var(--border);border-radius:3px;padding:10px 14px;font-family:'Inter',sans-serif;font-size:0.92rem">
                            </div>

                            <div style="padding:14px;background:var(--surface);border-radius:3px;border:1px solid var(--border);margin-bottom:14px">
                                <div style="display:flex;justify-content:space-between;margin-bottom:6px">
                                    <span style="font-size:0.82rem;color:var(--muted)">SLS Tokens</span>
                                    <span id="slsPreviewTokens" style="font-size:0.92rem;font-weight:700;color:#00aaff">10,000 SLS</span>
                                </div>
                                <div style="display:flex;justify-content:space-between">
                                    <span style="font-size:0.82rem;color:var(--muted)">Anchors Available</span>
                                    <span id="slsPreviewAnchors" style="font-size:0.92rem;font-weight:700;color:#00aaff">1,000,000</span>
                                </div>
                            </div>

                            <button id="buySLSBtn" onclick="handleBuySLS()" style="width:100%;background:linear-gradient(135deg,#1a3a5c,#0f2640);color:#00aaff;border:1px solid rgba(201,168,76,0.4);border-radius:3px;padding:13px;font-weight:700;font-size:0.95rem;cursor:pointer;font-family:'Inter',sans-serif;transition:all 0.2s">
                                <i class="fas fa-credit-card" style="margin-right:6px"></i> Purchase with Card
                            </button>

                            <div id="buySLSResult" style="display:none;margin-top:12px;padding:12px;border-radius:3px;font-size:0.82rem"></div>

                            <div style="margin-top:14px;text-align:center">
                                <p style="font-size:0.72rem;color:var(--muted);margin:0">Also available: swap XRP for SLS on the <a href="https://xrpl.org/docs/concepts/tokens/decentralized-exchange" target="_blank" style="color:var(--accent)">XRPL DEX</a></p>
                            </div>
                        </div>
                    </div>

                    <!-- How SLS Works -->
                    <!-- How SLS Works section merged into wallet sidebar -->
                    <!-- Role-based access merged into wallet sidebar -->
                    <div style="margin-top:20px;background:var(--card);border:1px solid var(--border);border-radius:3px;padding:20px">
                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;flex-wrap:wrap;gap:8px">
                            <h4 style="font-size:1rem;font-weight:700;margin:0"><i class="fas fa-chart-area" style="color:#00aaff;margin-right:6px"></i>SLS Usage Over Time</h4>
                            <div style="display:flex;gap:6px">
                                <button onclick="setChartRange('hour')" class="chart-range-btn" id="chartHour" style="background:var(--surface);border:1px solid var(--border);color:var(--steel);border-radius:3px;padding:4px 10px;font-size:0.72rem;cursor:pointer;font-family:'Inter',sans-serif">Hour</button>
                                <button onclick="setChartRange('day')" class="chart-range-btn" id="chartDay" style="background:rgba(26,58,92,0.2);border:1px solid rgba(0,170,255,0.15);color:#00aaff;border-radius:3px;padding:4px 10px;font-size:0.72rem;cursor:pointer;font-family:'Inter',sans-serif;font-weight:700">Day</button>
                                <button onclick="setChartRange('week')" class="chart-range-btn" id="chartWeek" style="background:var(--surface);border:1px solid var(--border);color:var(--steel);border-radius:3px;padding:4px 10px;font-size:0.72rem;cursor:pointer;font-family:'Inter',sans-serif">Week</button>
                                <button onclick="setChartRange('month')" class="chart-range-btn" id="chartMonth" style="background:var(--surface);border:1px solid var(--border);color:var(--steel);border-radius:3px;padding:4px 10px;font-size:0.72rem;cursor:pointer;font-family:'Inter',sans-serif">Month</button>
                                <button onclick="setChartRange('year')" class="chart-range-btn" id="chartYear" style="background:var(--surface);border:1px solid var(--border);color:var(--steel);border-radius:3px;padding:4px 10px;font-size:0.72rem;cursor:pointer;font-family:'Inter',sans-serif">Year</button>
                            </div>
                        </div>
                        <div style="position:relative;height:200px;background:var(--surface);border-radius:3px;border:1px solid var(--border);overflow:hidden;padding:10px">
                            <canvas id="slsUsageChart" style="width:100%;height:100%"></canvas>
                            <div id="chartOverlay" style="position:absolute;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;background:var(--surface)">
                                <div style="text-align:center">
                                    <i class="fas fa-chart-line" style="font-size:2rem;color:var(--muted);opacity:0.3;display:block;margin-bottom:8px"></i>
                                    <p style="font-size:0.82rem;color:var(--muted)">Usage data will populate as you anchor records.</p>
                                    <p style="font-size:0.72rem;color:var(--muted)">Chart shows SLS balance, anchors created, and spending over time.</p>
                                </div>
                            </div>
                        </div>
                        <div style="display:flex;justify-content:center;gap:20px;margin-top:10px">
                            <div style="display:flex;align-items:center;gap:6px;font-size:0.72rem;color:var(--muted)"><span style="display:inline-block;width:12px;height:3px;background:#00aaff;border-radius:2px"></span> SLS Balance</div>
                            <div style="display:flex;align-items:center;gap:6px;font-size:0.72rem;color:var(--muted)"><span style="display:inline-block;width:12px;height:3px;background:#1a3a5c;border-radius:2px"></span> Anchors Created</div>
                            <div style="display:flex;align-items:center;gap:6px;font-size:0.72rem;color:var(--muted)"><span style="display:inline-block;width:12px;height:3px;background:#00aaff;border-radius:2px"></span> Purchases</div>
                        </div>
                    </div>

                    <!-- SEC Compliance Notice -->
                    <div style="margin-top:20px;padding:16px;background:rgba(26,58,92,0.08);border:1px solid rgba(26,58,92,0.2);border-radius:3px">
                        <h5 style="font-size:0.88rem;font-weight:700;color:#00aaff;margin-bottom:8px"><i class="fas fa-gavel" style="margin-right:6px"></i>Regulatory Notice</h5>
                        <p style="font-size:0.78rem;color:var(--steel);margin-bottom:6px">$SLS is a <strong style="color:#fff">utility token</strong> used exclusively for platform service fees (anchoring, verification, and record integrity operations). SLS is not equity, not a security, and confers no ownership, governance rights, or expectation of profit.</p>
                        <p style="font-size:0.78rem;color:var(--steel);margin-bottom:6px">SLS tokens are <strong style="color:#fff">purchased at fair market value</strong> via your subscription plan (USD → XRP → SLS on XRPL DEX). They are consumed as services are used and have no cash value or redemption mechanism outside the S4 Ledger platform. SLS is never given away for free — all SLS is purchased through transparent, auditable on-chain transactions.</p>
                        <p style="font-size:0.72rem;color:var(--muted);margin:0">S4 Systems, LLC is committed to full regulatory compliance and maintains ongoing legal counsel for digital asset classification under SEC, FinCEN, and state-level guidance. <a href="/s4-terms/" style="color:var(--accent)">Terms of Service</a> | <a href="/SEC_COMPLIANCE.md" style="color:var(--accent)">SEC Compliance</a></p>
                    </div>

                </div>
            </div><!-- /tabWallet -->

        </div>
    </div>
</section>

<div id="anchorOverlay" style="display:none;position:fixed;inset:0;z-index:9999;background:rgba(0,0,0,0.6);backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);align-items:center;justify-content:center" onclick="if(event.target===this)hideAnchorAnimation()">
    <div id="s4ResultPopup" style="background:linear-gradient(135deg,rgba(12,16,28,0.98),rgba(18,22,38,0.98));border:1px solid rgba(0,170,255,0.25);border-radius:6px;padding:2rem 2.5rem;max-width:460px;width:90%;box-shadow:0 20px 60px rgba(0,0,0,0.5),0 0 40px rgba(0,170,255,0.08);position:relative;">
        <button onclick="hideAnchorAnimation()" style="position:absolute;top:10px;right:14px;background:none;border:none;color:var(--muted);font-size:1.3rem;cursor:pointer;line-height:1">&times;</button>
        <div id="animStatus" style="font-size:1.05rem;font-weight:700;color:#fff;margin-bottom:0.8rem;display:flex;align-items:center;gap:8px"><i class="fas fa-spinner fa-spin" style="color:#00aaff"></i> Anchoring to XRPL...</div>
        <div id="animHash" style="font-family:monospace;font-size:0.72rem;color:var(--muted);word-break:break-all;background:rgba(255,255,255,0.03);padding:8px 10px;border-radius:3px;margin-bottom:0.6rem"></div>
        <div id="animClf" style="margin-bottom:0.6rem"></div>
        <div id="animFee" style="font-size:0.82rem;color:var(--gold)">0.01 $SLS &rarr; Treasury</div>
        <div id="animSuccess" style="margin-top:0.6rem;font-size:0.9rem;font-weight:600"></div>
    </div>
</div>

<div id="sendModal" class="modal-overlay" onclick="if(event.target===this)closeSendModal()">
    <div class="modal-box" style="position:relative">
        <button onclick="closeSendModal()" style="position:absolute;top:12px;right:16px;background:none;border:none;color:var(--muted);font-size:1.2rem;cursor:pointer">&times;</button>
        <h4><i class="fas fa-paper-plane" style="color:var(--accent);margin-right:8px"></i>Send ILS Analysis</h4>
        <div style="margin-bottom:12px">
            <label style="font-size:0.82rem">Recipient Email(s)</label>
            <input type="text" id="sendEmail" placeholder="email@navy.mil, pm@contractor.com" style="font-size:0.85rem!important">
        </div>
        <div style="margin-bottom:12px">
            <label style="font-size:0.82rem">Subject</label>
            <input type="text" id="sendSubject" value="" style="font-size:0.85rem!important">
        </div>
        <div style="margin-bottom:12px">
            <label style="font-size:0.82rem">Message (optional)</label>
            <textarea id="sendMessage" rows="3" placeholder="Please review the attached ILS gap analysis..." style="min-height:70px!important;font-family:'Inter',sans-serif!important;font-size:0.85rem!important"></textarea>
        </div>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn-accent" onclick="executeSend()"><i class="fas fa-paper-plane"></i> Send via Email Client</button>
            <button style="background:rgba(0,170,255,0.1);border:1px solid var(--border);color:var(--steel);border-radius:3px;padding:8px 16px;cursor:pointer;font-size:0.85rem;font-family:inherit" onclick="copyAnalysisToClipboard()"><i class="fas fa-copy"></i> Copy to Clipboard</button>
        </div>
    </div>
</div>

<div id="meetingModal" class="modal-overlay" onclick="if(event.target===this)closeMeetingModal()">
    <div class="modal-box" style="position:relative">
        <button onclick="closeMeetingModal()" style="position:absolute;top:12px;right:16px;background:none;border:none;color:var(--muted);font-size:1.2rem;cursor:pointer">&times;</button>
        <h4><i class="fas fa-calendar-plus" style="color:var(--accent);margin-right:8px"></i>Schedule ILS Review Meeting</h4>
        <div style="margin-bottom:12px">
            <label style="font-size:0.82rem">Meeting Title</label>
            <input type="text" id="meetTitle" value="" style="font-size:0.85rem!important">
        </div>
        <div class="row mb-3">
            <div class="col-6">
                <label style="font-size:0.82rem">Date</label>
                <input type="date" id="meetDate" style="font-size:0.85rem!important">
            </div>
            <div class="col-6">
                <label style="font-size:0.82rem">Time</label>
                <input type="time" id="meetTime" value="10:00" style="font-size:0.85rem!important">
            </div>
        </div>
        <div style="margin-bottom:12px">
            <label style="font-size:0.82rem">Attendees (emails)</label>
            <input type="text" id="meetAttendees" placeholder="pm@navy.mil, ils@contractor.com" style="font-size:0.85rem!important">
        </div>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn-accent" onclick="createTeamsMeeting()"><i class="fab fa-microsoft"></i> Open Teams</button>
            <button style="background:rgba(0,170,255,0.06);border:1px solid rgba(0,170,255,0.15);color:var(--accent);border-radius:3px;padding:8px 16px;cursor:pointer;font-size:0.85rem;font-family:inherit;font-weight:600" onclick="createCalendarEvent()"><i class="fas fa-calendar-alt"></i> Add to Calendar (.ics)</button>
        </div>
    </div>
</div>

<!-- ══ ACTION ITEM ADD / EDIT MODAL ══ -->
<div id="actionItemModal" class="modal-overlay" onclick="if(event.target===this)closeActionModal()">
    <div class="modal-box" style="position:relative;max-width:540px">
        <button onclick="closeActionModal()" style="position:absolute;top:12px;right:16px;background:none;border:none;color:var(--muted);font-size:1.2rem;cursor:pointer">&times;</button>
        <h4 id="actionModalTitle"><i class="fas fa-plus-circle" style="color:var(--accent);margin-right:8px"></i>New Action Item</h4>
        <input type="hidden" id="actionModalEditId" value="">
        <div style="margin-bottom:10px">
            <label style="font-size:0.82rem">Title <span style="color:#c9a84c">*</span></label>
            <input type="text" id="actionModalItemTitle" placeholder="e.g., Resolve obsolete part AN/SPY-6 radar module" style="font-size:0.85rem!important">
        </div>
        <div style="margin-bottom:10px">
            <label style="font-size:0.82rem">Description</label>
            <textarea id="actionModalDetail" rows="3" placeholder="Details, context, recommended actions..." style="min-height:60px!important;font-family:'Inter',sans-serif!important;font-size:0.85rem!important"></textarea>
        </div>
        <div class="row mb-2">
            <div class="col-6" style="margin-bottom:10px">
                <label style="font-size:0.82rem">Severity <span style="color:#c9a84c">*</span></label>
                <select id="actionModalSeverity" style="font-size:0.85rem">
                    <option value="critical">Critical</option>
                    <option value="warning">Warning</option>
                    <option value="info" selected>Info</option>
                </select>
            </div>
            <div class="col-6" style="margin-bottom:10px">
                <label style="font-size:0.82rem">Source Tool</label>
                <select id="actionModalSource" style="font-size:0.85rem">
                    <option value="manual">Manual</option>
                    <option value="dmsms">DMSMS Tracker</option>
                    <option value="readiness">Readiness</option>
                    <option value="warranty">Warranty</option>
                    <option value="parts">Parts Search</option>
                    <option value="roi">ROI Calculator</option>
                    <option value="lifecycle">Lifecycle Cost</option>
                    <option value="ils">Gap Analysis</option>
                    <option value="compliance">Compliance</option>
                    <option value="risk">Supply Chain Risk</option>
                    <option value="predictive">Predictive Maint.</option>
                    <option value="sbom">SBOM</option>
                    <option value="submissions">Submissions</option>
                    <option value="reports">Reports</option>
                </select>
            </div>
        </div>
        <div class="row mb-2">
            <div class="col-6" style="margin-bottom:10px">
                <label style="font-size:0.82rem">Owner / Assignee</label>
                <input type="text" id="actionModalOwner" placeholder="e.g., Program Manager" style="font-size:0.85rem!important">
            </div>
            <div class="col-6" style="margin-bottom:10px">
                <label style="font-size:0.82rem">Due Date</label>
                <input type="date" id="actionModalDue" style="font-size:0.85rem!important">
            </div>
        </div>
        <div class="row mb-2">
            <div class="col-6" style="margin-bottom:10px">
                <label style="font-size:0.82rem">Cost Impact ($K)</label>
                <input type="number" id="actionModalCost" placeholder="e.g., 250" min="0" style="font-size:0.85rem!important">
            </div>
            <div class="col-6" style="margin-bottom:10px">
                <label style="font-size:0.82rem">Schedule / Timeline</label>
                <input type="text" id="actionModalSchedule" placeholder="e.g., 2-4 months" style="font-size:0.85rem!important">
            </div>
        </div>
        <div style="display:flex;gap:8px;margin-top:8px">
            <button class="btn-accent" onclick="saveActionFromModal()" style="flex:1"><i class="fas fa-save"></i> Save Action Item</button>
            <button style="background:rgba(0,170,255,0.1);border:1px solid var(--border);color:var(--steel);border-radius:3px;padding:8px 16px;cursor:pointer;font-size:0.85rem;font-family:inherit" onclick="closeActionModal()">Cancel</button>
        </div>
    </div>
</div>

<!-- ══ PRODUCTION FEATURES MODAL ══ -->
<div id="prodFeaturesModal" class="modal-overlay" onclick="if(event.target===this)closeProdFeatures()">
    <div class="modal-box" style="position:relative;max-width:720px;max-height:85vh;overflow-y:auto">
        <button onclick="closeProdFeatures()" style="position:absolute;top:12px;right:16px;background:none;border:none;color:var(--muted);font-size:1.2rem;cursor:pointer">&times;</button>
        <h4 style="margin-bottom:4px"><i class="fas fa-rocket" style="color:#00aaff;margin-right:8px"></i>S4 Ledger Roadmap</h4>
        <p style="color:var(--steel);font-size:0.82rem;margin-bottom:16px">Upcoming capabilities planned for future releases. Core ILS tools, XRP Ledger anchoring, and 20+ analysis tools are live now.</p>
        <div id="prodFeaturesList"></div>
        <div style="margin-top:16px;padding:12px;background:rgba(0,170,255,0.06);border-radius:3px;border-left:3px solid #00aaff;font-size:0.82rem;color:var(--steel)"><strong style="color:#00aaff">Contact sales@s4ledger.com</strong> to discuss production deployment, IL4/IL5 hosting, and enterprise licensing for your organization.</div>
    </div>
</div>

</main>
<footer class="site-footer" role="contentinfo" style="border-top:1px solid var(--border);padding:40px 24px 30px;margin-top:3rem">
    <div class="footer-grid" style="max-width:1200px;margin:0 auto;display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:40px;margin-bottom:30px">
        <div>
            <a href="/" style="display:flex;align-items:center;gap:10px;text-decoration:none;color:var(--text);font-weight:700;font-size:1.1rem;margin-bottom:12px">
                <img src="/s4-assets/S4Ledger_logo.png" alt="S4" style="height:32px;width:32px">
                S4 Ledger
            </a>
            <p style="color:var(--muted);font-size:0.85rem;line-height:1.6;margin-bottom:16px">Immutable logistics verification anchored to the XRP Ledger. The secure standard for defense and enterprise supply chains.</p>
            <div style="display:flex;gap:16px">
                <a href="https://github.com/S4-Ledger" style="color:var(--muted);font-size:1.1rem;text-decoration:none"><i class="fab fa-github"></i></a>
                <a href="https://x.com/S4Ledger" style="color:var(--muted);font-size:1.1rem;text-decoration:none"><i class="fab fa-x-twitter"></i></a>
                <a href="https://discord.gg/s4ledger" style="color:var(--muted);font-size:1.1rem;text-decoration:none"><i class="fab fa-discord"></i></a>
            </div>
        </div>
        <div>
            <h5 style="color:var(--muted);font-size:0.75rem;font-weight:600;text-transform:uppercase;letter-spacing:0.05em;margin-bottom:16px">Product</h5>
            <a href="/demo-app/" style="display:block;color:var(--steel);font-size:0.875rem;text-decoration:none;margin-bottom:10px">Anchor-S4</a>
            <a href="/sdk/" style="display:block;color:var(--steel);font-size:0.875rem;text-decoration:none;margin-bottom:10px">SDK Docs</a>
            <a href="/sdk-playground/" style="display:block;color:var(--steel);font-size:0.875rem;text-decoration:none;margin-bottom:10px">SDK Playground</a>
            <a href="/s4-marketplace/" style="display:block;color:var(--steel);font-size:0.875rem;text-decoration:none;margin-bottom:10px">Marketplace</a>
            <a href="/s4-pricing/" style="display:block;color:var(--steel);font-size:0.875rem;text-decoration:none;margin-bottom:10px">Pricing</a>
        </div>
        <div>
            <h5 style="color:var(--muted);font-size:0.75rem;font-weight:600;text-transform:uppercase;letter-spacing:0.05em;margin-bottom:16px">Company</h5>
            <a href="/s4-about/" style="display:block;color:var(--steel);font-size:0.875rem;text-decoration:none;margin-bottom:10px">About</a>
            <a href="/s4-investors/" style="display:block;color:var(--steel);font-size:0.875rem;text-decoration:none;margin-bottom:10px">Investors</a>
            <a href="/s4-partners/" style="display:block;color:var(--steel);font-size:0.875rem;text-decoration:none;margin-bottom:10px">Partners</a>
            <a href="/s4-roadmap/" style="display:block;color:var(--steel);font-size:0.875rem;text-decoration:none;margin-bottom:10px">Roadmap</a>
            <a href="/s4-contact/" style="display:block;color:var(--steel);font-size:0.875rem;text-decoration:none;margin-bottom:10px">Contact</a>
        </div>
        <div>
            <h5 style="color:var(--muted);font-size:0.75rem;font-weight:600;text-transform:uppercase;letter-spacing:0.05em;margin-bottom:16px">Resources</h5>
            <a href="/s4-use-cases/" style="display:block;color:var(--steel);font-size:0.875rem;text-decoration:none;margin-bottom:10px">Use Cases</a>
            <a href="/s4-faq/" style="display:block;color:var(--steel);font-size:0.875rem;text-decoration:none;margin-bottom:10px">FAQ</a>
            <a href="/metrics.html" style="display:block;color:var(--steel);font-size:0.875rem;text-decoration:none;margin-bottom:10px">Metrics</a>
            <a href="/transactions.html" style="display:block;color:var(--steel);font-size:0.875rem;text-decoration:none;margin-bottom:10px">Transactions</a>
            <a href="/security/" style="display:block;color:var(--steel);font-size:0.875rem;text-decoration:none;margin-bottom:10px">Security</a>
        </div>
    </div>
    <div style="max-width:1200px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;padding-top:20px;border-top:1px solid var(--border);font-size:0.8125rem;color:var(--muted)">
        <span>&copy; 2025–2026 S4 Ledger. All rights reserved. $SLS is a utility token — not equity or an investment contract.</span>
        <div style="display:flex;gap:24px">
            <a href="/s4-terms/" style="color:var(--muted);text-decoration:none">Terms</a>
            <a href="/s4-privacy/" style="color:var(--muted);text-decoration:none">Privacy</a>
            <a href="/security/" style="color:var(--muted);text-decoration:none">Security</a>
        </div>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<button id="backToTop" onclick="window.scrollTo({top:0,behavior:'smooth'})" style="position:fixed;bottom:30px;left:30px;width:45px;height:45px;background:#00aaff;border:none;border-radius:50%;color:#fff;font-size:1.3rem;cursor:pointer;opacity:0;visibility:hidden;transition:all 0.3s;z-index:999;display:flex;align-items:center;justify-content:center;">&uarr;</button>

</div><!-- /platformWorkspace -->



<!-- ═══ DEMO ONBOARDING WIZARD JS ═══ -->

<!-- ═══ PERFORMANCE METRICS DASHBOARD + OFFLINE QUEUE JS ═══ -->

<!-- ═══ WALLET SIDEBAR ═══ -->
<div class="wallet-overlay" id="walletOverlay" onclick="closeWalletSidebar()"></div>
<div class="wallet-sidebar" id="walletSidebar">
    <div class="wallet-sidebar-header">
        <h3><i class="fas fa-wallet" style="color:var(--accent);"></i> My Wallet</h3>
        <button class="wallet-sidebar-close" onclick="closeWalletSidebar()"><i class="fas fa-times"></i> Close</button>
    </div>
    <div class="wallet-sidebar-body" id="walletSidebarBody">
        <!-- Wallet content will be moved here dynamically -->
        <div style="text-align:center;padding:40px 20px;color:var(--muted);">
            <i class="fas fa-spinner fa-spin" style="font-size:1.5rem;margin-bottom:12px;display:block;"></i>
            Loading wallet...
        </div>
    </div>
</div>



<!-- ═══ BULLETPROOF: Self-contained ROI + Chart rendering ═══ -->
<!-- ═══ ROUND 11: UNIVERSAL CHART REACTIVITY ENGINE ═══ -->

    <!-- S4 Ledger Demo — Modular JS (extracted from monolith) -->
    <script type="module" src="/main.js"></script>

</body>
</html>
