var E=0,Y=localStorage.getItem("s4_selected_tier")||"starter",R={pilot:{label:"Pilot (Free)",sls:100,price:"Free"},starter:{label:"Starter ($999/mo)",sls:25e3,price:"$999/mo"},professional:{label:"Professional ($2,499/mo)",sls:1e5,price:"$2,499/mo"},enterprise:{label:"Enterprise ($9,999/mo)",sls:5e5,price:"$9,999/mo"}};function K(){var e=document.getElementById("onboardOverlay");e&&(e.style.display="flex",typeof _s4TrapFocus=="function"&&_s4TrapFocus(e)),E=0,G()}function X(){var e=document.getElementById("onboardOverlay");e&&(e.style.display="none"),typeof _s4ReleaseFocusTrap=="function"&&_s4ReleaseFocusTrap(),sessionStorage.setItem("s4_onboard_done","1"),setTimeout(function(){typeof _currentRole<"u"&&!_currentRole&&typeof showRoleSelector=="function"&&showRoleSelector()},500),localStorage.setItem("s4_selected_tier",Y),_demoSession=null,typeof _initDemoSession=="function"&&_initDemoSession()}function ee(){if(E++,E>4){X();return}G(),E===1&&te(),E===2&&oe()}function G(){for(var e=0;e<=4;e++){var o=document.getElementById("onboardStep"+e);o&&o.classList.toggle("active",e===E)}var a=document.querySelectorAll("#onboardProgress .onboard-dot");a.forEach(function(s,c){s.classList.remove("active","done"),c===E?s.classList.add("active"):c<E&&s.classList.add("done")})}function te(){var e=document.getElementById("onboardAcctStatus"),o=document.getElementById("onboardAcctId"),a=document.getElementById("onboardAcctDone");o&&(o.textContent="demo_"+Date.now().toString(36)),setTimeout(function(){e&&(e.innerHTML='<i class="fas fa-check-circle" style="color:var(--green)"></i> Active'),a&&(a.style.display="block")},1200)}function oe(){for(var e=document.getElementById("onboardWalletAddr"),o=document.getElementById("onboardXrpBal"),a=document.getElementById("onboardTrustLine"),s=document.getElementById("onboardWalletDone"),c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",f="r",m=0;m<28;m++)f+=c[Math.floor(Math.random()*c.length)];setTimeout(function(){e&&(e.textContent=f.substring(0,8)+"..."+f.slice(-4))},500),setTimeout(function(){o&&(o.textContent="12.000000 XRP")},1200),setTimeout(function(){a&&(a.innerHTML='Credits <i class="fas fa-check-circle" style="color:var(--green);margin-left:4px"></i>'),s&&(s.style.display="block")},1800)}function ae(e,o){Y=o;var a=(R[o]||R.starter).sls,s=document.getElementById("demoStep3Status");s&&s.innerHTML.indexOf("Credits")!==-1&&(s.innerHTML='<i class="fas fa-check" style="color:#00aaff;margin-right:3px;"></i> '+a.toLocaleString()+" Credits");var c=document.getElementById("demoSlsBalance");c&&(c.textContent=a.toLocaleString()+" Credits"),_demoSession&&_demoSession.subscription&&(_demoSession.subscription.sls_allocation=a,_demoSession.subscription.label=(R[o]||R.starter).label),document.querySelectorAll(".onboard-tier").forEach(function(n){n.classList.remove("selected")}),e.classList.add("selected");var f=R[o],m=document.getElementById("onboardSlsBal"),t=document.getElementById("onboardSlsAnchors");m&&(m.textContent=f.sls.toLocaleString()),t&&(t.textContent=(f.sls*100).toLocaleString());var r=document.getElementById("slsBarBalance");r&&(r.textContent=f.sls.toLocaleString()+" Credits");var i=document.getElementById("toolSlsBal");i&&(i.textContent=f.sls.toLocaleString());var l=document.getElementById("sidebarSlsBal");l&&(l.textContent=f.sls.toLocaleString()+" Credits")}document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("platformWorkspace");e&&e.style.display==="block"&&!sessionStorage.getItem("s4_onboard_done")&&setTimeout(K,600)});window.closeOnboarding=X;window.onboardNext=ee;window.selectOnboardTier=ae;var _=null;function re(){document.querySelectorAll(".tab-pane").forEach(function(r){r.classList.remove("show","active"),r.style.display="none"});var e=document.getElementById("sectionSystems");e&&(e.style.display="none"),document.querySelectorAll(".ils-hub-panel").forEach(function(r){r.classList.remove("active"),r.style.display="none"});var o=document.getElementById("ilsToolBackBar");o&&(o.style.display="none");var a=document.getElementById("ilsSubHub");a&&(a.style.display="grid");var s=document.querySelector(".ils-hub-tabs");s&&(s.style.display="none"),_=null;var c=document.getElementById("platformHub");c&&(c.style.display="block",c.style.animation="fadeIn 0.3s ease");var f=document.getElementById("statsRow");if(f&&(f.style.display="flex"),!sessionStorage.getItem("s4_entered")){var m=document.querySelector(".hero");m&&(m.style.display="block");var t=document.getElementById("platformLanding");t&&(t.style.display="block")}history.replaceState(null,"",window.location.pathname)}function F(e){var o=document.getElementById("platformHub");o&&(o.style.display="none");var a=document.querySelector(".hero");a&&(a.style.display="none");var s=document.getElementById("platformLanding");s&&(s.style.display="none"),document.querySelectorAll(".tab-pane").forEach(function(n){n.classList.remove("show","active"),n.style.display="none"});var c=document.getElementById("sectionSystems");c&&(c.style.display="none");var f={sectionAnchor:"tabAnchor",sectionVerify:"tabVerify",sectionLog:"tabLog",sectionILS:"tabILS",sectionSystems:"sectionSystems",sectionMetrics:"tabMetrics",sectionOffline:"tabOffline"};if(e==="sectionSystems")c&&(c.style.display="block",c.classList.add("show","active"),c.style.animation="fadeIn 0.3s ease");else{var m=f[e]||e,t=document.getElementById(m);t&&(t.style.display="block",t.classList.add("show","active"),t.style.animation="fadeIn 0.3s ease");var r=document.querySelector('a[href="#'+m+'"]');if(r)try{new bootstrap.Tab(r).show()}catch{}}if(e==="sectionILS"){var i=document.getElementById("ilsSubHub");i&&(i.style.display="grid");var l=document.getElementById("ilsToolBackBar");l&&(l.style.display="none"),document.querySelectorAll(".ils-hub-panel").forEach(function(n){n.classList.remove("active")})}}function ie(e){var o=document.getElementById("sectionSystems");o&&(o.style.display="none");var a=document.getElementById(e);a&&(a.style.display="block",a.classList.add("show","active"),a.style.animation="fadeIn 0.3s ease")}function W(e){var o=document.getElementById("ilsSubHub");o&&(o.style.display="none");var a=document.getElementById("ilsToolBackBar");a&&(a.style.display="block"),document.querySelectorAll(".ils-hub-panel").forEach(function(f){f.classList.remove("active"),f.style.display="none"});var s=document.getElementById(e);s&&(s.style.display="block",s.classList.add("active"),s.style.animation="fadeIn 0.3s ease");var c=document.querySelector('.ils-hub-tab[onclick*="'+e+'"]');c&&(document.querySelectorAll(".ils-hub-tab").forEach(function(f){f.classList.remove("active")}),c.classList.add("active")),e==="hub-actions"&&(typeof renderHubActions=="function"&&renderHubActions(),typeof renderActionCalendar=="function"&&(setTimeout(renderActionCalendar,200),setTimeout(renderActionCalendar,600))),e==="hub-vault"&&typeof renderVault=="function"&&renderVault(),e==="hub-docs"&&typeof renderDocLibrary=="function"&&renderDocLibrary(),e==="hub-compliance"&&typeof calcCompliance=="function"&&calcCompliance(),e==="hub-risk"&&typeof loadRiskData=="function"&&loadRiskData(),e==="hub-roi"&&typeof calcROI=="function"&&calcROI(),e==="hub-reports"&&typeof loadReportPreview=="function"&&loadReportPreview(),e==="hub-predictive"&&typeof loadPredictiveData=="function"&&loadPredictiveData(),e==="hub-submissions"&&typeof loadSubmissionHistory=="function"&&loadSubmissionHistory(),e==="hub-sbom"&&typeof loadSBOMData=="function"&&loadSBOMData(),e==="hub-dmsms"&&typeof loadDMSMSData=="function"&&loadDMSMSData(),e==="hub-readiness"&&typeof loadReadinessData=="function"&&loadReadinessData(),e==="hub-lifecycle"&&typeof calcLifecycle=="function"&&calcLifecycle(),e==="hub-analysis"&&typeof initILSChecklist=="function"&&initILSChecklist(),typeof updateAiContext=="function"&&updateAiContext(e),(function(){var f=document.getElementById(e);if(!f)return;var m=f.querySelector("details");if(!m)return;m.style.display="none";var t="s4_hiw_"+e;function r(){var n=document.querySelector(".hiw-modal-overlay");n&&n.remove();var u=m.querySelector("summary")?m.querySelector("summary").textContent.replace(/[▸▾▾]/g,"").trim():"How It Works",d="";m.querySelectorAll("p,ol,ul,li").forEach(function(b){d+=b.outerHTML}),d||(d=m.innerHTML.replace(/<summary[^>]*>.*?<\/summary>/i,""));var p=document.createElement("div");p.className="hiw-modal-overlay",p.innerHTML='<div class="hiw-modal-box"><button class="hiw-close" title="Close">&times;</button><h4><i class="fas fa-info-circle" style="margin-right:6px"></i>'+u+'</h4><div class="hiw-body">'+d+"</div></div>",p.querySelector(".hiw-close").onclick=function(){p.remove()},p.onclick=function(b){b.target===p&&p.remove()},document.body.appendChild(p)}localStorage.getItem(t)||(localStorage.setItem(t,"1"),setTimeout(r,300));var i=f.querySelector("h3");if(i&&!i.querySelector(".hiw-help-btn")){var l=document.createElement("button");l.className="hiw-help-btn",l.title="How It Works",l.textContent="?",l.style.cssText="margin-left:8px;background:rgba(0,170,255,0.12);border:1px solid rgba(0,170,255,0.3);color:#00aaff;border-radius:50%;width:22px;height:22px;font-size:0.72rem;font-weight:700;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;vertical-align:middle;",l.onclick=function(n){n.stopPropagation(),r()},i.appendChild(l)}})(),_=e}function ne(){document.querySelectorAll(".ils-hub-panel").forEach(function(c){c.classList.remove("active"),c.style.display="none"});var e=document.getElementById("ilsSubHub");e&&(e.style.display="grid",e.style.animation="fadeIn 0.3s ease");var o=document.getElementById("ilsToolBackBar");o&&(o.style.display="none");var a=document.querySelector(".ils-hub-tabs");if(a&&(a.style.display="none"),_=null,_currentRole&&typeof applyTabVisibility=="function"){var s=_customVisibleTabs||(_s4Roles[_currentRole]?_s4Roles[_currentRole].tabs:_allHubTabs);applyTabVisibility(s)}}(function(){var o="s4_demo_tool_card_order";function a(){return document.getElementById("ilsSubHub")}function s(){var m=a();if(m){var t=localStorage.getItem(o);if(t)try{var r=JSON.parse(t),i=Array.from(m.querySelectorAll(".ils-tool-card")),l={};i.forEach(function(n){var u=n.getAttribute("onclick")||"",d=(u.match(/openILSTool\('([^']+)'\)/)||[])[1];d&&(l[d]=n)}),r.forEach(function(n){l[n]&&m.appendChild(l[n])})}catch{}}}function c(){var m=a();if(m){var t=m.querySelectorAll(".ils-tool-card"),r=[];t.forEach(function(i){var l=i.getAttribute("onclick")||"",n=(l.match(/openILSTool\('([^']+)'\)/)||[])[1];n&&r.push(n)}),localStorage.setItem(o,JSON.stringify(r))}}function f(){var m=a();if(m){var t=null;m.querySelectorAll(".ils-tool-card").forEach(function(r){r.setAttribute("draggable","true"),r.addEventListener("dragstart",function(d){t=this,this.classList.add("dragging"),d.dataTransfer.effectAllowed="move",d.dataTransfer.setData("text/plain","")}),r.addEventListener("dragend",function(){this.classList.remove("dragging"),m.querySelectorAll(".ils-tool-card").forEach(function(d){d.classList.remove("drag-over")})}),r.addEventListener("dragover",function(d){d.preventDefault(),d.dataTransfer.dropEffect="move",this!==t&&this.classList.add("drag-over")}),r.addEventListener("dragleave",function(){this.classList.remove("drag-over")}),r.addEventListener("drop",function(d){if(d.preventDefault(),this.classList.remove("drag-over"),t&&t!==this){var p=Array.from(m.querySelectorAll(".ils-tool-card")),b=p.indexOf(t),v=p.indexOf(this);b<v?m.insertBefore(t,this.nextSibling):m.insertBefore(t,this),c(),f()}t=null});var i=null,l=!1,n=null,u=null;r.addEventListener("touchstart",function(d){var p=this;i=setTimeout(function(){l=!0,u=p,p.classList.add("dragging"),n=p.cloneNode(!0),n.style.position="fixed",n.style.pointerEvents="none",n.style.opacity="0.85",n.style.zIndex="9999",n.style.width=p.offsetWidth+"px",n.style.transform="scale(1.05)",n.style.boxShadow="0 8px 32px rgba(0,170,255,0.3)",document.body.appendChild(n)},500)},{passive:!0}),r.addEventListener("touchmove",function(d){if(!(!l||!n)){d.preventDefault();var p=d.touches[0];n.style.left=p.clientX-n.offsetWidth/2+"px",n.style.top=p.clientY-n.offsetHeight/2+"px",m.querySelectorAll(".ils-tool-card").forEach(function(h){h.classList.remove("drag-over")});var b=document.elementFromPoint(p.clientX,p.clientY);if(b){var v=b.closest(".ils-tool-card");v&&v!==u&&v.classList.add("drag-over")}}},{passive:!1}),r.addEventListener("touchend",function(d){if(clearTimeout(i),l&&u){var p=d.changedTouches[0],b=document.elementFromPoint(p.clientX,p.clientY),v=b?b.closest(".ils-tool-card"):null;if(v&&v!==u){var h=Array.from(m.querySelectorAll(".ils-tool-card")),B=h.indexOf(u),S=h.indexOf(v);B<S?m.insertBefore(u,v.nextSibling):m.insertBefore(u,v),c(),f()}u.classList.remove("dragging"),m.querySelectorAll(".ils-tool-card").forEach(function(x){x.classList.remove("drag-over")})}n&&n.parentNode&&n.parentNode.removeChild(n),l=!1,n=null,u=null}),r.addEventListener("touchcancel",function(){clearTimeout(i),n&&n.parentNode&&n.parentNode.removeChild(n),u&&u.classList.remove("dragging"),m.querySelectorAll(".ils-tool-card").forEach(function(d){d.classList.remove("drag-over")}),l=!1,n=null,u=null})})}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){s(),f()}):(s(),f())})();function se(){var e=document.getElementById("walletSidebar"),o=document.getElementById("walletOverlay");e&&e.classList.add("open"),o&&o.classList.add("show");var a=document.getElementById("walletSidebarBody"),s=document.getElementById("tabWallet");a&&s&&!a.dataset.loaded&&(a.innerHTML=s.innerHTML,a.dataset.loaded="true",typeof loadWalletData=="function"&&loadWalletData(),le(a)),J()}function le(e){var o=e.querySelector("#slsToggleBtn");if(o){o.removeAttribute("onclick");var a=document.createElement("div");a.id="sidebarFlowPanel",a.style.cssText="display:none;margin-top:12px;background:linear-gradient(135deg,rgba(0,170,255,0.06),rgba(201,168,76,0.04));border:1px solid rgba(0,170,255,0.25);border-radius:3px;padding:16px 18px;",a.innerHTML='<div style="position:relative"><div style="position:absolute;top:-4px;right:0;background:linear-gradient(135deg,#00aaff,#c9a84c);padding:3px 12px;border-radius:0 10px 0 8px;font-size:0.62rem;font-weight:700;color:#050810;letter-spacing:0.5px">LIVE PREVIEW</div><h4 style="margin:0 0 4px;font-size:0.95rem;color:#fff"><i class="fas fa-flask" style="color:#00aaff;margin-right:6px"></i>Credit Economic Flow</h4><p style="color:#8ea4b8;font-size:0.72rem;margin:0 0 12px">See how the Credits token economy works. <strong style="color:#c9a84c">Every anchor costs 0.01 Credits.</strong></p><div style="display:grid;grid-template-columns:1fr 1fr;gap:8px"><div style="background:rgba(0,170,255,0.08);border:1px solid rgba(0,170,255,0.2);border-radius:3px;padding:10px;text-align:center"><div style="width:28px;height:28px;border-radius:50%;background:rgba(0,170,255,0.15);display:inline-flex;align-items:center;justify-content:center;margin-bottom:6px"><i class="fas fa-user-plus" style="color:#00aaff;font-size:0.75rem"></i></div><div style="font-size:0.68rem;font-weight:700;color:#fff">1. Account</div><div style="font-size:0.62rem;color:#8ea4b8">Created &amp; provisioned</div></div><div style="background:rgba(0,170,255,0.08);border:1px solid rgba(0,170,255,0.2);border-radius:3px;padding:10px;text-align:center"><div style="width:28px;height:28px;border-radius:50%;background:rgba(0,170,255,0.15);display:inline-flex;align-items:center;justify-content:center;margin-bottom:6px"><i class="fas fa-wallet" style="color:#00aaff;font-size:0.75rem"></i></div><div style="font-size:0.68rem;font-weight:700;color:#fff">2. Wallet Funded</div><div style="font-size:0.62rem;color:#8ea4b8">12 XRP reserve</div></div><div style="background:rgba(201,168,76,0.08);border:1px solid rgba(201,168,76,0.2);border-radius:3px;padding:10px;text-align:center"><div style="width:28px;height:28px;border-radius:50%;background:rgba(201,168,76,0.15);display:inline-flex;align-items:center;justify-content:center;margin-bottom:6px"><i class="fas fa-coins" style="color:#c9a84c;font-size:0.75rem"></i></div><div style="font-size:0.68rem;font-weight:700;color:#fff">3. Credits Allocated</div><div style="font-size:0.62rem;color:#8ea4b8">Based on plan tier</div></div><div style="background:rgba(0,170,255,0.08);border:1px solid rgba(0,170,255,0.2);border-radius:3px;padding:10px;text-align:center"><div style="width:28px;height:28px;border-radius:50%;background:rgba(0,170,255,0.15);display:inline-flex;align-items:center;justify-content:center;margin-bottom:6px"><i class="fas fa-arrow-right" style="color:#00aaff;font-size:0.75rem"></i></div><div style="font-size:0.68rem;font-weight:700;color:#fff">4. 0.01 Credits &rarr; Treasury</div><div style="font-size:0.62rem;color:#8ea4b8">Per anchor fee</div></div></div><div style="margin-top:10px;padding:8px 12px;background:rgba(0,0,0,0.25);border-radius:3px;font-size:0.7rem"><div style="display:flex;justify-content:space-between;flex-wrap:wrap;gap:6px"><div><span style="color:#8ea4b8">Wallet:</span> <span style="color:#00aaff;font-family:monospace" id="sidebarWalletAddr">rMLmk...f1KLqJ</span></div><div><span style="color:#8ea4b8">Balance:</span> <span style="color:#c9a84c;font-weight:700" id="sidebarSlsBal">'+(document.getElementById("slsBarBalance")?document.getElementById("slsBarBalance").textContent:"25,000")+" Credits</span></div></div></div></div>";var s=e.querySelector("#slsBalanceBar");s?s.parentNode.insertBefore(a,s.nextSibling):e.insertBefore(a,e.firstChild?e.firstChild.nextSibling:null);var c=!1;o.addEventListener("click",function(){c=!c,a.style.display=c?"block":"none",o.innerHTML=c?'<i class="fas fa-chevron-up" style="margin-right:4px"></i>Hide Flow Details':'<i class="fas fa-chart-simple" style="margin-right:4px"></i>Show Flow Details'})}}function ce(){var e=document.getElementById("walletSidebar"),o=document.getElementById("walletOverlay");e&&e.classList.remove("open"),o&&o.classList.remove("show")}function J(){var e=document.getElementById("slsBarBalance"),o=document.getElementById("walletTriggerBal");e&&o&&(o.textContent=e.textContent||"--")}document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){var e=document.getElementById("platformHub");e&&(e.style.display="block"),document.querySelectorAll(".tab-pane").forEach(function(a){a.classList.remove("show","active"),a.style.display="none"});var o=document.getElementById("demoPanel");o&&(o.style.display="none")},100)});document.addEventListener("shown.bs.tab",function(e){J()});(function(){function e(){var a=document.getElementById("actionItemBadge");if(a){var s=0;typeof s4ActionItems<"u"&&Array.isArray(s4ActionItems)&&(s=s4ActionItems.filter(function(c){return!c.done}).length),s>0?(a.textContent=s,a.style.display="inline-flex"):a.style.display="none"}}setInterval(e,3e3),document.addEventListener("DOMContentLoaded",function(){setTimeout(e,2e3)});var o=F;F=function(a){o(a),setTimeout(e,500)}})();(function(){function e(){var a=document.getElementById("slsBarBalance"),s=document.getElementById("slsBarAnchors"),c=document.getElementById("slsBarSpent"),f=document.getElementById("toolSlsBal"),m=document.getElementById("toolSlsAnch"),t=document.getElementById("toolSlsSpent");f&&a&&(f.textContent=a.textContent.replace(" Credits","")),m&&s&&(m.textContent=s.textContent),t&&c&&(t.textContent=c.textContent.replace(" Credits",""))}setInterval(e,2e3);var o=W;W=function(a){o(a),setTimeout(e,200)}})();(function(){var e=hideAnchorAnimation;hideAnchorAnimation=function(){if(e(),_){var o=document.getElementById(_);if(!o)return;var a=o.querySelector(".anchor-confirm-banner");a&&a.remove();var s=s4Vault.length>0?s4Vault[0]:null;if(!s)return;var c=document.createElement("div");c.className="anchor-confirm-banner",c.style.cssText="background:linear-gradient(135deg,rgba(0,204,102,0.08),rgba(0,170,255,0.06));border:1px solid rgba(0,204,102,0.2);border-radius:3px;padding:16px 20px;margin-bottom:16px;animation:panelSlideIn 0.4s ease;position:relative",c.innerHTML='<button onclick="this.parentElement.remove()" style="position:absolute;top:8px;right:12px;background:none;border:none;color:var(--muted);cursor:pointer;font-size:0.85rem">&times;</button><div style="display:flex;align-items:center;gap:8px;margin-bottom:8px"><i class="fas fa-check-circle" style="color:#00cc66;font-size:1.1rem"></i><strong style="color:#fff;font-size:0.9rem">Record Anchored Successfully</strong></div><div style="font-size:0.78rem;color:var(--steel);display:grid;grid-template-columns:80px 1fr;gap:4px 12px"><span style="color:var(--muted)">Type:</span><span>'+(s.label||s.type)+'</span><span style="color:var(--muted)">Hash:</span><span style="font-family:monospace;color:var(--accent);font-size:0.72rem;word-break:break-all">'+(s.hash||"").substring(0,32)+'...</span><span style="color:var(--muted)">TX:</span><span>'+(s.txHash?'<a href="'+(s.explorerUrl||"#")+'" target="_blank" style="color:var(--accent);text-decoration:none">'+s.txHash.substring(0,16)+'... <i class="fas fa-external-link-alt" style="font-size:0.6rem"></i></a>':"Pending")+'</span><span style="color:var(--muted)">Fee:</span><span style="color:#c9a84c">0.01 Credits</span><span style="color:var(--muted)">Time:</span><span>'+new Date().toLocaleTimeString()+"</span></div>";var f=o.querySelector(".demo-card");f&&f.insertBefore(c,f.firstChild),setTimeout(function(){c.parentElement&&c.remove()},15e3)}}})();window.closeILSTool=ne;window.closeWalletSidebar=ce;window.openILSTool=W;window.openWalletSidebar=se;window.showHub=re;window.showSection=F;window.showSystemsSub=ie;var g={ils_manager:{label:"ILS Manager",icon:"fa-clipboard-list",desc:"Full ILS tool suite access",tabs:["hub-analysis","hub-dmsms","hub-readiness","hub-compliance","hub-risk","hub-actions","hub-predictive","hub-lifecycle","hub-roi","hub-vault","hub-docs","hub-reports","hub-submissions","hub-sbom","hub-gfp","hub-cdrl","hub-contract","hub-provenance","hub-analytics","hub-team"]},dmsms_analyst:{label:"DMSMS Analyst",icon:"fa-microchip",desc:"DMSMS tracking and obsolescence management",tabs:["hub-dmsms","hub-risk","hub-lifecycle","hub-actions","hub-vault","hub-docs","hub-reports"]},auditor:{label:"Auditor / Compliance",icon:"fa-shield-halved",desc:"Compliance scorecard and audit vault",tabs:["hub-compliance","hub-vault","hub-actions","hub-docs","hub-reports","hub-submissions"]},contracts:{label:"Contract Specialist",icon:"fa-file-contract",desc:"ROI, submissions, and document management",tabs:["hub-roi","hub-vault","hub-docs","hub-reports","hub-submissions","hub-actions","hub-cdrl","hub-contract"]},supply_chain:{label:"Supply Chain / Provisioning",icon:"fa-truck",desc:"Supply, readiness, and provisioning tools",tabs:["hub-readiness","hub-risk","hub-lifecycle","hub-actions","hub-vault","hub-docs","hub-submissions"]},admin:{label:"Full Access Admin",icon:"fa-user-shield",desc:"All tools visible — unrestricted access",tabs:["hub-analysis","hub-dmsms","hub-readiness","hub-compliance","hub-risk","hub-actions","hub-predictive","hub-lifecycle","hub-roi","hub-vault","hub-docs","hub-reports","hub-submissions","hub-sbom","hub-gfp","hub-cdrl","hub-contract","hub-provenance","hub-analytics","hub-team"]}},V=["hub-analysis","hub-dmsms","hub-readiness","hub-compliance","hub-risk","hub-actions","hub-predictive","hub-lifecycle","hub-roi","hub-vault","hub-docs","hub-reports","hub-submissions","hub-sbom","hub-gfp","hub-cdrl","hub-contract","hub-provenance","hub-analytics","hub-team"],de={"hub-analysis":"Gap Analysis","hub-dmsms":"DMSMS Tracker","hub-readiness":"Readiness Calc","hub-compliance":"Compliance","hub-risk":"Supply Chain Risk","hub-actions":"Action Items","hub-predictive":"Predictive Maint","hub-lifecycle":"Lifecycle Cost","hub-roi":"ROI Calculator","hub-vault":"Audit Vault","hub-docs":"Document Library","hub-reports":"Report Gen","hub-submissions":"Submissions & PTD","hub-sbom":"SBOM Viewer","hub-gfp":"GFP Tracker","hub-cdrl":"CDRL Validator","hub-contract":"Contract Extractor","hub-provenance":"Provenance Chain","hub-analytics":"Cross-Program Analytics","hub-team":"Team Management"},y=sessionStorage.getItem("s4_user_role")||"",D=sessionStorage.getItem("s4_user_title")||"",k=JSON.parse(sessionStorage.getItem("s4_visible_tabs")||"null");function Z(){var e=document.createElement("div");e.id="roleModal",e.style.cssText="position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);z-index:10000;display:flex;align-items:center;justify-content:center;animation:fadeIn 0.3s ease";var o='<div style="background:var(--card);border:1px solid var(--border);border-radius:3px;padding:32px;max-width:620px;width:95%;max-height:85vh;overflow-y:auto"><h3 style="color:#fff;margin:0 0 4px"><i class="fas fa-user-cog" style="color:var(--accent);margin-right:8px"></i>Configure Your Role</h3><p style="color:var(--steel);font-size:0.85rem;margin-bottom:20px">Select your role to see relevant tools. You can customize visible tools and your displayed title.</p><div style="margin-bottom:16px"><label style="color:var(--steel);font-size:0.8rem;font-weight:600">Your Display Title</label><input id="roleTitle" value="'+(D||"")+'" style="background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.15);border-radius:3px;padding:10px;width:100%;margin-top:4px" placeholder="e.g., ILS Analyst, Logistics Specialist, Contract Manager"></div><div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:20px">';Object.keys(g).forEach(function(a){var s=g[a],c=y===a?"border-color:var(--accent);background:rgba(0,170,255,0.08)":"";o+=`<div class="role-card" onclick="selectRolePreset('`+a+`')" style="border:2px solid `+(c?"var(--accent)":"var(--border)")+";border-radius:3px;padding:14px;cursor:pointer;transition:all 0.2s;"+(c?"background:rgba(0,170,255,0.08)":"")+'" data-role="'+a+'"><div style="display:flex;align-items:center;gap:8px;margin-bottom:6px"><i class="fas '+s.icon+'" style="color:var(--accent);font-size:1.1rem"></i><strong style="color:#fff;font-size:0.9rem">'+s.label+'</strong></div><div style="color:var(--steel);font-size:0.78rem">'+s.desc+'</div><div style="color:var(--muted);font-size:0.72rem;margin-top:4px">'+s.tabs.length+" tools</div></div>"}),o+='</div><details style="margin-bottom:20px;background:rgba(0,170,255,0.03);border:1px solid rgba(0,170,255,0.12);border-radius:3px;padding:0 16px"><summary style="cursor:pointer;color:var(--accent);font-weight:600;font-size:0.85rem;padding:12px 0;list-style:none;display:flex;align-items:center;gap:8px"><i class="fas fa-sliders-h"></i> Customize Visible Tools <i class="fas fa-chevron-down" style="font-size:0.7rem;margin-left:auto;opacity:0.5"></i></summary><div id="roleToolChecks" style="display:grid;grid-template-columns:1fr 1fr;gap:8px;padding:0 0 16px">',V.forEach(function(a){var s=k?k.indexOf(a)>=0:y?(g[y]?.tabs||[]).indexOf(a)>=0:!0;o+='<label style="display:flex;align-items:center;gap:8px;font-size:0.82rem;color:var(--steel);cursor:pointer;padding:6px 10px;border-radius:3px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.06);transition:all 0.2s"><input type="checkbox" data-tab="'+a+'" '+(s?"checked":"")+' onchange="onRoleToolToggle()" style="accent-color:#00aaff;width:16px;height:16px;flex-shrink:0"> <span>'+(de[a]||a)+"</span></label>"}),o+=`</div></details><div style="display:flex;gap:10px;justify-content:flex-end"><button onclick="document.getElementById('roleModal').remove()" style="background:rgba(255,255,255,0.06);color:var(--steel);border:1px solid var(--border);border-radius:3px;padding:8px 20px;cursor:pointer">Cancel</button><button onclick="applyRole()" style="background:var(--accent);color:#fff;border:none;border-radius:3px;padding:8px 24px;cursor:pointer;font-weight:600">Apply Role</button></div></div>`,e.innerHTML=o,document.body.appendChild(e)}function ue(e){y=e,document.querySelectorAll(".role-card").forEach(function(c){c.style.borderColor="var(--border)",c.style.background=""});var o=document.querySelector('.role-card[data-role="'+e+'"]');o&&(o.style.borderColor="var(--accent)",o.style.background="rgba(0,170,255,0.08)");var a=g[e].tabs;document.querySelectorAll('#roleToolChecks input[type="checkbox"]').forEach(function(c){c.checked=a.indexOf(c.dataset.tab)>=0});var s=document.getElementById("roleTitle");s&&!s.value&&(s.value=g[e].label)}function fe(){k=[],document.querySelectorAll('#roleToolChecks input[type="checkbox"]').forEach(function(e){e.checked&&k.push(e.dataset.tab)})}function me(){var e=document.getElementById("roleTitle")?.value?.trim()||"";D=e,sessionStorage.setItem("s4_user_role",y),sessionStorage.setItem("s4_user_title",D);var o;k?(o=k,sessionStorage.setItem("s4_visible_tabs",JSON.stringify(k))):y&&g[y]?(o=g[y].tabs,sessionStorage.removeItem("s4_visible_tabs")):o=V,Q(o),U(),typeof reloadVaultForRole=="function"&&reloadVaultForRole(),document.getElementById("roleModal")?.remove(),s4Notify("Role Applied",(e||g[y]?.label||"Custom")+" — "+o.length+" tools active","success")}function Q(e){document.querySelectorAll(".ils-hub-tab").forEach(function(o){var a=o.getAttribute("onclick")||"",s=a.match(/switchHubTab\('([^']+)'/);if(s){var c=s[1];o.style.display=e.indexOf(c)>=0?"":"none"}}),document.querySelectorAll(".ils-tool-card[onclick]").forEach(function(o){var a=o.getAttribute("onclick")||"",s=a.match(/openILSTool\('([^']+)'/);s&&(o.style.display=e.indexOf(s[1])>=0?"":"none")})}function U(){var e=document.getElementById("roleBadge");if(!e){var o=document.querySelector(".ils-hub-tabs")?.previousElementSibling;if(!o)return;var a=o.querySelector("div:last-child");if(!a)return;e=document.createElement("span"),e.id="roleBadge",e.style.cssText="display:inline-flex;align-items:center;gap:6px;padding:5px 12px;border-radius:3px;font-size:0.75rem;font-weight:600;background:rgba(0,170,255,0.1);border:1px solid rgba(0,170,255,0.25);color:#00aaff;cursor:pointer;transition:all 0.2s;hover:background:rgba(0,170,255,0.2)",e.title="Click to change your role",e.onclick=Z,a.appendChild(e)}var s=y?g[y]?.icon||"fa-user":"fa-user-cog",c=D||(y?g[y]?.label:"Set Role");e.innerHTML='<i class="fas '+s+'"></i> '+c+' <i class="fas fa-gear" style="font-size:0.6rem;opacity:0.6"></i>'}function j(){if(y){var e=k||(g[y]?g[y].tabs:V);Q(e),typeof reloadVaultForRole=="function"&&reloadVaultForRole()}U(),y||setTimeout(function(){var o=document.getElementById("platformWorkspace");o&&o.style.display==="block"&&sessionStorage.getItem("s4_onboard_done")&&Z()},2500)}(function(){function e(t){return Math.round(t).toString().replace(/\B(?=(?:\d{3})+(?!\d))/g,",")}function o(){try{var t=function(M){var P=document.getElementById(M);return P&&parseFloat(P.value)||0},r=t("roiPrograms"),i=t("roiRecords"),l=t("roiFTEs"),n=t("roiRate"),u=t("roiAudit"),d=t("roiError"),p=t("roiIncidents"),b=t("roiLicense"),v=r*i,h=1+Math.sqrt(Math.max(0,v))/50,B=l*2080,S=B*n,x=S*.65*h,I=p*d*.9,O=u*.7*Math.max(1,r/5),q=v>0?x/12/v:0,L=x+I+O,w=L-b,C=b>0?w/b*100:0,T=L>0?Math.ceil(b/L*12):0,A=L*5-b*5,z=function(M,P,$){var H=document.getElementById(M);H&&(H.textContent=P,$&&(H.style.color=$))};z("roiSavings","$"+e(w),w>0?"#00cc66":"#ff4444"),z("roiPercent",C.toFixed(0)+"%",C>0?"#00cc66":"#ff4444"),z("roiPayback",T+" mo",null),z("roi5Year","$"+e(A),A>0?"#00cc66":"#ff4444");var N=document.getElementById("roiOutput");N&&(N.innerHTML='<div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:20px;margin-top:12px"><div class="section-label"><i class="fas fa-chart-line"></i> ROI BREAKDOWN</div><div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;font-size:0.85rem;margin-bottom:16px"><div><span style="color:var(--steel)">Labor Automation (65%)</span><br><strong style="color:#00cc66">$'+e(x)+'</strong></div><div><span style="color:var(--steel)">Error Reduction (90%)</span><br><strong style="color:#00cc66">$'+e(I)+'</strong></div><div><span style="color:var(--steel)">Audit Cost Reduction (70%)</span><br><strong style="color:#00cc66">$'+e(O)+'</strong></div><div><span style="color:var(--steel)">S4 Ledger License</span><br><strong style="color:#ff6b6b">-$'+e(b)+'</strong></div></div><hr style="border-color:var(--border);margin:12px 0"><div style="display:flex;justify-content:space-between;align-items:center"><div><span style="color:var(--steel);font-size:0.82rem">Net Annual Savings</span><br><span style="font-size:1.5rem;font-weight:800;color:'+(w>0?"#00cc66":"#ff4444")+'">$'+e(w)+'</span></div><div><span style="color:var(--steel);font-size:0.82rem">Per-Record Savings</span><br><span style="font-size:1.1rem;font-weight:700;color:var(--accent)">$'+q.toFixed(2)+'/record</span></div><div><span style="color:var(--steel);font-size:0.82rem">Volume Multiplier</span><br><span style="font-size:1.1rem;font-weight:700;color:var(--accent)">'+h.toFixed(2)+"x</span></div></div></div>");try{typeof renderROICharts=="function"&&renderROICharts()}catch{}}catch{}}function a(){var t=["roiPrograms","roiRecords","roiFTEs","roiRate","roiAudit","roiError","roiIncidents","roiLicense"],r=0;return t.forEach(function(i){var l=document.getElementById(i);l&&(l.removeAttribute("oninput"),l.addEventListener("input",o),r++)}),r>0&&o(),r}function s(){var t={};try{var r=document.querySelectorAll('#ilsCoverage input[type="checkbox"], .ils-checklist input[type="checkbox"]'),i=0,l=r.length||1;r.forEach(function(d){d.checked&&i++}),t.ilsPct=Math.round(i/l*100)}catch{t.ilsPct=0}var n=["pctCMMC","pctNIST","pctDFARS","pctFAR","pctILS","pctDMSMSmgmt"];t.comp=n.map(function(d){var p=document.getElementById(d);return p&&parseInt(p.textContent)||0}),t.vault=typeof s4Vault<"u"?s4Vault.length:typeof getLocalRecords=="function"?getLocalRecords().length:0,t.actions=typeof s4ActionItems<"u"?s4ActionItems.length:0,t.actionsDone=0,typeof s4ActionItems<"u"&&s4ActionItems.forEach(function(d){d.status==="done"&&t.actionsDone++});var u=function(d){var p=document.getElementById(d);return p&&parseFloat(p.value)||0};return t.roiPrograms=u("roiPrograms"),t.roiRecords=u("roiRecords"),t.roiFTEs=u("roiFTEs"),t.roiRate=u("roiRate"),t.roiLicense=u("roiLicense"),t.roiAudit=u("roiAudit"),t.stats=typeof stats<"u"?stats:{anchored:0,slsFees:0},t.dmsmsItems=typeof dmsmsItems<"u"?dmsmsItems:[],t.riskItems=typeof riskItems<"u"?riskItems:[],t}var c={gapRadarChart:function(){var t=s(),r=Math.min(100,20+t.vault*3),i=Math.min(100,15+t.vault*4),l=Math.min(100,t.comp[0]||10),n=Math.min(100,10+(t.dmsmsItems.length||0)*8),u=Math.min(100,15+(t.riskItems.length||0)*5),d=Math.min(100,20+t.ilsPct*.6),p=[r,i,l,n,u,d].map(function(b){return Math.min(100,b+30+Math.random()*5|0)});return{type:"radar",data:{labels:["Tracking","Audit","Compliance","Obsolescence","Risk","Budget"],datasets:[{label:"Current (Manual)",data:[r,i,l,n,u,d],borderColor:"#ff6b6b",backgroundColor:"rgba(255,107,107,0.1)",pointBackgroundColor:"#ff6b6b"},{label:"With S4 Ledger",data:p,borderColor:"#00aaff",backgroundColor:"rgba(0,170,255,0.1)",pointBackgroundColor:"#00aaff"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"#8ea4b8",font:{size:10}}}},scales:{r:{grid:{color:"rgba(255,255,255,0.06)"},angleLines:{color:"rgba(255,255,255,0.06)"},pointLabels:{color:"#8ea4b8",font:{size:9}},ticks:{display:!1}}}}}},gapBarChart:function(){var t=s(),r=Math.max(0,100-(20+t.vault*3)),i=Math.max(0,100-(15+t.vault*4)),l=Math.max(0,100-(t.comp[0]||10)),n=Math.max(0,100-(10+(t.dmsmsItems.length||0)*8)),u=Math.max(0,100-(15+(t.riskItems.length||0)*5)),d=Math.max(0,100-(20+t.ilsPct*.6));return{type:"bar",data:{labels:["Tracking","Audit","Compliance","Obsolescence","Risk","Budget"],datasets:[{label:"Gap %",data:[r,i,l,n,u,d],backgroundColor:["#ff6b6b","#fb923c","#c9a84c","#00aaff","#38bdf8","#06b6d4"],borderWidth:0,borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{display:!1}},scales:{x:{ticks:{color:"#6b7d93",font:{size:9}},grid:{color:"rgba(255,255,255,0.04)"},max:100},y:{ticks:{color:"#8ea4b8",font:{size:9}},grid:{display:!1}}}}}},dmsmsPieChart:function(){var t=s(),r=t.dmsmsItems,i=0,l=0,n=0,u=0,d=0;return r.length>0?r.forEach(function(p){var b=(p.status||"").toLowerCase();b.indexOf("obsolete")>=0?n++:b.indexOf("risk")>=0||b.indexOf("diminish")>=0?l++:b.indexOf("discontin")>=0?u++:b.indexOf("eol")>=0||b.indexOf("last")>=0?d++:i++}):(i=45,l=20,n=15,u=10,d=10),{type:"doughnut",data:{labels:["Active","At Risk","Obsolete","Discontinued","EOL Planned"],datasets:[{data:[i,l,n,u,d],backgroundColor:["#00aaff","#c9a84c","#ff6b6b","#00aaff","#6b7d93"],borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{color:"#8ea4b8",font:{size:9},padding:6}}}}}},readinessGauge:function(){var t=s(),r=Math.max(30,t.ilsPct),i=Math.min(100,r+15+(t.vault>5?10:0)),l=Math.min(100,r+(t.dmsmsItems.length>0?-5:8)),n=Math.min(100,r-12+t.vault*2),u=Math.min(100,r+20),d=Math.min(100,r+6+t.actionsDone*3),p=Math.min(100,r+12);return{type:"bar",data:{labels:["Personnel","Equipment","Supply","Training","Maintenance","C4ISR"],datasets:[{label:"Readiness %",data:[i,l,n,u,d,p],backgroundColor:"rgba(0,170,255,0.6)",borderColor:"#00aaff",borderWidth:1,borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{ticks:{color:"#8ea4b8",font:{size:9}},grid:{display:!1}},y:{ticks:{color:"#6b7d93",font:{size:9}},grid:{color:"rgba(255,255,255,0.04)"},beginAtZero:!0,max:100}}}}},complianceRadarChart:function(){var t=s(),r=t.comp[2]||30,i=Math.min(100,40+t.vault*4),l=t.comp[1]||25,n=t.comp[0]||20,u=Math.min(100,30+t.ilsPct*.5),d=Math.min(100,35+t.vault*3);return{type:"polarArea",data:{labels:["DFARS","ITAR","NIST 800-171","CMMC","ISO 27001","SOX"],datasets:[{data:[r,i,l,n,u,d],backgroundColor:["rgba(0,170,255,0.5)","rgba(201,168,76,0.5)","rgba(56,189,248,0.5)","rgba(255,107,107,0.5)","rgba(0,170,255,0.5)","rgba(6,182,212,0.5)"],borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{color:"#8ea4b8",font:{size:9},padding:6}}},scales:{r:{grid:{color:"rgba(255,255,255,0.06)"},ticks:{display:!1}}}}}},roiLineChart:function(){var t=s(),r=t.roiPrograms*t.roiRecords,i=1+Math.sqrt(Math.max(0,r))/50,l=t.roiFTEs*2080*t.roiRate,n=l*.65*i,u=t.roiAudit*.7*Math.max(1,t.roiPrograms/5),d=n+u,p=t.roiLicense||1,b=[],v=[],h=t.roiPrograms>0||t.roiFTEs>0||t.roiLicense>0;if(h)for(var B=0,S=1;S<=5;S++)for(var x=1;x<=4;x++){b.push("Y"+S+"-Q"+x);var I=(S-1)*4+x,O=.2+.65*(1-Math.exp(-.18*I)),q=d/4*O,L=p/4;B+=q-L;var w=p>0?B/p*100:0;v.push(Math.round(w))}if(!h||v.length===0||v.every(function(A){return A===0})){b=[],v=[];for(var C=1;C<=5;C++)for(var T=1;T<=4;T++){b.push("Y"+C+"-Q"+T);var I=(C-1)*4+T;v.push(Math.round(-15+3.5*I+.8*Math.pow(I,1.45)))}}return{type:"line",data:{labels:b,datasets:[{label:"Cumulative ROI %",data:v,borderColor:"#00cc66",backgroundColor:"rgba(0,204,102,0.1)",fill:!0,tension:.3,pointRadius:2,pointBackgroundColor:"#00cc66"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"5-Year Cumulative ROI",color:"#8ea4b8",font:{size:11}}},scales:{x:{ticks:{color:"#8ea4b8",font:{size:8},maxRotation:45},grid:{display:!1}},y:{ticks:{color:"#6b7d93",font:{size:9},callback:function(A){return A+"%"}},grid:{color:"rgba(255,255,255,0.04)"},beginAtZero:!0}}}}},riskHeatChart:function(){var t=s(),r=[];if(t.riskItems.length>0)t.riskItems.forEach(function(u){r.push({x:u.likelihood||Math.ceil(Math.random()*9),y:u.impact||Math.ceil(Math.random()*9)})});else for(var i=Math.max(3,Math.min(12,3+t.vault+t.actions)),l=0;l<i;l++)r.push({x:1+Math.floor(Math.random()*9),y:1+Math.floor(Math.random()*9)});var n=r.map(function(u){var d=u.x*u.y;return d>=50?"rgba(255,70,70,0.8)":d>=25?"rgba(255,165,0,0.7)":d>=10?"rgba(201,168,76,0.6)":"rgba(0,170,255,0.5)"});return{type:"scatter",data:{datasets:[{label:"Risk Items",data:r,backgroundColor:n,borderColor:n,pointRadius:7}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:r.length+" Risk Items Mapped",color:"#8ea4b8",font:{size:11}}},scales:{x:{title:{display:!0,text:"Likelihood →",color:"#8ea4b8",font:{size:9}},ticks:{color:"#6b7d93",font:{size:9}},grid:{color:"rgba(255,255,255,0.04)"},min:0,max:10},y:{title:{display:!0,text:"Impact →",color:"#8ea4b8",font:{size:9}},ticks:{color:"#6b7d93",font:{size:9}},grid:{color:"rgba(255,255,255,0.04)"},min:0,max:10}}}}},lifecyclePieChart:function(){var t=s(),r=Math.min(30,(t.dmsmsItems.length||0)*5),i=Math.min(15,t.ilsPct*.15);return{type:"line",data:{labels:["Intro","Growth","Maturity","Sustain","Phase Out","Disposal"],datasets:[{label:"Availability %",data:[95-r*.1,92-r*.2+i,88-r*.4+i,75-r*.6+i*2,50-r*.3+i,20+i*.5].map(function(l){return Math.round(Math.max(5,Math.min(100,l)))}),borderColor:"#00aaff",backgroundColor:"rgba(0,170,255,0.1)",fill:!0,tension:.3},{label:"Cost Index",data:[30,25+r*.3,35+r*.5,55+r*.8-i,70+r-i*2,90+r*.5-i].map(function(l){return Math.round(Math.max(5,Math.min(100,l)))}),borderColor:"#ff6b6b",backgroundColor:"rgba(255,107,107,0.05)",fill:!0,tension:.3}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"#8ea4b8",font:{size:10}}}},scales:{x:{ticks:{color:"#8ea4b8",font:{size:9}},grid:{display:!1}},y:{ticks:{color:"#6b7d93",font:{size:9}},grid:{color:"rgba(255,255,255,0.04)"},beginAtZero:!0}}}}}};window._bpRenderInPanel=f;function f(t){if(!(typeof Chart>"u")){if(typeof injectChartContainers=="function")try{injectChartContainers()}catch{}var r=t.querySelectorAll("canvas");r.length!==0&&r.forEach(function(i){if(!i.getAttribute("data-bp-rendered")){var l=c[i.id];if(l)try{var n=Chart.getChart(i);n&&n.destroy(),!i.style.height&&!i.getAttribute("height")&&(i.style.height="220px"),i.style.width="100%",i.style.display="block";var u=i.closest(".chart-container");u&&(u.style.display="block",u.style.visibility="visible"),new Chart(i,l()),i.setAttribute("data-bp-rendered","1"),i.setAttribute("data-bp-ts",Date.now())}catch{}}})}}function m(){if(a()===0&&(setTimeout(a,2e3),setTimeout(a,5e3)),window.calcROI=o,typeof window.openILSTool=="function"){var t=window.openILSTool;window.openILSTool=function(i){t(i),setTimeout(function(){var l=document.getElementById(i);l&&f(l)},300),setTimeout(function(){var l=document.getElementById(i);l&&f(l)},800),setTimeout(function(){var l=document.getElementById(i);l&&f(l)},2e3)}}if(typeof window.switchHubTab=="function"){var r=window.switchHubTab;window.switchHubTab=function(i,l){r(i,l),setTimeout(function(){var n=document.getElementById(i);n&&f(n)},400)}}document.querySelectorAll(".ils-hub-panel").forEach(function(i){var l=new MutationObserver(function(n){n.forEach(function(u){u.target.classList&&u.target.classList.contains("active")&&setTimeout(function(){f(u.target)},400)})});l.observe(i,{attributes:!0,attributeFilter:["class","style"]})}),setTimeout(function(){document.querySelectorAll(".ils-hub-panel.active").forEach(function(i){f(i)})},2e3),setTimeout(function(){if(typeof loadPerformanceMetrics=="function")try{loadPerformanceMetrics()}catch{}},1500),setTimeout(a,3e3),typeof j=="function"&&j()}window._s4RefreshCharts=function(){document.querySelectorAll("canvas[data-bp-rendered]").forEach(function(r){r.removeAttribute("data-bp-rendered")});var t=document.querySelector(".ils-hub-panel.active");t&&f(t)},document.readyState==="loading"?document.addEventListener("DOMContentLoaded",m):m()})();window.applyRole=me;window.onRoleToolToggle=fe;window.selectRolePreset=ue;
