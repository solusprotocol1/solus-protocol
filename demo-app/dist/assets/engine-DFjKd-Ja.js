const Nn={USN_SUPPLY_RECEIPT:"CUI",USN_3M_MAINTENANCE:"CUI",USN_CASREP:"SECRET",USN_CDRL:"CUI",USN_ORDNANCE:"SECRET",USN_DEPOT_REPAIR:"CUI",USN_INSURV:"CUI",USN_CALIBRATION:"U",USN_CONFIG:"CUI",USN_CUSTODY:"CUI",USN_TDP:"CUI",USN_COC:"U",USN_SHIPALT:"CUI",USN_PMS:"U",USN_HME:"CUI",USN_COMBAT_SYS:"SECRET",USN_PROPULSION:"CUI",USN_AVIATION:"CUI",USN_FLIGHT_OPS:"CUI",USN_SUBSAFE:"SECRET",USN_DIVE_EQUIP:"U",USN_MEDICAL:"CUI",USN_QDR:"U",USN_FIELDING:"CUI",USN_REACTOR:"SECRET",USN_DRL:"CUI",USN_DI:"CUI",USN_VRS:"CUI",USN_BUYLIST:"CUI",USN_J1_ILS:"CUI",USN_J2_SE:"CUI",USN_J3_SUPPLY:"CUI",USN_J4_TECHDATA:"CUI",USN_J5_TRAINING:"U",USN_J6_MANPOWER:"CUI",USN_J7_FACILITIES:"U",USN_J8_PHST:"CUI",USN_J9_SOFTWARE:"CUI",USN_J10_DESIGN:"CUI",USN_J11_RAM:"CUI",USN_J12_ACQLOG:"CUI",USN_J13_CM:"CUI",USN_J14_DISPOSAL:"U",USN_BAM:"CUI",USN_TRANSFER_BOOK:"CUI",USN_COTS_MANUAL:"U",USN_TM_INDEX:"U",USN_PO_INDEX:"CUI",USN_PID:"CUI",USN_CONTRACT_MOD:"CUI",USN_CONFIG_MGMT:"CUI",USN_OUTFITTING:"CUI",USN_PURCHASE_REQ:"CUI",JOINT_NATO:"CUI",JOINT_F35:"SECRET",JOINT_MISSILE_DEF:"TS",JOINT_CYBER:"SECRET",JOINT_INTEL:"TS",JOINT_SPACE:"SECRET",JOINT_TRANSPORT:"CUI",JOINT_CONTRACT:"CUI",JOINT_READINESS:"SECRET",JOINT_DISPOSAL:"U"},te={U:{label:"UNCLASSIFIED",icon:"fa-circle",color:"#00cc66",desc:"No special handling required"},CUI:{label:"CUI",icon:"fa-circle",color:"#00aaff",desc:"Controlled Unclassified Information ‚Äî NIST 800-171 handling required"},SECRET:{label:"SECRET",icon:"fa-circle",color:"#ff5555",desc:"Requires SIPRNet or equivalent classified network"},TS:{label:"TOP SECRET",icon:"fa-circle",color:"#ffa500",desc:"Requires JWICS or equivalent TS/SCI network"}};function yt(t){return Nn[t]||"CUI"}const qt={USN:{name:"U.S. Navy",icon:"fa-anchor",short:"Navy"},JOINT:{name:"Joint / Cross-Branch",icon:"fa-medal",short:"Joint"}},Bn={USN_SUPPLY_RECEIPT:["Supply Chain Receipt","fa-box","#00aaff","USN","NAVSUP OneTouch"],USN_3M_MAINTENANCE:["3-M Maintenance Action","fa-wrench","#ffd700","USN","SKED/OARS"],USN_CASREP:["Casualty Report (CASREP)","fa-exclamation-triangle","#ff3333","USN","TYCOM"],USN_CDRL:["CDRL Delivery","fa-file-alt","#8ea4b8","USN","CDMD-OA"],USN_ORDNANCE:["Ordnance Lot Tracking","fa-bomb","#ff6b6b","USN","AESIP"],USN_DEPOT_REPAIR:["Depot Repair Record","fa-industry","#ff9933","USN","CNRMF"],USN_INSURV:["INSURV Inspection","fa-search","#66ccff","USN","NRCC"],USN_CALIBRATION:["TMDE Calibration","fa-ruler","#ff66aa","USN","METCAL"],USN_CONFIG:["Configuration Baseline","fa-cog","#00aaff","USN","CDMD-OA"],USN_CUSTODY:["Custody Transfer","fa-sync-alt","#00aaff","USN","DPAS"],USN_TDP:["Technical Data Package","fa-drafting-compass","#9945ff","USN","NAVSEA"],USN_COC:["Certificate of Conformance","fa-check-circle","#00cc88","USN","DCMA"],USN_SHIPALT:["Ship Alteration (SHIPALT)","fa-ship","#0077cc","USN","NAVSEA"],USN_PMS:["PMS/SKED Compliance","fa-clipboard-list","#44aa88","USN","3M/SKED"],USN_HME:["HM&E System Record","fa-bolt","#dd8844","USN","ENGSKED"],USN_COMBAT_SYS:["Combat Systems Cert","fa-crosshairs","#ff4444","USN","CSSQT"],USN_PROPULSION:["Propulsion Plant Exam","fa-fire","#ff6600","USN","INSURV"],USN_AVIATION:["Aviation Maintenance","fa-plane","#0088cc","USN","NALCOMIS"],USN_FLIGHT_OPS:["Flight Operations Record","fa-plane-departure","#3399ff","USN","NATOPS"],USN_SUBSAFE:["SUBSAFE Certification","fa-lock","#003366","USN","NAVSEA 07"],USN_DIVE_EQUIP:["Diving Equipment Inspection","fa-water","#006699","USN","NAVSEA 00C"],USN_MEDICAL:["Medical Equipment Cert","fa-hospital","#33cc66","USN","BUMED"],USN_QDR:["Quality Defect Report","fa-ban","#cc0000","USN","NAVSUP WSS"],USN_FIELDING:["Equipment Fielding","fa-ship","#00ddaa","USN","PMS"],USN_REACTOR:["Naval Reactor Test","fa-radiation","#ffcc00","USN","NAVSEA 08"],USN_DRL:["Data Requirements List (DRL)","fa-clipboard-list","#5599cc","USN","NAVSEA/PMS"],USN_DI:["Data Item Description (DID)","fa-file-contract","#4488bb","USN","CDMD-OA"],USN_VRS:["Vendor Recommended Spares","fa-box","#7799aa","USN","NAVICP/DLA"],USN_BUYLIST:["Buylist / Provisioning","fa-shopping-cart","#6688aa","USN","NAVSUP WSS"],USN_J1_ILS:["J-1 ILS Parameters / LORA","fa-file-alt","#336699","USN","PMS/ILS"],USN_J2_SE:["J-2 Support Equipment","fa-wrench","#337799","USN","PMS/ILS"],USN_J3_SUPPLY:["J-3 Supply Support","fa-box","#338899","USN","NAVSUP"],USN_J4_TECHDATA:["J-4 Technical Data","fa-book-open","#339999","USN","NAVSEA"],USN_J5_TRAINING:["J-5 Training","fa-graduation-cap","#33aa99","USN","NETC"],USN_J6_MANPOWER:["J-6 Manpower & Personnel","fa-users","#4488cc","USN","OPNAV N1"],USN_J7_FACILITIES:["J-7 Facilities","fa-hard-hat","#5577bb","USN","NAVFAC"],USN_J8_PHST:["J-8 PHS&T","fa-box","#6699cc","USN","NAVSUP"],USN_J9_SOFTWARE:["J-9 Computer Resources","fa-laptop","#4477aa","USN","SPAWAR/NAVWAR"],USN_J10_DESIGN:["J-10 Design Interface","fa-drafting-compass","#3366aa","USN","NAVSEA"],USN_J11_RAM:["J-11 RAM Analysis","fa-chart-line","#2255aa","USN","PMS/ILS"],USN_J12_ACQLOG:["J-12 Acquisition Logistics","fa-chart-bar","#2266bb","USN","PMS/ILS"],USN_J13_CM:["J-13 Configuration Mgmt","fa-cog","#3377cc","USN","CDMD-OA"],USN_J14_DISPOSAL:["J-14 Disposal","fa-trash-alt","#667788","USN","DRMS"],USN_BAM:["Budget Allowance Mgmt (BAM)","fa-money-bill-wave","#cc9933","USN","NAVSUP"],USN_TRANSFER_BOOK:["Transfer Book","fa-book","#5588aa","USN","Supply Officer"],USN_COTS_MANUAL:["COTS Manual / Documentation","fa-book","#4477bb","USN","NAVSEA"],USN_TM_INDEX:["Technical Manual Index","fa-address-card","#3366bb","USN","NAVSEA"],USN_PO_INDEX:["Purchase Order Index","fa-folder-open","#5588cc","USN","NAVSUP"],USN_PID:["Program Introduction Doc (PID)","fa-file-alt","#6699bb","USN","PMS"],USN_CONTRACT_MOD:["Contract Modification","fa-pen","#7788aa","USN","NAVSEA Contracts"],USN_CONFIG_MGMT:["Configuration Mgmt Record","fa-cog","#4466aa","USN","CDMD-OA"],USN_OUTFITTING:["Outfitting Requirements","fa-ship","#3355aa","USN","PMS/Outfitting"],USN_PURCHASE_REQ:["Purchase Request (PR)","fa-credit-card","#558899","USN","NAVSUP"],JOINT_NATO:["NATO STANAG Verification","üè≥Ô∏è","#003399","JOINT","NATO"],JOINT_F35:["F-35 JSF Logistics","fa-plane","#1a1a2e","JOINT","ALIS/ODIN"],JOINT_MISSILE_DEF:["Missile Defense Record","fa-rocket","#4a0080","JOINT","MDA"],JOINT_CYBER:["Cyber Equipment Cert","fa-desktop","#00cc99","JOINT","CYBERCOM"],JOINT_INTEL:["Intelligence Equipment","üïµÔ∏è","#2d2d2d","JOINT","DIA"],JOINT_SPACE:["Space Command Asset","fa-satellite","#000066","JOINT","USSPACECOM"],JOINT_TRANSPORT:["TRANSCOM Logistics","fa-truck","#4a6741","JOINT","USTRANSCOM"],JOINT_CONTRACT:["Contract Deliverable","fa-pen","#b8860b","JOINT","DCMA"],JOINT_READINESS:["Readiness Report","fa-chart-line","#00ff88","JOINT","DRRS"],JOINT_DISPOSAL:["Joint Disposal Record","fa-trash-alt","#8b8682","JOINT","DLA"]},je={};for(const[t,e]of Object.entries(Bn))je[t]={label:e[0],icon:e[1],color:e[2],branch:e[3],system:e[4]};const zt={supply:{type:"USN_SUPPLY_RECEIPT",branch:"USN",text:`Supply Chain Receipt
NSN: 5340-01-234-5678
Nomenclature: Valve, Gate, Carbon Steel
Contract: N00024-23-C-5501
CAGE Code: 1THK9
Quantity Received: 50 EA
Condition Code: A (Serviceable)
Inspection: FAT Pass
Receiving Depot: Norfolk Naval Shipyard (NNSY)
Inspector: QA-237 J. Martinez
Date: 2026-02-10`},maintenance:{type:"USN_3M_MAINTENANCE",branch:"USN",text:`Maintenance 3-M Action
MRC: 2815-1.3.7
Equipment: LM2500 Gas Turbine Engine
Hull Number: DDG-118
Action: Oil sample analysis
Results: Normal wear metals Fe:12ppm Cu:3ppm Al:2ppm
Technician: MM2(SW) Garcia
Verified By: MMCS(SW) Thompson
Next Due: 2026-08-10
SKED Status: Current`},ordnance:{type:"USN_ORDNANCE",branch:"USN",text:`Ordnance Lot Tracking
DODIC: A059 (5.56mm Ball M855)
Lot Number: WCC-2025-1147-A
NSN: 1305-01-299-5564
Manufacturer: Winchester (CAGE: 97173)
Quantity: 250,000 rounds
Proof Test: PASS (MIL-C-63989D)
Storage: Weapons Station Earle, Magazine 14
Custodian: GMC(SW) Rodriguez
Date: 2026-02-08`},casrep:{type:"USN_CASREP",branch:"USN",text:`CASUALTY REPORT (CASREP)
Unit: USS Porter (DDG-78)
Equipment: AN/SPY-1D(V) Radar Transmitter
Serial: SPY-TM-2019-04472
Impact: Degraded radar coverage
Reported By: LCDR Pham, CSO
Date: 2026-02-10`},custody:{type:"USN_CUSTODY",branch:"USN",text:`Chain of Custody Transfer
Equipment: AN/SPY-1D(V) Transmitter Module
Serial: SPY-TM-2019-04472
NSN: 5841-01-522-3401
From: ET1(SW) Cooper, DDG-78
To: NAVSEA Det Norfolk, IMA
Seal: Tamper-evident #TS-2026-0887
Date: 2026-02-10`},drl:{type:"USN_DRL",branch:"USN",text:`Data Requirements List (CDRL)
Contract: N00024-24-C-6200
CDRL Seq: A001
DI Number: DI-ILSS-81495
Title: Integrated Logistics Support Plan
Frequency: One-time with revisions
Distribution: NAVSEA PMS 400D
Contractor: Huntington Ingalls Industries
Program: DDG-51 Flight III
Status: Submitted, under review
Date: 2026-02-10`},buylist:{type:"USN_BUYLIST",branch:"USN",text:`Buylist / Provisioning Record
Program: LCS Freedom-class
PMS: PMS 501
Item: Main Reduction Gear Oil Pump Assembly
NSN: 4320-01-567-8901
Recommended Qty: 4 EA per hull
Acquisition Method: Sole Source (OEM)
Vendor: Rolls-Royce Naval Marine (CAGE: K2965)
Unit Cost: $47,250.00
Justification: Critical rotating machinery, no alternate source
Date: 2026-02-09`},transfer_book:{type:"USN_TRANSFER_BOOK",branch:"USN",text:`Transfer Book Entry
Unit: Supply Department, USS Nimitz (CVN-68)
Account: OPTAR / EMRM
Job Order: 68-2026-0195
Description: Transfer of ADP equipment to AIMD
From: S-1 Division (Stock Control)
To: AIMD IM-3 Division
Quantity: 12 laptops, 3 printers
Document Number: N68836-6026-0195
Approved By: LCDR Torres, Supply Officer
Date: 2026-02-11`}};let ht="USN",Y="USN_SUPPLY_RECEIPT",x=[],S={anchored:0,verified:0,types:new Set,slsFees:0};window._s4Stats=S;var nt=!1;function me(){nt||(nt=!0,requestAnimationFrame(function(){nt=!1,typeof He=="function"&&He();var t=typeof _onboardTiers<"u"&&typeof _onboardTier<"u"&&_onboardTiers[_onboardTier]?.sls||25e3,e=k&&k.subscription?.sls_allocation||t,n=S.slsFees||0,r=Math.round((e-n)*100)/100,a=document.getElementById("demoSlsBalance");a&&(a.textContent=r.toLocaleString(void 0,{maximumFractionDigits:2})+" Credits",a.style.color=r<100?"#ff3333":"#c9a84c");var i=document.getElementById("demoStatusBar");i&&(i.innerHTML='<i class="fas fa-shield-halved" style="margin-right:6px;color:#00aaff;"></i><strong style="color:#00aaff;">S4 Ledger</strong> <span style="margin:0 8px;color:rgba(255,255,255,0.2);">|</span><span style="color:#c9a84c;">'+r.toLocaleString(void 0,{maximumFractionDigits:2})+' Credits remaining</span><span style="margin:0 8px;color:rgba(255,255,255,0.2);">|</span><span style="color:#00aaff;">'+S.anchored+" anchor"+(S.anchored!==1?"s":"")+'</span><span style="margin:0 8px;color:rgba(255,255,255,0.2);">|</span><span style="color:#8ea4b8;">0.01 Credits per anchor</span>');var o=document.getElementById("demoBanner");if(o&&o.style.display!=="none"){var c=k?.wallet?.address||"";o.innerHTML='<i class="fas fa-shield-halved" style="color:#00aaff;margin-right:6px;"></i> <strong>S4 Ledger</strong> &mdash; <span style="color:#c9a84c;">'+r.toLocaleString(void 0,{maximumFractionDigits:2})+" Credits</span> &bull; "+S.anchored+" anchor"+(S.anchored!==1?"s":"")+' &bull; 0.01 Credits per anchor &bull; <span style="color:var(--accent)">'+(c?c.substring(0,6)+"..."+c.slice(-4):"")+"</span>"}}))}function On(t,e){var n=document.getElementById("slsFlashToast");n&&n.remove();var r=document.createElement("div");r.id="slsFlashToast",r.style.cssText="position:fixed;top:80px;right:24px;z-index:99999;background:linear-gradient(135deg,rgba(0,170,255,0.15),rgba(201,168,76,0.1));border:1px solid rgba(201,168,76,0.4);border-radius:3px;padding:16px 24px;font-size:0.9rem;color:#fff;box-shadow:0 8px 32px rgba(0,0,0,0.5);backdrop-filter:blur(12px);animation:slsToastIn 0.4s ease-out;min-width:260px;",r.innerHTML='<div style="font-weight:700;color:#c9a84c;margin-bottom:6px;font-size:0.8rem;text-transform:uppercase;letter-spacing:0.5px"><i class="fas fa-coins" style="margin-right:6px"></i>Credit Balance Updated</div><div style="font-size:1.4rem;font-weight:800;color:#c9a84c;">'+t+' <span style="font-size:0.8rem;font-weight:600;">Credits</span></div><div style="font-size:0.78rem;color:#ff6b6b;margin-top:4px;">-'+e.toFixed(2)+" Credits (anchor fee)</div>",document.body.appendChild(r),setTimeout(function(){r.style.animation="slsToastOut 0.4s ease-in forwards",setTimeout(function(){r.remove()},400)},3500)}var St=!1;function _n(){var t=document.getElementById("demoPanel");t&&(t.style.display="none"),St=!0,He()}function Fn(){var t=document.getElementById("demoPanel");t&&(t.style.display="block"),St=!1,He()}function Un(){if(St){Fn();var t=document.getElementById("slsToggleBtn");t&&(t.innerHTML='<i class="fas fa-chevron-up" style="margin-right:4px"></i>Hide Flow Details')}else{_n();var t=document.getElementById("slsToggleBtn");t&&(t.innerHTML='<i class="fas fa-chart-simple" style="margin-right:4px"></i>Show Flow Details')}}function He(){var t=typeof _onboardTiers<"u"&&typeof _onboardTier<"u"&&_onboardTiers[_onboardTier]?.sls||25e3,e=k&&k.subscription?.sls_allocation||t,n=S.slsFees||0,r=Math.round((e-n)*100)/100,a=k&&k.subscription?.label||"Starter",i=document.getElementById("slsBarBalance"),o=document.getElementById("slsBarAnchors"),c=document.getElementById("slsBarSpent"),l=document.getElementById("slsBarPlan");i&&(i.textContent=r.toLocaleString(void 0,{maximumFractionDigits:2})+" Credits",i.style.color=r<100?"#ff3333":"#c9a84c"),o&&(o.textContent=S.anchored||0),c&&(c.textContent=n.toFixed(2)+" Credits"),l&&(l.textContent=a);var s=document.getElementById("walletSLSBalance");s&&(s.textContent=r.toLocaleString(void 0,{maximumFractionDigits:2}));var d=document.getElementById("walletAnchors");d&&(S.anchored||0)>0&&(d.textContent=Math.floor(r/.01).toLocaleString())}function Hn(){if(sessionStorage.getItem("s4_authenticated")==="1"){$e();return}var t=document.getElementById("dodConsentBanner");t&&(t.style.display="flex",typeof _s4TrapFocus=="function"&&_s4TrapFocus(t))}function Gn(){var t=document.getElementById("dodConsentBanner");t&&(t.style.display="none"),typeof _s4ReleaseFocusTrap=="function"&&_s4ReleaseFocusTrap();var e=document.getElementById("cacLoginModal");if(e){var n=e.querySelector('button[onclick*="simulateCacLogin"]');n&&(n.innerHTML='<i class="fas fa-shield-halved" style="margin-right:8px;"></i>Authenticate with CAC',n.disabled=!1);var r=e.querySelector('button[onclick*="simulateAccountLogin"]');r&&(r.innerHTML='<i class="fas fa-right-to-bracket" style="margin-right:8px;"></i>Sign In',r.disabled=!1);var a=e.querySelector("#loginEmail"),i=e.querySelector("#loginPassword");a&&(a.value=""),i&&(i.value=""),Wt("cac"),e.style.display="flex",typeof _s4TrapFocus=="function"&&_s4TrapFocus(e)}}function Wt(t){var e=document.getElementById("cacLoginPane"),n=document.getElementById("acctLoginPane"),r=document.getElementById("loginTabCac"),a=document.getElementById("loginTabAcct");t==="cac"?(e&&(e.style.display=""),n&&(n.style.display="none"),r&&(r.style.background="rgba(0,170,255,0.1)",r.style.color="var(--accent)"),a&&(a.style.background="transparent",a.style.color="var(--steel)")):(e&&(e.style.display="none"),n&&(n.style.display=""),a&&(a.style.background="rgba(0,170,255,0.1)",a.style.color="var(--accent)"),r&&(r.style.background="transparent",r.style.color="var(--steel)"))}function Vn(){var t=document.getElementById("cacLoginModal"),e=t.querySelector('button[onclick*="simulateCacLogin"]');e&&(e.innerHTML='<i class="fas fa-spinner fa-spin" style="margin-right:8px;"></i>Reading CAC certificate...',e.disabled=!0),setTimeout(function(){e&&(e.innerHTML='<i class="fas fa-check-circle" style="margin-right:8px;"></i>Authenticated ‚Äî DoD PKI Verified'),setTimeout(function(){t&&(t.style.display="none"),typeof _s4ReleaseFocusTrap=="function"&&_s4ReleaseFocusTrap(),sessionStorage.setItem("s4_authenticated","1"),sessionStorage.setItem("s4_auth_method","cac"),$e()},800)},1500)}function qn(){var t=(document.getElementById("loginEmail")||{}).value||"";if((document.getElementById("loginPassword")||{}).value,!t){typeof _showNotif=="function"&&_showNotif("Please enter your email or User ID.","warning");return}var e=document.getElementById("cacLoginModal"),n=e.querySelector('button[onclick*="simulateAccountLogin"]');n&&(n.innerHTML='<i class="fas fa-spinner fa-spin" style="margin-right:8px;"></i>Authenticating...',n.disabled=!0),setTimeout(function(){n&&(n.innerHTML='<i class="fas fa-check-circle" style="margin-right:8px;"></i>Signed In'),setTimeout(function(){e&&(e.style.display="none"),typeof _s4ReleaseFocusTrap=="function"&&_s4ReleaseFocusTrap(),sessionStorage.setItem("s4_authenticated","1"),sessionStorage.setItem("s4_auth_method","account"),$e()},600)},1200)}function zn(){$e()}function $e(){document.getElementById("platformLanding").style.display="none",document.querySelector(".hero").style.display="none",document.getElementById("platformWorkspace").style.display="block",sessionStorage.setItem("s4_entered","1"),sessionStorage.getItem("s4_onboard_done")||setTimeout(showOnboarding,600)}function Wn(){if(confirm("End your session? This will clear all anchored records, stats, and cached data and return you to the platform landing page.")){typeof closeWalletSidebar=="function"&&closeWalletSidebar();var t=document.getElementById("aiAgentWidget");t&&t.style.display!=="none"&&typeof qe=="function"&&qe(),localStorage.removeItem("s4_demo_stats"),localStorage.removeItem("s4_anchored_records"),localStorage.removeItem("s4_wallet"),localStorage.removeItem("s4_selected_tier"),Object.keys(localStorage).filter(function(c){return c.startsWith("s4Vault")}).forEach(function(c){localStorage.removeItem(c)}),localStorage.removeItem("s4_action_items"),localStorage.removeItem("s4ActionItems"),localStorage.removeItem("s4_uploaded_docs"),localStorage.removeItem("s4_doc_versions"),localStorage.removeItem("s4_doc_notifications"),sessionStorage.removeItem("s4_user_role"),sessionStorage.removeItem("s4_user_title"),sessionStorage.removeItem("s4_visible_tabs"),sessionStorage.removeItem("s4_entered"),sessionStorage.removeItem("s4_authenticated"),sessionStorage.removeItem("s4_auth_method"),sessionStorage.removeItem("s4_onboard_done"),k=null,S={anchored:0,verified:0,types:new Set,slsFees:0},x=[],typeof y<"u"&&(y=[]),typeof I<"u"&&(I=[]),_currentRole="",_currentTitle="",_customVisibleTabs=null;var e=document.getElementById("platformWorkspace"),n=document.getElementById("platformLanding"),r=document.querySelector(".hero");e&&(e.style.display="none"),n&&(n.style.display=""),r&&(r.style.display=""),document.querySelectorAll(".ils-hub-panel").forEach(function(c){c.classList.remove("active")});var a=document.getElementById("ilsToolBackBar");a&&(a.style.display="none");var i=document.getElementById("ilsSubHub");i&&(i.style.display="grid");var o=document.getElementById("roleBadge");o&&o.remove(),typeof applyTabVisibility=="function"&&applyTabVisibility(_allHubTabs||[]),window.scrollTo(0,0)}}document.addEventListener("DOMContentLoaded",function(){me(),setInterval(me,15e3)});function kt(){try{var t=[];typeof _<"u"&&Object.keys(_).forEach(function(e){e.startsWith("custom_")&&t.push({key:e,data:_[e]})}),localStorage.setItem("s4_custom_programs",JSON.stringify(t))}catch{}}function Xn(){try{var t=JSON.parse(localStorage.getItem("s4_custom_programs")||"[]");if(!t||!t.length)return;t.forEach(function(e){!e.key||!e.data||(typeof _<"u"&&!_[e.key]&&(_[e.key]=e.data),document.querySelectorAll('select[id$="Program"], select[id$="Platform"]').forEach(function(n){for(var r=!1,a=0;a<n.options.length;a++)if(n.options[a].value===e.key){r=!0;break}if(!r){var i=document.createElement("option");i.value=e.key,i.textContent=e.data.name+" (Custom)",n.appendChild(i)}}))}),t.length>0}catch{}}document.addEventListener("DOMContentLoaded",function(){setTimeout(Xn,1500)});const Xt="s4_anchored_records",Jt="s4_demo_stats";function jt(){try{return JSON.parse(localStorage.getItem(Xt)||"[]")}catch{return[]}}function re(t){const e=jt();e.push(t),localStorage.setItem(Xt,JSON.stringify(e))}function z(){localStorage.setItem(Jt,JSON.stringify({anchored:S.anchored,verified:S.verified,types:[...S.types],slsFees:S.slsFees}))}function Jn(){var t=document.getElementById("ilsProgram");t&&t.value===""&&(t.value="ddg51",typeof Ve=="function"&&Ve());var e=document.getElementById("dmsmsProgram");e&&e.options.length>1&&(e.selectedIndex=1,typeof pe=="function"&&pe());var n=document.getElementById("readinessProgram");n&&n.options.length>1&&(n.selectedIndex=1,typeof ge=="function"&&ge());var r=document.getElementById("lifecycleProgram");r&&r.options.length>1&&(r.selectedIndex=1,typeof calcLifecycle=="function"&&calcLifecycle());var a=document.getElementById("complianceProgram");a&&a.options.length>1&&(a.selectedIndex=1,typeof be=="function"&&be());var i=document.getElementById("riskProgram");i&&i.options.length>1&&(i.selectedIndex=1,typeof ve=="function"&&ve());var o=document.getElementById("pdmPlatform");if(o&&o.options.length>1&&(o.selectedIndex=1,typeof Ie=="function"&&Ie()),typeof y<"u"&&y.length===0&&typeof $=="function"){var c=[{hash:"a1b2c3d4e5f6a1b2c3d4e5f6a1b2c3d4e5f6a1b2c3d4e5f6a1b2c3d4e5f6a1b2",txHash:"TX8A3F29C1D4E507B612F84A9D03C71E562B8F6AD09E147C3850B2D6A7F91E043C",type:"DD1149",label:"DD Form 1149 (Requisition)",branch:"USN",icon:"fa-file-alt",content:"NAVSEA PMS 400D ‚Äî DDG-51 Flight III spare parts requisition‚Ä¶",encrypted:!1,timestamp:new Date(Date.now()-2592e5).toISOString(),source:"Pre-loaded Sample",fee:.01,network:"mainnet"},{hash:"b2c3d4e5f6a1b2c3d4e5f6a1b2c3d4e5f6a1b2c3d4e5f6a1b2c3d4e5f6a1b2c3",txHash:"TX7B4E38D2C5F608A723G95B0E14D82F673C9G7BE10F258D4961C3E7B8G02F154D",type:"DD250",label:"DD Form 250 (MIRR)",branch:"USN",icon:"fa-clipboard-check",content:"Material Inspection & Receiving Report ‚Äî LCS-19 hull components‚Ä¶",encrypted:!0,timestamp:new Date(Date.now()-1728e5).toISOString(),source:"Pre-loaded Sample",fee:.01,network:"mainnet"},{hash:"c3d4e5f6a1b2c3d4e5f6a1b2c3d4e5f6a1b2c3d4e5f6a1b2c3d4e5f6a1b2c3d4",txHash:"TX6C5F47E3D6G719B834H06C1F25E93G784D0H8CF21G369E5072D4F8C9H13G265E",type:"USN_SUPPLY_RECEIPT",label:"Supply Receipt",branch:"USN",icon:"fa-box-open",content:"CVN-78 AIMD supply receipt ‚Äî APU turbine blade set‚Ä¶",encrypted:!1,timestamp:new Date(Date.now()-864e5).toISOString(),source:"Pre-loaded Sample",fee:.01,network:"mainnet"},{hash:"d4e5f6a1b2c3d4e5f6a1b2c3d4e5f6a1b2c3d4e5f6a1b2c3d4e5f6a1b2c3d4e5",txHash:"TX5D6G56F4E7H820C945I17D2G36F04H895E1I9DG32H470F6183E5G9D0I24H376F",type:"CONTAINER_MANIFEST",label:"Container Manifest",branch:"JOINT",icon:"fa-ship",content:"Joint Logistics Over-the-Shore container manifest ‚Äî USNS Watkins‚Ä¶",encrypted:!1,timestamp:new Date(Date.now()-432e5).toISOString(),source:"Pre-loaded Sample",fee:.01,network:"mainnet"}];c.forEach(function(u){$(u)})}var l=document.getElementById("subBranch");l&&(l.value="USN");var s=document.getElementById("subProgram");s&&s.options.length>1&&(s.selectedIndex=1,typeof pt=="function"&&pt());var d=document.getElementById("recordInput");d&&!d.value&&(d.value="Supply Receipt\\nShip: USS Gerald R. Ford (CVN-78)\\nDate: "+new Date().toISOString().split("T")[0]+"\\nDepartment: AIMD (Aircraft Intermediate Maintenance Department)\\nItem: F414-GE-400 Engine Hot Section Module\\nNSN: 2840-01-567-8901\\nQuantity: 2 EA\\nCondition: RFI (Ready for Issue)\\nSource: DLA Distribution Norfolk\\nDocument Number: N00189-6026-0147\\nReceipt Inspector: AT1 Johnson\\nVerified By: LCDR Torres, Supply Officer",d.dispatchEvent(new Event("input"))),typeof We=="function"&&We()}document.addEventListener("DOMContentLoaded",function(){setTimeout(Jn,3e3),setTimeout(function(){typeof renderActionCalendar=="function"&&renderActionCalendar()},3500)});function jn(){try{const e=JSON.parse(localStorage.getItem(Jt)||"null");e&&(S.anchored=e.anchored||0,S.verified=e.verified||0,S.types=new Set(e.types||[]),S.slsFees=e.slsFees||0)}catch{}x=jt().map(e=>({type:e.record_type,label:e.record_label||e.record_type,icon:e.icon||"fa-clipboard-list",branch:e.branch||"JOINT",hash:e.hash,txHash:e.tx_hash,encrypted:!1,timestamp:e.timestamp,content:""})),V(),ee()}async function H(t){const e=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(r=>r.toString(16).padStart(2,"0")).join("")}async function $n(t){const e=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(e)).map(n=>n.toString(16).padStart(2,"0")).join("")}function Kn(t){navigator.clipboard.writeText(t).then(function(){document.querySelectorAll(".copy-btn").forEach(function(e){e.innerHTML='<i class="fas fa-check"></i> Copied!'}),setTimeout(function(){document.querySelectorAll(".copy-btn").forEach(function(e){e.innerHTML='<i class="fas fa-copy"></i> Copy'})},2e3)})}function $t(t,e){ht=t,document.querySelectorAll(".branch-tab").forEach(n=>n.classList.remove("active")),e&&e.classList.add("active"),document.getElementById("typeSearch").value="",Ke()}function Ke(){const t=document.getElementById("recordTypeGrid"),e=(document.getElementById("typeSearch").value||"").toLowerCase(),n=Object.entries(je).filter(([r,a])=>a.branch===ht).filter(([r,a])=>!e||a.label.toLowerCase().includes(e)||r.toLowerCase().includes(e));document.getElementById("branchTypeCount").textContent="("+n.length+" types)",t.innerHTML=n.map(([r,a])=>'<div class="record-type-btn'+(r===Y?" selected":"")+'" data-type="'+r+`" onclick="selectType('`+r+`',this)" title="`+a.label+" ‚Äî "+a.system+'"><span class="icon"><i class="fas '+a.icon+'" style="color:'+a.color+'"></i></span>'+a.label+"</div>").join("")}function Yn(t,e){Y=t,document.querySelectorAll(".record-type-btn").forEach(r=>r.classList.remove("selected")),e&&e.classList.add("selected");const n=je[t];if(n){const r=document.getElementById("recordInput");(!r.value.trim()||r.dataset.autoFilled==="true")&&(r.value=Qn(t,n),r.dataset.autoFilled="true")}Kt(t)}function Qn(t,e){for(const[i,o]of Object.entries(zt))if(o.type===t)return o.text;const n="REF-2026-"+String(Math.floor(Math.random()*9e3+1e3)),r=yt(t),a=te[r].label;return e.label+`
Branch: `+qt[e.branch].name+`
System: `+(e.system||"N/A")+`
Classification: `+a+`
Reference: `+n+`
Date: 2026-02-13
Status: Complete / Inspected
Authorized By: [Name/Rank]
Facility: [Location]
Notes: Enter detailed record content here`}function Kt(t){const e=document.getElementById("clfBanner"),n=yt(t),r=te[n];e.className="clf-banner show clf-"+n,e.querySelector(".clf-icon").innerHTML='<i class="fas '+r.icon+'" style="color:'+r.color+'"></i>',document.getElementById("clfBadge").textContent=r.label,document.getElementById("clfText").textContent=r.desc}function Yt(t){const e=zt[t];if(!e)return;const n=document.getElementById("recordInput");n.value=e.text,n.dataset.autoFilled="true",e.branch!==ht&&document.querySelectorAll(".branch-tab").forEach(a=>{a.textContent.toLowerCase().includes(qt[e.branch].short.toLowerCase())&&$t(e.branch,a)}),Y=e.type,Ke(),Kt(e.type)}function rt(t,e,n){const r=parseFloat(t.textContent)||0;if(r===e){t.textContent=n?e.toFixed(n):e;return}const a=400,i=performance.now();function o(c){const l=Math.min((c-i)/a,1),s=1-Math.pow(1-l,3),d=r+(e-r)*s;t.textContent=n?d.toFixed(n):Math.round(d),l<1&&requestAnimationFrame(o)}requestAnimationFrame(o)}function V(){rt(document.getElementById("statVerified"),S.verified),rt(document.getElementById("statTypes"),S.types.size),rt(document.getElementById("statSlsFees"),S.slsFees,3)}function ae(t,e,n){const r=document.getElementById("anchorOverlay"),a=te[n]||te.CUI;document.getElementById("animStatus").innerHTML='<i class="fas fa-spinner fa-spin" style="color:#00aaff"></i> Anchoring to XRPL...',document.getElementById("animStatus").style.color="#fff",document.getElementById("animHash").textContent=t,document.getElementById("animSuccess").textContent="";const i=document.getElementById("animClf");i&&(i.innerHTML='<span style="padding:4px 14px;border-radius:3px;font-size:0.85rem;font-weight:800;letter-spacing:0.5px;color:'+a.color+";border:1px solid "+a.color+"30;background:"+a.color+'15"><i class="fas '+a.icon+'" style="margin-right:4px"></i>'+a.label+"</span>"),document.getElementById("animFee").innerHTML="0.01 Credits &rarr; Treasury",r.style.display="flex",setTimeout(()=>{document.getElementById("animStatus").innerHTML='<i class="fas fa-check-circle" style="color:#00aaff"></i> '+e+" Anchored!",document.getElementById("animStatus").style.color="#00aaff",document.getElementById("animSuccess").innerHTML='<span style="color:var(--green)">&#x2713; Record secured on XRPL</span>'},2e3)}function Z(){document.getElementById("anchorOverlay").style.display="none"}let k=null,Zn=!0;async function Qt(){if(k)return k;document.getElementById("demoPanel");const t=document.getElementById("demoProvSpinner");t&&(t.style.display="block");try{const e=await fetch("/api/demo/provision",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"Demo User",plan:typeof _onboardTier<"u"?_onboardTier:"starter"})});if(e.ok){const n=await e.json();k=n;const r=document.getElementById("demoBanner");return r&&(r.style.display="none",r.innerHTML='<i class="fas fa-shield-halved" style="color:#00aaff;margin-right:6px;"></i> <strong style="color:#fff;">S4 Ledger</strong> &mdash; '+(n.subscription?.label||"Starter")+' plan &bull; Per-anchor fee: 0.01 Credits (real on-chain) &bull; <span style="color:#00aaff">rYourOrg...Prod</span> &bull; <span style="text-decoration:underline;cursor:pointer">&#9660; View Details</span>'),er(n),n}else t&&(t.style.display="none"),Nt()}catch{t&&(t.style.display="none"),Nt()}return null}function Nt(){k||(k={});var t=localStorage.getItem("s4_selected_tier")||(typeof _onboardTier<"u"?_onboardTier:"starter"),e=typeof _onboardTiers<"u"?_onboardTiers:{pilot:{label:"Pilot",sls:100},starter:{label:"Starter",sls:25e3},professional:{label:"Professional",sls:1e5},enterprise:{label:"Enterprise",sls:5e5}},n=e[t]||e.starter;k.subscription||(k.subscription={label:n.label,sls_allocation:n.sls}),document.getElementById("demoBanner").style.display="none",document.getElementById("demoBanner").innerHTML='<i class="fas fa-shield-halved" style="color:#00aaff;margin-right:6px;"></i> <strong style="color:#fff;">S4 Ledger</strong> &mdash; Offline mode. Anchors are queued locally and will sync when connected.',document.getElementById("demoPanel");var r=document.getElementById("demoXrp"),a=document.getElementById("demoSls");document.getElementById("demoSteps"),r&&(r.textContent="12.000000"),a&&(a.textContent=n.sls.toLocaleString());var i=document.getElementById("demoSessionInfo");i&&(i.style.display="block",i.innerHTML='<div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;font-size:0.78rem"><div><span style="color:var(--steel)">Session:</span> <span style="color:#fff">demo_offline_'+Date.now().toString(36)+'</span></div><div><span style="color:var(--steel)">Wallet:</span> <span style="color:#c9a84c;font-family:monospace;font-size:0.72rem">rDemo...Offline</span></div><div><span style="color:var(--steel)">XRP Balance:</span> <span style="color:var(--green)">12.000000 XRP</span></div><div><span style="color:var(--steel)">Credits Balance:</span> <span style="color:var(--gold)">'+n.sls.toLocaleString()+" Credits</span></div></div>"),k={session_id:"demo_offline_"+Date.now(),xrp_balance:12,sls_balance:n.sls,subscription:{label:n.label,sls_allocation:n.sls}}}function er(t){const e=document.getElementById("demoProvSpinner");e&&(e.style.display="none"),setTimeout(()=>{const n=document.getElementById("demoStep1"),r=document.getElementById("demoStep1Status");n&&(n.style.borderColor="rgba(0,170,255,0.6)",n.style.background="rgba(0,170,255,0.15)"),r&&(r.innerHTML='<i class="fas fa-check" style="color:#00aaff;margin-right:3px;"></i> Provisioned',r.style.color="#00aaff")},300),setTimeout(()=>{const n=document.getElementById("demoStep2"),r=document.getElementById("demoStep2Status");n&&(n.style.borderColor="rgba(0,170,255,0.6)",n.style.background="rgba(0,170,255,0.15)"),r&&(r.innerHTML='<i class="fas fa-check" style="color:#00aaff;margin-right:3px;"></i> 12 XRP funded',r.style.color="#00aaff")},800),setTimeout(()=>{const n=document.getElementById("demoStep3"),r=document.getElementById("demoStep3Status");n&&(n.style.borderColor="rgba(201,168,76,0.6)",n.style.background="rgba(201,168,76,0.12)");const a=t.subscription?.sls_allocation?.toLocaleString()||(typeof _onboardTiers<"u"&&typeof _onboardTier<"u"&&_onboardTiers[_onboardTier]?_onboardTiers[_onboardTier].sls.toLocaleString():"25,000");r&&(r.innerHTML='<i class="fas fa-check" style="color:#00aaff;margin-right:3px;"></i> '+a+" Credits",r.style.color="#c9a84c")},1300),setTimeout(()=>{const n=document.getElementById("demoStep4"),r=document.getElementById("demoStep4Status");n&&(n.style.borderColor="rgba(0,170,255,0.6)",n.style.background="rgba(0,170,255,0.1)"),r&&(r.innerHTML='<i class="fas fa-bolt" style="color:#00aaff;margin-right:3px;"></i> Ready ‚Äî anchor to trigger',r.style.color="#00aaff")},1800),setTimeout(()=>{const n=document.getElementById("demoSessionInfo");n&&(n.style.display="block");const r=document.getElementById("demoSessionId"),a=document.getElementById("demoWalletAddr"),i=document.getElementById("demoPlanLabel"),o=document.getElementById("demoSlsBalance");r&&(r.textContent=(t.session_id||"").substring(0,12)+"..."),a&&(a.textContent="rYourOrg...Prod"),i&&(i.textContent=t.subscription?.label||"Starter"),o&&(o.textContent=(t.subscription?.sls_allocation?.toLocaleString()||(typeof _onboardTiers<"u"&&typeof _onboardTier<"u"&&_onboardTiers[_onboardTier]?_onboardTiers[_onboardTier].sls.toLocaleString():"25,000"))+" Credits"),me()},2200)}async function tr(){if(!k){Qt();return}try{const t=await fetch("/api/demo/status?session_id="+encodeURIComponent(k.session_id));if(t.ok){const e=await t.json(),n=document.getElementById("demoSlsBalance");n&&(n.textContent=(e.sls_balance?.toLocaleString()||"")+" Credits");const r=document.getElementById("demoStep4Status"),a=e.anchors_used||0;r&&a>0&&(r.innerHTML='<i class="fas fa-check" style="color:#00aaff;margin-right:3px;"></i> '+a+" anchor"+(a>1?"s":"")+" ("+(a*.01).toFixed(2)+" Credits)")}}catch{}}async function ie(t,e,n){let r=null,a="Pending",i=null,o=null,c=null,l=null;try{if(Zn){const s=await fetch("/api/anchor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hash:t,record_type:e,content_preview:n,session_id:k?k.session_id:"demo",user_email:"demo@s4ledger.com"})});if(s.ok){const d=await s.json();d.record&&(r=d.record.tx_hash||null,a=d.record.network||a,i=d.record.explorer_url||null),d.fee_transfer&&d.fee_transfer.tx_hash&&(o=d.fee_transfer.tx_hash),d.fee_error&&(c=d.fee_error)}else l=(await s.json().catch(()=>({}))).error||"Anchor API returned "+s.status}}catch(s){l=s.message||"Network error"}if(r||(r="LOCAL_"+Array.from(crypto.getRandomValues(new Uint8Array(16))).map(s=>s.toString(16).padStart(2,"0")).join("").toUpperCase(),a=l?"FAILED":"Pending",l&&typeof _showNotif=="function"&&_showNotif("Anchor may not have reached XRPL: "+l,"warning")),c?typeof _showNotif=="function"&&_showNotif("Credit fee issue: "+c,"warning"):o&&typeof _showNotif=="function"&&_showNotif("0.01 Credits fee paid ‚úî TX: "+o.substring(0,16)+"‚Ä¶","success"),typeof me=="function")try{me()}catch{}return{txHash:r,network:a,explorerUrl:i,feeTxHash:o,feeError:c}}async function nr(){const t=document.getElementById("recordInput").value.trim();if(!t){D("Missing Content","Please enter record content.","warning");return}const e=document.getElementById("anchorBtn");e.disabled=!0,e.innerHTML='<i class="fas fa-spinner fa-spin"></i> Anchoring...';const n=document.getElementById("encryptCheck").checked,r=_lastUploadedFileHash||await H(t);_lastUploadedFileName,_lastUploadedFileSize,_lastUploadedFileHash=null,_lastUploadedFileName=null,_lastUploadedFileSize=0;const a=je[Y]||{label:Y,icon:"fa-clipboard-list",branch:"JOINT"},i=yt(Y);ae(r,a.label,i);const{txHash:o,explorerUrl:c,network:l,feeTxHash:s,feeError:d}=await ie(r,Y,t.substring(0,100)),u={type:Y,label:a.label,icon:a.icon,branch:a.branch,hash:r,txHash:o,encrypted:n,timestamp:new Date().toISOString(),content:t.substring(0,100)+(t.length>100?"...":""),fullContent:t};x.push(u),re({hash:r,record_type:Y,record_label:a.label,branch:a.branch,icon:a.icon,timestamp:new Date().toISOString(),timestamp_display:new Date().toISOString().replace("T"," ").substring(0,19)+" UTC",fee:.01,tx_hash:o,system:a.system||"N/A",explorer_url:c,network:l}),$({hash:r,txHash:o,type:Y,label:a.label,branch:a.branch,icon:a.icon,content:t.substring(0,100)+(t.length>100?"...":""),fullContent:t,encrypted:n,timestamp:new Date().toISOString(),source:"Manual Anchor",fee:.01,explorerUrl:c,network:l}),S.anchored++,S.types.add(Y),S.slsFees=Math.round((S.slsFees+.01)*100)/100,V(),z(),typeof _s4RefreshCharts=="function"&&_s4RefreshCharts();var m=document.getElementById("demoStep4"),p=document.getElementById("demoStep4Status");m&&(m.style.boxShadow="0 0 20px rgba(0,170,255,0.4)",setTimeout(function(){m.style.boxShadow="none"},2e3)),p&&(p.innerHTML='<i class="fas fa-bolt" style="color:#00aaff;margin-right:3px;"></i> '+S.anchored+" anchor"+(S.anchored>1?"s":"")+" ("+S.slsFees.toFixed(2)+" Credits)"),me();var f=k&&k.subscription?.sls_allocation||25e3,g=Math.round((f-S.slsFees)*100)/100;On(g.toLocaleString(void 0,{maximumFractionDigits:2}),.01),await new Promise(w=>setTimeout(w,3200)),Z(),await new Promise(w=>setTimeout(w,400));const b=document.getElementById("anchorResult");if(b.innerHTML='<div class="result-label">STATUS</div><div class="result-value" style="font-size:1rem;margin-bottom:0.8rem">‚úÖ Record anchored successfully</div><div class="result-label">RECORD TYPE</div><div style="margin-bottom:0.5rem">'+Ye(u.icon)+" "+a.label+" ("+a.branch+')</div><div class="result-label">CLASSIFICATION</div><div style="margin-bottom:0.5rem"><span style="padding:3px 12px;border-radius:3px;font-size:0.8rem;font-weight:800;letter-spacing:0.5px;color:'+te[i].color+";border:1px solid "+te[i].color+"30;background:"+te[i].color+'15"><i class="fas '+te[i].icon+'" style="margin-right:4px"></i>'+te[i].label+'</span> <span style="color:var(--muted);font-size:0.8rem;margin-left:6px">'+te[i].desc+'</span></div><div class="result-label">SHA-256 HASH</div><div class="hash-display">'+r+'</div><div class="result-label">TX HASH</div><div style="margin-bottom:0.5rem;word-break:break-all">'+(c?'<a href="'+c+'" target="_blank" rel="noopener" style="color:var(--accent);text-decoration:none">'+o+' <i class="fas fa-external-link-alt" style="font-size:0.7rem"></i></a>':'<span style="color:var(--muted)">'+o+"</span>")+'</div><div class="result-label">NETWORK</div><div style="margin-bottom:0.5rem">'+(l==="mainnet"?'<span style="color:#00aaff;font-weight:700"><i class="fas fa-globe" style="margin-right:4px"></i>XRPL Mainnet</span>':'<span style="color:var(--muted)">'+(l||"Pending")+"</span>")+'</div><div class="result-label">SYSTEM</div><div style="margin-bottom:0.5rem">'+(a.system||"N/A")+'</div><div class="result-label">ENCRYPTED</div><div style="margin-bottom:0.5rem">'+(n?'<i class="fas fa-lock" style="color:var(--accent)"></i> Yes (CUI protected)':"üîì No (plaintext hash)")+'</div><div class="result-label">CREDIT FEE</div><div>'+(s?'0.01 Credits <span style="color:var(--green)">&#x2713; Paid</span> &mdash; <a href="https://livenet.xrpl.org/transactions/'+s+'" target="_blank" rel="noopener" style="color:var(--accent);font-size:0.78rem">'+s.substring(0,16)+'&hellip; <i class="fas fa-external-link-alt" style="font-size:0.65rem"></i></a>':d?'<span style="color:var(--warning)">0.01 Credits &mdash; Fee failed: '+d+"</span>":"0.01 Credits from your account &rarr; S4 Treasury")+"</div>",b.classList.add("show"),ee(),e.disabled=!1,e.innerHTML='<i class="fas fa-anchor"></i> Anchor to XRPL',typeof window.loadPerformanceMetrics=="function")try{window.loadPerformanceMetrics()}catch{}if(typeof Le=="function")try{Le()}catch{}}function Le(){var t=document.getElementById("verifyRecentAnchors");if(t){var e={},n=[];if(typeof x<"u")for(var r=x.length-1;r>=0;r--){var a=x[r];a.hash&&!e[a.hash]&&(e[a.hash]=!0,n.push({hash:a.hash,label:a.label||a.type||"Record",icon:a.icon||"fa-file",branch:a.branch||"JOINT",timestamp:a.timestamp,txHash:a.txHash||"",content:a.content||"",fullContent:a.fullContent||""}))}if(typeof y<"u")for(var i=0;i<Math.min(y.length,30);i++){var o=y[i];o.hash&&!e[o.hash]&&(e[o.hash]=!0,n.push({hash:o.hash,label:o.label||o.type||"Record",icon:o.icon||"fa-file",branch:o.branch||"JOINT",timestamp:o.timestamp,txHash:o.txHash||"",content:o.content||"",fullContent:""}))}if(n.length===0){t.innerHTML='<div style="color:var(--muted);text-align:center;padding:1.5rem;font-size:0.82rem;">No anchored records yet. Anchor a record first to see it here.</div>';return}window._verifyRecentRecords=n,t.innerHTML=n.slice(0,20).map(function(c,l){var s="";try{var d=Math.floor((Date.now()-new Date(c.timestamp).getTime())/1e3);s=d<60?d+"s ago":d<3600?Math.floor(d/60)+"m ago":d<86400?Math.floor(d/3600)+"h ago":Math.floor(d/86400)+"d ago"}catch{s=""}var u=c.fullContent&&c.fullContent.length>0;return'<div style="display:flex;align-items:center;gap:10px;padding:8px 10px;border:1px solid rgba(255,255,255,0.05);border-radius:3px;margin-bottom:4px;transition:all 0.2s;background:rgba(255,255,255,0.02);"><span style="color:var(--accent);font-size:0.8rem;width:20px;text-align:center;display:inline-block">'+Ye(c.icon)+'</span><div style="flex:1;min-width:0;cursor:pointer" onclick="loadRecordToVerify('+l+')"><div style="font-size:0.78rem;font-weight:600;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">'+c.label+'</div><div style="font-size:0.65rem;color:var(--muted);font-family:monospace;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">'+c.hash.substring(0,24)+'...</div></div><span style="font-size:0.65rem;color:var(--steel);white-space:nowrap;">'+s+'</span><button onclick="loadRecordToVerify('+l+')" style="background:'+(u?"rgba(0,170,255,0.15)":"rgba(255,255,255,0.05)")+";border:1px solid "+(u?"rgba(0,170,255,0.3)":"rgba(255,255,255,0.1)")+";color:"+(u?"var(--accent)":"var(--steel)")+';border-radius:3px;padding:3px 10px;font-size:0.68rem;font-weight:600;cursor:pointer;white-space:nowrap"><i class="fas fa-eye" style="margin-right:3px"></i>View</button></div>'}).join("")}}function rr(t){var e=window._verifyRecentRecords||[],n=e[t];if(n){var r=document.getElementById("verifyHash");r&&(r.value=n.hash);var a=document.getElementById("verifyInput");a&&(n.fullContent&&n.fullContent.length>0?a.value=n.fullContent:n.content&&n.content.length>0&&(a.value=n.content));var i=document.querySelector("#tabVerify .demo-card");i&&i.scrollIntoView({behavior:"smooth",block:"start"});var o=n.fullContent&&n.fullContent.length>0;typeof L=="function"&&L(o?"Full document loaded ‚Äî click Verify Integrity to re-verify":"Record hash loaded ‚Äî paste original content or upload file to verify",o?"success":"info")}}document.addEventListener("shown.bs.tab",function(t){t.target&&(t.target.getAttribute("href")==="#tabVerify"||t.target.getAttribute("data-bs-target")==="#tabVerify")&&typeof Le=="function"&&Le()});async function ar(){const t=document.getElementById("verifyInput").value.trim();if(!t){D("Missing Content","Please enter record content.","warning");return}const e=await H(t),n=document.getElementById("verifyHash").value.trim();S.verified++,V(),z();const r=document.getElementById("verifyResult");let a="",i=e;if(n){let l=e.toLowerCase()===n.toLowerCase(),s=null;l||(s=x.find(d=>d.hash&&d.hash.toLowerCase()===n.toLowerCase()),!s&&typeof y<"u"&&(s=y.find(d=>d.hash&&d.hash.toLowerCase()===n.toLowerCase())),s&&(l=!0,i=n)),a='<div class="result-label">EXPECTED</div><div style="color:var(--muted);word-break:break-all;margin-bottom:0.5rem">'+n+'</div><div class="result-label">MATCH</div><div class="result-value '+(l?"":"error")+'" style="font-size:1.1rem">'+(l&&s?'‚úÖ VERIFIED ‚Äî Hash found in vault. Record integrity confirmed.<div style="font-size:0.78rem;color:var(--steel);margin-top:6px"><i class="fas fa-info-circle" style="margin-right:4px"></i>This record was anchored from a file upload. Use File Verification for byte-level re-verification.</div>':l?"‚úÖ VERIFIED ‚Äî Hashes match. Record integrity confirmed.":"‚ùå MISMATCH ‚Äî Record altered or wrong hash.")+"</div>"}const o=x.find(l=>l.hash===i)||x.find(l=>l.hash===e);let c="";o&&(c='<div class="result-label" style="margin-top:0.8rem">SESSION MATCH</div><div style="color:var(--accent)"><i class="fas fa-check-circle"></i> Found in session ‚Äî '+Ye(o.icon)+" "+o.label+" anchored at "+new Date(o.timestamp).toLocaleTimeString()+"</div>"),r.innerHTML=`<div class="result-label">COMPUTED SHA-256 <button class="copy-btn" onclick="copyHash('`+i+`')"><i class="fas fa-copy"></i> Copy</button></div><div class="hash-display">`+i+"</div>"+a+c+'<div style="margin-top:0.8rem;font-size:0.8rem;color:var(--muted)">To verify on-chain: compare this hash with the MemoData field of the anchor transaction.</div><button onclick="resetVerify()" style="margin-top:12px;background:rgba(0,170,255,0.08);color:var(--accent);border:1px solid rgba(0,170,255,0.2);border-radius:3px;padding:8px 18px;font-size:0.82rem;cursor:pointer;font-weight:600;font-family:inherit;transition:all 0.2s"><i class="fas fa-rotate-right" style="margin-right:6px"></i>Verify Another Record</button>',r.classList.add("show")}function ir(){document.getElementById("verifyInput").value="",document.getElementById("verifyHash").value="";var t=document.getElementById("verifyResult");t&&(t.innerHTML="",t.classList.remove("show"));var e=document.getElementById("verifyFileResults");e&&(e.innerHTML="",e.classList.remove("show")),document.getElementById("verifyInput").focus()}function or(t){t.preventDefault(),t.stopPropagation();var e=document.getElementById("verifyDropZone");e&&(e.style.borderColor="rgba(0,170,255,0.25)",e.style.background="rgba(0,170,255,0.03)");var n=t.dataTransfer.files;n.length>0&&Zt(n)}function sr(t){var e=t.target.files;e.length>0&&Zt(e)}async function Zt(t){var e=document.getElementById("verifyFileResults");e.style.display="block",e.innerHTML='<div style="text-align:center;padding:16px;color:var(--accent);"><i class="fas fa-spinner fa-spin"></i> Verifying '+t.length+" file"+(t.length>1?"s":"")+"...</div>";for(var n=[],r=0;r<t.length;r++){var a=t[r],i=await lr(a);n.push(i)}var o='<div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;overflow:hidden;">';o+='<div style="padding:12px 16px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px;">',o+='<span style="color:#fff;font-weight:700;font-size:0.88rem;"><i class="fas fa-shield-halved" style="color:var(--accent);margin-right:6px;"></i>File Verification Results</span>';var c=n.filter(function(g){return g.matched}).length,l=n.filter(function(g){return!g.matched&&!g.noAnchor}).length,s=n.filter(function(g){return g.noAnchor}).length;o+='<span style="font-size:0.78rem;">',c>0&&(o+='<span style="color:var(--green);margin-right:10px;"><i class="fas fa-check-circle"></i> '+c+" verified</span>"),l>0&&(o+='<span style="color:var(--red);margin-right:10px;"><i class="fas fa-times-circle"></i> '+l+" tampered</span>"),s>0&&(o+='<span style="color:var(--gold);"><i class="fas fa-question-circle"></i> '+s+" not anchored</span>"),o+="</span></div>";for(var d=0;d<n.length;d++){var u=n[d],m=u.matched?"var(--green)":u.noAnchor?"var(--gold)":"var(--red)",p=u.matched?"fa-check-circle":u.noAnchor?"fa-question-circle":"fa-times-circle",f=u.matched?"VERIFIED ‚Äî Integrity confirmed":u.noAnchor?"NOT FOUND ‚Äî No matching anchor in session":"MISMATCH ‚Äî File may have been tampered with";o+='<div style="padding:12px 16px;border-bottom:1px solid rgba(255,255,255,0.03);display:flex;gap:12px;align-items:flex-start;">',o+='<div style="width:32px;height:32px;border-radius:3px;background:rgba(0,170,255,0.08);display:flex;align-items:center;justify-content:center;flex-shrink:0;"><i class="fas fa-file" style="color:var(--accent);font-size:0.85rem;"></i></div>',o+='<div style="flex:1;min-width:0;">',o+='<div style="color:#fff;font-weight:600;font-size:0.82rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">'+u.fileName+' <span style="color:var(--muted);font-weight:400;">('+u.fileSize+")</span></div>",o+='<div style="font-family:monospace;font-size:0.7rem;color:var(--muted);margin:3px 0;word-break:break-all;">SHA-256: '+u.hash+"</div>",o+='<div style="color:'+m+';font-size:0.78rem;font-weight:600;"><i class="fas '+p+'" style="margin-right:4px;"></i>'+f+"</div>",u.matchedRecord&&(o+='<div style="font-size:0.72rem;color:var(--steel);margin-top:3px;"><i class="fas fa-anchor" style="margin-right:4px;"></i>Anchored as: '+u.matchedRecord.label+" on "+new Date(u.matchedRecord.timestamp).toLocaleString()+"</div>"),o+="</div></div>"}o+="</div>",o+='<div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap;">',o+=`<button onclick="document.getElementById('verifyFileInput').value='';document.getElementById('verifyFileResults').style.display='none';" style="background:rgba(255,255,255,0.06);color:var(--steel);border:1px solid var(--border);padding:6px 14px;border-radius:3px;font-size:0.78rem;cursor:pointer;"><i class="fas fa-redo"></i> Verify More Files</button>`,c>0&&(o+='<button onclick="exportVerificationReport()" style="background:rgba(0,170,255,0.12);color:var(--accent);border:1px solid rgba(0,170,255,0.3);padding:6px 14px;border-radius:3px;font-size:0.78rem;cursor:pointer;"><i class="fas fa-download"></i> Export Report</button>'),o+="</div>",e.innerHTML=o,window._lastVerifyResults=n,typeof S<"u"&&(S.verified=(S.verified||0)+n.length,typeof V=="function"&&V(),typeof z=="function"&&z())}async function lr(t){return new Promise(function(e){var n=new FileReader;n.onload=async function(r){var a=r.target.result,i=await $n(a),o=t.size<1024?t.size+" B":t.size<1048576?(t.size/1024).toFixed(1)+" KB":(t.size/1048576).toFixed(1)+" MB",c=null,l=!1,s=!0;if(typeof x<"u"){for(var d=0;d<x.length;d++)if(x[d].hash===i){c=x[d],l=!0,s=!1;break}}var u=document.getElementById("verifyHash").value.trim();if(u&&!l&&(i.toLowerCase()===u.toLowerCase()&&(l=!0),s=!1),!l&&(t.type.startsWith("text/")||t.name.match(/\.(txt|csv|json|xml|md|html|log|yaml|yml)$/i))){var m=new FileReader;m.onload=async function(p){var f=await H(p.target.result);if(typeof x<"u"){for(var g=0;g<x.length;g++)if(x[g].hash===f){c=x[g],l=!0,s=!1,i=f;break}}u&&!l&&f.toLowerCase()===u.toLowerCase()&&(l=!0,s=!1,i=f),e({fileName:t.name,fileSize:o,hash:i,matched:l,noAnchor:s,matchedRecord:c,timestamp:new Date().toISOString()})},m.readAsText(t)}else e({fileName:t.name,fileSize:o,hash:i,matched:l,noAnchor:s,matchedRecord:c,timestamp:new Date().toISOString()})},n.readAsArrayBuffer(t)})}function cr(){if(window._lastVerifyResults){var t={title:"S4 Ledger File Verification Report",timestamp:new Date().toISOString(),platform:"S4 Ledger ‚Äî XRPL Mainnet",files_verified:window._lastVerifyResults.length,results:window._lastVerifyResults.map(function(r){return{file_name:r.fileName,file_size:r.fileSize,sha256_hash:r.hash,verified:r.matched,status:r.matched?"INTEGRITY_CONFIRMED":r.noAnchor?"NO_ANCHOR_FOUND":"TAMPER_DETECTED",anchored_as:r.matchedRecord?r.matchedRecord.label:null,anchored_at:r.matchedRecord?r.matchedRecord.timestamp:null}})},e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=document.createElement("a");n.href=URL.createObjectURL(e),n.download="s4_verification_report_"+Date.now()+".json",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}function Ye(t){return t?t.startsWith("fa-")?'<i class="fas '+t+'"></i>':t:'<i class="fas fa-clipboard-list"></i>'}function ee(){const t=document.getElementById("txLog");if(x.length){t.innerHTML="";for(let e=x.length-1;e>=0;e--){const n=x[e],r=new Date(n.timestamp).toLocaleTimeString("en-US",{hour12:!1});t.innerHTML+='<div class="tx-entry"><div class="tx-icon">'+Ye(n.icon)+'</div><div class="tx-info"><div class="tx-type">'+n.label+' <span style="color:var(--muted);font-size:0.75rem">('+n.branch+')</span></div><div class="tx-hash">'+n.hash.substring(0,32)+'...</div></div><div><span class="tx-badge anchored">Anchored</span><div class="tx-time">'+r+"</div></div></div>"}}}let G=[],M=null;const we=[["vrs_buylist","Vendor Recommended Spares and Buylist Development",1,"spare|buylist|vrs|vendor.*rec|provisioning|allowance"],["crew_fam","Crew Familiarization",1,"crew.*fam|familiarization|crew.*train"],["iuid","IUID Submissions",1,"iuid|unique.*ident|item.*unique"],["transfer_book","Craft Transfer Book Development/Review",1,"transfer.*book|craft.*transfer|custody.*transfer"],["lcsp","Life Cycle Sustainment Plan (LCSP)",1,"lcsp|life.*cycle.*sust|sustainment.*plan"],["config_inv","On-Site Parts/Material Inventory (Configuration Management)",1,"config.*mgmt|config.*manage|material.*inventory|parts.*inventory|on.?site.*inv"],["ilsmt","ILSMT/Design or Production Meeting",1,"ilsmt|ils.*meet|design.*meet|production.*meet|logistics.*meet"],["bam","Baseline Assessment Memorandum",1,"baseline.*assess|bam\\b|assessment.*memo"],["outfit_wpn","Outfitting Navy Weapon Systems (If Applicable)",0,"outfitting.*weapon|weapon.*system.*outf|navy.*weapon"],["ecp_waiver","Engineering Change Packages/Request for Waivers",1,"ecp|engineering.*change|waiver|request.*waiver|change.*package"],["drl_review","DRL Reviews",1,"drl.*review|data.*require.*list|cdrl.*review|deliverable.*review"],["cots_manuals","COTS Manuals Review/Submissions (Hard/Electronic Copy)",1,"cots.*manual|commercial.*manual|vendor.*manual|oem.*manual"],["tm_status","Technical Manual Status/Submissions",1,"technical.*manual|tech.*manual|tm.*status|tm.*submit"],["po_status","Purchase Order Status",1,"purchase.*order|po.*status|procurement.*order"],["mat_sched","Material Ordering Schedule Completion",1,"material.*order|ordering.*sched|material.*sched|mat.*order"],["mel","Master Equipment List Submittal",1,"master.*equip|mel\\b|equipment.*list"],["outfit_stats","Outfitting Statistics (GFE, Materials, etc.)",0,"outfitting.*stat|gfe|government.*furnish|outfit.*stat"]],dr=[["ilsp","Integrated Logistics Support Plan (ILSP)",1,"ilsp|integrated.*logistics.*support.*plan"],["lcsp","Life Cycle Sustainment Plan (LCSP)",1,"lcsp|life.*cycle.*sust"],["lora","Level of Repair Analysis (LORA)",1,"lora|level.*repair"],["pms_dev","PMS/MRC Development & Validation",1,"pms.*dev|mrc|maintenance.*requirement.*card|planned.*maint"],["supply","Supply Support / Provisioning Plan",1,"supply.*support|provisioning|allowance|cosal"],["vrs","Vendor Recommended Spares / Initial Outfitting",1,"vendor.*spare|vrs|initial.*outfit"],["cosal","COSAL / APL Development",1,"cosal|allowance.*part.*list|apl\\b"],["se","Support Equipment Requirements",1,"support.*equip|se.*req|test.*equip"],["tm","Technical Manual Development (NAVSEA Format)",1,"technical.*manual|navsea.*format|tech.*manual"],["ietm","Interactive Electronic Technical Manuals (IETM)",1,"ietm|interactive.*electronic|electronic.*tech.*manual"],["training","Training Plan / Fleet Introduction Team (FIT)",1,"training.*plan|fleet.*intro|fit\\b.*team"],["manpower","Manpower & Personnel Integration",0,"manpower|personnel.*integ"],["compres","Computer Resources Life Cycle Mgmt Plan",0,"computer.*resour|lcmp|software.*support"],["facilities","Facilities Requirements",0,"facilit.*req"],["phst","PHS&T Analysis & Plan",0,"phs.?t|packaging|handling|storage|transport"],["design","Design Interface / Supportability Analysis",1,"design.*interface|supportability"],["ram","RAM Analysis / Operational Availability",1,"ram\\b|reliab|availab|maintainab|fmeca"],["config","Configuration Status Accounting",1,"config.*status|config.*account|configuration"],["ecp","Engineering Change Proposals / Waivers",1,"ecp|engineering.*change|waiver"],["interim","Interim Support / Contractor Logistics Support (CLS)",0,"interim.*support|cls\\b|contractor.*logist"],["src","Source/Repair Coding",1,"source.*repair|src\\b|repair.*cod"],["dmsms","Diminishing Manufacturing Sources (DMSMS)",0,"dmsms|diminishing|obsolescen"],["drl","DRL/CDRL Tracking & Reviews",1,"drl|cdrl|deliverable.*review"]],ur=[["ilsp","Integrated Logistics Support Plan (ILSP)",1,"ilsp|integrated.*logistics"],["lcsp","Life Cycle Sustainment Plan (LCSP)",1,"lcsp|life.*cycle.*sust"],["mm_ils","Mission Module ILS Integration",1,"mission.*module|mm\\b.*ils|module.*logist"],["pms_dev","PMS/MRC Development",1,"pms.*dev|mrc|planned.*maint"],["supply","Supply Support / Provisioning",1,"supply.*support|provisioning"],["vrs","Vendor Recommended Spares",1,"vendor.*spare|vrs"],["se","Support Equipment (Ship + Modules)",1,"support.*equip"],["tm","Technical Manual Development",1,"technical.*manual|tech.*manual"],["training","Training Plan / Crew Rotation Model",1,"training|crew.*rotat"],["ram","RAM Analysis / Mission Capability",1,"ram\\b|reliab|mission.*capab"],["config","Configuration Management",1,"config.*manage|configuration"],["ecp","Engineering Changes / Waivers",1,"ecp|engineering.*change|waiver"],["cls","Contractor Logistics Support (CLS) Plan",1,"cls\\b|contractor.*logist"],["drl","DRL/CDRL Reviews",1,"drl|cdrl|deliverable.*review"],["phst","PHS&T Plan",0,"phs.?t|packaging"],["dmsms","DMSMS Management",0,"dmsms|diminishing|obsolescen"],["src","Source/Repair Coding",0,"source.*repair|repair.*cod"]],mr=[["ilsp","Integrated Logistics Support Plan (ILSP)",1,"ilsp|integrated.*logistics"],["lcsp","Life Cycle Sustainment Plan (LCSP)",1,"lcsp|life.*cycle.*sust"],["lora","Level of Repair Analysis (LORA)",1,"lora|level.*repair"],["pms_dev","PMS/MRC Development & Validation",1,"pms.*dev|mrc|planned.*maint"],["supply","Supply Support / Provisioning",1,"supply.*support|provisioning"],["vrs","Vendor Recommended Spares / Initial Outfitting",1,"vendor.*spare|vrs|initial.*outf"],["cosal","COSAL Development",1,"cosal|allowance.*part"],["se","Support Equipment Requirements",1,"support.*equip"],["tm","Technical Manual Suite (NAVSEA Format)",1,"technical.*manual|tech.*manual"],["ietm","IETM Development",1,"ietm|interactive.*electronic"],["training","Training Plan / Fleet Introduction",1,"training.*plan|fleet.*intro"],["manpower","Manpower & Personnel Integration",1,"manpower|personnel"],["compres","Computer Resources Life Cycle Mgmt",1,"computer.*resour|lcmp"],["facilities","Facilities / Shore Infrastructure",1,"facilit|shore.*infra"],["phst","PHS&T Analysis",1,"phs.?t|packaging|handling"],["design","Design Interface / Supportability",1,"design.*interface|supportability"],["ram","RAM / Operational Availability",1,"ram\\b|reliab|operational.*avail"],["config","Configuration Status Accounting",1,"config.*status|configuration"],["ecp","Engineering Change Proposals",1,"ecp|engineering.*change"],["nuc_cert","Nuclear Propulsion Logistics Certification",1,"nuclear|nuc.*cert|propulsion.*cert"],["emals","EMALS/AAG System Logistics",1,"emals|aag|launch.*system|recovery.*system"],["interim","Interim Support / CLS",0,"interim.*support|cls\\b"],["src","Source/Repair Coding",1,"source.*repair|repair.*cod"],["dmsms","DMSMS Management",1,"dmsms|diminishing|obsolescen"],["drl","DRL/CDRL Tracking & Reviews",1,"drl|cdrl|deliverable"]],pr=[["ilsp","Integrated Logistics Support Plan (ILSP)",1,"ilsp|integrated.*logistics"],["lcsp","Life Cycle Sustainment Plan (LCSP)",1,"lcsp|life.*cycle.*sust"],["lora","Level of Repair Analysis (LORA)",1,"lora|level.*repair"],["parent_design","Parent Design ILS Data Adaptation (FREMM)",1,"parent.*design|fremm|adaptation|foreign.*design"],["pms_dev","PMS/MRC Development",1,"pms.*dev|mrc|planned.*maint"],["supply","Supply Support / Provisioning",1,"supply.*support|provisioning"],["vrs","Vendor Recommended Spares",1,"vendor.*spare|vrs"],["se","Support Equipment Requirements",1,"support.*equip"],["tm","Technical Manual Development",1,"technical.*manual|tech.*manual"],["training","Training Plan / Fleet Introduction",1,"training.*plan|fleet.*intro"],["ram","RAM Analysis",1,"ram\\b|reliab|maintainab"],["config","Configuration Management",1,"config.*manage|configuration"],["ecp","Engineering Change Proposals",1,"ecp|engineering.*change|waiver"],["drl","DRL/CDRL Reviews",1,"drl|cdrl|deliverable"],["manpower","Manpower & Personnel",0,"manpower|personnel"],["compres","Computer Resources",0,"computer.*resour|lcmp"],["phst","PHS&T Plan",0,"phs.?t|packaging"],["src","Source/Repair Coding",1,"source.*repair|repair.*cod"],["dmsms","DMSMS Management",0,"dmsms|diminishing|obsolescen"]],gr=[["ilsp","Integrated Logistics Support Plan (ILSP)",1,"ilsp|integrated.*logistics"],["lcsp","Life Cycle Sustainment Plan (LCSP)",1,"lcsp|life.*cycle.*sust"],["lora","Level of Repair Analysis (LORA)",1,"lora|level.*repair"],["pms_dev","PMS/MRC Development",1,"pms.*dev|mrc|planned.*maint"],["supply","Supply Support / Provisioning",1,"supply.*support|provisioning"],["vrs","Vendor Recommended Spares",1,"vendor.*spare|vrs"],["cosal","COSAL Development",1,"cosal|allowance.*part"],["se","Support Equipment",1,"support.*equip"],["tm","Technical Manual Development",1,"technical.*manual|tech.*manual"],["training","Training Plan / Fleet Introduction",1,"training.*plan|fleet.*intro"],["well_deck","Well Deck / Craft Interface Logistics",1,"well.*deck|craft.*interface|lcac|lcu"],["aviation","Aviation Facility Logistics",1,"aviation.*facility|flight.*deck|helo"],["ram","RAM Analysis",1,"ram\\b|reliab"],["config","Configuration Management",1,"config.*manage|configuration"],["ecp","Engineering Changes / Waivers",1,"ecp|engineering.*change|waiver"],["drl","DRL/CDRL Reviews",1,"drl|cdrl|deliverable"],["manpower","Manpower & Personnel",0,"manpower|personnel"],["phst","PHS&T Plan",0,"phs.?t|packaging"],["src","Source/Repair Coding",1,"source.*repair|repair.*cod"],["dmsms","DMSMS Management",0,"dmsms|diminishing|obsolescen"]],Bt=[["ilsp","Integrated Logistics Support Plan",1,"ilsp|integrated.*logistics"],["odin","Autonomic Logistics (ODIN/ALIS) Sustainment",1,"odin|alis|autonomic.*logist"],["supply","Supply Chain Management / Global Spares Pool",1,"supply.*chain|global.*spare|spares.*pool"],["depot","Depot Activation / MRO&U Planning",1,"depot.*activ|mro|overhaul.*plan"],["tm","Technical Data (IETM) via ODIN",1,"technical.*data|ietm|odin.*pub"],["training","Pilot & Maintainer Training Courseware",1,"pilot.*train|maintainer.*train|training.*course"],["phm","Prognostic Health Management (PHM)",1,"prognostic|phm|health.*manage|condition.*based"],["ram","RAM / Mission Capable Rate Analysis",1,"ram\\b|mission.*capable|mc.*rate|reliab"],["config","Configuration Mgmt / Software Baseline",1,"config.*manage|software.*baseline|configuration"],["se","Support Equipment / Aerospace Ground Equipment",1,"support.*equip|age\\b|aerospace.*ground"],["facilities","Facilities / Hangar Requirements",1,"facilit|hangar.*req"],["manpower","Manpower Estimate Report",0,"manpower|personnel"],["phst","PHS&T / Transportability",0,"phs.?t|transport"],["drl","DRL/CDRL Reviews",1,"drl|cdrl|deliverable"],["pbl","Performance-Based Logistics (PBL) / CLS",1,"pbl|performance.*based|cls\\b|contractor.*logist"],["dmsms","DMSMS / Obsolescence Management",1,"dmsms|diminishing|obsolescen"],["lo","Low-Observable Maintenance (F-35B/C specific)",0,"low.*observ|stealth|lo\\b.*maint|signature"]],fr=[["ilsp","Integrated Logistics Support Plan",1,"ilsp|integrated.*logistics"],["lcsp","Life Cycle Sustainment Plan",1,"lcsp|life.*cycle.*sust"],["pms","Maintenance Plan / PMS Development",1,"maint.*plan|pms.*dev|planned.*maint"],["supply","Supply Support / Provisioning",1,"supply.*support|provisioning"],["vrs","Vendor Recommended Spares",1,"vendor.*spare|vrs"],["se","Support Equipment / Ground Support",1,"support.*equip|ground.*support|gse"],["tm","Technical Manuals (IETM)",1,"technical.*manual|ietm"],["training","Training Systems / Simulators",1,"training.*system|simulator|crew.*train"],["ram","RAM Analysis / Mission Capable Rate",1,"ram\\b|mission.*capable|reliab"],["config","Configuration Management",1,"config.*manage|configuration"],["ecp","Engineering Change Proposals",1,"ecp|engineering.*change"],["drl","DRL/CDRL Reviews",1,"drl|cdrl|deliverable"],["facilities","Facility Requirements / Hangar Modifications",0,"facilit|hangar"],["phst","PHS&T Plan",0,"phs.?t|packaging"],["cls","Contractor Logistics Support Transition",0,"cls\\b|contractor.*logist|transition"],["dmsms","DMSMS Management",0,"dmsms|diminishing|obsolescen"]],yr=[["lsa","Logistics Support Analysis (LSA)",1,"lsa\\b|logistics.*support.*analy"],["mac","Maintenance Allocation Chart (MAC)",1,"mac\\b|maintenance.*alloc"],["rpstl","Repair Parts & Special Tools List (RPSTL)",1,"rpstl|repair.*parts|special.*tools"],["tm","Technical Manuals (TM 9-series)",1,"technical.*manual|tm.*9|army.*tm"],["net","New Equipment Training (NET) Plan",1,"new.*equip.*train|net\\b.*plan|net\\b.*team"],["provisioning","Provisioning Plan / ASL Development",1,"provisioning|asl\\b.*dev|authorized.*stockage"],["tmde","Test, Measurement & Diagnostic Equipment (TMDE)",1,"tmde|test.*measure|diagnostic.*equip"],["manprint","MANPRINT Assessment",1,"manprint|human.*factor|human.*system"],["ram","RAM Analysis / Ao Requirements",1,"ram\\b|reliab|operational.*avail"],["config","Configuration Management / ECP Tracking",1,"config.*manage|ecp|engineering.*change"],["transport","Transportability Assessment (Rail/Air/Sea)",1,"transportab|rail.*load|air.*transport|sea.*transport"],["depot","Depot Maintenance Work Requirements (DMWR)",1,"depot.*maint|dmwr|organic.*maint"],["pbl","Performance-Based Logistics (PBL) Metrics",0,"pbl|performance.*based"],["hazmat","HAZMAT / Environmental Compliance",0,"hazmat|environment|hazardous.*material"],["dmsms","DMSMS / Obsolescence Management",0,"dmsms|diminishing|obsolescen"],["warranty","Warranty Tracking & Administration",0,"warranty|tracking.*admin"]],hr=[["lsa","Logistics Support Analysis (LSA)",1,"lsa\\b|logistics.*support.*analy"],["mac","Maintenance Allocation Chart (MAC)",1,"mac\\b|maintenance.*alloc"],["rpstl","Repair Parts & Special Tools List (RPSTL)",1,"rpstl|repair.*parts|special.*tools"],["tm","Technical Manuals (TM 9-series)",1,"technical.*manual|tm.*9"],["net","New Equipment Training (NET)",1,"new.*equip.*train|net\\b.*plan"],["provisioning","Provisioning / ASL",1,"provisioning|asl\\b|authorized.*stockage"],["tmde","TMDE / Special Tools",1,"tmde|special.*tool|test.*equip"],["manprint","MANPRINT Assessment",0,"manprint|human.*factor"],["ram","RAM / Operational Readiness",1,"ram\\b|reliab|operational.*read"],["config","Configuration Management",1,"config.*manage|configuration"],["transport","Transportability (C-17/C-130 Compatibility)",1,"transportab|c.?17|c.?130|airlift"],["depot","Depot Maintenance Planning",1,"depot.*maint|organic.*maint"],["pbl","Performance-Based Logistics",0,"pbl|performance.*based"],["fielding","Fielding Plan / BOIP",1,"fielding|boip|basis.*issue"],["dmsms","DMSMS Management",0,"dmsms|diminishing|obsolescen"]],Sr=[["lsa","Logistics Support Analysis",1,"lsa\\b|logistics.*support.*analy"],["mac","Maintenance Allocation Chart (MAC)",1,"mac\\b|maintenance.*alloc"],["rpstl","Repair Parts & Special Tools List",1,"rpstl|repair.*parts|special.*tools"],["tm","Technical Manuals (Aviation TMs)",1,"technical.*manual|aviation.*tm"],["phase","Aircraft Maintenance / Phase Inspections",1,"phase.*inspect|aircraft.*maint|periodic.*inspect"],["net","Pilot/Crew Training (NET)",1,"pilot.*train|crew.*train|net\\b.*plan"],["simulator","Training Devices / Simulator Support",1,"simulator|training.*device|synthetic.*train"],["provisioning","Provisioning / ASL",1,"provisioning|asl\\b|authorized.*stockage"],["gse","Ground Support Equipment (GSE)",1,"ground.*support|gse|support.*equip"],["ram","RAM / Mission Capable Rate",1,"ram\\b|mission.*capable|reliab"],["config","Configuration Management / MOD Programs",1,"config.*manage|modification.*program|mod\\b.*program"],["depot","Depot / AVIM / AVUM Planning",1,"depot|avim|avum|aviation.*maint"],["phst","PHS&T / Transportability",0,"phs.?t|transportab"],["dmsms","DMSMS / Obsolescence",0,"dmsms|diminishing|obsolescen"],["pbl","Performance-Based Logistics (PBL)",0,"pbl|performance.*based"]],br=[["lsa","Logistics Support Analysis",1,"lsa\\b|logistics.*support.*analy"],["mac","Maintenance Allocation Chart",1,"mac\\b|maintenance.*alloc"],["rpstl","Repair Parts & Special Tools List",1,"rpstl|repair.*parts|special.*tools"],["tm","Technical Manuals (TM 9-series)",1,"technical.*manual|tm.*9"],["ammo","Ammunition Logistics / QASAS Coordination",1,"ammo|ammunit|qasas|munition|rocket.*pod"],["net","New Equipment Training (NET)",1,"new.*equip.*train|net\\b"],["provisioning","Provisioning Plan",1,"provisioning|asl\\b"],["tmde","TMDE / Support Equipment",1,"tmde|support.*equip|test.*equip"],["ram","RAM / System Readiness",1,"ram\\b|reliab|system.*read"],["config","Configuration Management",1,"config.*manage|configuration"],["transport","Transportability (C-130 / LMSR)",1,"transportab|c.?130|lmsr|airlift"],["depot","Depot Maintenance Work Requirements",0,"depot.*maint|dmwr"],["fms","Foreign Military Sales (FMS) Support",0,"fms|foreign.*military|security.*cooperat"],["dmsms","DMSMS Management",0,"dmsms|diminishing|obsolescen"]],vr=[["ilsp","Integrated Logistics Support Plan",1,"ilsp|integrated.*logistics"],["odin","ODIN / Autonomic Logistics Information System",1,"odin|alis|autonomic.*logist"],["tos","Technical Orders (TO) Development",1,"technical.*order|to\\b.*develop|tech.*order"],["supply","Supply Chain / Global Spares Pool",1,"supply.*chain|global.*spare|spares.*pool"],["depot","Depot Activation / Organic Capability",1,"depot.*activ|organic.*capab|depot.*standup"],["age","Aerospace Ground Equipment (AGE)",1,"aerospace.*ground|age\\b|ground.*equip"],["training","Aircrew & Maintainer Training",1,"aircrew.*train|maintainer.*train|training"],["facilities","Facilities / Hangar Requirements",1,"facilit|hangar"],["phm","Prognostic Health Management",1,"prognostic|phm|health.*manage|condition.*based"],["ram","RAM / Mission Capable Rate",1,"ram\\b|mission.*capable|mc.*rate|reliab"],["config","Configuration / Software Baseline Mgmt",1,"config.*manage|software.*baseline|configuration"],["pbl","Performance-Based Logistics (PBL)",1,"pbl|performance.*based"],["drl","CDRL / Deliverable Reviews",1,"cdrl|drl|deliverable"],["manpower","Manpower Estimate / LCOM",0,"manpower|lcom|logistics.*composite"],["phst","PHS&T / Transportability",0,"phs.?t|transportab"],["dmsms","DMSMS / Obsolescence",0,"dmsms|diminishing|obsolescen"]],Ir=[["ilsp","Integrated Logistics Support Plan",1,"ilsp|integrated.*logistics"],["rcm","Reliability Centered Maintenance (RCM)",1,"rcm|reliability.*centered|maint.*steering"],["tos","Technical Orders Development",1,"technical.*order|to\\b.*develop|tech.*order"],["supply","Supply Chain Management",1,"supply.*chain|provisioning"],["depot","Depot-Level Maintenance / PDM",1,"depot.*maint|pdm|programmed.*depot"],["age","Aerospace Ground Equipment",1,"aerospace.*ground|age\\b|ground.*equip"],["training","Aircrew & Maintainer Training",1,"aircrew.*train|maintainer.*train|training"],["boom","Boom Operator / Refueling System Logistics",1,"boom.*oper|refueling.*system|aerial.*refuel"],["ram","RAM / Availability Analysis",1,"ram\\b|reliab|availab"],["config","Configuration Management",1,"config.*manage|configuration"],["drl","CDRL Reviews",1,"cdrl|drl|deliverable"],["pbl","Performance-Based Logistics",0,"pbl|performance.*based"],["facilities","Facilities Assessment",0,"facilit"],["phst","PHS&T",0,"phs.?t|transport"],["dmsms","DMSMS Management",0,"dmsms|diminishing|obsolescen"]],Ar=[["ilsp","Integrated Logistics Support Plan",1,"ilsp|integrated.*logistics"],["lcsp","Life Cycle Sustainment Plan",1,"lcsp|life.*cycle.*sust"],["lsa","Logistics Supportability Analysis",1,"lsa\\b|logistics.*supportab"],["tos","Technical Orders / IETM Development",1,"technical.*order|ietm|tech.*order"],["supply","Supply Chain / Provisioning",1,"supply.*chain|provisioning"],["depot","Depot Activation / Organic Maintenance",1,"depot.*activ|organic.*maint"],["age","Aerospace Ground Equipment",1,"aerospace.*ground|age\\b|ground.*equip"],["training","Training Systems / Simulators",1,"training.*system|simulator"],["ram","RAM / Stealth Sustainment Metrics",1,"ram\\b|reliab|stealth.*sust|lre"],["config","Configuration Management / SCN",1,"config.*manage|scn|software.*change"],["lo_maint","Low-Observable (LO) Maintenance & Materials",1,"low.*observ|lo\\b.*maint|stealth.*maint|signature"],["facilities","Secure Facilities Requirements",1,"secure.*facilit|scif|classified.*facilit"],["cyber","Cybersecurity / Mission Systems Logistics",1,"cyber|mission.*system.*logist|information.*assur"],["drl","CDRL Reviews",1,"cdrl|drl|deliverable"],["dmsms","DMSMS Management",0,"dmsms|diminishing|obsolescen"],["phst","PHS&T",0,"phs.?t|transport"]],Cr=[["ilsp","Integrated Logistics Support Plan",1,"ilsp|integrated.*logistics"],["rcm","Reliability Centered Maintenance (RCM)",1,"rcm|reliability.*centered"],["tos","Technical Orders",1,"technical.*order|tech.*order"],["supply","Supply Chain / DLA Coordination",1,"supply.*chain|dla\\b|provisioning"],["pdm","Programmed Depot Maintenance (PDM)",1,"pdm|programmed.*depot|depot.*maint"],["age","Aerospace Ground Equipment",1,"aerospace.*ground|age\\b"],["training","Aircrew & Maintainer Training",1,"aircrew.*train|maintainer.*train|training"],["ram","RAM / Mission Capable Rate",1,"ram\\b|mission.*capable|reliab"],["config","Configuration Management",1,"config.*manage|configuration"],["drl","CDRL / Sustainment Reviews",1,"cdrl|drl|deliverable"],["asip","Structural Life / ASIP Compliance",1,"asip|structural.*life|aircraft.*structural|fatigue"],["dmsms","DMSMS / Aging Aircraft Sustainment",1,"dmsms|diminishing|aging.*aircraft|obsolescen"],["pbl","Performance-Based Logistics",0,"pbl|performance.*based"],["facilities","Facilities",0,"facilit"],["phst","PHS&T",0,"phs.?t|transport"]],Ot=[["ilsp","Integrated Logistics Support Plan",1,"ilsp|integrated.*logistics"],["lcsp","Life Cycle Sustainment Plan",1,"lcsp|life.*cycle.*sust"],["ground_se","Ground Segment Support Equipment",1,"ground.*segment|ground.*equip|ops.*center"],["sat_ops","Satellite Operations Sustainment",1,"satellite.*ops|on.?orbit|spacecraft.*ops"],["supply","Supply Chain / Unique Space Parts",1,"supply.*chain|space.*parts|unique.*component"],["training","Operator & Maintainer Training",1,"operator.*train|maintainer.*train|training"],["cyber","Cybersecurity / Space Resilience Logistics",1,"cyber|space.*resilien|information.*assur"],["ram","RAM / On-Orbit Reliability",1,"ram\\b|on.?orbit.*reliab|reliab"],["config","Configuration / Firmware Version Control",1,"config.*manage|firmware|version.*control"],["launch","Launch Operations Logistics",1,"launch.*ops|launch.*logist|launch.*integrat"],["drl","CDRL / Deliverable Reviews",1,"cdrl|drl|deliverable"],["facilities","Ground Station Facilities",0,"ground.*station|facilit"],["dmsms","DMSMS / Component Availability",0,"dmsms|diminishing|component.*avail"],["disposal","End-of-Life / Deorbit Planning",0,"end.*life|deorbit|disposal"]],at=[["ilsp","Integrated Logistics Support Plan",1,"ilsp|integrated.*logistics"],["lcsp","Life Cycle Sustainment Plan",1,"lcsp|life.*cycle.*sust"],["pms","PMS / Maintenance Plan Development",1,"pms\\b|maint.*plan|planned.*maint"],["supply","Supply Support / Provisioning",1,"supply.*support|provisioning"],["vrs","Vendor Recommended Spares",1,"vendor.*spare|vrs"],["se","Support Equipment",1,"support.*equip"],["tm","Technical Manuals (CG Format)",1,"technical.*manual|tech.*manual|cg.*manual"],["training","Training Plan / Crew Familiarization",1,"training.*plan|crew.*familiar"],["ram","RAM Analysis",1,"ram\\b|reliab"],["config","Configuration Management",1,"config.*manage|configuration"],["ecp","Engineering Changes / Waivers",1,"ecp|engineering.*change|waiver"],["drl","DRL / CDRL Reviews",1,"drl|cdrl|deliverable"],["c4isr","C4ISR / Mission Systems Logistics",1,"c4isr|mission.*system|command.*control"],["phst","PHS&T",0,"phs.?t|packaging"],["facilities","Homeport Facilities",0,"homeport|facilit"]],Mr=[["lsa","Logistics Support Analysis",1,"lsa\\b|logistics.*support.*analy"],["mac","Maintenance Allocation Chart",1,"mac\\b|maintenance.*alloc"],["rpstl","Repair Parts & Special Tools List",1,"rpstl|repair.*parts|special.*tools"],["tm","Technical Manuals",1,"technical.*manual|tech.*manual"],["amphib","Amphibious Ship Interface Logistics",1,"amphibi|ship.*interface|well.*deck|l-class"],["net","New Equipment Training / MOS Training",1,"new.*equip.*train|mos\\b|net\\b.*plan"],["provisioning","Provisioning / Block Requirements",1,"provisioning|block.*req"],["se","Support Equipment / Combat Service Support",1,"support.*equip|combat.*service"],["ram","RAM / Operational Readiness",1,"ram\\b|reliab|operational.*read"],["config","Configuration Management",1,"config.*manage|configuration"],["waterborne","Waterborne / Swim Operations Logistics",1,"waterborne|swim.*ops|water.*ops|surf.*zone"],["ecp","Engineering Changes",1,"ecp|engineering.*change"],["drl","CDRL Reviews",1,"cdrl|drl|deliverable"],["phst","PHS&T / Embarkation",0,"phs.?t|embark"],["dmsms","DMSMS Management",0,"dmsms|diminishing|obsolescen"]],en=[["ilsp","Logistics Support Plan",1,"ilsp|logistics.*support.*plan"],["maint","Maintenance Planning",1,"maint.*plan|maintenance"],["supply","Supply Support",1,"supply|provisioning|spare"],["tm","Technical Data / Manuals",1,"technical.*manual|tech.*data|publication"],["training","Training",0,"training|instruction"],["ram","RAM Analysis",0,"ram\\b|reliab|maintainab"],["config","Configuration Management",0,"config.*manage|configuration"],["drl","Deliverable Tracking",0,"drl|cdrl|deliverable"]],Dr={yrbm:we,apl:we,afdm:we,ydt:we,yon:we,ddg51:dr,lcs:ur,cvn78:mr,ffg62:pr,lpd17:gr,f35:Bt,f35b:Bt,ch53k:fr,m1:yr,stryker:hr,ah64:Sr,himars:br,f35a:vr,kc46:Ir,b21:Ar,c17:Cr,gps3:Ot,sbirs:Ot,nsc:at,opc:at,frc:at,acv:Mr,custom:en};function Qe(t){return(Dr[t]||en).map(e=>({id:e[0],l:e[1],c:e[2],kw:new RegExp(e[3],"i")}))}const wr={"DI-ILSS-81490":"ilsmgmt","DI-ILSS-81494":"maint","DI-ILSS-81492":"maint","DI-ILSS-81493":"supply","DI-ILSS-81495":"supply","DI-ILSS-81496":"supply","DI-ILSS-81497":"supply","DI-SESS-81519":"se","DI-TMSS-81000":"techdata","DI-TMSS-80063":"techdata","DI-TMSS-80000":"techdata","DI-TRAN-81476":"training","DI-HFAC-80743":"manpower","DI-MCCR-80030":"compres","DI-FACI-80931":"facilities","DI-PACK-80886":"phst","DI-MISC-80711":"design","DI-RELI-80255":"ram","DI-RELI-81372":"ram","DI-CMAN-81250":"config","DI-CMAN-80858":"config","DI-MGMT-81466":"ilsmgmt","DI-ALSS-81530":"lsa","DI-ALSS-81529":"lsa","DI-TMSS-80897":"techdata","DI-TMSS-81114":"techdata"},it={ilsmgmt:{p:"PMS / Program Office",s:"Contractor"},maint:{p:"Contractor (ILS)",s:"NAVSEA / SUPSHIP"},supply:{p:"Contractor (Provisioning)",s:"NAVSUP / DLA"},se:{p:"Contractor",s:"NAVSEA"},techdata:{p:"Contractor (Tech Pubs)",s:"NSWCCD / PMS"},training:{p:"NETC / Contractor",s:"PMS"},manpower:{p:"OPNAV N1 / PMS",s:"Contractor"},compres:{p:"Contractor",s:"NAVWAR / PMS"},facilities:{p:"NAVFAC",s:"PMS"},phst:{p:"Contractor",s:"NAVSEA / PMS"},design:{p:"Contractor (Engineering)",s:"NAVSEA"},ram:{p:"Contractor",s:"NAVSEA / PMS"},config:{p:"Contractor (CM)",s:"PMS / NAVSEA"},lsa:{p:"Contractor (LSA)",s:"PM / PEO"},depot:{p:"Organic Depot / DLA",s:"PM"},cyber:{p:"Contractor (Cyber)",s:"NAVWAR / DISA"}},ot={ilsmgmt:45,maint:120,supply:250,se:80,techdata:150,training:60,manpower:35,compres:25,facilities:40,phst:30,design:55,ram:95,config:110,lsa:80,depot:200,cyber:65};function X(t){if(t>=1e3){const e=t/1e3;return"$"+(e%1===0?e.toFixed(0):e.toFixed(1))+"M"}return"$"+t+"K"}const _={yrbm:{name:"YRBM ‚Äî Yard, Repair, Berthing, & Messing",ofc:"PMS 300",type:"Service Craft (Non-Self-Propelled)",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Planned Maintenance System (PMS) Development",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-ILSS-81495",t:"Vendor Recommended Spares List",el:"supply",c:1},{s:"A005",di:"DI-ILSS-81496",t:"Allowance Parts List (APL)",el:"supply",c:1},{s:"A006",di:"DI-TMSS-81000",t:"Technical Manuals ‚Äî Operator/Crew",el:"techdata",c:1},{s:"A007",di:"DI-TMSS-80063",t:"Technical Manual Content Verification",el:"techdata",c:0},{s:"A008",di:"DI-CMAN-81250",t:"Configuration Status Accounting Report",el:"config",c:1},{s:"A009",di:"DI-CMAN-80858",t:"Engineering Change Proposals",el:"config",c:0},{s:"A010",di:"DI-TRAN-81476",t:"Training Plan (Crew Familiarization)",el:"training",c:0},{s:"A011",di:"DI-SESS-81519",t:"Support Equipment Recommendations",el:"se",c:0},{s:"A012",di:"DI-RELI-80255",t:"RAM Analysis / Reliability Report",el:"ram",c:1},{s:"A013",di:"DI-PACK-80886",t:"PHS&T Plan",el:"phst",c:0},{s:"A014",di:"DI-MISC-80711",t:"Design Interface Document",el:"design",c:0},{s:"A015",di:"DI-MGMT-81466",t:"Program Management Plan",el:"ilsmgmt",c:0}]},apl:{name:"APL ‚Äî Auxiliary Personnel Lighter",ofc:"PMS 300",type:"Service Craft (Non-Self-Propelled)",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Planned Maintenance System",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-ILSS-81495",t:"Vendor Recommended Spares List",el:"supply",c:1},{s:"A005",di:"DI-TMSS-81000",t:"Technical Manuals ‚Äî Operations",el:"techdata",c:1},{s:"A006",di:"DI-CMAN-81250",t:"Configuration Status Accounting Report",el:"config",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:0},{s:"A008",di:"DI-SESS-81519",t:"Support Equipment Recommendations",el:"se",c:0},{s:"A009",di:"DI-RELI-80255",t:"RAM Report",el:"ram",c:1},{s:"A010",di:"DI-PACK-80886",t:"PHS&T Plan",el:"phst",c:0},{s:"A011",di:"DI-MGMT-81466",t:"Program Management Plan",el:"ilsmgmt",c:0}]},afdm:{name:"AFDM ‚Äî Auxiliary Floating Drydock Medium",ofc:"PMS 300",type:"Floating Drydock",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Planned Maintenance System",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81492",t:"Level of Repair Analysis (LORA)",el:"maint",c:1},{s:"A004",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A005",di:"DI-ILSS-81495",t:"Vendor Recommended Spares List",el:"supply",c:1},{s:"A006",di:"DI-ILSS-81496",t:"Allowance Parts List",el:"supply",c:1},{s:"A007",di:"DI-ILSS-81497",t:"Supply Support Request",el:"supply",c:0},{s:"A008",di:"DI-TMSS-81000",t:"Technical Manuals ‚Äî Ops & Maintenance",el:"techdata",c:1},{s:"A009",di:"DI-TMSS-80063",t:"Technical Manual Content Verification",el:"techdata",c:1},{s:"A010",di:"DI-CMAN-81250",t:"Configuration Status Accounting",el:"config",c:1},{s:"A011",di:"DI-CMAN-80858",t:"Engineering Change Proposals",el:"config",c:1},{s:"A012",di:"DI-SESS-81519",t:"Support Equipment ‚Äî Ballast/Crane Systems",el:"se",c:1},{s:"A013",di:"DI-TRAN-81476",t:"Training Plan ‚Äî Operations & Safety",el:"training",c:1},{s:"A014",di:"DI-RELI-80255",t:"RAM Analysis Report",el:"ram",c:1},{s:"A015",di:"DI-RELI-81372",t:"Failure Reporting (FRACAS)",el:"ram",c:0},{s:"A016",di:"DI-FACI-80931",t:"Facilities Requirements",el:"facilities",c:0},{s:"A017",di:"DI-PACK-80886",t:"PHS&T Plan",el:"phst",c:1},{s:"A018",di:"DI-HFAC-80743",t:"Manpower & Personnel Report",el:"manpower",c:0},{s:"A019",di:"DI-MISC-80711",t:"Design Interface Document",el:"design",c:1},{s:"A020",di:"DI-MCCR-80030",t:"Computer Resources LCMP",el:"compres",c:0},{s:"A021",di:"DI-MGMT-81466",t:"Program Management Plan",el:"ilsmgmt",c:0}]},ydt:{name:"YDT ‚Äî Large Harbor Tug",ofc:"PMS 300",type:"Service Craft (Self-Propelled)",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Planned Maintenance System",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-ILSS-81495",t:"Vendor Recommended Spares List",el:"supply",c:1},{s:"A005",di:"DI-TMSS-81000",t:"Technical Manuals ‚Äî Operations & Propulsion",el:"techdata",c:1},{s:"A006",di:"DI-CMAN-81250",t:"Configuration Status Accounting",el:"config",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan ‚Äî Crew Operations",el:"training",c:1},{s:"A008",di:"DI-SESS-81519",t:"Support Equipment Recommendations",el:"se",c:0},{s:"A009",di:"DI-RELI-80255",t:"RAM Report",el:"ram",c:1},{s:"A010",di:"DI-PACK-80886",t:"PHS&T Plan",el:"phst",c:0},{s:"A011",di:"DI-MGMT-81466",t:"Program Management Plan",el:"ilsmgmt",c:0},{s:"A012",di:"DI-MISC-80711",t:"Design Interface Document",el:"design",c:0}]},yon:{name:"YON ‚Äî Fuel Oil Barge",ofc:"PMS 300",type:"Fuel Barge (Non-Self-Propelled)",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Planned Maintenance System",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Documentation",el:"supply",c:1},{s:"A004",di:"DI-ILSS-81495",t:"Vendor Recommended Spares List",el:"supply",c:1},{s:"A005",di:"DI-TMSS-81000",t:"Technical Manuals ‚Äî Operations & Safety",el:"techdata",c:1},{s:"A006",di:"DI-CMAN-81250",t:"Configuration Status Accounting",el:"config",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Safety & Hazmat Training Plan",el:"training",c:1},{s:"A008",di:"DI-PACK-80886",t:"PHS&T Plan (Fuel Handling)",el:"phst",c:1},{s:"A009",di:"DI-RELI-80255",t:"RAM Report",el:"ram",c:1},{s:"A010",di:"DI-MGMT-81466",t:"Program Management Plan",el:"ilsmgmt",c:0}]},ddg51:{name:"DDG-51 Flight III (Arleigh Burke)",ofc:"PMS 400D",type:"Guided Missile Destroyer",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Planned Maintenance System",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81492",t:"Level of Repair Analysis",el:"maint",c:1},{s:"A004",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A005",di:"DI-ILSS-81495",t:"Vendor Recommended Spares",el:"supply",c:1},{s:"A006",di:"DI-ILSS-81496",t:"Allowance Parts List",el:"supply",c:1},{s:"A007",di:"DI-TMSS-81000",t:"Technical Manuals (Full Suite)",el:"techdata",c:1},{s:"A008",di:"DI-CMAN-81250",t:"Configuration Status Accounting",el:"config",c:1},{s:"A009",di:"DI-CMAN-80858",t:"Engineering Change Proposals",el:"config",c:1},{s:"A010",di:"DI-SESS-81519",t:"Support Equipment",el:"se",c:1},{s:"A011",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A012",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A013",di:"DI-RELI-81372",t:"Failure Reporting (FRACAS)",el:"ram",c:1},{s:"A014",di:"DI-HFAC-80743",t:"Manpower Report",el:"manpower",c:1},{s:"A015",di:"DI-MCCR-80030",t:"Computer Resources LCMP",el:"compres",c:1},{s:"A016",di:"DI-FACI-80931",t:"Facilities Requirements",el:"facilities",c:0},{s:"A017",di:"DI-PACK-80886",t:"PHS&T Plan",el:"phst",c:1},{s:"A018",di:"DI-MISC-80711",t:"Design Interface",el:"design",c:1},{s:"A019",di:"DI-MGMT-81466",t:"Program Management Plan",el:"ilsmgmt",c:0}]},lcs:{name:"LCS Freedom-class",ofc:"PMS 501",type:"Littoral Combat Ship",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Maintenance Plan",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-ILSS-81495",t:"Vendor Spares",el:"supply",c:1},{s:"A005",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"A006",di:"DI-CMAN-81250",t:"Configuration Status Accounting",el:"config",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A008",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A009",di:"DI-SESS-81519",t:"Support Equipment",el:"se",c:0},{s:"A010",di:"DI-MGMT-81466",t:"Program Mgmt Plan",el:"ilsmgmt",c:0}]},cvn78:{name:"CVN-78 Ford-class",ofc:"PMS 378",type:"Aircraft Carrier",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Planned Maintenance System",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81492",t:"Level of Repair Analysis",el:"maint",c:1},{s:"A004",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A005",di:"DI-ILSS-81495",t:"Vendor Recommended Spares",el:"supply",c:1},{s:"A006",di:"DI-ILSS-81496",t:"Allowance Parts List",el:"supply",c:1},{s:"A007",di:"DI-ILSS-81497",t:"Supply Support Request",el:"supply",c:1},{s:"A008",di:"DI-TMSS-81000",t:"Technical Manuals (Complete)",el:"techdata",c:1},{s:"A009",di:"DI-TMSS-80063",t:"TM Verification",el:"techdata",c:1},{s:"A010",di:"DI-CMAN-81250",t:"Configuration Status Accounting",el:"config",c:1},{s:"A011",di:"DI-CMAN-80858",t:"ECPs",el:"config",c:1},{s:"A012",di:"DI-SESS-81519",t:"Support Equipment",el:"se",c:1},{s:"A013",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A014",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A015",di:"DI-RELI-81372",t:"FRACAS",el:"ram",c:1},{s:"A016",di:"DI-HFAC-80743",t:"Manpower Report",el:"manpower",c:1},{s:"A017",di:"DI-MCCR-80030",t:"Computer Resources",el:"compres",c:1},{s:"A018",di:"DI-FACI-80931",t:"Facilities Requirements",el:"facilities",c:1},{s:"A019",di:"DI-PACK-80886",t:"PHS&T Plan",el:"phst",c:1},{s:"A020",di:"DI-MISC-80711",t:"Design Interface",el:"design",c:1},{s:"A021",di:"DI-MGMT-81466",t:"Program Management Plan",el:"ilsmgmt",c:0}]},ffg62:{name:"FFG-62 Constellation-class",ofc:"PMS 515",type:"Guided Missile Frigate",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Maintenance Plan",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-ILSS-81495",t:"Vendor Spares",el:"supply",c:1},{s:"A005",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"A006",di:"DI-CMAN-81250",t:"Configuration Status Accounting",el:"config",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A008",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A009",di:"DI-SESS-81519",t:"Support Equipment",el:"se",c:1},{s:"A010",di:"DI-HFAC-80743",t:"Manpower Report",el:"manpower",c:0},{s:"A011",di:"DI-MGMT-81466",t:"Program Mgmt Plan",el:"ilsmgmt",c:0}]},lpd17:{name:"LPD-17 San Antonio-class",ofc:"PMS 317",type:"Amphibious Transport Dock",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Maintenance Plan",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-ILSS-81495",t:"Vendor Spares",el:"supply",c:1},{s:"A005",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"A006",di:"DI-CMAN-81250",t:"Configuration Status Accounting",el:"config",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A008",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A009",di:"DI-SESS-81519",t:"Support Equipment",el:"se",c:0},{s:"A010",di:"DI-MGMT-81466",t:"Program Mgmt Plan",el:"ilsmgmt",c:0}]},f35:{name:"F-35C Lightning II",ofc:"PMA-265 / JSF PO",type:"Carrier-Based Strike Fighter",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Maintenance Plan / ALIS Requirements",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-ILSS-81495",t:"Vendor Spares",el:"supply",c:1},{s:"A005",di:"DI-TMSS-81000",t:"Technical Manuals (IETM)",el:"techdata",c:1},{s:"A006",di:"DI-CMAN-81250",t:"Config Status Accounting",el:"config",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A008",di:"DI-RELI-80255",t:"RAM / PHM Analysis",el:"ram",c:1},{s:"A009",di:"DI-MCCR-80030",t:"ALIS / ODIN LCMP",el:"compres",c:1},{s:"A010",di:"DI-MGMT-81466",t:"Program Mgmt Plan",el:"ilsmgmt",c:0}]},f35b:{name:"F-35B Lightning II (STOVL)",ofc:"PMA-265 / JSF PO",type:"STOVL Strike Fighter",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Maintenance Plan",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Documentation",el:"supply",c:1},{s:"A004",di:"DI-ILSS-81495",t:"Vendor Spares",el:"supply",c:1},{s:"A005",di:"DI-TMSS-81000",t:"Technical Manuals (IETM)",el:"techdata",c:1},{s:"A006",di:"DI-CMAN-81250",t:"Config Status Accounting",el:"config",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A008",di:"DI-RELI-80255",t:"RAM / PHM Analysis",el:"ram",c:1},{s:"A009",di:"DI-MCCR-80030",t:"ODIN LCMP",el:"compres",c:1},{s:"A010",di:"DI-MGMT-81466",t:"Program Mgmt Plan",el:"ilsmgmt",c:0}]},ch53k:{name:"CH-53K King Stallion",ofc:"PMA-261",type:"Heavy-Lift Helicopter",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Maintenance Plan",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-ILSS-81495",t:"Vendor Spares",el:"supply",c:1},{s:"A005",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"A006",di:"DI-CMAN-81250",t:"Config Status Accounting",el:"config",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A008",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A009",di:"DI-MGMT-81466",t:"Program Mgmt Plan",el:"ilsmgmt",c:0}]},m1:{name:"M1A2 Abrams SEPv3",ofc:"PEO GCS",type:"Main Battle Tank",drls:[{s:"A001",di:"DI-ALSS-81530",t:"Logistics Support Analysis (LSA)",el:"lsa",c:1},{s:"A002",di:"DI-ALSS-81529",t:"LSAR Data / MAC Development",el:"lsa",c:1},{s:"A003",di:"DI-TMSS-80897",t:"Technical Manuals (TM 9-2350)",el:"techdata",c:1},{s:"A004",di:"DI-ILSS-81493",t:"Provisioning Plan / ASL",el:"supply",c:1},{s:"A005",di:"DI-ILSS-81495",t:"Repair Parts & Special Tools List",el:"supply",c:1},{s:"A006",di:"DI-TRAN-81476",t:"New Equipment Training (NET) Plan",el:"training",c:1},{s:"A007",di:"DI-SESS-81519",t:"TMDE Requirements",el:"se",c:1},{s:"A008",di:"DI-HFAC-80743",t:"MANPRINT Assessment",el:"manpower",c:1},{s:"A009",di:"DI-RELI-80255",t:"RAM / Ao Analysis",el:"ram",c:1},{s:"A010",di:"DI-CMAN-81250",t:"Configuration Management / ECPs",el:"config",c:1},{s:"A011",di:"DI-PACK-80886",t:"Transportability Assessment",el:"phst",c:1},{s:"A012",di:"DI-MGMT-81466",t:"Depot Maintenance Work Requirements",el:"ilsmgmt",c:1}]},stryker:{name:"Stryker ICV-VA1",ofc:"PM Stryker",type:"Infantry Combat Vehicle",drls:[{s:"A001",di:"DI-ALSS-81530",t:"Logistics Support Analysis",el:"lsa",c:1},{s:"A002",di:"DI-ALSS-81529",t:"MAC Development",el:"lsa",c:1},{s:"A003",di:"DI-TMSS-80897",t:"Technical Manuals (TM 9-series)",el:"techdata",c:1},{s:"A004",di:"DI-ILSS-81493",t:"Provisioning / ASL",el:"supply",c:1},{s:"A005",di:"DI-ILSS-81495",t:"RPSTL",el:"supply",c:1},{s:"A006",di:"DI-TRAN-81476",t:"New Equipment Training",el:"training",c:1},{s:"A007",di:"DI-SESS-81519",t:"TMDE / Special Tools",el:"se",c:1},{s:"A008",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A009",di:"DI-CMAN-81250",t:"Configuration Management",el:"config",c:1},{s:"A010",di:"DI-PACK-80886",t:"Transportability (C-17/C-130)",el:"phst",c:1}]},ah64:{name:"AH-64E Apache Guardian",ofc:"PEO Aviation",type:"Attack Helicopter",drls:[{s:"A001",di:"DI-ALSS-81530",t:"Logistics Support Analysis",el:"lsa",c:1},{s:"A002",di:"DI-ALSS-81529",t:"MAC Development",el:"lsa",c:1},{s:"A003",di:"DI-TMSS-80897",t:"Aviation Technical Manuals",el:"techdata",c:1},{s:"A004",di:"DI-ILSS-81493",t:"Provisioning / ASL",el:"supply",c:1},{s:"A005",di:"DI-ILSS-81495",t:"RPSTL",el:"supply",c:1},{s:"A006",di:"DI-TRAN-81476",t:"Pilot/Crew Training (NET)",el:"training",c:1},{s:"A007",di:"DI-SESS-81519",t:"Ground Support Equipment (GSE)",el:"se",c:1},{s:"A008",di:"DI-RELI-80255",t:"RAM / Mission Capable Rate",el:"ram",c:1},{s:"A009",di:"DI-CMAN-81250",t:"Configuration / MOD Programs",el:"config",c:1},{s:"A010",di:"DI-MGMT-81466",t:"Depot / AVIM / AVUM Planning",el:"ilsmgmt",c:1}]},himars:{name:"M142 HIMARS",ofc:"PEO Missiles & Space",type:"Rocket Artillery",drls:[{s:"A001",di:"DI-ALSS-81530",t:"Logistics Support Analysis",el:"lsa",c:1},{s:"A002",di:"DI-TMSS-80897",t:"Technical Manuals (TM 9-series)",el:"techdata",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Plan",el:"supply",c:1},{s:"A004",di:"DI-ILSS-81495",t:"RPSTL",el:"supply",c:1},{s:"A005",di:"DI-TRAN-81476",t:"New Equipment Training",el:"training",c:1},{s:"A006",di:"DI-SESS-81519",t:"TMDE / Support Equipment",el:"se",c:1},{s:"A007",di:"DI-RELI-80255",t:"RAM / System Readiness",el:"ram",c:1},{s:"A008",di:"DI-CMAN-81250",t:"Configuration Management",el:"config",c:1},{s:"A009",di:"DI-PACK-80886",t:"Transportability (C-130)",el:"phst",c:1}]},f35a:{name:"F-35A Lightning II (USAF)",ofc:"JSF PO / ACC",type:"Conventional Takeoff Fighter",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Maintenance Plan / ODIN",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning / Global Spares",el:"supply",c:1},{s:"A004",di:"DI-ILSS-81495",t:"Vendor Spares",el:"supply",c:1},{s:"A005",di:"DI-TMSS-81114",t:"Technical Orders (TOs)",el:"techdata",c:1},{s:"A006",di:"DI-CMAN-81250",t:"Config / Software Baseline",el:"config",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Aircrew & Maintainer Training",el:"training",c:1},{s:"A008",di:"DI-RELI-80255",t:"RAM / MC Rate Analysis",el:"ram",c:1},{s:"A009",di:"DI-MCCR-80030",t:"ODIN LCMP",el:"compres",c:1},{s:"A010",di:"DI-SESS-81519",t:"Aerospace Ground Equipment",el:"se",c:1}]},kc46:{name:"KC-46A Pegasus",ofc:"AFLCMC",type:"Aerial Refueling Tanker",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Reliability Centered Maintenance Plan",el:"maint",c:1},{s:"A003",di:"DI-TMSS-81114",t:"Technical Orders",el:"techdata",c:1},{s:"A004",di:"DI-ILSS-81493",t:"Supply Chain Management",el:"supply",c:1},{s:"A005",di:"DI-ILSS-81495",t:"Vendor Spares",el:"supply",c:1},{s:"A006",di:"DI-TRAN-81476",t:"Aircrew Training",el:"training",c:1},{s:"A007",di:"DI-RELI-80255",t:"RAM / Availability",el:"ram",c:1},{s:"A008",di:"DI-CMAN-81250",t:"Configuration Management",el:"config",c:1},{s:"A009",di:"DI-SESS-81519",t:"AGE Requirements",el:"se",c:1}]},b21:{name:"B-21 Raider",ofc:"AFLCMC / LRSO PO",type:"Long-Range Strike Bomber",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Maintenance Plan",el:"maint",c:1},{s:"A003",di:"DI-TMSS-81114",t:"Technical Orders / IETM",el:"techdata",c:1},{s:"A004",di:"DI-ILSS-81493",t:"Supply / Provisioning",el:"supply",c:1},{s:"A005",di:"DI-ILSS-81495",t:"Vendor Spares",el:"supply",c:1},{s:"A006",di:"DI-TRAN-81476",t:"Training Systems / Simulators",el:"training",c:1},{s:"A007",di:"DI-RELI-80255",t:"RAM / Stealth Sustainment",el:"ram",c:1},{s:"A008",di:"DI-CMAN-81250",t:"Config / SCN Management",el:"config",c:1},{s:"A009",di:"DI-FACI-80931",t:"Secure Facility Requirements",el:"facilities",c:1},{s:"A010",di:"DI-MCCR-80030",t:"Cybersecurity / Mission Systems",el:"compres",c:1}]},c17:{name:"C-17 Globemaster III",ofc:"AFLCMC",type:"Strategic Airlift",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"RCM / Maintenance Plan",el:"maint",c:1},{s:"A003",di:"DI-TMSS-81114",t:"Technical Orders",el:"techdata",c:1},{s:"A004",di:"DI-ILSS-81493",t:"Supply Chain / DLA Coordination",el:"supply",c:1},{s:"A005",di:"DI-ILSS-81495",t:"Vendor Spares",el:"supply",c:1},{s:"A006",di:"DI-TRAN-81476",t:"Aircrew & Maintainer Training",el:"training",c:1},{s:"A007",di:"DI-RELI-80255",t:"RAM / Mission Capable Rate",el:"ram",c:1},{s:"A008",di:"DI-CMAN-81250",t:"Configuration Management",el:"config",c:1},{s:"A009",di:"DI-SESS-81519",t:"AGE Requirements",el:"se",c:1}]},gps3:{name:"GPS III / IIIF",ofc:"Space Systems Command",type:"Navigation Satellite",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Ground Segment Maintenance Plan",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Supply / Unique Space Parts",el:"supply",c:1},{s:"A004",di:"DI-TRAN-81476",t:"Operator Training",el:"training",c:1},{s:"A005",di:"DI-RELI-80255",t:"On-Orbit Reliability Analysis",el:"ram",c:1},{s:"A006",di:"DI-CMAN-81250",t:"Config / Firmware Control",el:"config",c:1},{s:"A007",di:"DI-MCCR-80030",t:"Cybersecurity / Space Resilience",el:"compres",c:1},{s:"A008",di:"DI-FACI-80931",t:"Ground Station Facilities",el:"facilities",c:0}]},sbirs:{name:"SBIRS / Next-Gen OPIR",ofc:"Space Systems Command",type:"Missile Warning Satellite",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Ground Segment Maintenance",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Supply / Classified Components",el:"supply",c:1},{s:"A004",di:"DI-TRAN-81476",t:"Mission Crew Training",el:"training",c:1},{s:"A005",di:"DI-RELI-80255",t:"Constellation Availability Analysis",el:"ram",c:1},{s:"A006",di:"DI-CMAN-81250",t:"Configuration Management",el:"config",c:1},{s:"A007",di:"DI-MCCR-80030",t:"Cybersecurity / STIG Compliance",el:"compres",c:1},{s:"A008",di:"DI-FACI-80931",t:"SCIF / Ground Station Requirements",el:"facilities",c:1}]},nsc:{name:"NSC (Legend-class)",ofc:"CG-9325",type:"National Security Cutter",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Maintenance Plan (PMS)",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-ILSS-81495",t:"Vendor Recommended Spares",el:"supply",c:1},{s:"A005",di:"DI-TMSS-81000",t:"Technical Manuals (CG Format)",el:"techdata",c:1},{s:"A006",di:"DI-CMAN-81250",t:"Configuration Status Accounting",el:"config",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A008",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A009",di:"DI-SESS-81519",t:"Support Equipment",el:"se",c:1},{s:"A010",di:"DI-MGMT-81466",t:"C4ISR Logistics",el:"ilsmgmt",c:1}]},opc:{name:"OPC (Heritage-class)",ofc:"CG-9325",type:"Offshore Patrol Cutter",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Maintenance Plan",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Documentation",el:"supply",c:1},{s:"A004",di:"DI-ILSS-81495",t:"Vendor Spares",el:"supply",c:1},{s:"A005",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"A006",di:"DI-CMAN-81250",t:"Configuration Management",el:"config",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A008",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1}]},frc:{name:"FRC (Sentinel-class)",ofc:"CG-9325",type:"Fast Response Cutter",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Maintenance Plan",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Documentation",el:"supply",c:1},{s:"A004",di:"DI-ILSS-81495",t:"Vendor Spares",el:"supply",c:1},{s:"A005",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"A006",di:"DI-CMAN-81250",t:"Configuration Management",el:"config",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A008",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1}]},acv:{name:"ACV 1.1 Amphibious Combat Vehicle",ofc:"PEO Land Systems (USMC)",type:"Amphibious Combat Vehicle",drls:[{s:"A001",di:"DI-ALSS-81530",t:"Logistics Support Analysis",el:"lsa",c:1},{s:"A002",di:"DI-ALSS-81529",t:"MAC Development",el:"lsa",c:1},{s:"A003",di:"DI-TMSS-80897",t:"Technical Manuals",el:"techdata",c:1},{s:"A004",di:"DI-ILSS-81493",t:"Provisioning / Block Requirements",el:"supply",c:1},{s:"A005",di:"DI-ILSS-81495",t:"RPSTL",el:"supply",c:1},{s:"A006",di:"DI-TRAN-81476",t:"MOS Training Plan",el:"training",c:1},{s:"A007",di:"DI-SESS-81519",t:"CSS Equipment",el:"se",c:1},{s:"A008",di:"DI-RELI-80255",t:"RAM / Operational Readiness",el:"ram",c:1},{s:"A009",di:"DI-CMAN-81250",t:"Configuration Management",el:"config",c:1}]},ssn774:{name:"SSN-774 Virginia-class",ofc:"PMS 450",type:"Nuclear Attack Submarine",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Planned Maintenance System",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81492",t:"Level of Repair Analysis",el:"maint",c:1},{s:"A004",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A005",di:"DI-ILSS-81495",t:"Vendor Recommended Spares",el:"supply",c:1},{s:"A006",di:"DI-TMSS-81000",t:"Technical Manuals (DPI)",el:"techdata",c:1},{s:"A007",di:"DI-CMAN-81250",t:"Configuration Status Accounting",el:"config",c:1},{s:"A008",di:"DI-CMAN-80858",t:"Engineering Change Proposals",el:"config",c:1},{s:"A009",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A010",di:"DI-RELI-81372",t:"Failure Reporting (FRACAS)",el:"ram",c:1},{s:"A011",di:"DI-HFAC-80743",t:"Manpower Report",el:"manpower",c:1},{s:"A012",di:"DI-MCCR-80030",t:"Computer Resources LCMP",el:"compres",c:1},{s:"A013",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A014",di:"DI-PACK-80886",t:"PHS&T Plan",el:"phst",c:1},{s:"A015",di:"DI-MGMT-81466",t:"Program Management Plan",el:"ilsmgmt",c:0}]},ssbn826:{name:"SSBN-826 Columbia-class",ofc:"PMS 397",type:"Ballistic Missile Submarine",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Planned Maintenance System",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81492",t:"Level of Repair Analysis",el:"maint",c:1},{s:"A004",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A005",di:"DI-TMSS-81000",t:"Technical Manuals (Complete)",el:"techdata",c:1},{s:"A006",di:"DI-CMAN-81250",t:"Config Status Accounting",el:"config",c:1},{s:"A007",di:"DI-RELI-80255",t:"RAM / Nuclear Safety Analysis",el:"ram",c:1},{s:"A008",di:"DI-TRAN-81476",t:"Training Plan (Crew)",el:"training",c:1},{s:"A009",di:"DI-HFAC-80743",t:"Manpower Report",el:"manpower",c:1},{s:"A010",di:"DI-MGMT-81466",t:"Program Management Plan",el:"ilsmgmt",c:0}]},ddg1000:{name:"DDG-1000 Zumwalt-class",ofc:"PMS 500",type:"Guided Missile Destroyer",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Planned Maintenance System",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81492",t:"Level of Repair Analysis",el:"maint",c:1},{s:"A004",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A005",di:"DI-TMSS-81000",t:"Technical Manuals (IETM)",el:"techdata",c:1},{s:"A006",di:"DI-CMAN-81250",t:"Configuration Status Accounting",el:"config",c:1},{s:"A007",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A008",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A009",di:"DI-SESS-81519",t:"Support Equipment",el:"se",c:1},{s:"A010",di:"DI-MGMT-81466",t:"Program Management Plan",el:"ilsmgmt",c:0}]},cg47:{name:"CG-47 Ticonderoga-class",ofc:"PMS 400C",type:"Guided Missile Cruiser",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Planned Maintenance System",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"A005",di:"DI-CMAN-81250",t:"Configuration Status Accounting",el:"config",c:1},{s:"A006",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A008",di:"DI-MGMT-81466",t:"Program Management Plan",el:"ilsmgmt",c:0}]},lha6:{name:"LHA-6 America-class",ofc:"PMS 377",type:"Amphibious Assault Ship",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Planned Maintenance System",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"A005",di:"DI-CMAN-81250",t:"Configuration Status Accounting",el:"config",c:1},{s:"A006",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A008",di:"DI-SESS-81519",t:"Support Equipment",el:"se",c:1},{s:"A009",di:"DI-MGMT-81466",t:"Program Management Plan",el:"ilsmgmt",c:0}]},lhd1:{name:"LHD-1 Wasp-class",ofc:"PMS 377",type:"Amphibious Assault Ship",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Planned Maintenance System",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"A005",di:"DI-CMAN-81250",t:"Configuration Status Accounting",el:"config",c:1},{s:"A006",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A008",di:"DI-MGMT-81466",t:"Program Management Plan",el:"ilsmgmt",c:0}]},lsd49:{name:"LSD-49 Harpers Ferry-class",ofc:"PMS 377",type:"Dock Landing Ship",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Planned Maintenance System",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"A005",di:"DI-CMAN-81250",t:"Configuration Status Accounting",el:"config",c:1},{s:"A006",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A007",di:"DI-MGMT-81466",t:"Program Management Plan",el:"ilsmgmt",c:0}]},mcm1:{name:"MCM-1 Avenger-class",ofc:"PMS 340",type:"Mine Countermeasures Ship",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Planned Maintenance System",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"A005",di:"DI-CMAN-81250",t:"Configuration Status Accounting",el:"config",c:1},{s:"A006",di:"DI-MGMT-81466",t:"Program Management Plan",el:"ilsmgmt",c:0}]},ssc:{name:"SSC (Ship-to-Shore Connector)",ofc:"PMS 325",type:"Landing Craft Air Cushion",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Planned Maintenance System",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-ILSS-81495",t:"Vendor Recommended Spares",el:"supply",c:1},{s:"A005",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"A006",di:"DI-CMAN-81250",t:"Configuration Status Accounting",el:"config",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A008",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A009",di:"DI-SESS-81519",t:"Support Equipment",el:"se",c:1},{s:"A010",di:"DI-PACK-80886",t:"PHS&T Plan",el:"phst",c:1},{s:"A011",di:"DI-MGMT-81466",t:"Program Management Plan",el:"ilsmgmt",c:0}]},dls:{name:"Diving & Life Support Systems",ofc:"PMS 385",type:"Salvage & Diving Equipment",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Planned Maintenance System",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-ILSS-81495",t:"Vendor Recommended Spares",el:"supply",c:1},{s:"A005",di:"DI-TMSS-81000",t:"Technical Manuals ‚Äî Dive Systems",el:"techdata",c:1},{s:"A006",di:"DI-CMAN-81250",t:"Configuration Status Accounting",el:"config",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan ‚Äî Dive Certification",el:"training",c:1},{s:"A008",di:"DI-RELI-80255",t:"RAM / Safety Analysis",el:"ram",c:1},{s:"A009",di:"DI-SESS-81519",t:"Support Equipment ‚Äî Dive Lockers",el:"se",c:1},{s:"A010",di:"DI-MGMT-81466",t:"Program Management Plan",el:"ilsmgmt",c:0}]},fa18:{name:"F/A-18E/F Super Hornet",ofc:"PMA-265",type:"Carrier-Based Strike Fighter",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Maintenance Plan",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-ILSS-81495",t:"Vendor Spares",el:"supply",c:1},{s:"A005",di:"DI-TMSS-81000",t:"Technical Manuals (IETM)",el:"techdata",c:1},{s:"A006",di:"DI-CMAN-81250",t:"Config Status Accounting",el:"config",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A008",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A009",di:"DI-MCCR-80030",t:"Computer Resources",el:"compres",c:1},{s:"A010",di:"DI-MGMT-81466",t:"Program Mgmt Plan",el:"ilsmgmt",c:0}]},e2d:{name:"E-2D Advanced Hawkeye",ofc:"PMA-231",type:"Carrier-Based AEW Aircraft",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Maintenance Plan",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"A005",di:"DI-CMAN-81250",t:"Config Status Accounting",el:"config",c:1},{s:"A006",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A008",di:"DI-MGMT-81466",t:"Program Mgmt Plan",el:"ilsmgmt",c:0}]},ea18g:{name:"EA-18G Growler",ofc:"PMA-234",type:"Electronic Attack Aircraft",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Maintenance Plan",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"A005",di:"DI-CMAN-81250",t:"Config Status Accounting",el:"config",c:1},{s:"A006",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A008",di:"DI-MGMT-81466",t:"Program Mgmt Plan",el:"ilsmgmt",c:0}]},p8a:{name:"P-8A Poseidon",ofc:"PMA-290",type:"Maritime Patrol Aircraft",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Maintenance Plan",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"A005",di:"DI-CMAN-81250",t:"Config Status Accounting",el:"config",c:1},{s:"A006",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A008",di:"DI-MCCR-80030",t:"Computer Resources",el:"compres",c:1},{s:"A009",di:"DI-MGMT-81466",t:"Program Mgmt Plan",el:"ilsmgmt",c:0}]},mh60r:{name:"MH-60R Seahawk",ofc:"PMA-299",type:"Multi-Mission Helicopter",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Maintenance Plan",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"A005",di:"DI-CMAN-81250",t:"Config Status Accounting",el:"config",c:1},{s:"A006",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A008",di:"DI-MGMT-81466",t:"Program Mgmt Plan",el:"ilsmgmt",c:0}]},mh60s:{name:"MH-60S Knighthawk",ofc:"PMA-299",type:"Multi-Mission Helicopter",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Maintenance Plan",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"A005",di:"DI-CMAN-81250",t:"Config Status Accounting",el:"config",c:1},{s:"A006",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A008",di:"DI-MGMT-81466",t:"Program Mgmt Plan",el:"ilsmgmt",c:0}]},mq4c:{name:"MQ-4C Triton",ofc:"PMA-262",type:"Unmanned Maritime Surveillance",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Maintenance Plan",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"A005",di:"DI-CMAN-81250",t:"Config Status Accounting",el:"config",c:1},{s:"A006",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A007",di:"DI-MGMT-81466",t:"Program Mgmt Plan",el:"ilsmgmt",c:0}]},mq25:{name:"MQ-25A Stingray",ofc:"PMA-268",type:"Carrier-Based Unmanned Tanker",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Maintenance Plan",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"A005",di:"DI-CMAN-81250",t:"Config Status Accounting",el:"config",c:1},{s:"A006",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A007",di:"DI-MGMT-81466",t:"Program Mgmt Plan",el:"ilsmgmt",c:0}]},cmv22:{name:"CMV-22B Osprey",ofc:"PMA-275",type:"Carrier Onboard Delivery Tiltrotor",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Maintenance Plan",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"A005",di:"DI-CMAN-81250",t:"Config Status Accounting",el:"config",c:1},{s:"A006",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A008",di:"DI-MGMT-81466",t:"Program Mgmt Plan",el:"ilsmgmt",c:0}]},t45:{name:"T-45C Goshawk",ofc:"PMA-273",type:"Carrier Trainer Aircraft",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Maintenance Plan",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"A005",di:"DI-CMAN-81250",t:"Config Status Accounting",el:"config",c:1},{s:"A006",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A007",di:"DI-MGMT-81466",t:"Program Mgmt Plan",el:"ilsmgmt",c:0}]},ah1z:{name:"AH-1Z Viper",ofc:"PMA-276",type:"Attack Helicopter (USMC)",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Maintenance Plan",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"A005",di:"DI-CMAN-81250",t:"Config Status Accounting",el:"config",c:1},{s:"A006",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A008",di:"DI-MGMT-81466",t:"Program Mgmt Plan",el:"ilsmgmt",c:0}]},uh1y:{name:"UH-1Y Venom",ofc:"PMA-276",type:"Utility Helicopter (USMC)",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Maintenance Plan",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"A005",di:"DI-CMAN-81250",t:"Config Status Accounting",el:"config",c:1},{s:"A006",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A007",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:1},{s:"A008",di:"DI-MGMT-81466",t:"Program Mgmt Plan",el:"ilsmgmt",c:0}]},kc130j:{name:"KC-130J Super Hercules",ofc:"PMA-207",type:"Tanker/Transport (USMC)",drls:[{s:"A001",di:"DI-ILSS-81490",t:"Integrated Logistics Support Plan",el:"ilsmgmt",c:1},{s:"A002",di:"DI-ILSS-81494",t:"Maintenance Plan",el:"maint",c:1},{s:"A003",di:"DI-ILSS-81493",t:"Provisioning Technical Documentation",el:"supply",c:1},{s:"A004",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"A005",di:"DI-CMAN-81250",t:"Config Status Accounting",el:"config",c:1},{s:"A006",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:1},{s:"A007",di:"DI-MGMT-81466",t:"Program Mgmt Plan",el:"ilsmgmt",c:0}]},custom:{name:"Custom Program",ofc:"‚Äî",type:"User-Defined",drls:[{s:"C001",di:"DI-ILSS-81490",t:"Logistics Support Plan",el:"ilsmgmt",c:1},{s:"C002",di:"DI-ILSS-81494",t:"Maintenance Plan",el:"maint",c:1},{s:"C003",di:"DI-ILSS-81493",t:"Provisioning Documentation",el:"supply",c:1},{s:"C004",di:"DI-ILSS-81495",t:"Vendor Spares",el:"supply",c:0},{s:"C005",di:"DI-TMSS-81000",t:"Technical Manuals",el:"techdata",c:1},{s:"C006",di:"DI-CMAN-81250",t:"Configuration Accounting",el:"config",c:0},{s:"C007",di:"DI-TRAN-81476",t:"Training Plan",el:"training",c:0},{s:"C008",di:"DI-RELI-80255",t:"RAM Analysis",el:"ram",c:0}]}},W=new Proxy({},{get(t,e){if(typeof e=="string")return window.S4_getComponents?S4_getComponents(e):{systems:["System"],nsns:["0000-00-000-0001"],mfgs:["OEM"]}},has(t,e){return typeof e=="string"},ownKeys(){return window.S4_PLATFORMS?Object.keys(S4_PLATFORMS):[]},getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,value:window.S4_getComponents?S4_getComponents(e):void 0}}}),se={navy_pms300:[{di:"DI-001",t:"Contract Data Requirements List (CDRL)",el:"ilsmgmt"},{di:"DI-002",t:"Statement of Work (SOW) Compliance Matrix",el:"ilsmgmt"},{di:"DI-003",t:"Integrated Master Schedule (IMS)",el:"ilsmgmt"},{di:"DI-004",t:"Systems Engineering Plan (SEP)",el:"design"},{di:"DI-005",t:"Interface Control Document (ICD)",el:"design"},{di:"DI-006",t:"Test & Evaluation Master Plan (TEMP)",el:"ram"},{di:"DI-007",t:"Weight Report",el:"design"},{di:"DI-008",t:"Electrical Load Analysis",el:"design"},{di:"DI-009",t:"Purchase Order Index",el:"supply"},{di:"DI-010",t:"Long Lead Time Material List",el:"supply"},{di:"DI-011",t:"Government Furnished Material (GFM) List",el:"supply"},{di:"DI-012",t:"Hazardous Material (HazMat) List",el:"phst"},{di:"DI-013",t:"Lifting & Handling Plan",el:"phst"},{di:"DI-014",t:"Fire Protection Plan",el:"design"},{di:"DI-015",t:"Compartment Check-Off List (CCOL)",el:"maint"},{di:"DI-016",t:"Quality Assurance Plan",el:"ilsmgmt"},{di:"DI-017",t:"Welding Procedure Qualification Records",el:"maint"},{di:"DI-018",t:"Non-Destructive Testing (NDT) Procedures",el:"maint"},{di:"DI-019",t:"Post-Delivery Availability (PDA) Plan",el:"maint"},{di:"DI-020",t:"Vendor Recommended Spares (VRS)",el:"supply"},{di:"DI-021",t:"Allowance Parts List (APL)",el:"supply"},{di:"DI-022",t:"Allowance Equipage List (AEL)",el:"supply"},{di:"DI-023",t:"Technical Manual (Operator)",el:"techdata"},{di:"DI-024",t:"Technical Manual (Maintenance)",el:"techdata"},{di:"DI-025",t:"Damage Control Book",el:"techdata"},{di:"DI-026",t:"Ship Information Book (SIB)",el:"techdata"},{di:"DI-027",t:"Baseline Design Drawing Package",el:"config"},{di:"DI-028",t:"As-Built Drawing Package",el:"config"},{di:"DI-029",t:"Configuration Status Accounting (CSA)",el:"config"},{di:"DI-030",t:"Engineering Change Proposal (ECP)",el:"config"},{di:"DI-031",t:"Item Unique Identification (IUID) Register",el:"supply"},{di:"DI-032",t:"Maintenance Requirement Cards (MRCs)",el:"maint"},{di:"DI-033",t:"Planned Maintenance System (PMS) Index",el:"maint"},{di:"DI-034",t:"Reliability Analysis / FMECA",el:"ram"},{di:"DI-035",t:"Maintainability Analysis",el:"ram"},{di:"DI-036",t:"Availability (Ao) Analysis Report",el:"ram"},{di:"DI-037",t:"Level of Repair Analysis (LORA)",el:"maint"},{di:"DI-038",t:"Life Cycle Cost Analysis (LCCA)",el:"ilsmgmt"},{di:"DI-039",t:"Life Cycle Sustainment Plan (LCSP)",el:"ilsmgmt"},{di:"DI-040",t:"Crew Familiarization Training Plan",el:"training"},{di:"DI-041",t:"Machinery Equipment List (MEL)",el:"supply"},{di:"DI-042",t:"Safety Assessment Report",el:"design"},{di:"DI-043",t:"Environmental Compliance Plan",el:"phst"},{di:"DI-044",t:"Spares Buylist / Initial Outfitting",el:"supply"}],army:[{di:"DI-001",t:"LSA Record (LSAR) Data",el:"lsa"},{di:"DI-002",t:"MAC Code Assignment",el:"lsa"},{di:"DI-003",t:"RPSTL ‚Äî Repair Parts & Special Tools",el:"supply"},{di:"DI-004",t:"NET Plan / Training Support Package",el:"training"},{di:"DI-005",t:"MANPRINT Assessment Report",el:"manpower"},{di:"DI-006",t:"Transportability Report (C-17/C-130)",el:"phst"},{di:"DI-007",t:"Technical Manual TM 9-series",el:"techdata"},{di:"DI-008",t:"Depot Maintenance Work Requirements (DMWR)",el:"maint"},{di:"DI-009",t:"Provisioning Master Record",el:"supply"},{di:"DI-010",t:"Reliability Growth Test Plan",el:"ram"},{di:"DI-011",t:"RAM/Ao Threshold Analysis",el:"ram"},{di:"DI-012",t:"Fielding Plan",el:"ilsmgmt"},{di:"DI-013",t:"PBL Strategy Document",el:"supply"},{di:"DI-014",t:"Obsolescence Management Plan",el:"supply"},{di:"DI-015",t:"Safety Release Certificate",el:"design"}],airforce:[{di:"DI-001",t:"Technical Order (TO) Package",el:"techdata"},{di:"DI-002",t:"ODIN LCMP Integration",el:"compres"},{di:"DI-003",t:"Aerospace Ground Equipment (AGE) List",el:"se"},{di:"DI-004",t:"Mission Capable Rate Baseline",el:"ram"},{di:"DI-005",t:"Reliability Centered Maintenance Plan",el:"maint"},{di:"DI-006",t:"Software Configuration Baseline",el:"config"},{di:"DI-007",t:"Preliminary Design Review (PDR) Data",el:"design"},{di:"DI-008",t:"Critical Design Review (CDR) Data",el:"design"},{di:"DI-009",t:"Cybersecurity Assessment Report",el:"compres"},{di:"DI-010",t:"Aircrew Training Device Specifications",el:"training"},{di:"DI-011",t:"Maintenance Training Courseware",el:"training"},{di:"DI-012",t:"Depot Source of Repair (DSOR)",el:"maint"}],space:[{di:"DI-001",t:"On-Orbit Reliability Model",el:"ram"},{di:"DI-002",t:"Ground Segment Maintenance Plan",el:"maint"},{di:"DI-003",t:"Satellite Bus Configuration Baseline",el:"config"},{di:"DI-004",t:"Space Vehicle Integration Plan",el:"design"},{di:"DI-005",t:"STIG Compliance Matrix",el:"compres"},{di:"DI-006",t:"Launch Operations Logistics Plan",el:"phst"},{di:"DI-007",t:"Mission Crew Operations Manual",el:"training"},{di:"DI-008",t:"Constellation Availability Analysis",el:"ram"}],coastguard:[{di:"DI-001",t:"CG Maintenance Plan (PMS Format)",el:"maint"},{di:"DI-002",t:"CG Technical Manual (CG Format)",el:"techdata"},{di:"DI-003",t:"CG Provisioning Documentation",el:"supply"},{di:"DI-004",t:"C4ISR Logistics Plan",el:"compres"},{di:"DI-005",t:"Cutter Training Plan",el:"training"},{di:"DI-006",t:"Vessel Safety Assessment",el:"design"},{di:"DI-007",t:"Environmental Compliance (MARPOL)",el:"phst"},{di:"DI-008",t:"SAR Equipment List",el:"se"}],marines:[{di:"DI-001",t:"LSA Record (LSAR) ‚Äî Marine Corps",el:"lsa"},{di:"DI-002",t:"MOS Training Plan",el:"training"},{di:"DI-003",t:"CSS Equipment Requirements",el:"se"},{di:"DI-004",t:"Amphibious Operations Logistics",el:"phst"},{di:"DI-005",t:"Repair Parts Block Requirements",el:"supply"},{di:"DI-006",t:"Combat Configuration Baseline",el:"config"}]};function Tr(t){return["yrbm","apl","afdm","ydt","yon"].includes(t)||["ddg51","lcs","cvn78","ffg62","lpd17"].includes(t)?se.navy_pms300:["f35","f35b","ch53k"].includes(t)?se.airforce:["m1","stryker","ah64","himars"].includes(t)?se.army:["f35a","kc46","b21","c17"].includes(t)?se.airforce:["gps3","sbirs"].includes(t)?se.space:["nsc","opc","frc"].includes(t)?se.coastguard:["acv"].includes(t)?se.marines:se.navy_pms300}function tn(){const t=document.getElementById("ilsProgram").value,e=_[t];if(!e)return;const n=["Approved","Approved","Submitted","In Review","Overdue","Rejected","Approved","Approved","Submitted","Approved"],r=["2025-10-15","2025-12-01","2026-01-15","2026-02-01","2026-03-15","2026-04-01","2025-11-20","2026-05-01","2026-06-15","2025-09-01"],a=Tr(t);let i=`CDRL Seq,DI Number,Title,ILS Element,Status,Due Date,Contractor,Approval Authority
`;e.drls.forEach((s,d)=>{if(Math.random()<.15)return;const u=(d+Math.floor(Math.random()*3))%n.length;i+=s.s+","+s.di+',"'+s.t+'",'+(s.el||"")+","+n[u]+","+r[u]+",Primary Contractor,"+e.ofc+`
`}),a.forEach((s,d)=>{if(Math.random()<.25)return;const u=(d+Math.floor(Math.random()*4))%n.length,m="B"+String(d+1).padStart(3,"0");i+=m+","+s.di+',"'+s.t+'",'+s.el+","+n[u]+","+r[u]+",Primary Contractor,"+e.ofc+`
`}),Qe(t).forEach(s=>{Math.random()<.5&&(i+=',,"'+s.l+' ‚Äî Status Report",,Review Complete,2026-01-30,'+e.ofc+`,
`)});const c=new Blob([i],{type:"text/csv"}),l=new File([c],"DRL_Tracker_"+t.toUpperCase()+".csv",{type:"text/csv"});Q([l])}function Rr(t){if(!t)return;const e=document.getElementById("ilsProgram").value,n=_[e];if(!n){D("No Program Selected","Please select a program first.","warning");return}document.getElementById("sampleDocSelect").selectedIndex=0;const r=["Approved","Submitted","In Review","Overdue","Approved","Approved","Submitted","Approved"],a=["2025-10-15","2025-12-01","2026-01-15","2026-02-01","2026-03-15","2025-11-20","2026-05-01","2025-09-01"];let i,o,c="text/csv";switch(t){case"drl":tn();return;case"cdrl_matrix":{let s=`CDRL Seq,DI Number,Title,SOW Para,Status,Approval Date,Distribution,Copies,Format
`;n.drls.forEach((d,u)=>{s+=d.s+","+d.di+',"'+d.t+'",3.'+(u+1)+"."+Math.ceil(Math.random()*5)+","+r[u%r.length]+","+a[u%a.length]+`,Wide,3,Electronic
`}),i=s,o="CDRL_Matrix_"+e.toUpperCase()+".csv";break}case"vrs":i=an(),o="VRS_"+e.toUpperCase()+".csv";break;case"buylist":i=on(e),o="Spares_Buylist_"+e.toUpperCase()+".csv";break;case"po_index":i=sn(),o="PO_Index_"+e.toUpperCase()+".csv";break;case"gfm":{let s=`GFM Item,NSN,Description,Qty,Unit Cost,Total Cost,Lead Time,Status,Delivery Date
`;(W[e]||W.custom).systems.slice(0,8).forEach((m,p)=>{s+="GFM-"+String(p+1).padStart(3,"0")+","+Math.floor(Math.random()*9e12).toString().padStart(13,"0")+',"'+m+'",'+Math.ceil(Math.random()*4)+",$"+Math.floor(50+Math.random()*500)+"K,$"+Math.floor(100+Math.random()*2e3)+"K,"+Math.ceil(3+Math.random()*12)+" months,"+r[p%r.length]+","+a[p%a.length]+`
`}),i=s,o="GFM_List_"+e.toUpperCase()+".csv";break}case"hazmat":{let s=`HazMat ID,Material,MSDS Number,Location,Quantity,Unit,Storage Class,Status,Expiration
`;["JP-5 Fuel","Hydraulic Fluid MIL-PRF-83282","Anti-Corrosion Compound","Cleaning Solvent PD-680","Lubricating Oil MIL-PRF-9000","Paint System MIL-PRF-24635","CLP Lubricant","Refrigerant R-134a"].forEach((u,m)=>{s+="HM-"+String(m+1).padStart(3,"0")+',"'+u+'",MSDS-'+String(1e3+m)+",Compartment "+String.fromCharCode(65+m)+"-"+Math.ceil(Math.random()*10)+","+Math.ceil(Math.random()*200)+","+(m%2?"gal":"lb")+",Class "+(m%4+1)+",Current,2027-"+String(m+1).padStart(2,"0")+`-15
`}),i=s,o="HazMat_Inventory_"+e.toUpperCase()+".csv";break}case"lcsp":i=nn(e,n),o="LCSP_"+e.toUpperCase()+"_2026.txt",c="text/plain";break;case"mrc":{let s=`MRC Number,System,Periodicity,Man-Hours,Rate,Description,Tools Required,Parts Required,Safety Precautions
`;const u=(W[e]||W.custom).systems.slice(0,10),m=["D-1","W-2","M-4","Q-1","S-1","A-1"];u.forEach((p,f)=>{s+="MRC-"+m[f%m.length]+"-"+String(f+1).padStart(3,"0")+',"'+p+'",'+m[f%m.length]+","+String(.5+Math.random()*4).substring(0,3)+',MMA,"Inspect and service '+p.toLowerCase()+`","Standard Tool Kit","Per APL",Safety tag-out required
`}),i=s,o="MRC_Index_"+e.toUpperCase()+".csv";break}case"mel":if(typeof ct=="function")i=ct();else{let s=`MEL Item,Equipment,Manufacturer,Model,Location,Weight (lbs),Power (kW),Status
`;const d=W[e]||W.custom;d.systems.forEach((m,p)=>{s+="MEL-"+String(p+1).padStart(4,"0")+',"'+m+'",'+d.mfgs[p]+",Model-"+String(100+p)+","+(e.includes("f35")||e.includes("ah64")?"Station":"Comp")+"-"+(p+1)+","+Math.floor(500+Math.random()*5e3)+","+Math.floor(5+Math.random()*200)+`,Installed
`}),i=s}o="MEL_"+e.toUpperCase()+".csv";break;case"pms_schedule":{let s=`PMS Task,System,Periodicity,Next Due,Last Completed,Responsible,Status
`;["Oil Analysis","Filter Replacement","Belt Inspection","Valve Overhaul","Alignment Check","Bearing Replacement","Electrical Megging","Calibration","Hull Inspection","Safety Valve Test"].forEach((u,m)=>{s+="PMS-"+String(m+1).padStart(4,"0")+',"'+u+'",'+["Weekly","Monthly","Quarterly","Semi-Annual","Annual"][m%5]+",2026-"+String(m+1).padStart(2,"0")+"-15,2025-"+String(m+1).padStart(2,"0")+"-15,Ship's Force,"+["Current","Current","Overdue","Current","Upcoming"][m%5]+`
`}),i=s,o="PMS_Schedule_"+e.toUpperCase()+".csv";break}case"iuid":i=rn(),o="IUID_Register_"+e.toUpperCase()+".csv";break;case"config_baseline":{let s=`Config Item,Baseline Version,ECN Number,Status,Approval Date,Description,Impact
`;(W[e]||W.custom).systems.slice(0,10).forEach((m,p)=>{s+="CI-"+String(p+1).padStart(3,"0")+",Rev "+String.fromCharCode(65+p%3)+",ECN-2026-"+String(p+1).padStart(3,"0")+","+["Approved","Pending","Approved","In Review","Approved"][p%5]+","+a[p%a.length]+',"'+m+' baseline configuration",'+["None","Minor","None","Moderate","None"][p%5]+`
`}),i=s,o="Config_Baseline_"+e.toUpperCase()+".csv";break}case"weight_report":{let s=`SWBS Group,Description,Design Weight (lton),Margin (%),Growth Weight (lton),Status
`;[["100","Hull Structure"],["200","Propulsion"],["300","Electric Plant"],["400","Command & Surveillance"],["500","Auxiliary Systems"],["600","Outfit & Furnishings"],["700","Armament"],["F","Full Load Condition"]].forEach(u=>{const m=Math.floor(50+Math.random()*500);s+=u[0]+',"'+u[1]+'",'+m+","+Math.floor(3+Math.random()*7)+","+Math.round(m*1.05)+`,Within Margin
`}),i=s,o="Weight_Report_"+e.toUpperCase()+".csv";break}case"ela":{let s=`Load ID,Equipment,Condition,Connected Load (kW),Demand Factor,Operating Load (kW),Voltage,Phase
`;const d=["Normal Cruising","Battle/Emergency","In Port","Anchor"];(W[e]||W.custom).systems.slice(0,10).forEach((p,f)=>{s+="EL-"+String(f+1).padStart(3,"0")+',"'+p+'",'+d[f%d.length]+","+Math.floor(10+Math.random()*200)+",0."+Math.floor(60+Math.random()*35)+","+Math.floor(8+Math.random()*150)+`,440,3
`}),i=s,o="ELA_"+e.toUpperCase()+".csv";break}case"temp":{let s=`TEST AND EVALUATION MASTER PLAN (TEMP)
`+"=".repeat(50)+`

`;s+="Program: "+n.name+`
Office: `+n.ofc+`
Classification: UNCLASSIFIED

`,s+=`1.0 INTRODUCTION
This TEMP establishes the T&E strategy for `+n.name+`.

`,s+=`2.0 TEST OBJECTIVES
  2.1 Developmental Testing (DT)
  2.2 Operational Testing (OT)
  2.3 Live Fire Test & Evaluation (LFT&E)

`,s+=`3.0 TEST SCHEDULE
  Phase 1: Factory Acceptance Test (FAT) ‚Äî Month 18
  Phase 2: Dock Trials ‚Äî Month 24
  Phase 3: Sea Trials ‚Äî Month 26
  Phase 4: Operational Evaluation ‚Äî Month 30

`,s+=`4.0 CRITICAL OPERATIONAL ISSUES (COIs)
  COI-1: Can the system achieve required operational availability (Ao >= 0.85)?
  COI-2: Is the system suitable for its intended operational environment?
  COI-3: Can the crew effectively maintain the system?

`,s+=`5.0 RESOURCE REQUIREMENTS
  Test facilities, instrumentation, target services, and support personnel.

`,s+=`Prepared per DoDI 5000.89
`,i=s,o="TEMP_"+e.toUpperCase()+".txt",c="text/plain";break}case"icd":{let s=`INTERFACE CONTROL DOCUMENT (ICD)
`+"=".repeat(50)+`

`;s+="Program: "+n.name+`
Document: ICD-`+e.toUpperCase()+`-001
Revision: A

`,s+=`1.0 SCOPE
This ICD defines all system interfaces for `+n.name+`.

`,s+=`2.0 MECHANICAL INTERFACES
  2.1 Equipment Foundations ‚Äî Per MIL-STD-167
  2.2 Piping Connections ‚Äî Per MIL-STD-777
  2.3 Structural Attachments

`,s+=`3.0 ELECTRICAL INTERFACES
  3.1 Power ‚Äî 440V/60Hz 3-Phase
  3.2 Signal ‚Äî MIL-STD-1553B Data Bus
  3.3 Fiber Optic ‚Äî Per MIL-STD-2042

`,s+=`4.0 DATA INTERFACES
  4.1 Protocols: TCP/IP, NMEA 2000
  4.2 Data Rates: 100 Mbps minimum
  4.3 Cybersecurity: Per NIST 800-171

`,i=s,o="ICD_"+e.toUpperCase()+".txt",c="text/plain";break}case"training_plan":{let s=`NAVY TRAINING SYSTEM PLAN (NTSP)
`+"=".repeat(50)+`

`;s+="Program: "+n.name+`
Office: `+n.ofc+`

`,s+=`1.0 TRAINING CONCEPT
  Blended approach: classroom, OJT, simulation, CBT

`,s+=`2.0 COURSES
  2.1 Operator Course ‚Äî 4 weeks (NEC: `+String(4e3+Math.floor(Math.random()*999))+`)
  2.2 Maintenance Course ‚Äî 6 weeks (NEC: `+String(4e3+Math.floor(Math.random()*999))+`)
  2.3 Supervisor Course ‚Äî 2 weeks

`,s+=`3.0 TRAINING EQUIPMENT
  3.1 Part Task Trainer (PTT)
  3.2 Full Mission Simulator
  3.3 Computer-Based Training (CBT) modules

`,s+=`4.0 MILESTONES
  Course curriculum approval: Month 12
  First class convene: Month 20
  Training complete: Month 24
`,i=s,o="Training_Plan_"+e.toUpperCase()+".txt",c="text/plain";break}case"manpower":{let s=`Billet,Rate/Rating,NEC,Quantity,Watch Section,Dept,Remarks
`;[["Commanding Officer","O-4","0000",1,"‚Äî","CO",""],["Executive Officer","O-3","0000",1,"‚Äî","XO",""],["Chief Engineer","CWO-3","7412",1,"‚Äî","ENG",""],["Engineman","EN2","4233",4,"1/2/3/4","ENG","PMS Qualified"],["Electrician","EM2","4671",2,"1/2","ENG",""],["Boatswain","BM1","0000",2,"1/2","DECK",""],["Damage Controlman","DC2","4954",2,"1/2","ENG",""],["Operations Specialist","OS2","0000",2,"1/2","OPS",""],["Culinary Specialist","CS2","3531",2,"1/2","ADMIN",""],["Hospital Corpsman","HM3","0000",1,"‚Äî","ADMIN",""]].forEach(u=>{s+='"'+u[0]+'",'+u[1]+","+u[2]+","+u[3]+","+u[4]+","+u[5]+","+u[6]+`
`}),i=s,o="Manpower_Estimate_"+e.toUpperCase()+".csv";break}case"sow_matrix":{let s=`SOW Para,Title,Compliance Status,Deliverable,CDRL Ref,Remarks
`;["3.1 Systems Engineering","3.2 Design & Development","3.3 Test & Evaluation","3.4 ILS Planning","3.5 Configuration Management","3.6 Quality Assurance","3.7 Safety Engineering","3.8 Cybersecurity","3.9 Environmental Compliance","3.10 Program Management"].forEach((u,m)=>{s+='"'+u+'",'+["Compliant","Compliant","Partial","Compliant","Non-Compliant","Compliant","Partial","Compliant","Compliant","Compliant"][m]+","+(m<8?"A"+String(m+1).padStart(3,"0"):"‚Äî")+","+(m<8?"CDRL-"+String(m+1).padStart(3,"0"):"N/A")+`,
`}),i=s,o="SOW_Matrix_"+e.toUpperCase()+".csv";break}case"ims":{let s=`WBS,Task,Start,Finish,Duration (months),Predecessor,Status,% Complete
`;const d=["1.0 Program Management","1.1 Kick-off Meeting","2.0 Design Phase","2.1 Preliminary Design Review","2.2 Critical Design Review","3.0 Construction","3.1 Fabrication","3.2 Assembly","4.0 Test & Delivery","4.1 Sea Trials"];d.forEach((u,m)=>{const p=new Date(2025,m*2,1),f=new Date(2025,m*2+3,1);s+='"'+u+'",'+p.toISOString().split("T")[0]+","+f.toISOString().split("T")[0]+","+Math.ceil(2+Math.random()*4)+","+(m>0?d[m-1].split(" ")[0]:"")+","+["Complete","Complete","In Progress","Upcoming","Upcoming","Upcoming","Upcoming","Upcoming","Upcoming","Upcoming"][m]+","+[100,100,65,20,0,0,0,0,0,0][m]+`
`}),i=s,o="IMS_"+e.toUpperCase()+".csv";break}case"risk_register":{let s=`Risk ID,Category,Description,Probability,Impact,Risk Score,Mitigation,Owner,Status
`;[["R-001","Schedule","GFM delivery delay","Medium","High","12","Expedite procurement; identify alternates",n.ofc],["R-002","Technical","Weight growth exceeds margin","Low","High","8","Monthly weight tracking; design reviews","Engineering"],["R-003","Cost","Material cost escalation","Medium","Medium","9","Fixed-price subcontracts; hedging","Contracts"],["R-004","Supply","Long lead time items","High","Medium","12","Early procurement; buffer stock","Supply"],["R-005","Technical","Cyber vulnerability in COTS","Medium","High","12","Pen testing; STIG compliance","Cybersecurity"],["R-006","Schedule","Test facility availability","Low","Medium","6","Reserve slots early; backup sites","T&E"],["R-007","Manpower","Skilled labor shortage","Medium","Medium","9","Cross-training; retention bonuses","HR"],["R-008","Compliance","Environmental regulation change","Low","Low","4","Monitor regulatory updates","Environmental"]].forEach(u=>{s+=u.join(",")+`,Open
`}),i=s,o="Risk_Register_"+e.toUpperCase()+".csv";break}default:return}const l=new File([new Blob([i],{type:c})],o,{type:c});Q([l])}function Lr(){const t=document.getElementById("ilsProgram").value,e=_[t];if(!e)return;G=[],document.getElementById("ilsFileList").innerHTML="",tn();const n=nn(t,e);Q([new File([new Blob([n],{type:"text/plain"})],"LCSP_"+t.toUpperCase()+"_2026.txt",{type:"text/plain"})]);const r=rn();Q([new File([new Blob([r],{type:"text/csv"})],"IUID_Register_"+t.toUpperCase()+".csv",{type:"text/csv"})]);const a=an();Q([new File([new Blob([a],{type:"text/csv"})],"VRS_"+t.toUpperCase()+".csv",{type:"text/csv"})]);const i=on(t);Q([new File([new Blob([i],{type:"text/csv"})],"Spares_Buylist_"+t.toUpperCase()+".csv",{type:"text/csv"})]);const o=sn();if(Q([new File([new Blob([o],{type:"text/csv"})],"PO_Index_"+t.toUpperCase()+".csv",{type:"text/csv"})]),["yrbm","apl","afdm","ydt","yon","ddg51","lcs","cvn78","ffg62","lpd17","nsc","opc","frc"].includes(t)){const c=ct();Q([new File([new Blob([c],{type:"text/csv"})],"MEL_"+t.toUpperCase()+".csv",{type:"text/csv"})])}if(["yrbm","apl","afdm","ydt","yon","ddg51","lcs","cvn78","ffg62","lpd17","nsc","opc","frc"].includes(t)){const c=Er();Q([new File([new Blob([c],{type:"text/csv"})],"MRC_Index_"+t.toUpperCase()+".csv",{type:"text/csv"})])}}function nn(t,e){const n=document.getElementById("ilsHull")?.value||t.toUpperCase();return["‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê","  LIFE CYCLE SUSTAINMENT PLAN (LCSP)","  DI-ILSS-81490 / DI-039","‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê","","Program:         "+e.name,"Hull/Desig:      "+n,"Program Office:  "+e.ofc,"Platform Type:   "+e.type,"Document Rev:    Rev B (Draft)","Date:            "+new Date().toISOString().split("T")[0],"Classification:  UNCLASSIFIED","","‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ","1.0 PURPOSE","  This Life Cycle Sustainment Plan establishes the strategy for","  integrated logistics support of the "+e.name+" program","  throughout its projected 30-year service life.","","2.0 ILS ELEMENTS ADDRESSED","  2.1 Maintenance Planning (PMS/MRC Development)","  2.2 Supply Support (Provisioning, APL, COSAL)","  2.3 Technical Data (Tech Manuals, IETMs)","  2.4 Training & Training Support","  2.5 Support Equipment","  2.6 Manpower & Personnel","  2.7 Computer Resources / Mission Systems","  2.8 Facilities","  2.9 PHS&T","  2.10 Design Interface","","3.0 SUSTAINMENT STRATEGY","  3.1 Organic Maintenance: "+(e.ofc.includes("PMS")?"NAVSEA / Regional Maintenance Centers":"Service Depot-Level"),"  3.2 Contractor Maintenance: Post-Delivery Availability (PDA)","  3.3 Spares Strategy: DLA/NAVSUP with contractor initial provisioning","  3.4 Obsolescence: Proactive DMSMS monitoring program","","4.0 PERFORMANCE METRICS","  ‚Ä¢ Ao (Operational Availability): ‚â• 0.85","  ‚Ä¢ MTBF target: Per RAM analysis (DI-034)","  ‚Ä¢ MTTR target: Per Maintainability Analysis (DI-035)","  ‚Ä¢ Fill Rate (supply support): ‚â• 90%","","5.0 CONFIGURATION MANAGEMENT","  Baseline managed per DI-029 / DI-030 (CSA & ECP)","  IUID tracking per DI-031","","‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ","  LCSP generated by S4 Ledger Anchor-S4 Engine","  s4ledger.com ‚Äî Immutable logistics verification","‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê"].join(`
`)}function rn(t,e){const n=["Main Engine Assembly","Generator Set #1","Generator Set #2","Fire Pump","HVAC Unit","Steering Gear","Anchor Windlass","Crane Assembly","Radar System","Navigation Console","Comm Suite","Electrical Switchboard","Hydraulic Power Unit","Fuel Transfer Pump","Freshwater Distiller","Sewage Treatment Plant","Capstan","Life Raft Cradle","Shore Power Connection","Battery Charger"],r=["2815-01-234-5678","6115-01-345-6789","6115-01-345-6790","4210-01-456-7890","4120-01-567-8901","2540-01-678-9012","3950-01-789-0123","3810-01-890-1234","5820-01-901-2345","6605-01-012-3456"];let a=`IUID UII,NSN,Nomenclature,Manufacturer,Part Number,Serial Number,Acquisition Cost,Install Location,Status
`;return n.forEach((i,o)=>{const c="D"+String(Math.floor(1e5+Math.random()*9e5))+"S4"+String(o+1).padStart(4,"0"),l=r[o%r.length],s=["Cummins","Caterpillar","Honeywell","Raytheon","L3Harris","GE Marine","Rolls-Royce","BAE Systems","Northrop Grumman","Eaton"][o%10];a+=c+","+l+',"'+i+'",'+s+",PN-"+(1e3+o)+"-"+String(Math.floor(Math.random()*9999)).padStart(4,"0")+",SN-"+String(Math.floor(1e5+Math.random()*9e5))+",$"+(5e3+Math.floor(Math.random()*195e3)).toLocaleString()+","+["Engine Room","Bridge","Deck","Auxiliary","CIC","Berthing"][o%6]+","+["Installed","Installed","In Transit","Installed","Warehouse","Installed","Installed","QA Hold","Installed","Installed"][o%10]+`
`}),a}function an(t,e){const n=["Fuel Filter Element","Oil Filter","V-Belt Set","Seal Kit (Hydraulic)","Gasket Set","Bearing Assembly","Impeller (Pump)","Relay (24VDC)","Circuit Breaker (60A)","O-Ring Kit","Thermostat Assembly","Zinc Anode Set","Coupling (Flexible)","Pressure Gauge (0-300psi)","Sight Glass","Solenoid Valve","Check Valve (1.5in)","Expansion Valve","Temperature Sensor","Control Board (HVAC)"];let r=`VRS Line,NSN,Nomenclature,Part Number,Qty Rec,Unit Price,Lead Time (wks),Vendor,Criticality
`;return n.forEach((a,i)=>{const o=i<6?"Critical":i<14?"Essential":"Desirable";r+="VRS-"+String(i+1).padStart(3,"0")+",5330-01-"+String(Math.floor(100+Math.random()*900))+"-"+String(Math.floor(1e3+Math.random()*9e3))+',"'+a+'",PN-'+(2e3+i)+","+(1+Math.floor(Math.random()*10))+",$"+(15+Math.floor(Math.random()*2500)).toLocaleString()+","+(4+Math.floor(Math.random()*20))+","+["Parker Hannifin","Donaldson","Gates","SKF","Garlock","Timken","Flowserve","TE Connectivity","Eaton","Dana"][i%10]+","+o+`
`}),r}function on(t,e){let n=`Line,APL Number,NSN,Nomenclature,Qty Auth,Qty On Hand,Qty On Order,Unit Cost,Allowance Type,Notes
`;return["Packing Set","Bearing Ball","Connector Plug","Lamp Indicator","Fuse Cartridge","Hose Assembly","Valve Globe","Strainer Intake","Switch Toggle","Resistor Fixed","Capacitor Fixed","Transformer","Motor Starter","Contactor","Cable Assembly","Pipe Fitting","Bolt Set (SS)","Spring Compression","Diaphragm","Sensor Assembly"].forEach((a,i)=>{n+="SB-"+String(i+1).padStart(3,"0")+",APL-"+t.toUpperCase()+"-"+String(i+1).padStart(3,"0")+",5330-01-"+String(Math.floor(100+Math.random()*900))+"-"+String(Math.floor(1e3+Math.random()*9e3))+',"'+a+'",'+(2+Math.floor(Math.random()*8))+","+Math.floor(Math.random()*5)+","+Math.floor(Math.random()*3)+",$"+(8+Math.floor(Math.random()*800)).toLocaleString()+","+["COSAL","AVCAL","SHORCAL","COSAL"][i%4]+","+(i<5?"Flight Critical":"")+`
`}),n}function sn(t,e){let n=`PO Number,Vendor,Description,Value,Status,Ship Date,Contract Ref
`;const r=["Huntington Ingalls Industries","BAE Systems Ship Repair","General Dynamics NASSCO","Cummins Marine","L3Harris","Raytheon","Rolls-Royce Naval","Northrop Grumman","Leonardo DRS","Leidos"],a=["Main Engine Spare Parts","Generator Overhaul Kit","Navigation Radar Upgrade","Comm System Installation","Deck Machinery Spares","HVAC System Components","Electrical Distribution Panel","Fire Suppression System","Anchor Chain & Fittings","Hull Coating Materials","Paint & Preservation","Safety Equipment Package","Crane Wire Rope","Shore Power Transformer","Sewage System Parts"];for(let i=0;i<15;i++){const o="N00024-26-C-"+String(4e3+i).padStart(4,"0");n+=o+","+r[i%10]+',"'+a[i]+'",$'+(25e3+Math.floor(Math.random()*475e3)).toLocaleString()+","+["Awarded","In Progress","Delivered","In Progress","Awarded","Delivered","Pending","In Progress","Delivered","Awarded","In Progress","Delivered","Pending","Awarded","In Progress"][i]+","+[2026,2026,2025,2026,2026,2025,2026,2026,2025,2026,2026,2025,2026,2026,2025][i]+"-"+String(1+Math.floor(Math.random()*12)).padStart(2,"0")+"-15,N00024-25-D-"+String(Math.floor(1e3+Math.random()*9e3))+`
`}return n}function ct(t,e){let n=`MEL Item,System,Equipment,Manufacturer,Model,Location,Weight (lbs),Power (kW),Status
`;return[["Propulsion","Main Diesel Engine","Cummins","KTA50-M2","Engine Room"],["Propulsion","Reduction Gear","Reintjes","WAF 564","Engine Room"],["Electrical","Ship Service Generator","Caterpillar","C9.3 Marine","Gen Room"],["Electrical","Emergency Generator","John Deere","4045TFM85","Emerg Gen Room"],["Auxiliary","Fire Pump","Aurora","481-BF","Pump Room"],["Auxiliary","Bilge Pump","IMO","ACE 032","Bilge Well"],["HVAC","AC Plant","Carrier","30HX","Machine Shop"],["Navigation","Radar (Surface Search)","Furuno","FAR-2228","Bridge"],["Navigation","GPS Receiver","Furuno","GP-170","Bridge"],["Communication","VHF Radio","ICOM","IC-M510","Bridge"],["Communication","SATCOM Terminal","KVH","V7-HTS","Mast Top"],["Deck Machinery","Anchor Windlass","Burrard","AW-120","Fwd Deck"],["Deck Machinery","Capstan","Rotzler","TR 100","Aft Deck"],["Safety","Life Raft (25-person)","Viking","25DK+","Boat Deck"],["Crane","Mobile Crane","Palfinger","PK 40002","Main Deck"]].forEach((a,i)=>{n+="MEL-"+String(i+1).padStart(3,"0")+","+a[0]+',"'+a[1]+'",'+a[2]+","+a[3]+","+a[4]+","+(200+Math.floor(Math.random()*15e3))+","+(1+Math.floor(Math.random()*800))+","+["Installed","Installed","On Order","Installed","Installed","QA Hold","Installed","Installed","Installed","Installed","In Transit","Installed","Installed","Installed","On Order"][i]+`
`}),n}function Er(t,e){let n=`MRC Number,Periodicity,System,Description,Skill Rate,Est Hours,Critical
`;return[["MRC-DE-001","W","Main Engine","Lube Oil Level Check","EN2",.5,"No"],["MRC-DE-002","M","Main Engine","Fuel Filter Inspection","EN1",1,"Yes"],["MRC-DE-003","Q","Main Engine","Injector Timing Check","EN1",4,"Yes"],["MRC-EL-001","W","Electrical","Generator Load Test","EM2",1,"Yes"],["MRC-EL-002","M","Electrical","Battery Electrolyte Check","EM3",.5,"No"],["MRC-AX-001","M","Auxiliary","Fire Pump Performance Test","DC2",2,"Yes"],["MRC-AX-002","Q","Auxiliary","HVAC Refrigerant Check","MM2",1.5,"No"],["MRC-HU-001","SA","Hull","Cathodic Protection Inspection","HT2",3,"Yes"],["MRC-HU-002","A","Hull","Topside Paint Condition Survey","BM2",4,"No"],["MRC-NK-001","M","Navigation","Radar Performance Check","ET2",1,"Yes"],["MRC-NK-002","Q","Navigation","Compass Deviation Check","QM1",2,"No"],["MRC-DK-001","W","Deck","Wire Rope Inspection","BM2",1,"Yes"],["MRC-DK-002","M","Deck","Crane Load Test","BM1",4,"Yes"],["MRC-SF-001","M","Safety","Life Raft Hydrostatic Release","DC3",.5,"Yes"],["MRC-SF-002","Q","Safety","Fire Extinguisher Inspection","DC3",1,"Yes"]].forEach(a=>{n+=a.join(",")+`
`}),n}function _t(){const t=document.getElementById("ilsDropzone");t&&(["dragenter","dragover"].forEach(e=>t.addEventListener(e,n=>{n.preventDefault(),n.stopPropagation(),t.classList.add("dragover")})),["dragleave","drop"].forEach(e=>t.addEventListener(e,n=>{n.preventDefault(),n.stopPropagation(),t.classList.remove("dragover")})),t.addEventListener("drop",e=>Q(e.dataTransfer.files)),Pr())}const Ge={dmsms:[],parts:[],contracts:[]};function Pr(){["dmsms","parts","contracts"].forEach(t=>{const e=t==="contracts"?"contractsDropzone":t+"Dropzone",n=document.getElementById(e);n&&(["dragenter","dragover"].forEach(r=>n.addEventListener(r,a=>{a.preventDefault(),a.stopPropagation(),n.classList.add("dragover")})),["dragleave","drop"].forEach(r=>n.addEventListener(r,a=>{a.preventDefault(),a.stopPropagation(),n.classList.remove("dragover")})),n.addEventListener("drop",r=>ln(r.dataTransfer.files,t)))})}function ln(t,e){Array.from(t).forEach(n=>{const r=n.name.split(".").pop().toLowerCase();if(!["csv","xlsx","xls","txt","tsv","pdf","docx"].includes(r)){D("Unsupported File","File type ."+r+" is not supported.","warning");return}const a=new FileReader,i=(o,c)=>{const l={id:"f_"+Date.now()+"_"+Math.random().toString(36).substr(2,4),name:n.name,size:n.size,data:o,rows:c};Ge[e].push(l),cn(e)};r==="pdf"?(a.onload=async o=>{try{if(!window.pdfjsLib){D("Loading","PDF.js is still loading. Please wait a moment.","info");return}const c=await pdfjsLib.getDocument({data:new Uint8Array(o.target.result)}).promise;let l="";for(let d=1;d<=c.numPages;d++){const m=await(await c.getPage(d)).getTextContent();l+=m.items.map(p=>p.str).join(" ")+`
`}const s=Ue(l);i(s,s.rows.length)}catch(c){D("PDF Error",c.message,"danger")}},a.readAsArrayBuffer(n)):r==="docx"?(a.onload=async o=>{try{if(!window.mammoth){D("Loading","DOCX parser is still loading. Please wait a moment.","info");return}const c=await mammoth.extractRawText({arrayBuffer:o.target.result}),l=Ue(c.value);i(l,l.rows.length)}catch(c){D("DOCX Error",c.message,"danger")}},a.readAsArrayBuffer(n)):r==="xlsx"||r==="xls"?(a.onload=o=>{const c=mn(new Uint8Array(o.target.result));i(c,c.rows.length)},a.readAsArrayBuffer(n)):(a.onload=o=>{const c=r==="csv"||r==="tsv"?un(o.target.result):Ue(o.target.result);i(c,c.rows.length)},a.readAsText(n))})}function cn(t){const e=t==="contracts"?"contractsFileList":t+"FileList",n=document.getElementById(e);if(!n)return;const r=Ge[t];if(!r.length){n.innerHTML="";return}n.innerHTML=r.map(a=>{const i=a.size>1048576?(a.size/1048576).toFixed(1)+"MB":(a.size/1024).toFixed(0)+"KB";return'<div class="ils-file-item"><div class="file-info"><i class="fas '+(/\.xlsx?$/i.test(a.name)?"fa-file-excel":/\.csv$/i.test(a.name)?"fa-file-csv":/\.pdf$/i.test(a.name)?"fa-file-pdf":/\.docx$/i.test(a.name)?"fa-file-word":"fa-file-alt")+'" style="color:var(--accent);margin-right:8px"></i><span style="font-weight:600;color:#fff">'+a.name+'</span></div><div class="file-stats">'+a.rows+" rows detected ¬∑ "+i+`</div><button class="file-remove" onclick="removeToolFile('`+t+"','"+a.id+`')">√ó</button></div>`}).join("")}function xr(t,e){Ge[t]=Ge[t].filter(n=>n.id!==e),cn(t)}function Q(t){Array.from(t).forEach(e=>{const n=e.name.split(".").pop().toLowerCase();if(!["csv","xlsx","xls","txt","tsv","pdf","docx","doc"].includes(n)){D("Unsupported File","File type ."+n+" is not supported.","warning");return}const r=new FileReader;n==="pdf"?(r.onload=async a=>{const i=new Uint8Array(a.target.result),o=await Nr(i),c=Fe(o);_e(e.name,e.size,c,o.rows.length),runAutoAnalysisOnUpload(e.name,o,c)},r.readAsArrayBuffer(e)):n==="docx"?(r.onload=async a=>{const i=await Br(a.target.result),o=Fe(i);_e(e.name,e.size,o,i.rows.length),runAutoAnalysisOnUpload(e.name,i,o)},r.readAsArrayBuffer(e)):n==="xlsx"||n==="xls"?(r.onload=a=>{const i=new Uint8Array(a.target.result),o=mn(i),c=Fe(o);_e(e.name,e.size,c,o.rows.length),runAutoAnalysisOnUpload(e.name,o,c)},r.readAsArrayBuffer(e)):(r.onload=a=>{const i=a.target.result,o=n==="csv"||n==="tsv"?un(i):Ue(i),c=Fe(o);_e(e.name,e.size,c,o.rows.length),runAutoAnalysisOnUpload(e.name,o,c)},r.readAsText(e))})}function _e(t,e,n,r){G.push({id:"f_"+Date.now()+"_"+Math.random().toString(36).substr(2,4),name:t,size:e,records:n,totalRows:r}),dn(),bt()}function kr(t){G=G.filter(e=>e.id!==t),dn(),bt()}function dn(){const t=document.getElementById("ilsFileList");if(t){if(!G.length){t.innerHTML="";return}t.innerHTML=G.map(e=>{const n=e.size>1048576?(e.size/1048576).toFixed(1)+"MB":(e.size/1024).toFixed(0)+"KB";return'<div class="ils-file-item"><div class="file-info"><i class="fas '+(/\.xlsx?$/i.test(e.name)?"fa-file-excel":/\.csv$/i.test(e.name)?"fa-file-csv":/\.pdf$/i.test(e.name)?"fa-file-pdf":/\.docx$/i.test(e.name)?"fa-file-word":"fa-file-alt")+'" style="color:var(--accent);margin-right:8px"></i><span style="font-weight:600;color:#fff">'+e.name+'</span></div><div class="file-stats">'+e.records.length+" DRL items detected from "+e.totalRows+" rows ¬∑ "+n+`</div><button class="file-remove" onclick="removeILSFile('`+e.id+`')">√ó</button></div>`}).join("")}}function un(t){const e=t.split(/\r?\n/).filter(o=>o.trim());if(e.length<2)return{headers:[],rows:[]};const n=(e[0].match(/\t/g)||[]).length>(e[0].match(/,/g)||[]).length?"	":",";function r(o){const c=[];let l="",s=!1;for(let d=0;d<o.length;d++){const u=o[d];u==='"'?s=!s:u===n.charAt(0)&&!s?(c.push(l.trim()),l=""):l+=u}return c.push(l.trim()),c}const a=r(e[0]),i=e.slice(1).map(o=>{const c=r(o);return a.reduce((l,s,d)=>(l[s]=c[d]||"",l),{})}).filter(o=>Object.values(o).some(c=>c));return{headers:a,rows:i}}function mn(t){if(typeof XLSX>"u")return D("Loading","Excel parser is loading ‚Äî please try again in a moment.","info"),{headers:[],rows:[]};try{const e=XLSX.read(t,{type:"array"});let n=e.SheetNames.find(l=>/drl|cdrl|ils|deliverable/i.test(l))||e.SheetNames[0];const r=e.Sheets[n],a=XLSX.utils.sheet_to_json(r,{header:1,defval:""});if(a.length<2)return{headers:[],rows:[]};let i=0;for(let l=0;l<Math.min(a.length,10);l++)if(a[l].filter(s=>String(s).trim()).length>=3){i=l;break}const o=a[i].map(l=>String(l).trim()),c=a.slice(i+1).filter(l=>l.some(s=>String(s).trim())).map(l=>o.reduce((s,d,u)=>(s[d]=String(l[u]||"").trim(),s),{}));return{headers:o,rows:c}}catch{return{headers:[],rows:[]}}}function Ue(t){const e=t.split(/\r?\n/).filter(a=>a.trim()),n=/DI-[A-Z]{4}-\d{5}/g,r=[];return e.forEach(a=>{const i=a.match(n);i&&i.forEach(o=>r.push({DI:o,Title:a.trim().substring(0,120)}))}),{headers:["DI","Title"],rows:r}}async function Nr(t){if(typeof pdfjsLib>"u")return D("Loading","PDF parser is loading ‚Äî please try again in a moment.","info"),{headers:[],rows:[]};try{const e=await pdfjsLib.getDocument({data:t}).promise,n=[];for(let l=1;l<=e.numPages;l++){const u=(await(await e.getPage(l)).getTextContent()).items.map(m=>m.str).join(" ");n.push(u)}const r=n.join(`
`),a=/DI-[A-Z]{4}-\d{5}/g,i=[],o=r.split(/[\n.;]+/).filter(l=>l.trim().length>10);o.forEach(l=>{const s=l.match(a);s&&s.forEach(d=>i.push({DI:d,Title:l.trim().substring(0,200)}))});const c=/\b\d{4}-\d{2}-\d{3}-\d{4}\b/g;return o.forEach(l=>{const s=l.match(c);s&&!l.match(a)&&s.forEach(d=>i.push({NSN:d,Title:l.trim().substring(0,200)}))}),{headers:i.length?Object.keys(i[0]):["DI","Title"],rows:i.length?i:o.slice(0,50).map(l=>({Title:l.trim()}))}}catch(e){return{headers:["Title"],rows:[{Title:"PDF parsing error: "+e.message}]}}}async function Br(t){if(typeof mammoth>"u")return D("Loading","DOCX parser is loading ‚Äî please try again in a moment.","info"),{headers:[],rows:[]};try{const n=(await mammoth.extractRawText({arrayBuffer:t})).value,r=/DI-[A-Z]{4}-\d{5}/g,a=[],i=n.split(/\n/).filter(l=>l.trim().length>5);i.forEach(l=>{const s=l.match(r);s&&s.forEach(d=>a.push({DI:d,Title:l.trim().substring(0,200)}))});const o=i.filter(l=>(l.match(/\t/g)||[]).length>=2||(l.match(/  +/g)||[]).length>=2);if(o.length>5&&a.length===0){const l=(o[0].match(/\t/g)||[]).length>=2?"	":/  +/,s=o[0].split(l).map(d=>d.trim()).filter(d=>d);return o.slice(1).forEach(d=>{const u=d.split(l).map(p=>p.trim()).filter(p=>p),m={};s.forEach((p,f)=>{m[p]=u[f]||""}),a.push(m)}),{headers:s,rows:a}}const c=/\b\d{4}-\d{2}-\d{3}-\d{4}\b/g;return i.forEach(l=>{const s=l.match(c);s&&!l.match(r)&&s.forEach(d=>a.push({NSN:d,Title:l.trim().substring(0,200)}))}),{headers:a.length?Object.keys(a[0]):["Title"],rows:a.length?a:i.slice(0,50).map(l=>({Title:l.trim()}))}}catch(e){return{headers:["Title"],rows:[{Title:"DOCX parsing error: "+e.message}]}}}function Or(t){const e=t.map(n=>n.toLowerCase().replace(/[^a-z0-9\s]/g,""));return{seq:e.findIndex(n=>/cdrl|seq|line\s*item|exhibit|item\s*no/.test(n)),di:e.findIndex(n=>/\bdi\b|did\b|data\s*item/.test(n)),title:e.findIndex(n=>/title|description|name|data\s*product/.test(n)),status:e.findIndex(n=>/status|state|deliverable\s*status|approval/.test(n)),due:e.findIndex(n=>/due|date|deadline|submit|required\s*date/.test(n)),contractor:e.findIndex(n=>/contractor|vendor|supplier/.test(n))}}function Fe(t){if(!t.rows.length)return[];const e=Or(t.headers),n=[];return t.rows.forEach(r=>{let a="",i="",o="",c="",l="";e.seq>=0&&(a=r[t.headers[e.seq]]||""),e.di>=0&&(i=r[t.headers[e.di]]||""),e.title>=0&&(o=r[t.headers[e.title]]||""),e.status>=0&&(c=r[t.headers[e.status]]||""),e.due>=0&&(l=r[t.headers[e.due]]||""),i||Object.values(r).forEach(d=>{const u=String(d).match(/DI-[A-Z]{4}-\d{5}/);u&&!i&&(i=u[0])}),o||(o=Object.values(r).reduce((d,u)=>{const m=String(u);return m.length>d.length&&!/^DI-/.test(m)&&!/^[A-C]\d{3}$/.test(m)?m:d},""));const s=i&&wr[i]||Ft(o);(i||o&&o.length>3)&&n.push({seq:a,di:i,title:o,status:c.toLowerCase(),due:l,element:s})}),n}function Ft(t){return t=t.toLowerCase(),/ils\s*p|logistics\s*support\s*plan|program\s*mgmt|program\s*management/.test(t)?"ilsmgmt":/maintenance|pms\b|mrc\b|mip\b|planned\s*maint/.test(t)?"maint":/supply|spare|provisioning|buylist|allowance|apl\b|cosal/.test(t)?"supply":/support\s*equip|se\b|tools|test\s*equip/.test(t)?"se":/technical\s*(manual|data|pub|order)|tm\b|ietm|tech\s*data/.test(t)?"techdata":/training|trainer|course|curriculum|school|net\b.*plan/.test(t)?"training":/manpower|personnel|manning|billet|manprint/.test(t)?"manpower":/computer|software|cyber|alis|odin/.test(t)?"compres":/facilit|shore\s*infra/.test(t)?"facilities":/phs.?t|packaging|handling|storage|transport|hazmat/.test(t)?"phst":/design\s*interface|interface\s*doc/.test(t)?"design":/ram\b|reliab|avail|maintain|fmeca|fracas|failure/.test(t)?"ram":/config|baseline|ecp|engineering\s*change/.test(t)?"config":/lsa\b|logistics\s*support\s*analy|mac\b|rpstl/.test(t)?"lsa":""}function _r(t,e){const n=t.toLowerCase().replace(/[^a-z0-9\s]/g,"").split(/\s+/).filter(a=>a.length>3),r=e.toLowerCase().replace(/[^a-z0-9\s]/g,"").split(/\s+/).filter(a=>a.length>3);return!n.length||!r.length?!1:n.filter(a=>r.includes(a)).length>=Math.min(2,Math.ceil(r.length*.4))}function Ee(t){const e=document.getElementById("ilsChecklist");if(!e)return;const n=Qe(t||document.getElementById("ilsProgram").value);e.innerHTML=n.map(r=>'<label style="display:flex;align-items:center;gap:6px;cursor:pointer;padding:4px 6px;border-radius:3px;transition:background 0.2s;'+(r.c?"font-weight:600":"")+`" onmouseover="this.style.background='rgba(0,170,255,0.05)'" onmouseout="this.style.background='transparent'"><input type="checkbox" id="ils_`+r.id+'" style="width:auto!important;accent-color:var(--accent)"><span>'+r.l+(r.c?' <span style="color:var(--red);font-size:0.7rem">CRITICAL</span>':"")+"</span></label>").join("")}function bt(){const t=document.getElementById("ilsProgram").value,e=Qe(t),n=[];G.forEach(a=>a.records.forEach(i=>{i.title&&n.push(i.title),i.di&&n.push(i.di)}));const r=n.join(" ");e.forEach(a=>{const i=document.getElementById("ils_"+a.id);i&&a.kw.test(r)&&(i.checked=!0)})}function Ve(){document.querySelectorAll("canvas[data-bp-rendered]").forEach(function(l){l.removeAttribute("data-bp-rendered")}),document.querySelectorAll(".ils-hub-panel[data-charts-injected]").forEach(function(l){l.removeAttribute("data-charts-injected")});var t=document.getElementById("ilsProgram").value;if(t){if(t==="custom"||t==="__custom__"){la();return}var e=_[t];if(e){var n=document.getElementById("ilsOffice");n&&(n.value=e.ofc),Ee(t),bt(),M=null,document.getElementById("ilsScore").textContent="--",document.getElementById("ilsScore").style.color="var(--muted)",document.getElementById("ilsScoreLabel").textContent="Upload documents & run analysis",document.getElementById("ilsGaugeFill").style.width="0%",document.getElementById("ilsCoverage").innerHTML='<div style="color:var(--muted);text-align:center;padding:1rem">Upload files to see checklist coverage.</div>',document.getElementById("ilsActions").innerHTML='<div style="color:var(--muted);text-align:center;padding:1rem;font-size:0.85rem">Run analysis to generate action items.</div>',document.getElementById("ilsCostSchedule").innerHTML='<div style="color:var(--muted);text-align:center;padding:1rem">Analysis required to estimate impact.</div>';var r=document.getElementById("ilsResult");if(r&&(r.innerHTML="",r.classList.remove("show")),["dmsmsProgram","readinessProgram","lifecycleProgram","complianceProgram","riskProgram","pdmPlatform","subProgram"].forEach(function(l){var s=document.getElementById(l);s&&(s.value=t)}),typeof pe=="function")try{pe()}catch{}else if(typeof dmsmsItems<"u"){for(var a=[],i=[{nsn:"5961-01-123-4567",nomen:"CAPACITOR,FIXED",cage:"1HP47",status:"Obsolete",alt:"5961-01-999-8888"},{nsn:"5962-01-234-5678",nomen:"MICROCIRCUIT,DIGITAL",cage:"96214",status:"At-Risk (Diminishing)",alt:"5962-01-888-7777"},{nsn:"5905-01-345-6789",nomen:"RESISTOR,FIXED",cage:"81205",status:"Active",alt:"‚Äî"},{nsn:"5935-01-456-7890",nomen:"CONNECTOR,PLUG",cage:"77820",status:"EOL Planned",alt:"5935-01-777-6666"},{nsn:"6625-01-567-8901",nomen:"OSCILLOSCOPE",cage:"30003",status:"Discontinued",alt:"6625-01-666-5555"},{nsn:"5820-01-678-9012",nomen:"RADIO SET",cage:"13413",status:"At-Risk (Diminishing)",alt:"5820-01-555-4444"},{nsn:"1270-01-789-0123",nomen:"SIGHT,FIRE CONTROL",cage:"11672",status:"Active",alt:"‚Äî"}],o=4+Math.floor(e.name.length%5),c=0;c<Math.min(o,i.length);c++)a.push(Object.assign({},i[c],{program:e.name}));dmsmsItems=a}if(typeof be=="function")try{be()}catch{}if(typeof ve=="function")try{ve()}catch{}if(typeof calcLifecycle=="function")try{calcLifecycle()}catch{}if(typeof Ie=="function")try{Ie()}catch{}if(typeof ge=="function")try{ge()}catch{}setTimeout(function(){var l=document.querySelector(".ils-hub-panel.active");if(l&&typeof _bpRenderInPanel=="function")try{_bpRenderInPanel(l)}catch{}},400)}}}function vt(){const t=document.getElementById("ilsProgram").value,e=_[t];if(!e){D("No Program","Please select a program.","warning");return}const n=document.getElementById("ilsHull")?.value||"",r=document.getElementById("ilsPhase")?.value||"design",a=Qe(t),i=a.map(h=>{const v=document.getElementById("ils_"+h.id);return{...h,checked:v?v.checked:!1}}),o=i.filter(h=>h.checked),l=i.filter(h=>!h.checked).filter(h=>h.c),s=i.reduce((h,v)=>h+(v.c?2:1),0),d=o.reduce((h,v)=>h+(v.c?2:1),0),u=s>0?Math.round(d/s*100):0,m=[];G.forEach(h=>m.push(...h.records));const p=e.drls.map(h=>{const v=m.find(E=>E.di&&E.di===h.di||E.seq&&E.seq===h.s||E.title&&_r(E.title,h.t));return{...h,found:!!v,status:v?v.status||"detected":"missing",due:v?.due||""}}),f=p.filter(h=>h.found).length,g=p.length,b=g>0?Math.round(f/g*100):0,A=G.length>0?Math.round(u*.6+b*.4):u,C=[];let T=1;l.forEach(h=>{C.push({id:"CL-"+String(T++).padStart(3,"0"),severity:"critical",source:"checklist",title:h.l,action:"Complete and verify: "+h.l,owner:e.ofc+" / Contractor",secondary:"",cost:40,schedule:"1-3 months"})}),p.filter(h=>!h.found&&h.c).forEach(h=>{const v=it[h.el]||{p:"TBD",s:""};C.push({id:"DRL-"+String(T++).padStart(3,"0"),severity:"critical",source:"drl",title:h.di+" ‚Äî "+h.t,action:"Request submission of "+h.di,owner:v.p,secondary:v.s,cost:ot[h.el]||50,schedule:"2-4 months"})}),p.filter(h=>h.found&&/overdue|late|reject|disapprov/.test(h.status)).forEach(h=>{const v=it[h.el]||{p:"TBD",s:""};C.push({id:"ACT-"+String(T++).padStart(3,"0"),severity:"warning",source:"drl",title:h.di+" ‚Äî "+h.t+" ("+h.status.toUpperCase()+")",action:/reject|disapprov/.test(h.status)?"Review comments & resubmit":"Issue CAR for late delivery",owner:v.p,secondary:v.s,cost:Math.round((ot[h.el]||50)*.4),schedule:"1-2 months"})}),p.filter(h=>!h.found&&!h.c).forEach(h=>{const v=it[h.el]||{p:"TBD",s:""};C.push({id:"DRL-"+String(T++).padStart(3,"0"),severity:"warning",source:"drl",title:h.di+" ‚Äî "+h.t,action:"Request submission of "+h.di,owner:v.p,secondary:v.s,cost:Math.round((ot[h.el]||30)*.5),schedule:"1-2 months"})}),C.sort((h,v)=>(h.severity==="critical"?0:1)-(v.severity==="critical"?0:1));const P=C.filter(h=>h.severity==="critical").length,O=C.reduce((h,v)=>h+v.cost,0),q={},de={"Supply Support":["supply","spares","provisioning","pica","sica","allowance","apl","cosal","repairables"],"Maintenance Planning":["maintenance","pms","mrc","3-m","rmc","depot","overhaul","avail","maint_plan"],"Technical Data":["tech_data","technical","tm","ecp","drawing","specification","navsea_drawing","tdp"],Training:["training","course","trainee","curriculum","simulation","ntsp","ctt"],"Config Management":["config","configuration","baseline","change_control","ecp_review","audit"],DMSMS:["dmsms","obsolescence","diminishing","replacement","alternate","lifecycle_buy"],"PHS&T":["packaging","handling","storage","transport","phst","container","shipping"],Reliability:["reliability","mtbf","mttr","ram","failure","fracas","rma","rcm"],"Support Equipment":["support_equip","se","test_equip","calibration","tmde","tools"],Manpower:["manpower","personnel","manning","billet","rate","mos","navy_rate"]};Object.keys(de).forEach(function(h){var v=de[h],E=i.filter(function(fe){var xn=(fe.l+" "+fe.id+" "+(fe.el||"")).toLowerCase();return v.some(function(kn){return xn.indexOf(kn)>=0})});if(E.length===0)q[h]={score:u,items:0};else{var N=E.filter(function(fe){return fe.checked}).length;q[h]={score:E.length>0?Math.round(N/E.length*100):0,items:E.length}}}),M={clItems:i,clPct:u,drlResults:p,drlPct:b,drlFound:f,drlTotal:g,pct:A,actions:C,critGaps:P,totalCost:O,prog:e,hull:n,phase:r,progKey:t,cl:a,elements:q},Fr(A,P),Ur(i,p),Hr(C),Gr(C,O,P),Vr()}function Fr(t,e){const n=document.getElementById("ilsScore"),r=document.getElementById("ilsScoreLabel"),a=document.getElementById("ilsGaugeFill");n&&(n.textContent=t+"%",n.style.color=t>=80?"#00aaff":t>=50?"#ffa500":"#ff3333",r.textContent=t>=80?"ILS Package: Mission Ready":t>=50?"Gaps Identified ("+e+" critical)":"Critical Gaps ("+e+" items require action)",a.style.width=t+"%")}function Ur(t,e){const n=document.getElementById("ilsCoverage");if(!n)return;let r='<div style="font-weight:700;color:var(--accent);margin-bottom:8px;font-size:0.82rem">PROGRAM CHECKLIST</div>';if(t.forEach(a=>{const i=a.checked?"fa-check-circle":"fa-times-circle",o=a.checked?"#00aaff":a.c?"#ff3333":"var(--muted)";r+='<div style="display:flex;align-items:center;gap:6px;padding:3px 0;font-size:0.82rem;border-bottom:1px solid rgba(255,255,255,0.03)"><i class="fas '+i+'" style="color:'+o+';font-size:0.75rem;min-width:14px"></i><span style="color:'+(a.checked?"var(--steel)":"var(--muted)")+'">'+a.l+"</span>"+(a.c&&!a.checked?'<span style="color:#ff3333;font-size:0.65rem;font-weight:700;margin-left:auto">GAP</span>':"")+"</div>"}),e&&e.length){const a=e.filter(i=>i.found).length;r+='<div style="font-weight:700;color:var(--accent);margin:12px 0 6px;font-size:0.82rem">DRL COVERAGE: '+a+"/"+e.length+"</div>",r+='<div class="ils-coverage-bar" style="margin-bottom:4px"><div class="ils-coverage-fill" style="width:'+Math.round(a/e.length*100)+"%;background:"+(a/e.length>=.8?"#00aaff":a/e.length>=.5?"#ffa500":"#ff3333")+'"></div></div>'}n.innerHTML=r}function Hr(t){const e=document.getElementById("ilsActions");if(!e)return;if(!t.length){e.innerHTML='<div style="color:var(--accent);text-align:center;padding:1rem"><i class="fas fa-check-circle" style="font-size:1.5rem;display:block;margin-bottom:6px"></i>No gaps detected. ILS package appears complete.</div>';return}const n=t.filter(i=>i.severity==="critical"),r=t.filter(i=>i.severity==="warning");let a="";n.length&&(a+='<div style="color:var(--red);font-weight:700;margin-bottom:6px;font-size:0.82rem"><i class="fas fa-skull-crossbones"></i> CRITICAL ('+n.length+")</div>",n.forEach(i=>{a+=Ut(i)})),r.length&&(a+='<div style="color:#ffa500;font-weight:700;margin:8px 0 6px;font-size:0.82rem"><i class="fas fa-exclamation-triangle"></i> WARNING ('+r.length+")</div>",r.forEach(i=>{a+=Ut(i)})),e.innerHTML=a}function Ut(t){return'<div class="ils-action-item '+(t.severity==="critical"?"critical":"warning")+'"><div class="action-header"><span class="action-title">'+t.id+": "+t.title+'</span><span class="action-owner">'+t.owner+'</span></div><div class="action-detail"><strong>Action:</strong> '+t.action+'</div><div class="action-detail"><strong>Est. Cost:</strong> '+X(t.cost)+" &middot; <strong>Schedule Risk:</strong> "+t.schedule+(t.secondary?" &middot; <strong>Coord:</strong> "+t.secondary:"")+"</div></div>"}function Gr(t,e,n){const r=document.getElementById("ilsCostSchedule");if(!r)return;if(!t.length){r.innerHTML='<div style="color:var(--accent);text-align:center;padding:0.5rem"><i class="fas fa-check-circle"></i> No cost or schedule risk identified.</div>';return}const a=n>3?"6-12 months":n>0?"2-6 months":"< 2 months";r.innerHTML='<div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px"><div style="background:rgba(255,51,51,0.08);border:1px solid rgba(255,51,51,0.2);border-radius:3px;padding:12px;text-align:center"><div style="font-size:1.5rem;font-weight:800;color:#ff3333">'+X(e)+'</div><div style="font-size:0.75rem;color:var(--muted)">Est. Risk Cost</div></div><div style="background:rgba(255,165,0,0.08);border:1px solid rgba(255,165,0,0.2);border-radius:3px;padding:12px;text-align:center"><div style="font-size:1.5rem;font-weight:800;color:#ffa500">'+a+'</div><div style="font-size:0.75rem;color:var(--muted)">Schedule Risk</div></div></div><div style="display:grid;grid-template-columns:1fr 1fr;gap:12px"><div style="text-align:center;padding:8px"><div style="font-size:1.2rem;font-weight:700;color:#ff3333">'+n+'</div><div style="font-size:0.75rem;color:var(--muted)">Critical Path Items</div></div><div style="text-align:center;padding:8px"><div style="font-size:1.2rem;font-weight:700;color:#ffa500">'+t.length+'</div><div style="font-size:0.75rem;color:var(--muted)">Total Action Items</div></div></div>'}function Vr(){if(!M)return;const t=M,e=document.getElementById("ilsResult"),n=t.prog.name+(t.hull?" ‚Äî "+t.hull:""),r=document.getElementById("ilsPhase")?.selectedOptions[0]?.text||"",a=t.clItems.filter(i=>i.checked).length;e.innerHTML='<div class="result-label">ILS ANALYSIS ‚Äî '+n.toUpperCase()+'</div><div style="margin:0.5rem 0;font-size:0.85rem;color:var(--muted)">Office: '+t.prog.ofc+" ¬∑ Phase: "+r+" ¬∑ Files: "+G.length+'</div><div style="margin:0.8rem 0"><span style="font-size:1.3rem;font-weight:800;color:'+(t.pct>=80?"var(--green)":t.pct>=50?"#ffa500":"var(--red)")+'">'+t.pct+'% Overall Readiness</span></div><div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin:0.8rem 0"><div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:8px;text-align:center"><div style="font-size:1.1rem;font-weight:700;color:var(--accent)">'+a+"/"+t.clItems.length+'</div><div style="font-size:0.72rem;color:var(--muted)">Checklist Items</div></div><div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:8px;text-align:center"><div style="font-size:1.1rem;font-weight:700;color:var(--accent)">'+t.drlFound+"/"+t.drlTotal+'</div><div style="font-size:0.72rem;color:var(--muted)">DRL Items Verified</div></div></div>'+(t.critGaps>0?'<div style="background:rgba(255,51,51,0.08);border:1px solid rgba(255,51,51,0.2);border-radius:3px;padding:10px;margin:0.8rem 0;font-size:0.88rem"><i class="fas fa-exclamation-triangle" style="color:#ff3333"></i> <strong style="color:#ff3333">'+t.critGaps+" critical gap"+(t.critGaps>1?"s":"")+" found</strong> ‚Äî Est. risk: <strong>"+X(t.totalCost)+"</strong>. See Action Items.</div>":'<div style="background:rgba(0,170,255,0.06);border:1px solid rgba(0,170,255,0.2);border-radius:3px;padding:10px;margin:0.8rem 0;font-size:0.88rem"><i class="fas fa-check-circle" style="color:var(--accent)"></i> <strong style="color:var(--accent)">All critical items accounted for.</strong> Package appears ready for review.</div>')+'<div style="margin-top:1rem;font-size:0.78rem;color:var(--muted)">Analysis based on DoW 5000 series ILS requirements per program type. Always verify against your contract-specific DRL.</div>',e.classList.add("show"),gn(),addAiMessage("Analysis complete! <strong>"+t.prog.name+"</strong> scored <strong>"+t.pct+"%</strong> readiness with <strong>"+t.critGaps+" critical gaps</strong>. Ask me anything about the results.","bot")}function It(){if(M||vt(),!M){D("No Analysis","Please select a program and run analysis first.","warning");return}const t=M,e=t.prog,n=document.getElementById("ilsPhase")?.selectedOptions[0]?.text||"",r=new Date;let a="‚ïê".repeat(65)+`
`;a+=`  S4 LEDGER ‚Äî ILS DATA PACKAGE GAP ANALYSIS REPORT
`,a+="‚ïê".repeat(65)+`

`,a+="Program:        "+e.name+(t.hull?" ("+t.hull+")":"")+`
`,a+="Program Office: "+e.ofc+`
`,a+="Platform Type:  "+e.type+`
`,a+="Phase:          "+n+`
`,a+="Report Date:    "+r.toISOString().split("T")[0]+`
`,a+=`Analyst Tool:   S4 Ledger Anchor-S4 v3.0
`,a+=`Classification: UNCLASSIFIED

`,a+="‚îÄ".repeat(65)+`
`,a+="  OVERALL READINESS:     "+t.pct+`%
`,a+="  Checklist Score:       "+t.clPct+"% ("+t.clItems.filter(s=>s.checked).length+"/"+t.clItems.length+` items)
`,a+="  DRL Coverage:          "+t.drlPct+"% ("+t.drlFound+"/"+t.drlTotal+` items)
`,a+="  Critical Gaps:         "+t.critGaps+`
`,a+="  Total Action Items:    "+t.actions.length+`
`,a+="  Est. Risk Cost:        "+X(t.totalCost)+`
`,a+="‚îÄ".repeat(65)+`

`,a+="DOCUMENTS ANALYZED ("+G.length+`):
`,G.length?G.forEach(s=>{a+="  ‚Ä¢ "+s.name+" ‚Äî "+s.records.length+` items detected
`}):a+=`  (No files uploaded ‚Äî analysis based on checklist only)
`,a+=`

PROGRAM-SPECIFIC ILS CHECKLIST:
`+"‚îÄ".repeat(65)+`
`,t.clItems.forEach(s=>{a+="  ["+(s.checked?"‚úì":"‚úó")+"] "+s.l+(s.c?" (CRITICAL)":"")+(s.checked?"":" *** GAP ***")+`
`}),a+=`

DRL/CDRL COVERAGE:
`+"‚îÄ".repeat(65)+`
`,t.drlResults.forEach(s=>{a+="  ["+(s.found?"‚úì":"‚úó")+"] "+s.s+" "+s.di+" ‚Äî "+s.t,s.found?a+=" ("+s.status+")":a+=" *** MISSING ***",s.c&&(a+=" [CRITICAL]"),a+=`
`}),t.actions.length&&(a+=`

ACTION ITEMS:
`+"‚ïê".repeat(65)+`
`,t.actions.forEach(s=>{a+=`
  `+s.id+" ["+s.severity.toUpperCase()+`]
`,a+="  Item:        "+s.title+`
`,a+="  Action:      "+s.action+`
`,a+="  Responsible: "+s.owner+(s.secondary?" (Coord: "+s.secondary+")":"")+`
`,a+="  Cost Impact: "+X(s.cost)+"   Schedule Risk: "+s.schedule+`
`,a+="  "+"‚îÄ".repeat(50)+`
`})),a+=`

`+"‚îÄ".repeat(65)+`
  RECOMMENDATIONS:
`,t.critGaps>0?(a+=`  1. Address all CRITICAL action items before next milestone review.
`,a+=`  2. Issue Corrective Action Requests (CARs) for missing deliverables.
`,a+=`  3. Schedule ILS Review Board to discuss gaps with contractor.
`,a+=`  4. Update program risk register with identified cost/schedule impacts.
`):(a+=`  1. Conduct final review of all deliverables for completeness.
`,a+=`  2. Verify configuration baseline matches as-built documentation.
`,a+=`  3. Proceed to next milestone with ILS package approval.
`),a+=`
`+"‚îÄ".repeat(65)+`
  Generated by S4 Ledger | s4ledger.com
`,a+=`  Hash-verified logistics for the defense industry
`+"‚ïê".repeat(65)+`
`;const i=new Blob([a],{type:"text/plain"}),o=URL.createObjectURL(i),c=document.createElement("a");c.href=o,c.download="ILS_Gap_Analysis_"+t.progKey.toUpperCase()+"_"+r.toISOString().split("T")[0]+".txt",c.click(),URL.revokeObjectURL(o);const l=document.getElementById("ilsResult");l.innerHTML='<div style="color:var(--accent);font-size:0.95rem;font-weight:700;margin-bottom:8px"><i class="fas fa-download"></i> Report downloaded!</div><pre style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:1rem;font-size:0.7rem;color:var(--steel);max-height:300px;overflow-y:auto;white-space:pre-wrap">'+a+`</pre><button style="margin-top:8px;background:rgba(0,170,255,0.1);border:1px solid rgba(0,170,255,0.3);color:var(--accent);border-radius:3px;padding:6px 16px;cursor:pointer;font-family:inherit;font-size:0.82rem;font-weight:600" onclick="navigator.clipboard.writeText(document.querySelector('#ilsResult pre').textContent).then(()=>this.innerHTML='<i class=\\'fas fa-check\\'></i> Copied!')"><i class="fas fa-copy"></i> Copy to Clipboard</button>`,l.classList.add("show")}function pn(){var t=parseFloat(document.getElementById("roiPrograms").value)||0,e=parseFloat(document.getElementById("roiRecords").value)||0,n=parseFloat(document.getElementById("roiFTEs").value)||0,r=parseFloat(document.getElementById("roiRate").value)||0,a=parseFloat(document.getElementById("roiAudit").value)||0,i=parseFloat(document.getElementById("roiError").value)||0,o=parseFloat(document.getElementById("roiIncidents").value)||0,c=parseFloat(document.getElementById("roiLicense").value)||0,l=n*2080,s=l*r,d=s*.65,u=o*i*.9,m=a*.7,p=t*e,f=p>0?d/12/p:0,g=d+u+m,b=g-c,w=c>0?b/c*100:0,A=g>0?Math.ceil(c/g*12):0,C=g*5-c*5,T=function(O){return document.getElementById(O)};T("roiSavings")&&(T("roiSavings").textContent="$"+ye(Math.round(b))),T("roiSavings")&&(T("roiSavings").style.color=b>0?"#00cc66":"#ff4444"),T("roiPercent")&&(T("roiPercent").textContent=w.toFixed(0)+"%",T("roiPercent").style.color=w>0?"#00cc66":"#ff4444"),T("roiPayback")&&(T("roiPayback").textContent=A+" mo"),T("roi5Year")&&(T("roi5Year").textContent="$"+ye(Math.round(C)),T("roi5Year").style.color=C>0?"#00cc66":"#ff4444");var P=T("roiOutput");P&&(P.innerHTML='<div style="background:var(--surface);border:1px solid var(--border);border-radius:3px;padding:20px;margin-top:12px"><div class="section-label"><i class="fas fa-chart-line"></i> ROI BREAKDOWN</div><div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;font-size:0.85rem;margin-bottom:16px"><div><span style="color:var(--steel)">Labor Automation (65%)</span><br><strong style="color:#00cc66">$'+ye(Math.round(d))+'</strong></div><div><span style="color:var(--steel)">Error Reduction (90%)</span><br><strong style="color:#00cc66">$'+ye(Math.round(u))+'</strong></div><div><span style="color:var(--steel)">Audit Cost Reduction (70%)</span><br><strong style="color:#00cc66">$'+ye(Math.round(m))+'</strong></div><div><span style="color:var(--steel)">S4 Ledger License</span><br><strong style="color:#ff6b6b">-$'+ye(Math.round(c))+'</strong></div></div><hr style="border-color:var(--border);margin:12px 0"><div style="display:flex;justify-content:space-between;align-items:center"><div><span style="color:var(--steel);font-size:0.82rem">Net Annual Savings</span><br><span style="font-size:1.5rem;font-weight:800;color:'+(b>0?"#00cc66":"#ff4444")+'">$'+ye(Math.round(b))+'</span></div><div><span style="color:var(--steel);font-size:0.82rem">Per-Record Savings</span><br><span style="font-size:1.1rem;font-weight:700;color:var(--accent)">$'+f.toFixed(2)+"/record</span></div></div></div>"),typeof renderROICharts=="function"&&setTimeout(renderROICharts,200)}function ye(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function qr(){var t=document.getElementById("roiPrograms").value,e=document.getElementById("roiFTEs").value,n=document.getElementById("roiRate").value,r=document.getElementById("roiSavings")?.textContent||"",a=document.getElementById("roiPercent")?.textContent||"",i=document.getElementById("roiPayback")?.textContent||"",o=document.getElementById("roi5Year")?.textContent||"",c=`S4 Ledger ROI Analysis
Generated,`+new Date().toISOString()+`

Programs Managed,`+t+`
ILS FTEs,`+e+`
Labor Rate/hr,$`+n+`

Annual Savings,`+r+`
ROI %,`+a+`
Payback Period,`+i+`
5-Year Net Savings,`+o+`
`,l=new Blob([c],{type:"text/csv"}),s=document.createElement("a");s.href=URL.createObjectURL(l),s.download="s4_roi_report_"+new Date().toISOString().split("T")[0]+".csv",s.click()}async function zr(){var t=document.getElementById("roiSavings")?.textContent||"",e=document.getElementById("roiPercent")?.textContent||"",n="ROI Analysis | Net Savings: "+t+" | ROI: "+e+" | Date: "+new Date().toISOString(),r=await H(n);ae(r,"ROI Analysis Report","CUI"),S.anchored++,S.types.add("ROI_REPORT"),S.slsFees=Math.round((S.slsFees+.01)*100)/100,V(),z();var a=await ie(r,"ROI_REPORT",n.substring(0,100)),i={hash:r,type:"ROI_REPORT",branch:"JOINT",timestamp:new Date().toISOString(),label:"S4 Ledger ROI Analysis",txHash:a.txHash};x.push(i),re({hash:r,record_type:"ROI_REPORT",record_label:"S4 Ledger ROI Analysis",branch:"JOINT",timestamp:new Date().toISOString(),timestamp_display:new Date().toISOString().replace("T"," ").substring(0,19)+" UTC",fee:.01,tx_hash:a.txHash,system:"ROI Calculator",explorer_url:a.explorerUrl,network:a.network}),ee(),$({hash:r,txHash:a.txHash,type:"ROI_REPORT",label:"S4 Ledger ROI Analysis",branch:"JOINT",icon:'<i class="fas fa-dollar-sign"></i>',content:n.substring(0,100),encrypted:!1,timestamp:new Date().toISOString(),source:"ROI Calculator",fee:.01,explorerUrl:a.explorerUrl,network:a.network}),typeof me=="function"&&me(),setTimeout(function(){document.getElementById("animStatus").innerHTML='<i class="fas fa-check-circle" style="color:var(--accent)"></i> ROI Report anchored!'},2200),await new Promise(o=>setTimeout(o,3500)),Z()}async function Wr(){if(M||vt(),!M)return;const t=JSON.stringify({program:M.prog.name,hull:M.hull,score:M.pct,critGaps:M.critGaps,totalActions:M.actions.length,riskCost:M.totalCost,date:new Date().toISOString(),files:G.map(c=>c.name)}),e=await H(t);ae(e,"ILS Gap Analysis Report","UNCLASSIFIED");const{txHash:n,explorerUrl:r,network:a}=await ie(e,"ILS_GAP_ANALYSIS","ILS Report: "+M.prog.name),i={type:"ILS_GAP_ANALYSIS",label:"ILS Gap Analysis Report",icon:"üß†",branch:"JOINT",hash:e,txHash:n,encrypted:!1,timestamp:new Date().toISOString(),content:"ILS Analysis: "+M.prog.name+" ‚Äî "+M.pct+"% readiness"};x.push(i),re({hash:e,record_type:"ILS_GAP_ANALYSIS",record_label:"ILS Gap Analysis Report",branch:"JOINT",icon:"üß†",timestamp:new Date().toISOString(),timestamp_display:new Date().toISOString().replace("T"," ").substring(0,19)+" UTC",fee:.01,tx_hash:n,system:"Anchor-S4"}),$({hash:e,txHash:n,type:"ILS_GAP_ANALYSIS",label:"ILS Gap Analysis Report",branch:"JOINT",icon:'<i class="fas fa-brain"></i>',content:"ILS Analysis: "+M.prog.name+" ‚Äî "+M.pct+"% readiness",encrypted:!1,timestamp:new Date().toISOString(),source:"ILS Gap Analysis",fee:.01,explorerUrl:r,network:a}),S.anchored++,S.types.add("ILS_GAP_ANALYSIS"),S.slsFees=Math.round((S.slsFees+.01)*100)/100,V(),z(),await new Promise(c=>setTimeout(c,3200)),Z(),await new Promise(c=>setTimeout(c,400));const o=document.getElementById("ilsResult");o.innerHTML='<div class="result-label">ILS REPORT ANCHORED TO XRPL</div><div style="color:var(--accent);font-weight:700;margin:0.5rem 0"><i class="fas fa-check-circle"></i> Report hash anchored successfully!</div><div class="result-label" style="margin-top:0.8rem">SHA-256 HASH</div><div class="hash-display">'+e+'</div><div class="result-label">TX HASH</div><div style="color:var(--muted);margin-bottom:0.5rem;word-break:break-all">'+n+'</div><div class="result-label">PROGRAM</div><div style="margin-bottom:0.5rem">'+M.prog.name+(M.hull?" ("+M.hull+")":"")+'</div><div class="result-label">READINESS</div><div style="margin-bottom:0.5rem;color:'+(M.pct>=80?"var(--green)":M.pct>=50?"#ffa500":"var(--red)")+';font-weight:700">'+M.pct+'%</div><div class="result-label">CREDIT FEE</div><div>0.01 Credits from your account ‚Üí S4 Treasury</div><div style="margin-top:0.8rem;font-size:0.82rem;color:var(--muted)">This hash is now immutably recorded on the XRP Ledger. Anyone with the original data can verify its integrity.</div>',o.classList.add("show"),gn(),ee()}function gn(){const t=document.getElementById("ilsPostActions");t&&(t.style.display="block")}function Xr(){if(!M)return;const t="ILS Gap Analysis ‚Äî "+M.prog.name+" ‚Äî "+M.pct+"% Readiness";document.getElementById("sendSubject").value=t,document.getElementById("sendModal").classList.add("active")}function fn(){document.getElementById("sendModal").classList.remove("active")}function Jr(){const t=document.getElementById("sendEmail").value.trim(),e=document.getElementById("sendSubject").value,n=document.getElementById("sendMessage").value+`

`+At(),r="mailto:"+encodeURIComponent(t)+"?subject="+encodeURIComponent(e)+"&body="+encodeURIComponent(n);window.open(r,"_blank"),fn()}function jr(){const t=At();navigator.clipboard.writeText(t).then(()=>{D("Copied","Analysis copied to clipboard!","success")})}function At(){if(!M)return"";const t=M;let e=`S4 LEDGER ‚Äî ILS GAP ANALYSIS SUMMARY
`;return e+=`‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
`,e+="Program: "+t.prog.name+(t.hull?" ("+t.hull+")":"")+`
`,e+="Office: "+t.prog.ofc+`
`,e+="Overall Readiness: "+t.pct+`%
`,e+="Critical Gaps: "+t.critGaps+`
`,e+="Total Action Items: "+t.actions.length+`
`,e+="Est. Risk Cost: "+X(t.totalCost)+`

`,t.actions.length&&(e+=`TOP ACTION ITEMS:
`,t.actions.slice(0,5).forEach(n=>{e+="  ‚Ä¢ ["+n.severity.toUpperCase()+"] "+n.title+" ‚Äî "+n.owner+`
`})),e+=`
Generated by S4 Ledger | s4ledger.com
`,e}function $r(){if(!M)return;const t="ILS Review Board ‚Äî "+M.prog.name+" ("+M.pct+"% Readiness)";document.getElementById("meetTitle").value=t;const e=new Date;e.setDate(e.getDate()+((3-e.getDay()+7)%7||7)),document.getElementById("meetDate").value=e.toISOString().split("T")[0],document.getElementById("meetingModal").classList.add("active")}function Ct(){document.getElementById("meetingModal").classList.remove("active")}function Kr(){const t=document.getElementById("meetTitle").value,e=document.getElementById("meetDate").value,n=document.getElementById("meetTime").value,r=document.getElementById("meetAttendees").value,a="https://teams.microsoft.com/l/meeting/new?subject="+encodeURIComponent(t)+"&attendees="+encodeURIComponent(r)+"&startTime="+e+"T"+n;window.open(a,"_blank"),Ct()}function Yr(){if(!M)return;const t=document.getElementById("meetTitle").value,e=document.getElementById("meetDate").value.replace(/-/g,""),n=document.getElementById("meetTime").value.replace(":","")+"00",r=String(parseInt(document.getElementById("meetTime").value.split(":")[0])+1).padStart(2,"0")+document.getElementById("meetTime").value.split(":")[1]+"00",a=At(),i=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//S4 Ledger//Anchor-S4//EN","BEGIN:VEVENT","DTSTART:"+e+"T"+n,"DTEND:"+e+"T"+r,"SUMMARY:"+t,"DESCRIPTION:"+a.replace(/\n/g,"\\n"),"ORGANIZER:S4 Ledger Anchor-S4","END:VEVENT","END:VCALENDAR"].join(`\r
`),o=new Blob([i],{type:"text/calendar"}),c=document.createElement("a");c.href=URL.createObjectURL(o),c.download="ILS_Review_"+M.progKey+".ics",c.click(),Ct()}function Qr(){if(!M||!M.actions.length){D("No Actions","Run analysis first to generate action items.","warning");return}let t=`Action ID,Severity,Title,Required Action,Responsible Party,Coordinator,Est Cost ($K),Schedule Risk,Status,Due Date,Notes
`;M.actions.forEach(r=>{const a=new Date;a.setDate(a.getDate()+(r.severity==="critical"?30:60)),t+=r.id+","+r.severity.toUpperCase()+',"'+r.title+'","'+r.action+'",'+r.owner+","+(r.secondary||"")+","+r.cost+","+r.schedule+",Open,"+a.toISOString().split("T")[0]+`,
`});const e=new Blob([t],{type:"text/csv"}),n=document.createElement("a");n.href=URL.createObjectURL(e),n.download="Action_Tracker_"+M.progKey.toUpperCase()+"_"+new Date().toISOString().split("T")[0]+".csv",n.click()}function Zr(){if(!M){D("No Analysis","Run analysis first.","warning");return}It(),setTimeout(()=>window.print(),500)}function ea(){if(!M){D("No Analysis","Run analysis first.","warning");return}It()}let Te=!1;function qe(){Te=!Te;const t=document.getElementById("aiFloatPanel");t&&(t.classList.toggle("open",Te),Te&&setTimeout(()=>document.getElementById("aiChatInput")?.focus(),350))}const ta={"hub-analysis":{label:"Gap Analysis",icon:"fa-chart-line",buttons:[["Summarize my gaps","Summarize Gaps"],["What are the critical items?","Critical Items"],["Draft a CAR","Draft CAR"],["Estimate total risk","Risk Estimate"],["What DI numbers am I missing?","Missing DIs"],["Suggest next steps","Next Steps"],["Draft a memo","Draft Memo"],["Draft an email","Draft Email"]]},"hub-actions":{label:"Action Items",icon:"fa-tasks",buttons:[["How many open actions?","Open Actions"],["Show critical items","Critical Items"],["Who has the most tasks?","Task Load"],["Suggest priorities","Prioritize"],["Draft a follow-up email","Follow-Up Email"],["What is overdue?","Overdue Items"]]},"hub-dmsms":{label:"DMSMS Tracker",icon:"fa-exclamation-triangle",buttons:[["What parts are obsolete?","Obsolete Parts"],["Find alternate sources","Alt Sources"],["Estimate DMSMS cost impact","Cost Impact"],["Draft a DMSMS report","DMSMS Report"],["What is DMSMS?","Explain DMSMS"],["Show risk by program","Risk by Program"]]},"hub-readiness":{label:"Readiness",icon:"fa-chart-line",buttons:[["Calculate Ao","Calc Availability"],["What is MTBF vs MTTR?","MTBF/MTTR"],["Compare readiness benchmark","Benchmark"],["Suggest readiness improvements","Improvements"],["Draft readiness brief","Readiness Brief"]]},"hub-roi":{label:"ROI Calculator",icon:"fa-dollar-sign",buttons:[["Calculate ROI for my program","Calc ROI"],["What are the labor savings?","Labor Savings"],["Show 5-year projection","5-Year Projection"],["Compare vs legacy systems","Legacy Comparison"],["Draft an ROI brief","ROI Brief"]]},"hub-lifecycle":{label:"Lifecycle Cost",icon:"fa-clock",buttons:[["Estimate total ownership cost","TOC Estimate"],["Break down sustainment costs","Sustainment Breakdown"],["What drives lifecycle cost?","Cost Drivers"],["Compare to similar platforms","Platform Comparison"],["Draft lifecycle memo","Lifecycle Memo"]]},"hub-vault":{label:"Audit Vault",icon:"fa-vault",buttons:[["How many records in the vault?","Vault Stats"],["Search for a record","Search Vault"],["What is the audit trail?","Explain Vault"],["How is data secured?","Vault Security"],["Export vault to CSV","Export CSV"],["Re-verify a hash","Verify Hash"]]},"hub-docs":{label:"Doc Library",icon:"fa-book",buttons:[["Find GEIA-STD-0007","Find Doc"],["What documents cover ILS?","ILS Documents"],["Show NAVSEA standards","NAVSEA Docs"],["Browse NIST frameworks","NIST Frameworks"],["What is a DI number?","Explain DIs"]]},"hub-compliance":{label:"Compliance",icon:"fa-shield-halved",buttons:[["Calculate my compliance score","Calc Score"],["What is CMMC Level 2?","Explain CMMC"],["Show NIST 800-171 controls","NIST Controls"],["What DFARS clauses apply?","DFARS Clauses"],["How do I improve my score?","Improve Score"],["Draft compliance memo","Compliance Memo"]]},"hub-risk":{label:"Risk Engine",icon:"fa-triangle-exclamation",buttons:[["What are the highest risk parts?","Top Risks"],["Show single-source dependencies","Single Source"],["Any GIDEP alerts?","GIDEP Alerts"],["Estimate risk cost impact","Cost Impact"],["What is supply chain risk?","Explain Risk"],["Draft risk mitigation plan","Risk Plan"]]},"hub-reports":{label:"Report Generator",icon:"fa-file-pdf",buttons:[["Generate a full audit package","Full Audit"],["What compliance score do I have?","Compliance Score"],["Create a DCMA-ready report","DCMA Report"],["How are reports verified?","Report Verification"],["What report types are available?","Report Types"]]},"hub-predictive":{label:"Predictive Maint",icon:"fa-brain",buttons:[["What failures are predicted?","Predictions"],["Show urgent maintenance needs","Urgent Items"],["How much can we save?","Cost Savings"],["What is MTBF trending?","MTBF Trends"],["Draft maintenance advisory","Maint Advisory"],["How does the AI model work?","Explain Model"]]},"hub-submissions":{label:"Submissions & PTD",icon:"fa-file-circle-check",buttons:[["Run a demo analysis","Demo Analysis"],["What submission types are tracked?","Submission Types"],["How does the discrepancy engine work?","Discrepancy Engine"],["What red flags does it catch?","Red Flags"],["How much does this tool save?","Cost Savings"],["Show submission history","History"],["How does AI help with reviews?","AI Review"],["Draft a discrepancy report","Draft Report"]]},"hub-sbom":{label:"SBOM Viewer",icon:"fa-cubes",buttons:[["Scan for CVEs","CVE Scan"],["Show risk summary","Risk Summary"],["Check EO 14028 compliance","EO 14028"],["List all licenses","Licenses"],["Identify firmware components","Firmware"],["What is an SBOM?","Explain SBOM"],["Draft SBOM attestation","SBOM Attestation"],["Show supply chain risks","Supply Chain Risk"]]}};function yn(t){const e=ta[t];if(!e)return;const n=document.getElementById("aiContextTool");n&&(n.textContent=e.label);const r=document.getElementById("aiQuickBtns");r&&(r.innerHTML=e.buttons.map(a=>`<button class="ai-quick-btn" onclick="aiAsk('${a[0]}')">${a[1]}</button>`).join(""))}document.addEventListener("DOMContentLoaded",()=>{yn("hub-analysis");const t=document.getElementById("aiFloatWrapper");t&&(t.style.display="flex")});function na(t){Te||qe();const e=document.getElementById("aiChatInput");e&&(e.value=t,setTimeout(()=>hn(),150))}async function hn(){const t=document.getElementById("aiChatInput"),e=t.value.trim();if(!e)return;t.value="";const n=document.getElementById("aiChatMessages");n.innerHTML+='<div class="ai-msg ai-user"><div class="ai-bubble">'+e.replace(/</g,"&lt;")+"</div></div>",n.scrollTop=n.scrollHeight;const r="think_"+Date.now();n.innerHTML+='<div class="ai-msg ai-bot" id="'+r+'"><div class="ai-bubble"><i class="fas fa-circle-notch fa-spin"></i> Thinking...</div></div>',n.scrollTop=n.scrollHeight;const a=document.querySelector(".ils-hub-tab.active")?.textContent?.trim()||"General";let i=null;typeof M<"u"&&M&&(i={program:M.prog?.name||"",readiness_pct:M.pct,checklist_pct:M.clPct,drl_coverage:M.drlPct,critical_gaps:M.critGaps,total_cost_risk:M.totalCost,top_actions:(M.actions||[]).slice(0,5).map(s=>s.title+" ("+s.severity+")")});const o=n.querySelectorAll(".ai-bubble"),c=[];o.forEach((s,d)=>{if(s.closest("#"+r))return;const u=s.closest(".ai-user")!==null;c.push({role:u?"user":"assistant",content:s.textContent.trim()})}),c.length>20&&c.splice(0,c.length-20);let l=!1;try{const s=await fetch("/api/ai-chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,conversation:c,tool_context:a,analysis_data:i})});if(s.ok){const d=await s.json();if(d.response&&!d.fallback){let u=d.response.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/^### (.+)$/gm,"<h5>$1</h5>").replace(/^## (.+)$/gm,"<h4>$1</h4>").replace(/^- (.+)$/gm,"‚Ä¢ $1<br>").replace(/\n/g,"<br>");const m=document.getElementById(r);m&&(m.querySelector(".ai-bubble").innerHTML=u),l=!0}}}catch{}if(!l){const s=Sn(e),d=document.getElementById(r);d&&(d.querySelector(".ai-bubble").innerHTML=s)}n.scrollTop=n.scrollHeight}function Sn(t){var e=t.toLowerCase().trim();if(/^(hi|hello|hey|greetings|good morning|good afternoon)/.test(e))return`Hello! I'm the S4 Ledger AI Agent. I can help you with:

‚Ä¢ **Anchoring records** to the XRP Ledger
‚Ä¢ **Verifying** document integrity
‚Ä¢ **ILS analysis** and defense logistics
‚Ä¢ **Supply chain risk** assessment
‚Ä¢ **SLS token** and pricing questions

What would you like to do?`;if(/what.*mode|am i in.*mode|how.*work/.test(e)){var n="";return k&&(n+='Your account has <strong style="color:#c9a84c">'+(k.sls_balance||"25,000")+" Credits</strong> allocated. Each anchor costs 0.01 Credits, which is transferred to the S4 Treasury on the XRP Ledger."),n+`

You can anchor records, verify hashes, and explore the full Anchor-S4 workspace. Each anchor creates a permanent, verifiable entry on the XRP Ledger.`}if(/sls token|what is sls|sls price|token price|how much/.test(e))return`**Credits (SLS ‚Äî Secure Logistics Standard)** is the utility token for S4 Ledger:

‚Ä¢ **Price:** $0.01 per Credit
‚Ä¢ **Anchor cost:** 0.01 Credits per record (~$0.0001)
‚Ä¢ **Tiers:** Pilot (free/100 Credits), Starter ($999/25K Credits), Professional ($2,499/100K Credits), Enterprise ($9,999/500K Credits)
‚Ä¢ **Issuer:** \`r95GyZac4butvVcsTWUPpxzekmyzaHsTA5\`
‚Ä¢ **Trade on:** [xMagnetic](https://xmagnetic.org/tokens/SLS+r95GyZac4butvVcsTWUPpxzekmyzaHsTA5)`;if(/how.*(anchor|hash)|what.*anchor|explain.*anchor/.test(e))return`**How Anchoring Works:**

1. **Enter/upload** your document or data
2. **SHA-256 hash** is generated (no data leaves your system)
3. **Hash is anchored** to the XRP Ledger as a Memo in an AccountSet transaction
4. **Confirmation** in 3-5 seconds with XRPL transaction hash
5. **Anyone can verify** by re-hashing the original and comparing

Cost: 0.01 Credits + ~$0.001 XRPL fee. Go to the **Anchor** tab to try it!`;if(/how.*verify|verification|tamper|integrity/.test(e))return`**How Verification Works:**

1. Paste your original data or upload the file
2. S4 re-computes the SHA-256 hash
3. Compares against the XRPL-anchored hash
4. Returns **match** (‚úì integrity confirmed) or **tamper detected** (‚ö† mismatch)

Verification is free and can be done by anyone with the original data. Go to the **Verify** tab to try it!`;if(/pricing|subscription|cost|plan|tier/.test(e))return`**S4 Ledger Pricing:**

| Tier | Price | Credits Included |
|---|---|---|
| Pilot | Free | 100 Credits |
| Starter | $999/mo | 25,000 Credits |
| Professional | $2,499/mo | 100,000 Credits |
| Enterprise | $9,999/mo | 500,000 Credits |

All tiers include full API access, 156+ record types, and ILS tools. Enterprise adds SSO, dedicated support, and custom integrations.`;if(/what is s4|about s4|platform|overview|what can you do|capabilities/.test(e))return`**S4 Ledger** ‚Äî Immutable Defense Logistics on the XRP Ledger

‚Ä¢ **63 REST API endpoints** for anchoring, verification, ILS, AI, and security
‚Ä¢ **156+ record types** across 9 military branches
‚Ä¢ **20+ ILS tools** (DMSMS, readiness, supply chain risk, digital thread, etc.)
‚Ä¢ **AI-powered** logistics intelligence with audit trails
‚Ä¢ **Credits** economy ‚Äî $0.01/Credit, 0.01 Credits per anchor
‚Ä¢ **XRPL Mainnet** ‚Äî 3-5 second finality, 99.99% uptime
‚Ä¢ **Python SDK** with 38+ functions + REST API

Ask me about any specific feature!`;const r=M;if(r){if(/summarize|summary|overview|gap/.test(e)){const v=r.actions.filter(N=>N.severity==="critical");let E="<strong>"+r.prog.name+'</strong> ‚Äî Overall Readiness: <strong style="color:'+(r.pct>=80?"#00aaff":r.pct>=50?"#ffa500":"#ff3333")+'">'+r.pct+"%</strong><br><br>";return E+="üìã Checklist: "+r.clItems.filter(N=>N.checked).length+"/"+r.clItems.length+" items ("+r.clPct+"%)<br>",E+="üìÑ DRL Coverage: "+r.drlFound+"/"+r.drlTotal+" items ("+r.drlPct+"%)<br>",v.length&&(E+='<br>‚ö†Ô∏è <strong style="color:#ff3333">'+v.length+" critical gaps:</strong><br>",v.slice(0,3).forEach(N=>{E+="‚Ä¢ "+N.title+"<br>"}),v.length>3&&(E+="‚Ä¢ ...and "+(v.length-3)+" more<br>")),E+="<br>üí∞ Est. risk cost: <strong>"+X(r.totalCost)+"</strong>",E}if(/critical|urgent|important|priority/.test(e)){const v=r.actions.filter(N=>N.severity==="critical");if(!v.length)return"‚úÖ <strong>No critical items found!</strong> Your ILS package appears to cover all critical requirements.";let E='‚ö†Ô∏è <strong style="color:#ff3333">'+v.length+" Critical Items:</strong><br><br>";return v.forEach((N,fe)=>{E+="<strong>"+(fe+1)+". "+N.id+"</strong>: "+N.title+"<br>   ‚Üí "+N.action+"<br>   Owner: "+N.owner+" | "+X(N.cost)+" | "+N.schedule+"<br><br>"}),E+="<strong>Recommendation:</strong> Issue CARs for all critical items and escalate to the next ILS Review Board.",E}if(/car|corrective\s*action/.test(e)){const v=r.actions.filter(N=>N.severity==="critical");if(!v.length)return"No critical gaps found that require a CAR.";const E=v[0];return"<strong>DRAFT ‚Äî Corrective Action Request (CAR)</strong><br><br><strong>CAR Number:</strong> CAR-"+r.progKey.toUpperCase()+"-"+new Date().getFullYear()+"-001<br><strong>Program:</strong> "+r.prog.name+"<br><strong>Office:</strong> "+r.prog.ofc+"<br><strong>Date:</strong> "+new Date().toISOString().split("T")[0]+"<br><br><strong>Deficiency:</strong> "+E.title+"<br><strong>Required Action:</strong> "+E.action+"<br><strong>Days to Respond:</strong> 14 calendar days<br><strong>Impact if Not Corrected:</strong> "+X(E.cost)+" cost risk, "+E.schedule+" schedule impact<br><strong>Responsible Party:</strong> "+E.owner+"<br><br><em>Note: "+(v.length-1)+" additional CARs may be required for remaining critical gaps.</em>"}if(/cost|risk|money|budget|expense/.test(e))return'<strong>Cost & Schedule Risk Summary</strong><br><br>üí∞ Total Estimated Risk: <strong style="color:#ff3333">'+X(r.totalCost)+'</strong><br>‚è∞ Schedule Risk: <strong style="color:#ffa500">'+(r.critGaps>3?"6-12 months":r.critGaps>0?"2-6 months":"< 2 months")+"</strong><br>üö® Critical Path Items: <strong>"+r.critGaps+"</strong><br><br>Cost breakdown by ILS element:<br>"+r.actions.slice(0,5).map(v=>"‚Ä¢ "+v.id+": "+X(v.cost)+" ("+v.title.substring(0,40)+")").join("<br>")+"<br><br>Early resolution typically reduces costs by 30-50% vs. late-stage remediation.";if(/missing|di.*number|what.*missing/.test(e)){const v=r.actions.filter(N=>N.id.startsWith("DI-"));if(!v.length)return"No missing DI items detected in the current analysis.";let E="<strong>Missing Data Items (DIs):</strong><br><br>";return v.forEach(N=>{E+="‚Ä¢ <strong>"+N.id+"</strong>: "+N.title+"<br>"}),E+"<br>These items should be included in the next CDRL update."}if(/next.*step|recommend|suggest|what.*should/.test(e)){let v="<strong>Recommended Next Steps for "+r.prog.name+":</strong><br><br>";return v+="1. <strong>Address "+r.critGaps+" critical gaps</strong> ‚Äî issue CARs and assign action owners<br>",v+="2. <strong>Improve DRL coverage</strong> from "+r.drlPct+"% ‚Äî target 85%+ before next review<br>",v+="3. <strong>Complete checklist items</strong> ‚Äî currently "+r.clPct+"% done<br>",v+="4. <strong>Run DMSMS analysis</strong> on critical components<br>",v+="5. <strong>Schedule ILS Review Board</strong> within 30 days<br>",v+="6. <strong>Anchor all findings to XRPL</strong> for tamper-proof audit trail<br>",v}if(/email|memo|draft.*email|draft.*memo/.test(e))return"<strong>DRAFT ‚Äî ILS Status Memo</strong><br><br><strong>TO:</strong> Program Manager, "+r.prog.name+"<br><strong>FROM:</strong> ILS Manager<br><strong>DATE:</strong> "+new Date().toISOString().split("T")[0]+"<br><strong>SUBJ:</strong> ILS Readiness Assessment Update<br><br>1. <strong>Overall Status:</strong> "+r.pct+"% readiness ("+(r.pct>=80?"GREEN":r.pct>=50?"AMBER":"RED")+")<br>2. <strong>Critical Gaps:</strong> "+r.critGaps+" items requiring immediate attention<br>3. <strong>DRL Coverage:</strong> "+r.drlPct+"%<br>4. <strong>Estimated Risk Cost:</strong> "+X(r.totalCost)+"<br><br><strong>Recommendation:</strong> Convene ILS Review Board within 14 days to address critical shortfalls.<br><br>V/r,<br>[Your Name]"}if(/di-?\d+|di number/.test(e))return ra(e);if(/what is s4|what.*s4 ledger|tell.*about s4|explain s4/.test(e))return"<strong>S4 Ledger</strong> ‚Äî Secure Logistics Standard<br><br>S4 Ledger is a blockchain-verified Integrated Logistics Support (ILS) platform built for defense organizations. It provides:<br><br>‚Ä¢ <strong>20+ ILS tools</strong> covering all 12 ILS elements per GEIA-STD-0007 / MIL-HDBK-502<br>‚Ä¢ <strong>XRPL blockchain anchoring</strong> ‚Äî every record gets a tamper-proof SHA-256 hash on the XRP Ledger<br>‚Ä¢ <strong>Credits utility token</strong> ‚Äî $0.01 per anchor, purchased automatically via USD‚ÜíXRP‚ÜíCredits<br>‚Ä¢ <strong>AI Agent</strong> ‚Äî context-aware analysis across all tools<br>‚Ä¢ <strong>54+ Navy record types</strong> for Navy programs<br>‚Ä¢ <strong>Compliance scoring</strong> for CMMC, NIST 800-171, DFARS, FAR 46<br><br>S4 replaces legacy tools like ICAPS, COMPASS, and spreadsheet-based tracking with a single, auditable platform.";if(/how.*work|how.*anchor|how.*hash|how.*blockchain/.test(e))return"<strong>How S4 Ledger Works:</strong><br><br>1. <strong>Upload or create a record</strong> ‚Äî any ILS document, analysis, or data point<br>2. <strong>SHA-256 hash computed</strong> ‚Äî a unique 64-character fingerprint of the content<br>3. <strong>Hash anchored to XRPL</strong> ‚Äî written as a Memo on an XRP Ledger transaction<br>4. <strong>Transaction verified</strong> ‚Äî XRPL validates within 3-5 seconds at ~$0.001 tx fee<br>5. <strong>Credit fee applied</strong> ‚Äî 0.01 Credits ($0.01) per anchor for network access<br><br>The original data stays on your device (never sent to blockchain). Only the hash is anchored. Anyone can independently verify a record by recomputing the hash and checking the XRPL transaction.<br><br><strong>Result:</strong> Tamper-proof, independently verifiable audit trail ‚Äî 1,500x cheaper than legacy verification.";if(/pricing|price|cost|subscription|plan|tier|how much/.test(e))return'<strong>S4 Ledger Subscription Plans:</strong><br><br><div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;font-size:0.85rem"><div style="padding:8px;border:1px solid rgba(0,170,255,0.2);border-radius:3px"><strong style="color:#00aaff">Pilot (Free)</strong><br>100 Credits/mo<br>10,000 anchors<br>All 20+ tools</div><div style="padding:8px;border:1px solid rgba(0,170,255,0.3);border-radius:3px"><strong style="color:#00aaff">Starter ($999/mo)</strong><br>25,000 Credits/mo<br>2.5M anchors<br>Full SDK + API</div><div style="padding:8px;border:1px solid rgba(0,170,255,0.15);border-radius:3px"><strong style="color:#00aaff">Professional ($2,499/mo)</strong><br>100,000 Credits/mo<br>10M anchors<br>Priority support</div><div style="padding:8px;border:1px solid rgba(0,170,255,0.15);border-radius:3px"><strong style="color:#00aaff">Enterprise ($9,999/mo)</strong><br>500,000 Credits/mo<br>Unlimited anchors<br>Dedicated support + SLA</div></div><br>Every plan includes automatic XRPL wallet provisioning + Credits TrustLine setup. $0.01 Credits per anchor.';if(/wallet|xrpl.*wallet|seed|family.*seed|trustline|trust.*line/.test(e))return"<strong>XRPL Wallet & TrustLine Setup</strong><br><br>When you subscribe, S4 automatically:<br><br>1. <strong>Generates a secp256k1 wallet</strong> ‚Äî your unique XRPL address + family seed (secret key)<br>2. <strong>Funds with XRP</strong> ‚Äî covers the 12 XRP account reserve + TrustLine reserve<br>3. <strong>Sets up Credits TrustLine</strong> ‚Äî pointed at the Credits issuer (<code>r95GyZac4butvVcsTWUPpxzekmyzaHsTA5</code>)<br>4. <strong>Credits delivered</strong> ‚Äî from the Treasury wallet to your wallet<br><br><strong>Important:</strong><br>‚Ä¢ TrustLines go to the <strong>Credits issuer</strong> (r95...) ‚Äî this is the wallet that created the Credits token (SLS on XRPL)<br>‚Ä¢ Credits are delivered from the <strong>Treasury</strong> (rMLm...) ‚Äî this holds the circulating supply<br>‚Ä¢ Your family seed is the ONLY way to access your wallet ‚Äî save it securely<br>‚Ä¢ Compatible with <strong>Xaman</strong> (formerly XUMM) for mobile wallet management";if(/sls.*token|what.*sls|\$sls|sls.*price|token.*economics|tokenomics/.test(e))return"<strong>Credits ‚Äî SLS (Secure Logistics Standard)</strong><br><br>‚Ä¢ <strong>Type:</strong> XRPL issued currency (utility token)<br>‚Ä¢ <strong>Price:</strong> $0.01 per Credit<br>‚Ä¢ <strong>Usage:</strong> 0.01 Credits per anchor (~$0.0001)<br>‚Ä¢ <strong>Total Supply:</strong> 100,000,000 Credits<br>‚Ä¢ <strong>Issuer:</strong> <code>r95GyZac4butvVcsTWUPpxzekmyzaHsTA5</code><br>‚Ä¢ <strong>Treasury:</strong> <code>rMLmkrxpadq5z6oTDmq8GhQj9LKjf1KLqJ</code><br><br><strong>Distribution:</strong><br>‚Ä¢ 60% Public/Community (60M)<br>‚Ä¢ 15% Ecosystem & Grants (15M)<br>‚Ä¢ 15% Team & Founders (12-mo cliff + 24-mo vest)<br>‚Ä¢ 10% Strategic Reserves (DAO-governed)<br><br><strong>How users get Credits:</strong> USD ‚Üí XRP on exchange ‚Üí Credits on XRPL DEX. Fully automated ‚Äî users never touch crypto directly.";if(/treasury|treasury.*wallet/.test(e))return"<strong>Treasury Wallet</strong><br><br>‚Ä¢ <strong>Address:</strong> <code>rMLmkrxpadq5z6oTDmq8GhQj9LKjf1KLqJ</code><br>‚Ä¢ <strong>Purpose:</strong> Holds the circulating supply of Credits and distributes tokens to subscribers<br>‚Ä¢ <strong>Flow:</strong> When a user subscribes, S4 purchases Credits on the XRPL DEX and delivers them from the Treasury to the user's wallet<br><br><strong>Note:</strong> The Treasury wallet is <em>not</em> the Credits issuer. The issuer is <code>r95GyZac4butvVcsTWUPpxzekmyzaHsTA5</code> ‚Äî that's the wallet that created the Credits token (SLS on XRPL). TrustLines are pointed at the issuer, but Credits are delivered from the Treasury.";if(/issuer|issuer.*wallet|who.*issued|who.*created.*sls/.test(e))return"<strong>Credits Issuer Wallet</strong><br><br>‚Ä¢ <strong>Address:</strong> <code>r95GyZac4butvVcsTWUPpxzekmyzaHsTA5</code><br>‚Ä¢ <strong>Purpose:</strong> The original issuer of the Credits token (SLS) on the XRP Ledger<br>‚Ä¢ <strong>TrustLines:</strong> All Credits holders set their TrustLine to this address<br><br>The issuer wallet is separate from the Treasury wallet (<code>rMLm...</code>). The issuer created the token; the Treasury holds and distributes the circulating supply.";if(/xrp.*ledger|what.*xrpl|why.*xrpl|which.*blockchain/.test(e))return"<strong>Why XRPL (XRP Ledger)?</strong><br><br>S4 Ledger uses the XRP Ledger because it's:<br><br>‚Ä¢ <strong>Fast:</strong> 3-5 second transaction finality<br>‚Ä¢ <strong>Cheap:</strong> ~$0.001 per transaction (drops)<br>‚Ä¢ <strong>Energy efficient:</strong> No mining ‚Äî uses federated consensus<br>‚Ä¢ <strong>Built-in DEX:</strong> Native token exchange for Credits liquidity<br>‚Ä¢ <strong>Issued currencies:</strong> Native support for custom tokens like Credits<br>‚Ä¢ <strong>TrustLines:</strong> Controlled token distribution<br>‚Ä¢ <strong>Battle-tested:</strong> Operating since 2012, used by 150+ financial institutions<br><br>XRPL's low transaction cost makes it practical for micro-anchoring ‚Äî 1,500x cheaper than traditional verification methods.";if(/gap.*analysis|upload.*doc|run.*analysis|how.*analysis|ils.*analysis/.test(e))return'<strong>ILS Gap Analysis</strong><br><br>The core analysis tool evaluates your ILS package against GEIA-STD-0007 (formerly MIL-STD-1388) requirements:<br><br>1. <strong>Upload documents</strong> ‚Äî PDFs, Word, Excel, CSV, text files<br>2. <strong>Auto-detection</strong> ‚Äî identifies document types (LCSP, LSAR, PHS&T, DMSMS plans, etc.)<br>3. <strong>Full analysis</strong> ‚Äî checks DRL coverage, checklist completion, 12 ILS elements<br>4. <strong>Findings engine</strong> ‚Äî auto-detects data quality issues, missing requirements, discrepancies<br>5. <strong>Action items</strong> ‚Äî generates prioritized actions with cost/schedule estimates<br><br>Supports <strong>462 defense programs</strong> for Navy programs. Results can be anchored to XRPL for audit purposes.<br><br><strong>Try it:</strong> Click "Load Full ILS Package" to see a complete demo analysis.';if(/action.*item|task|open.*action|todo/.test(e)){const v=I.length,E=I.filter(N=>N.done).length;return"<strong>Action Items Manager</strong><br><br>"+(v>0?"Current status: <strong>"+E+"/"+v+"</strong> complete ("+Math.round(E/v*100)+"%)<br><br>":"No action items yet. Run a gap analysis to generate prioritized actions.<br><br>")+"The Action Items Manager tracks all ILS-related tasks generated by gap analysis, DMSMS reviews, readiness assessments, and manual entries. Each item includes:<br>‚Ä¢ Severity (critical/warning/info)<br>‚Ä¢ Responsible owner<br>‚Ä¢ Cost and schedule impact estimates<br>‚Ä¢ Due dates and status tracking<br>‚Ä¢ Linkage to specific DI numbers and ILS elements"}if(/calendar|milestone|schedule|due.*date|ils.*calendar/.test(e))return"<strong>ILS Calendar</strong><br><br>The ILS Calendar tool is now part of <strong>HarborLink</strong>, S4 Systems' collaboration portal. It tracks milestones (MS A/B/C, IOC, FOC), warranty expirations, CDRL due dates, and DMSMS review cycles.<br><br>All calendar events anchored through S4 Ledger retain their blockchain verification.";if(/dmsms|obsolescen|diminishing|obsolete.*part|end.of.life|eol/.test(e))return"<strong>DMSMS Tracker</strong> (Diminishing Manufacturing Sources & Material Shortages)<br><br>Proactive obsolescence management per DoDI 4245.15:<br><br>‚Ä¢ <strong>Component search</strong> ‚Äî check any part against DMSMS databases<br>‚Ä¢ <strong>Risk assessment</strong> ‚Äî severity scoring (critical/high/medium/low)<br>‚Ä¢ <strong>Alternate sourcing</strong> ‚Äî find replacement parts and alternate manufacturers<br>‚Ä¢ <strong>Cost impact estimation</strong> ‚Äî redesign vs. bridge buy vs. lifetime buy<br>‚Ä¢ <strong>Program-wide scan</strong> ‚Äî analyze all components for a selected platform<br>‚Ä¢ <strong>GIDEP integration</strong> ‚Äî reference Government-Industry Data Exchange alerts<br><br><strong>Common DMSMS scenarios:</strong> single-source dependencies, vendor exits, technology refresh cycles, COTS obsolescence.<br><br>All DMSMS cases can be anchored to XRPL for audit trail compliance.";if(/readiness|ram|availability|mtbf|mttr|mldt|ao |ai |operational.*avail/.test(e))return'<strong>Readiness & RAM Calculator</strong><br><br>Calculates Reliability, Availability, and Maintainability metrics:<br><br>‚Ä¢ <strong>Ao (Operational Availability)</strong> = MTBF / (MTBF + MTTR + MLDT)<br>‚Ä¢ <strong>Ai (Inherent Availability)</strong> = MTBF / (MTBF + MTTR)<br>‚Ä¢ <strong>Failure Rate (Œª)</strong> = 1/MTBF<br>‚Ä¢ <strong>Mission Reliability</strong> = e^(‚àíŒªt) for 30-day missions<br>‚Ä¢ <strong>Annual failure/downtime estimates</strong><br><br>Pre-loaded with realistic data for 462 defense platforms. Color-coded assessments:<br>‚Ä¢ <span style="color:#00aaff">GREEN (‚â•90%)</span> ‚Äî Meets requirements<br>‚Ä¢ <span style="color:#ffa500">AMBER (70-90%)</span> ‚Äî Monitor closely<br>‚Ä¢ <span style="color:#ff3333">RED (&lt;70%)</span> ‚Äî Immediate action required';if(/nsn|parts|cross.?ref|cage|fsc|parts.*lookup|part.*search|national.*stock/.test(e))return"<strong>NSN / Parts Cross-Reference</strong><br><br>The Parts Cross-Reference tool is now part of <strong>HarborLink</strong>, S4 Systems' collaboration portal. It provides NSN lookup, CAGE code search, manufacturer cross-referencing, alternate parts identification, and stock status tracking across 15+ major defense manufacturers.<br><br>All parts data anchored through S4 Ledger retains blockchain verification.";if(/roi|return.*invest|savings|cost.*benefit|business.*case/.test(e))return"<strong>ROI Calculator</strong><br><br>Demonstrates S4 Ledger value proposition:<br><br>‚Ä¢ <strong>Labor savings</strong> ‚Äî eliminate manual reconciliation ($150K-$450K/yr)<br>‚Ä¢ <strong>Error reduction</strong> ‚Äî blockchain eliminates data integrity disputes<br>‚Ä¢ <strong>Audit efficiency</strong> ‚Äî 60% faster audit preparation<br>‚Ä¢ <strong>DMSMS savings</strong> ‚Äî proactive obsolescence avoids costly emergency buys<br>‚Ä¢ <strong>5-year projection</strong> ‚Äî cumulative savings vs. legacy systems<br><br>At $0.01/anchor vs. $15/verification legacy cost, S4 delivers <strong>1,500x cost reduction</strong> for data verification.<br><br>For a typical program: <strong>$2.1M ‚Äî $4.5M</strong> savings over 5 years.";if(/lifecycle|life.?cycle.*cost|lcc|total.*ownership|sustainment.*cost/.test(e))return"<strong>Lifecycle Cost Estimator</strong><br><br>Models total ownership cost across the full system lifecycle:<br><br>‚Ä¢ <strong>Acquisition costs</strong> ‚Äî development, production, initial spares<br>‚Ä¢ <strong>Operating costs</strong> ‚Äî personnel, fuel, consumables<br>‚Ä¢ <strong>Sustainment costs</strong> ‚Äî maintenance, repair, overhaul (MRO)<br>‚Ä¢ <strong>Disposal costs</strong> ‚Äî demilitarization, environmental<br>‚Ä¢ <strong>DMSMS impact</strong> ‚Äî obsolescence-driven cost increases<br><br>Pre-loaded cost models for 462 defense platforms with adjustable parameters. Export to CSV or anchor to XRPL for auditable cost baselines.";if(/warranty|warranty.*track|far.*46|clin|warranty.*expir/.test(e))return"<strong>Warranty & Contract Tracker</strong><br><br>Tracks warranty obligations per FAR 46.7 and DFARS clauses:<br><br>‚Ä¢ <strong>CLIN milestone tracking</strong> ‚Äî contractual deliverable status<br>‚Ä¢ <strong>Warranty expiration alerts</strong> ‚Äî advance notification before expiry<br>‚Ä¢ <strong>Claim management</strong> ‚Äî track warranty claims and resolutions<br>‚Ä¢ <strong>Option year tracking</strong> ‚Äî exercise dates and decisions<br>‚Ä¢ <strong>GFE/GFM tracking</strong> ‚Äî government-furnished equipment and material<br><br>Warranty records are anchored to XRPL to create an irrefutable timeline for dispute resolution.";if(/vault|audit.*record|audit.*trail|audit.*vault|anchored.*record/.test(e))return"<strong>Audit Record Vault</strong><br><br>"+(y.length>0?"Currently storing <strong>"+y.length+" records</strong> across your workspace.<br><br>":"")+"The Vault automatically captures every record you anchor from any ILS tool. Each entry stores:<br><br>‚Ä¢ <strong>SHA-256 hash</strong> ‚Äî cryptographic fingerprint of the content<br>‚Ä¢ <strong>Content preview</strong> ‚Äî what was anchored<br>‚Ä¢ <strong>Timestamp</strong> ‚Äî when it was created<br>‚Ä¢ <strong>TX Hash</strong> ‚Äî XRPL transaction ID for independent verification<br>‚Ä¢ <strong>Source tool</strong> ‚Äî which ILS tool generated it<br>‚Ä¢ <strong>Encryption status</strong> ‚Äî AES-encrypted or plaintext<br><br>You can <strong>re-verify</strong> any record, <strong>export</strong> as CSV/XLSX, and <strong>search/filter</strong> across your entire audit trail.";if(/doc.*library|defense.*doc|mil-std|opnavinst|regulation|standard|reference|mil-hdbk/.test(e))return"<strong>Defense Document Library</strong><br><br>Searchable reference of <strong>100+ real defense documents</strong>:<br><br>‚Ä¢ MIL-STDs, MIL-HDBKs, MIL-PRFs<br>‚Ä¢ OPNAVINSTs, MIL-PRFs<br>‚Ä¢ NAVSEA/NAVAIR Technical Publications<br>‚Ä¢ DFARS clauses, NIST standards<br>‚Ä¢ NATO STANAGs<br><br>Filter by category (ILS, Readiness, DMSMS, Cybersecurity) or branch (Navy / Joint). Direct links to official sources.";if(/compliance.*score|cmmc|nist.*800|dfars.*252|compliance.*posture|compliance.*card/.test(e))return"<strong>Compliance Scorecard</strong><br><br>Auto-calculates compliance across 6 frameworks:<br><br>‚Ä¢ <strong>CMMC Level 2</strong> ‚Äî Cybersecurity Maturity Model<br>‚Ä¢ <strong>NIST SP 800-171</strong> ‚Äî CUI Protection (110 controls)<br>‚Ä¢ <strong>DFARS 252.204-7012</strong> ‚Äî Safeguarding CDI<br>‚Ä¢ <strong>FAR 46 Quality</strong> ‚Äî Federal quality clauses<br>‚Ä¢ <strong>GEIA-STD-0007 ILS</strong> ‚Äî Logistics compliance<br>‚Ä¢ <strong>DoDI 4245.15 DMSMS</strong> ‚Äî Obsolescence management<br><br>Score is calculated from <strong>real workspace activity</strong> ‚Äî every anchor, DMSMS case, and readiness calculation contributes. Aggregated into a letter grade (A+ through F).";if(/risk.*engine|supply.*chain.*risk|single.*source|gidep|risk.*assessment/.test(e))return"<strong>Supply Chain Risk Engine</strong><br><br>Automated risk assessment for defense supply chains:<br><br>‚Ä¢ <strong>Single-source analysis</strong> ‚Äî identify components with only one supplier<br>‚Ä¢ <strong>GIDEP alert monitoring</strong> ‚Äî Government-Industry Data Exchange Program<br>‚Ä¢ <strong>Foreign dependency flags</strong> ‚Äî ITAR/EAR compliance risk<br>‚Ä¢ <strong>Lead time risk</strong> ‚Äî procurement timeline analysis<br>‚Ä¢ <strong>Cost impact scoring</strong> ‚Äî financial exposure per risk item<br>‚Ä¢ <strong>Mitigation recommendations</strong> ‚Äî second source, redesign, strategic buy<br><br>Risk scores are color-coded and exportable. All risk assessments can be anchored to XRPL.";if(/report.*gen|generate.*report|audit.*package|export.*report|dcma.*report/.test(e))return"<strong>Report Generator</strong><br><br>Creates publication-ready reports from your workspace data:<br><br>‚Ä¢ <strong>Full Audit Package</strong> ‚Äî all anchored records with XRPL verification<br>‚Ä¢ <strong>DCMA-Ready Report</strong> ‚Äî formatted for Defense Contract Management Agency<br>‚Ä¢ <strong>Compliance Summary</strong> ‚Äî scorecard with all 6 framework scores<br>‚Ä¢ <strong>Gap Analysis Report</strong> ‚Äî findings, actions, cost/schedule impact<br>‚Ä¢ <strong>Executive Brief</strong> ‚Äî 1-page summary for leadership<br><br>Reports include blockchain verification data ‚Äî every hash and TX ID is embedded for independent verification.";if(/contract|cdrl|sow|deliverable|contract.*mgmt|modification|mod.*pending/.test(e))return"<strong>Contract Management</strong><br><br>Tracks contractual deliverables and modifications:<br><br>‚Ä¢ <strong>CDRL tracking</strong> ‚Äî Contract Data Requirements List status<br>‚Ä¢ <strong>SOW deliverable tracking</strong> ‚Äî Statement of Work milestone status<br>‚Ä¢ <strong>Modification management</strong> ‚Äî contract mods and amendments<br>‚Ä¢ <strong>Dispute prevention</strong> ‚Äî anchored records provide irrefutable evidence<br>‚Ä¢ <strong>Overdue alerts</strong> ‚Äî notifications for missed deliverables<br><br>Blockchain anchoring prevents contract disputes by creating a tamper-proof timeline of all deliverables and communications.";if(/digital.*thread|config.*mgmt|ecp|engineering.*change|bom|bill.*material|baseline/.test(e))return"<strong>Digital Thread & Configuration Management</strong><br><br>The Digital Thread / Configuration Bridge tool is now part of <strong>HarborLink</strong>, S4 Systems' collaboration portal. It tracks ECPs, BOM revisions, baseline management, and integrates with PLM systems (Teamcenter, Windchill, Arena).<br><br>Every configuration change anchored through S4 Ledger retains its XRPL verification.";if(/predict|predictive.*maint|cbm|condition.*based|failure.*predict|maintenance.*advisory/.test(e))return"<strong>Predictive Maintenance Engine</strong><br><br>AI-powered maintenance forecasting:<br><br>‚Ä¢ <strong>Failure prediction</strong> ‚Äî machine learning models based on usage patterns<br>‚Ä¢ <strong>CBM+ integration</strong> ‚Äî Condition-Based Maintenance Plus methodology<br>‚Ä¢ <strong>MTBF trending</strong> ‚Äî track reliability trends over time<br>‚Ä¢ <strong>Maintenance advisories</strong> ‚Äî automated alerts for predicted failures<br>‚Ä¢ <strong>Cost savings estimation</strong> ‚Äî reactive vs. predictive maintenance costs<br>‚Ä¢ <strong>Fleet-wide analysis</strong> ‚Äî aggregate data across platform variants<br><br>Predictive models use MTBF, operating environment, and maintenance history to forecast failures before they occur, reducing unplanned downtime by 30-50%.";if(/ilie|submission|discrepancy.*engine|vendor.*review|vendor.*submission/.test(e)){if(typeof R<"u"&&R&&R.discrepancies&&R.discrepancies.length){var a=R.discrepancies.filter(function(v){return v.severity==="critical"}).length,i=R.discrepancies.filter(function(v){return v.severity==="warning"}).length;return"<strong>Submissions & PTD Analysis Results:</strong><br>Total discrepancies: <strong>"+R.discrepancies.length+'</strong><br>Critical: <span style="color:#ff4444">'+a+'</span> | Warnings: <span style="color:#ffa500">'+i+"</span><br>Program: "+(R.meta.program||"N/A")+"<br>Branch: "+(R.meta.branch||"N/A")+'<br><br>Use "Analyze & Compare" for a different submission or "Export Discrepancy Report" to download findings.'}return'<strong>Submissions &amp; PTD</strong><br><br>Analyzes vendor submissions against baseline data to detect discrepancies:<br><br>‚Ä¢ <strong>Cost anomalies</strong> ‚Äî >10-25% cost increases flagged<br>‚Ä¢ <strong>Component changes</strong> ‚Äî new/removed items detected<br>‚Ä¢ <strong>CAGE code changes</strong> ‚Äî manufacturer substitutions<br>‚Ä¢ <strong>Source/vendor swaps</strong> ‚Äî supply chain changes<br>‚Ä¢ <strong>Lead time increases</strong> ‚Äî >30 day threshold<br>‚Ä¢ <strong>Status downgrades</strong> ‚Äî Active‚ÜíObsolete flags<br><br>Upload a CSV/Excel file or use "Run Demo Analysis" to see a full example with sample discrepancies.'}if(/geia.*0007|geia.*std|s3000l|product.*support.*analysis|psa.*standard/.test(e))return`<strong>GEIA-STD-0007 ‚Äî Logistics Product Data</strong><br><br>GEIA-STD-0007 replaced the cancelled MIL-STD-1388-1A/2B (cancelled 1996) as the primary standard for logistics product data in defense acquisitions.<br><br>‚Ä¢ <strong>GEIA-STD-0007</strong> ‚Äî Logistics Product Data (direct replacement for MIL-STD-1388-2B LSAR)<br>‚Ä¢ <strong>MIL-HDBK-502</strong> ‚Äî Product Support Analysis (PSA) handbook (replaces LSA guidance from MIL-STD-1388-1A)<br>‚Ä¢ <strong>S3000L</strong> ‚Äî International LSA/PSA standard (ASD/AIA S-Series, NATO-adopted)<br>‚Ä¢ <strong>S1000D</strong> ‚Äî International specification for technical publications<br>‚Ä¢ <strong>S2000M</strong> ‚Äî International specification for material management<br><br><strong>Key change:</strong> "Logistics Support Analysis (LSA)" is now called "Product Support Analysis (PSA)" under DoD's product support framework. S4 Ledger aligns with GEIA-STD-0007 and supports both legacy LSA and modern PSA workflows.`;if(/mil.*std.*1388|ils.*element|12.*element|what.*ils/.test(e))return"<strong>GEIA-STD-0007 / MIL-HDBK-502 ‚Äî 12 ILS Elements (Product Support)</strong><br><br>Integrated Logistics Support covers these 12 elements:<br><br>1. <strong>Maintenance Planning</strong> ‚Äî preventive/corrective maintenance strategies<br>2. <strong>Manpower & Personnel</strong> ‚Äî staffing requirements<br>3. <strong>Supply Support</strong> ‚Äî spares, repair parts, consumables<br>4. <strong>Support Equipment</strong> ‚Äî tools, test equipment, TMDE<br>5. <strong>Technical Data</strong> ‚Äî manuals, drawings, specifications<br>6. <strong>Training & Training Support</strong> ‚Äî courses, devices, materials<br>7. <strong>Computer Resources Support</strong> ‚Äî software, firmware<br>8. <strong>Facilities</strong> ‚Äî maintenance shops, storage, training<br>9. <strong>Packaging, Handling, Storage & Transportation</strong> ‚Äî PHS&T<br>10. <strong>Design Interface</strong> ‚Äî R&M, human factors, safety<br>11. <strong>Standardization</strong> ‚Äî interoperability, commonality<br>12. <strong>Product Support Management</strong> ‚Äî PSM oversight<br><br><em>Note: MIL-STD-1388-1A/2B was cancelled in 1996 and superseded by GEIA-STD-0007 and MIL-HDBK-502. The 12 ILS elements remain the standard framework. Internationally, S3000L provides equivalent guidance.</em>";if(/nist|800.171|cui.*protect|controlled.*unclass/.test(e))return"<strong>NIST SP 800-171</strong> ‚Äî Protecting Controlled Unclassified Information (CUI)<br><br>110 security controls across 14 families:<br><br>‚Ä¢ Access Control (AC) ‚Äî 22 controls<br>‚Ä¢ Awareness & Training (AT) ‚Äî 3 controls<br>‚Ä¢ Audit & Accountability (AU) ‚Äî 9 controls<br>‚Ä¢ Configuration Management (CM) ‚Äî 9 controls<br>‚Ä¢ Identification & Authentication (IA) ‚Äî 11 controls<br>‚Ä¢ Incident Response (IR) ‚Äî 3 controls<br>‚Ä¢ Maintenance (MA) ‚Äî 6 controls<br>‚Ä¢ Media Protection (MP) ‚Äî 9 controls<br>‚Ä¢ Personnel Security (PS) ‚Äî 2 controls<br>‚Ä¢ Physical Protection (PE) ‚Äî 6 controls<br>‚Ä¢ Risk Assessment (RA) ‚Äî 3 controls<br>‚Ä¢ Security Assessment (CA) ‚Äî 4 controls<br>‚Ä¢ System & Communications Protection (SC) ‚Äî 16 controls<br>‚Ä¢ System & Information Integrity (SI) ‚Äî 7 controls<br><br>S4 Ledger's blockchain anchoring directly supports AU (audit trail), SI (integrity), and SC (communications protection) controls.";if(/cmmc.*level|cmmc.*2|cmmc.*certif|cybersecurity.*maturity/.test(e))return"<strong>CMMC Level 2</strong> ‚Äî Cybersecurity Maturity Model Certification<br><br>CMMC Level 2 requires implementation of all 110 NIST SP 800-171 controls:<br><br>‚Ä¢ <strong>Assessment:</strong> Third-party C3PAO assessment required<br>‚Ä¢ <strong>Scope:</strong> All systems processing, storing, or transmitting CUI<br>‚Ä¢ <strong>Timeline:</strong> Required for all DoD contracts handling CUI (phased rollout 2025+)<br>‚Ä¢ <strong>Validity:</strong> 3-year certification cycle<br><br><strong>How S4 helps:</strong><br>‚Ä¢ Blockchain anchoring provides immutable audit trails (AU controls)<br>‚Ä¢ SHA-256 hashing ensures data integrity (SI controls)<br>‚Ä¢ AES encryption option for CUI records (SC controls)<br>‚Ä¢ Compliance Scorecard auto-calculates CMMC readiness<br><br><em>Note: S4 Ledger's CMMC certification is In Progress (not yet certified).</em>";if(/dfars|252\.204|safeguard.*defense|covered.*defense/.test(e))return"<strong>DFARS 252.204-7012</strong> ‚Äî Safeguarding Covered Defense Information<br><br>Key requirements:<br>‚Ä¢ Implement NIST SP 800-171 controls for CDI/CUI<br>‚Ä¢ Report cyber incidents within 72 hours<br>‚Ä¢ Preserve media and data for 90 days post-incident<br>‚Ä¢ Flow down to subcontractors<br><br>S4's blockchain anchoring creates verifiable evidence of data integrity controls, directly supporting DFARS compliance.";if(/get.*started|how.*begin|first.*step|new.*user|onboard/.test(e))return'<strong>Getting Started with S4 Ledger</strong><br><br>1. <strong>Create an account</strong> at <a href="/s4-login/">s4-login</a> ‚Äî wallet provisioned automatically<br>2. <strong>Explore Anchor-S4</strong> ‚Äî 20+ tools organized by function<br>3. <strong>Try a demo analysis</strong> ‚Äî click "Load Full ILS Package" in Gap Analysis<br>4. <strong>Upload your own documents</strong> ‚Äî PDFs, Excel, Word, CSV<br>5. <strong>Anchor your first record</strong> ‚Äî creates your first blockchain-verified entry<br>6. <strong>Check your Compliance Scorecard</strong> ‚Äî see how your posture improves<br>7. <strong>Ask the AI Agent anything</strong> ‚Äî type questions right here<br><br><strong>Recommended flow:</strong> Start with Gap Analysis ‚Üí review Action Items ‚Üí address critical gaps ‚Üí anchor findings.';if(/configure.*ai|api.*key|ai.*setup|enable.*ai|openai|anthropic|azure|groq|mistral/.test(e))return"<strong>S4 AI Agent Configuration</strong><br><br>The AI Agent is a production-grade assistant powered by large language models (LLMs). It provides:<br><br>‚Ä¢ <strong>Context-aware analysis</strong> across all 20+ ILS tools<br>‚Ä¢ <strong>Natural language Q&A</strong> on defense logistics, supply chain, compliance, and more<br>‚Ä¢ <strong>Document analysis &amp; summarization</strong> for uploaded files<br>‚Ä¢ <strong>Real-time insights</strong> based on your loaded program data<br>‚Ä¢ <strong>Custom report generation</strong> and memo drafting<br><br>The agent automatically adapts based on which ILS tool you‚Äôre using and what data you‚Äôve loaded. Just type your question ‚Äî the agent handles the rest.";if(/encrypt|aes|security|data.*protect|secure.*record/.test(e))return"<strong>Record Encryption</strong><br><br>S4 Ledger supports AES-256 encryption for sensitive records:<br><br>‚Ä¢ <strong>Toggle encryption</strong> ‚Äî enable per-record encryption before anchoring<br>‚Ä¢ <strong>AES-256-GCM</strong> ‚Äî military-grade symmetric encryption<br>‚Ä¢ <strong>Client-side</strong> ‚Äî encryption happens in your browser, never on the server<br>‚Ä¢ <strong>Hash still verifiable</strong> ‚Äî the SHA-256 hash is of the encrypted content<br>‚Ä¢ <strong>Key management</strong> ‚Äî you control the encryption key<br><br>CUI records should always be encrypted before anchoring to meet NIST 800-171 and DFARS requirements.";if(/xaman|xumm|mobile.*wallet|import.*seed/.test(e))return'<strong>Xaman (XUMM) Wallet Integration</strong><br><br>Your S4 Ledger wallet is <strong>Xaman-compatible</strong>:<br><br>1. Download <strong>Xaman</strong> from App Store / Google Play<br>2. Tap "Add Account" ‚Üí "Import Existing Account"<br>3. Enter your <strong>family seed</strong> (from your wallet credentials file)<br>4. Your Credits balance, TrustLine, and transaction history will appear<br><br><strong>Note:</strong> Xaman uses the same secp256k1 key format as S4 Ledger. Your wallet works identically on both platforms.';if(/sdk|api|developer|integrate|rest.*api|python.*sdk/.test(e))return'<strong>S4 Ledger SDK & API</strong><br><br><strong>REST API:</strong><br>‚Ä¢ 29 endpoints covering all platform functionality<br>‚Ä¢ JSON request/response format<br>‚Ä¢ API key authentication<br>‚Ä¢ Rate limiting per subscription tier<br><br><strong>Python SDK:</strong><br>‚Ä¢ 27 functions wrapping all API endpoints<br>‚Ä¢ <code>pip install s4-sdk</code> (PyPI)<br>‚Ä¢ Async support, retry logic, error handling<br>‚Ä¢ Full documentation at <a href="../sdk/">sdk/</a><br><br><strong>Key endpoints:</strong><br>‚Ä¢ <code>POST /api/anchor</code> ‚Äî anchor a hash to XRPL<br>‚Ä¢ <code>GET /api/verify/{hash}</code> ‚Äî verify a record<br>‚Ä¢ <code>POST /api/wallet/provision</code> ‚Äî create a new wallet<br>‚Ä¢ <code>GET /api/metrics</code> ‚Äî platform metrics';if(/who.*built|who.*created|team|founder|nick|developer/.test(e))return'<strong>S4 Ledger Team</strong><br><br>S4 Ledger was created by defense logistics professionals who experienced firsthand the limitations of legacy ILS tools. The platform combines deep DoD domain expertise with blockchain technology to solve the data integrity problem in defense supply chains.<br><br>For more information, visit the <a href="/s4-about/">About page</a>.';if(/hello|hi|hey|good morning|good afternoon|good evening/.test(e))return"Hello! I'm the S4 Agent ‚Äî your defense logistics assistant. I can help with:<br><br>‚Ä¢ <strong>ILS analysis</strong> ‚Äî gap analysis, DMSMS, readiness, lifecycle cost<br>‚Ä¢ <strong>Defense standards</strong> ‚Äî GEIA-STD-0007 (ILS), NIST 800-171, CMMC, DFARS<br>‚Ä¢ <strong>S4 platform</strong> ‚Äî pricing, wallets, Credits, how anchoring works<br>‚Ä¢ <strong>Tool guidance</strong> ‚Äî how to use any of the 20+ ILS tools<br><br>What can I help you with?";if(/thank|thanks|thx|appreciate/.test(e))return"You're welcome! Let me know if you have any other questions about ILS, S4 Ledger, or defense logistics.";if(/help|what.*can.*do|capabilities|feature/.test(e))return"<strong>S4 Agent Capabilities</strong><br><br>I can answer questions about:<br><br><strong>ILS Tools (20):</strong><br>‚Ä¢ Gap Analysis, Action Items, ILS Calendar, DMSMS Tracker<br>‚Ä¢ Readiness/RAM Calculator, Parts Cross-Reference, ROI Calculator<br>‚Ä¢ Lifecycle Cost Estimator, Warranty Tracker, Audit Vault<br>‚Ä¢ Doc Library, Compliance Scorecard, Provisioning/PTD<br>‚Ä¢ Risk Engine, Report Generator, Contract Management<br>‚Ä¢ Digital Thread, Predictive Maintenance, Database Import, Submissions & PTD<br><br><strong>Product & Platform:</strong><br>‚Ä¢ S4 Ledger overview, pricing, how anchoring works<br>‚Ä¢ XRPL wallets, Credits, TrustLines<br>‚Ä¢ Treasury vs. Issuer wallets<br>‚Ä¢ SDK, API, integration guides<br><br><strong>Defense Standards:</strong><br>‚Ä¢ GEIA-STD-0007 / MIL-HDBK-502 (12 ILS elements), NIST 800-171, CMMC, DFARS<br>‚Ä¢ DI numbers (DI-001 through DI-050+)<br>‚Ä¢ FAR/DFARS clauses, DoD 5000 series<br><br><strong>Context-Aware:</strong><br>‚Ä¢ When analysis is loaded, I provide data-driven answers about gaps, costs, and recommendations<br>‚Ä¢ When documents are uploaded, I reference analysis findings and discrepancies";if(/stats|statistic|how.*many.*record|how.*many.*anchor|my.*data|workspace.*status/.test(e))return"<strong>Workspace Statistics</strong><br><br>‚Ä¢ Records in Vault: <strong>"+y.length+"</strong><br>‚Ä¢ Action Items: <strong>"+I.length+"</strong> ("+I.filter(v=>v.done).length+" complete)<br>‚Ä¢ Total Credit Fees: <strong>"+(S?.slsFees||0).toFixed(2)+" Credits</strong> ($"+((S?.slsFees||0)*.01).toFixed(4)+")<br>‚Ä¢ Records Anchored: <strong>"+(S?.anchored||0)+"</strong><br>‚Ä¢ Record Types Used: <strong>"+(S?.types?.size||0)+"</strong><br>‚Ä¢ Uploaded Documents: <strong>"+(typeof uploadedDocumentStore<"u"?uploadedDocumentStore.length:0)+"</strong>";if(/what.*lcsp|lcsp|life.*cycle.*sustain.*plan/.test(e))return'<strong>Life Cycle Sustainment Plan (LCSP)</strong> ‚Äî DI-ILSS-81490<br><br>The LCSP is the top-level ILS planning document that defines the sustainment strategy for the entire program lifecycle. It addresses all 12 ILS elements, establishes performance metrics (Ao, MTBF, MTTR), and is required per DoD Instruction 5000.02.<br><br>Use "Load Full ILS Package" in Gap Analysis to see a sample LCSP structure.';if(/what.*lsar|lsar|logistics.*support.*analysis.*record/.test(e))return"<strong>Logistics Support Analysis Record (LSAR)</strong><br><br>The LSAR is the central database for logistics data generated during the Logistics Support Analysis (LSA) process. It captures task analysis, failure modes, repair levels, support equipment requirements, and spares data per GEIA-STD-0007 (formerly MIL-STD-1388-2B).";if(/what.*phs.*t|phs&t|packaging.*handling|mil.*std.*2073/.test(e))return"<strong>PHS&T ‚Äî Packaging, Handling, Storage & Transportation</strong><br><br>ILS Element #9 per GEIA-STD-0007 (formerly MIL-STD-1388). Covers MIL-STD-2073 (packaging requirements), MIL-STD-129 (marking), and transportation planning. Ensures items arrive at the right place, undamaged, properly identified.";if(/what.*cbm|cbm\+|condition.*based/.test(e))return"<strong>CBM+ (Condition-Based Maintenance Plus)</strong><br><br>DoD maintenance strategy that uses real-time data and analytics to determine maintenance needs based on actual equipment condition rather than fixed schedules. CBM+ integrates with predictive maintenance to reduce unplanned downtime and optimize maintenance intervals.";if(/what.*flis|flis|federal.*logistics/.test(e))return"<strong>FLIS ‚Äî Federal Logistics Information System</strong><br><br>The FLIS is the DoD's central database for logistics data, managed by DLA (Defense Logistics Agency). It contains NSN (National Stock Number) data, item descriptions, management codes, and sourcing information for millions of items. HarborLink's Parts Cross-Reference tool provides a simplified interface to this type of data, with S4 Ledger providing blockchain verification for all parts records.";if(/what.*cdrl|cdrl/.test(e))return"<strong>CDRL ‚Äî Contract Data Requirements List</strong><br><br>The CDRL (DD Form 1423) specifies all data deliverables required under a defense contract. Each CDRL item has:<br>‚Ä¢ DI number (Data Item Description)<br>‚Ä¢ Frequency of submission<br>‚Ä¢ Distribution requirements<br>‚Ä¢ Government review/approval authority<br><br>S4 tracks CDRL status in the Contract Management tool.";if(/what.*itar|itar|arms.*regulation/.test(e))return"<strong>ITAR ‚Äî International Traffic in Arms Regulations</strong><br><br>ITAR controls the export and transfer of defense-related articles and services. Key points:<br>‚Ä¢ Administered by DDTC (Directorate of Defense Trade Controls)<br>‚Ä¢ Applies to items on the USML (US Munitions List)<br>‚Ä¢ Violations can result in criminal penalties up to $1M per violation<br>‚Ä¢ S4 Ledger's supply chain risk engine flags potential ITAR/EAR concerns in the supply chain";if(!r&&/gap|analysis|result|score|status/.test(e))return`I don't have analysis results yet. Upload documents and click <strong>"Run Full Analysis"</strong> to generate results I can help interpret.`;if(/^(hi|hello|hey|sup|yo|howdy|greetings|good\s*(morning|afternoon|evening|day))\b/i.test(e)){var o=["Hey there! üëã I'm your S4 Agent ‚Äî ready to help with ILS, anchoring, compliance, or really anything. What's on your mind?","Hello! Welcome to S4 Ledger. I can help with defense logistics, run analysis, answer questions, or just chat. What can I do for you?","Hi! I'm here to help ‚Äî whether it's ILS gap analysis, record anchoring, XRPL questions, or general conversation. Fire away!"];return o[Math.floor(Math.random()*o.length)]}if(/how\s*are\s*you|how\'s\s*it\s*going|what\'s\s*up/i.test(e))return"Running at full capacity! All systems operational. üöÄ How can I help you today?";if(/thank|thanks|thx|appreciate/i.test(e))return"You're welcome! Happy to help. Let me know if you need anything else. üôè";if(/who\s*(are|r)\s*you|what\s*(are|r)\s*you|your\s*name/i.test(e))return"<strong>I'm the S4 Agent</strong> ‚Äî an AI assistant built into S4 Ledger by S4 Systems, LLC.<br><br>I specialize in defense logistics and Integrated Logistics Support (ILS), but I can also help with general questions, math, recommendations, and conversation. I'm designed to be defense-compliant while being as capable as the AI assistants you're used to.<br><br>When connected to an LLM backend (OpenAI, Anthropic, or Azure), I have full conversational AI capabilities. In local mode, I use pattern matching with deep ILS domain knowledge.";if(/^\s*(?:what\s*is\s*|calculate\s*|compute\s*|solve\s*)?([\d\s+\-*/().^%]+)\s*[=?]?\s*$/i.test(e)||/^(?:what\s*is\s*|calculate\s*)?\d+\s*[+\-*/^%]\s*\d+/i.test(e))try{var c=e.replace(/what\s*is\s*|calculate\s*|compute\s*|solve\s*|=|\?/gi,"").trim();if(c=c.replace(/\^/g,"**"),c=c.replace(/x/gi,"*"),/^[\d\s+\-*/().%]*$/.test(c)){var l=Function('"use strict"; return ('+c+")")();if(typeof l=="number"&&isFinite(l))return"<strong>"+e.trim()+'</strong><br><br>= <strong style="color:#00aaff;font-size:1.2em">'+l.toLocaleString(void 0,{maximumFractionDigits:10})+"</strong>"}}catch{}if(/square\s*root|sqrt/i.test(e)){var s=e.match(/(\d+\.?\d*)/);if(s){var d=Math.sqrt(parseFloat(s[1]));return"‚àö"+s[1]+' = <strong style="color:#00aaff">'+d.toLocaleString(void 0,{maximumFractionDigits:6})+"</strong>"}}if(/percent|%\s*of/i.test(e)){var u=e.match(/(\d+\.?\d*)\s*%\s*of\s*(\d+\.?\d*)/i)||e.match(/what\s*is\s*(\d+\.?\d*)\s*percent\s*of\s*(\d+\.?\d*)/i);if(u){var m=parseFloat(u[1])/100*parseFloat(u[2]);return u[1]+"% of "+u[2]+' = <strong style="color:#00aaff">'+m.toLocaleString(void 0,{maximumFractionDigits:4})+"</strong>"}}if(/convert|how\s*many\s*(inches|feet|meters|cm|mm|kg|lbs|pounds|miles|km|celsius|fahrenheit|gallons|liters)/i.test(e)){var p=e.match(/(\d+\.?\d*)\s*(inches?|feet|foot|ft|meters?|m|cm|mm|kg|kilograms?|lbs?|pounds?|miles?|mi|km|kilometers?|celsius|c|fahrenheit|f|gallons?|gal|liters?|l)\s*(?:to|in|into)\s*(inches?|feet|foot|ft|meters?|m|cm|mm|kg|kilograms?|lbs?|pounds?|miles?|mi|km|kilometers?|celsius|c|fahrenheit|f|gallons?|gal|liters?|l)/i);if(p){var f=parseFloat(p[1]),g=p[2].toLowerCase().replace(/s$/,""),b=p[3].toLowerCase().replace(/s$/,""),w={inch_cm:2.54,cm_inch:1/2.54,foot_meter:.3048,ft_meter:.3048,meter_foot:3.28084,meter_ft:3.28084,mile_km:1.60934,mi_km:1.60934,km_mile:.621371,km_mi:.621371,kg_lb:2.20462,kg_pound:2.20462,lb_kg:.453592,pound_kg:.453592,gallon_liter:3.78541,gal_liter:3.78541,gal_l:3.78541,liter_gallon:.264172,l_gal:.264172,l_gallon:.264172,cm_mm:10,mm_cm:.1,m_cm:100,cm_m:.01,m_mm:1e3,mm_m:.001,celsius_fahrenheit:null,c_f:null,fahrenheit_celsius:null,f_c:null},A=g+"_"+b;if(A in w){var C;return A==="celsius_fahrenheit"||A==="c_f"?C=f*9/5+32:A==="fahrenheit_celsius"||A==="f_c"?C=(f-32)*5/9:C=f*w[A],"<strong>"+f+" "+p[2]+'</strong> = <strong style="color:#00aaff">'+C.toLocaleString(void 0,{maximumFractionDigits:4})+" "+p[3]+"</strong>"}}}if(/what\s*(time|day|date)|current\s*(time|date)|today/i.test(e)){var T=new Date;return"It's <strong>"+T.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})+"</strong> at <strong>"+T.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})+"</strong> (your local time)."}if(/pricing|how\s*much|cost|subscription|plan/i.test(e))return'<strong>S4 Ledger Pricing</strong><br><br>‚Ä¢ <strong>Starter</strong> ‚Äî $29/mo: 25,000 Credits, 5 users, all 20+ ILS tools<br>‚Ä¢ <strong>Professional</strong> ‚Äî $99/mo: 100,000 Credits, 25 users, API access, HarborLink<br>‚Ä¢ <strong>Enterprise</strong> ‚Äî $299/mo: 500,000 Credits, unlimited users, dedicated support, SSO<br>‚Ä¢ <strong>Government</strong> ‚Äî Custom: FedRAMP, IL4/5, on-prem option<br><br>Each anchor costs 0.01 Credits (~$0.0001). Credits = SLS (Secure Logistics Standard), our utility token on XRPL.<br><br><a href="../s4-pricing/" style="color:#00aaff">View full pricing ‚Üí</a>';if(/what\s*is\s*sls|sls\s*token|what.*sls/i.test(e))return"<strong>Credits ‚Äî SLS (Secure Logistics Standard)</strong><br><br>Credits are S4 Ledger's utility token on the XRP Ledger (XRPL). They power every action on the platform:<br>‚Ä¢ <strong>0.01 Credits per anchor</strong> ‚Äî ~$0.0001 per record<br>‚Ä¢ 100M fixed supply ‚Äî deflationary model<br>‚Ä¢ Issued on XRPL ‚Äî fast, transparent, low-cost<br>‚Ä¢ Purchased through your subscription plan<br>‚Ä¢ Each anchor sends 0.01 Credits from your operational wallet to the Treasury wallet<br><br>Each anchor transfers 0.01 Credits from your operational wallet to the S4 Treasury on the XRP Ledger ‚Äî fully verifiable on-chain.";if(/xrpl|xrp\s*ledger|blockchain|how.*anchor/i.test(e))return"<strong>XRPL Blockchain Anchoring</strong><br><br>S4 Ledger uses the XRP Ledger for tamper-proof record verification:<br>‚Ä¢ Your record content is hashed (SHA-256) client-side ‚Äî <strong>zero data on-chain</strong><br>‚Ä¢ The hash fingerprint is anchored as a Memo in an XRPL transaction<br>‚Ä¢ Each anchor costs 0.01 Credits (transferred Ops Wallet ‚Üí Treasury)<br>‚Ä¢ The XRPL transaction hash is your immutable proof<br>‚Ä¢ Anyone can verify: re-hash the content and compare to the on-chain Memo<br><br>XRPL was chosen for speed (~3-5 sec finality), low cost, and energy efficiency.";if(/demo\s*mode|am\s*i\s*in\s*demo|what\s*mode/i.test(e)){var n="";if(k){var P=k.subscription?.sls_allocation||25e3,O=S.slsFees||0,q=P-O;n+="<br><br><strong>Your Demo Session:</strong><br>",n+="‚Ä¢ Plan: "+(k.subscription?.label||"Starter")+"<br>",n+="‚Ä¢ Credits Allocated: "+P.toLocaleString()+"<br>",n+="‚Ä¢ Credits Spent: "+O.toFixed(2)+" ("+S.anchored+" anchors √ó 0.01 Credits)<br>",n+='‚Ä¢ Credits Remaining: <strong style="color:#c9a84c">'+q.toLocaleString(void 0,{maximumFractionDigits:2})+"</strong><br>",n+="‚Ä¢ Wallet: "+(k.wallet?.address?.substring(0,8)||"")+"...<br>",n+="<br>Each anchor transfers <strong>0.01 Credits on the XRP Ledger</strong> from your operational wallet to the S4 Treasury. Your Credits balance updates in real time."}return n}if(/recommend|suggest|should\s*i|best\s*(practice|way|approach)|advice/i.test(e))return/anchor|record/i.test(e)?"<strong>Anchoring Best Practices:</strong><br><br>1. <strong>Include context</strong> ‚Äî Add metadata like date, system, contract #<br>2. <strong>Enable encryption</strong> for CUI/sensitive records<br>3. <strong>Use specific record types</strong> ‚Äî helps with search and compliance<br>4. <strong>Verify after anchoring</strong> ‚Äî confirms integrity immediately<br>5. <strong>Save explorer links</strong> ‚Äî bookmark the XRPL transaction<br>6. <strong>Batch related records</strong> ‚Äî anchor reports after they're complete rather than in-progress":/ils|logistics|supply/i.test(e)?"<strong>ILS Recommendations:</strong><br><br>1. <strong>Start with Gap Analysis</strong> ‚Äî upload your DRL/CDRL to identify missing deliverables<br>2. <strong>Address critical gaps first</strong> ‚Äî focus on items with highest cost/schedule risk<br>3. <strong>Use Action Items</strong> ‚Äî assign owners and deadlines to every gap<br>4. <strong>Run DMSMS checks</strong> ‚Äî obsolescence can derail a program<br>5. <strong>Track readiness quarterly</strong> ‚Äî compare Ao/MTBF/MTTR trends<br>6. <strong>Anchor compliance artifacts</strong> ‚Äî creates immutable audit trail":"<strong>General Recommendations:</strong><br><br>Tell me what area you'd like recommendations for and I'll give you specific, actionable advice. I can help with:<br>‚Ä¢ ILS strategy and gap remediation<br>‚Ä¢ Record anchoring workflows<br>‚Ä¢ Compliance (CMMC, NIST, DFARS)<br>‚Ä¢ Platform configuration and setup<br>‚Ä¢ AI agent configuration";if(/joke|funny|make\s*me\s*laugh/i.test(e)){var de=["Why did the logistician bring a ladder to the meeting? Because they heard the readiness scores were through the roof! üòÇ",`What's a supply chain manager's favorite song? "Chain of Fools" by Aretha Franklin! üéµ`,"How many ILS managers does it take to change a light bulb? One to change it, three to document it, and five to review the CDRL. üí°","Why did the NSN cross the road? To get to the other CAGE code! üì¶"];return de[Math.floor(Math.random()*de.length)]}if(/weather/i.test(e))return"I don't have access to live weather data, but I can tell you the <strong>forecast for your ILS program</strong> looks much brighter after a gap analysis! &#x2600;&#xFE0F Try asking me about readiness scores instead.";if(/meaning\s*of\s*life|42/i.test(e))return"The answer is <strong>42</strong> ‚Äî but in defense logistics, the real answer is <strong>keeping Ao above 90%</strong>. üòÑ";if(/help|what\s*can\s*you\s*do|capabilities|features/i.test(e))return"<strong>S4 Agent Capabilities:</strong><br><br><strong>üîß ILS & Defense:</strong><br>‚Ä¢ Gap analysis interpretation & critical item triage<br>‚Ä¢ DI number explanations (DI-001 through DI-044)<br>‚Ä¢ CAR drafting, compliance checks, cost estimation<br>‚Ä¢ Defense acronym definitions (CDRL, LCSP, DMSMS, etc.)<br>‚Ä¢ MIL-STD and regulation guidance<br><br><strong>üìä Platform:</strong><br>‚Ä¢ Anchoring help, verification, XRPL questions<br>‚Ä¢ Credits token and pricing info<br>‚Ä¢ Demo mode status and balance tracking<br>‚Ä¢ Tool-specific guidance for all 20+ ILS tools<br><br><strong>ü§ñ General:</strong><br>‚Ä¢ Math calculations and unit conversions<br>‚Ä¢ Date/time queries<br>‚Ä¢ Recommendations and best practices<br>‚Ä¢ General conversation and Q&A<br><br><em>Ask me anything ‚Äî I can help with ILS analysis, defense logistics, compliance, and platform questions.</em>";if(/what\s*(is|are|does)\s/i.test(e)&&e.length>10){if(/blockchain|distributed ledger|dlt/i.test(e))return"<strong>Blockchain / Distributed Ledger Technology</strong><br><br>A blockchain is a distributed, immutable ledger that records transactions across a peer-to-peer network. Key properties:<br><br>‚Ä¢ <strong>Immutability</strong> ‚Äî once written, records cannot be altered<br>‚Ä¢ <strong>Transparency</strong> ‚Äî all participants can verify the ledger<br>‚Ä¢ <strong>Decentralization</strong> ‚Äî no single point of failure<br>‚Ä¢ <strong>Cryptographic security</strong> ‚Äî SHA-256 hashing ensures integrity<br><br>S4 Ledger uses the <strong>XRP Ledger</strong> (XRPL) ‚Äî a high-speed, energy-efficient blockchain with 3-5 second settlement and minimal fees.";if(/xrp|xrpl|xrp ledger|ripple/i.test(e))return"<strong>XRP Ledger (XRPL)</strong><br><br>The XRP Ledger is an open-source, decentralized blockchain:<br><br>‚Ä¢ <strong>Speed:</strong> 3-5 second transaction settlement<br>‚Ä¢ <strong>Cost:</strong> ~$0.0002 per transaction<br>‚Ä¢ <strong>Energy:</strong> 61,000x more efficient than Bitcoin<br>‚Ä¢ <strong>Reliability:</strong> 10+ years of operation, 80M+ ledgers closed<br>‚Ä¢ <strong>Tokens:</strong> Native issued currency support (like Credits)<br><br>S4 Ledger anchors defense records to XRPL Mainnet, making them independently verifiable by anyone.";if(/sha.?256|hash function|hashing|cryptograph/i.test(e))return"<strong>SHA-256 Hashing</strong><br><br>SHA-256 (Secure Hash Algorithm 256-bit) produces a unique 64-character fingerprint of any data:<br><br>‚Ä¢ <strong>Deterministic:</strong> Same input always produces the same hash<br>‚Ä¢ <strong>One-way:</strong> Cannot reverse the hash to get original data<br>‚Ä¢ <strong>Collision-resistant:</strong> Virtually impossible for two inputs to produce the same hash<br>‚Ä¢ <strong>Avalanche effect:</strong> Changing one bit changes ~50% of the output<br><br>S4 Ledger uses SHA-256 to create tamper-proof fingerprints of defense records before anchoring to XRPL.";if(/s4\s*(ledger|systems|platform)|this platform/i.test(e))return"<strong>S4 Ledger</strong><br><br>S4 Ledger is a blockchain-verified defense record management platform built by S4 Systems, LLC.<br><br><strong>What it does:</strong><br>‚Ä¢ Anchors defense logistics records to the XRP Ledger<br>‚Ä¢ Creates tamper-proof audit trails for CDRL, maintenance, supply chain, and ordnance records<br>‚Ä¢ Provides 20+ integrated ILS (Integrated Logistics Support) analysis tools<br>‚Ä¢ Supports 156+ military record types across all service branches<br><br><strong>Key value:</strong> 99.9% cost reduction vs. traditional notarization ($0.0001 vs. $25-$150 per record).<br><br><strong>Technology:</strong> XRPL Mainnet, Credits utility token, SHA-256 hashing, AI-powered analysis."}if(/who\s*(made|built|created|founded|is behind)/i.test(e))return'<strong>S4 Systems, LLC</strong><br><br>S4 Ledger is built by <strong>S4 Systems, LLC</strong>, founded by <strong>Nick Frankfort</strong>. The platform combines blockchain technology with defense logistics expertise to create tamper-proof audit trails for the Department of Defense.<br><br>‚Ä¢ Website: <a href="https://s4ledger.com" target="_blank" style="color:var(--accent)">s4ledger.com</a><br>‚Ä¢ Treasury: <a href="https://livenet.xrpl.org/accounts/rMLmkrxpadq5z6oTDmq8GhQj9LKjf1KLqJ" target="_blank" style="color:var(--accent)">View on XRPL</a>';if(/thank|thanks|appreciate|great job|nice work|good bot/i.test(e))return"You‚Äôre welcome! I‚Äôm here to help with anything ‚Äî defense logistics, platform questions, or general inquiries. Just ask!";if(/weather|temperature outside|forecast/i.test(e))return"I don‚Äôt have access to live weather data, but I can help with anything related to defense logistics, S4 Ledger, ILS analysis, or blockchain verification. What would you like to know?";if(/joke|funny|humor|make me laugh/i.test(e))return"Why did the logistics officer bring a ladder to the supply depot?<br><br>Because the readiness score was through the roof! üòÑ<br><br>But seriously, if your readiness score IS through the roof, I can help you analyze what‚Äôs driving it. Just load a program in Gap Analysis!";if(/compare|vs|versus|difference between/i.test(e)&&/s4.*vs|vs.*s4|compared.*s4|s4.*compar/i.test(e))return"<strong>S4 Ledger vs. Traditional Methods</strong><br><br>| Feature | S4 Ledger | Traditional |<br>|---|---|---|<br>| Cost per record | $0.0001 | $25-$150 |<br>| Speed | 3-5 seconds | Days-weeks |<br>| Verification | Anyone, anytime | Request from custodian |<br>| Tamper detection | Automatic (hash mismatch) | Manual audit |<br>| Audit trail | Immutable blockchain | Paper/database |<br>| Interoperability | REST API + Python SDK | Manual integration |<br><br>S4 Ledger reduces defense record management costs by <strong>99.9%</strong> while adding blockchain-grade security.";if(/sbom|software\s*bill|cyclonedx|spdx|software\s*composition/i.test(e))return/cve|vulnerabilit|security\s*scan|scan\s*for/i.test(e)?"<strong>SBOM CVE Scanning</strong><br><br>The SBOM Viewer scans all software components against known vulnerability databases:<br>‚Ä¢ <strong>NVD</strong> (National Vulnerability Database) ‚Äî NIST-maintained<br>‚Ä¢ CVE severity classification (Critical/High/Medium/Low)<br>‚Ä¢ CVSS scores for risk quantification<br>‚Ä¢ Remediation guidance per component<br><br>Go to the <strong>SBOM Viewer</strong> tool, select a program, and click <strong>Scan Components</strong>.":/eo\s*14028|executive\s*order/i.test(e)?"<strong>EO 14028 ‚Äî Cybersecurity</strong><br><br>Requires SBOM for all government software in CycloneDX or SPDX format. S4 Ledger generates EO 14028-compliant SBOMs with blockchain anchoring for immutable attestation.":/license|gpl|apache|mit/i.test(e)?"<strong>SBOM License Analysis</strong><br><br>‚Ä¢ <strong>Permissive:</strong> MIT, Apache 2.0, BSD ‚Äî low risk<br>‚Ä¢ <strong>Copyleft:</strong> GPL, LGPL, AGPL ‚Äî may require source disclosure<br>‚Ä¢ <strong>Commercial:</strong> Check contract terms<br>‚Ä¢ <strong>Unknown:</strong> No declared license ‚Äî high risk<br><br>Defense contracts often prohibit GPL-licensed components.":/risk|supply\s*chain|firmware/i.test(e)?"<strong>SBOM Supply Chain Risk</strong><br><br>‚Ä¢ Single-source dependencies<br>‚Ä¢ Outdated versions behind security patches<br>‚Ä¢ Firmware components requiring special attention<br>‚Ä¢ Foreign-origin code ‚Äî ITAR/EAR concerns<br>‚Ä¢ Transitive dependency risks<br><br>All scans can be anchored to XRPL for immutable proof.":"<strong>Software Bill of Materials (SBOM)</strong><br><br>An SBOM is a comprehensive inventory of all software components ‚Äî like a nutrition label for software.<br><br>‚Ä¢ Supports <strong>CycloneDX 1.5</strong>, <strong>SPDX 2.3</strong>, <strong>S4 Native</strong><br>‚Ä¢ CVE scanning against NVD<br>‚Ä¢ License compliance analysis<br>‚Ä¢ EO 14028 compliance<br>‚Ä¢ Blockchain attestation to XRPL<br><br>Go to the <strong>SBOM Viewer</strong> tool in Anchor-S4.";if(/history|historical|when\s*did|when\s*was|world\s*war|civil\s*war|revolution|ancient|medieval/i.test(e))return/world\s*war\s*(1|i|one)|ww1|wwi|first\s*world/i.test(e)?"<strong>World War I (1914‚Äì1918)</strong><br><br>‚Ä¢ Triggered by assassination of Archduke Franz Ferdinand<br>‚Ä¢ Allied Powers vs Central Powers<br>‚Ä¢ Trench warfare, tanks, poison gas, aerial combat<br>‚Ä¢ ~20 million deaths, ~21 million wounded<br>‚Ä¢ Ended with Armistice ‚Äî November 11, 1918<br>‚Ä¢ Treaty of Versailles (1919) reshaped Europe":/world\s*war\s*(2|ii|two)|ww2|wwii|second\s*world/i.test(e)?"<strong>World War II (1939‚Äì1945)</strong><br><br>‚Ä¢ Allied Powers (US, UK, USSR, China) vs Axis (Germany, Japan, Italy)<br>‚Ä¢ Pearl Harbor ‚Äî Dec 7, 1941<br>‚Ä¢ D-Day ‚Äî June 6, 1944<br>‚Ä¢ V-E Day ‚Äî May 8, 1945; V-J Day ‚Äî Aug 15, 1945<br>‚Ä¢ ~70‚Äì85 million deaths<br>‚Ä¢ Led to United Nations, NATO, Cold War":/cold\s*war|soviet|ussr/i.test(e)?"<strong>The Cold War (1947‚Äì1991)</strong><br><br>‚Ä¢ US vs Soviet Union ideological struggle<br>‚Ä¢ Nuclear arms race ‚Äî MAD doctrine<br>‚Ä¢ Space Race ‚Äî Sputnik to Apollo 11<br>‚Ä¢ Proxy wars ‚Äî Korea, Vietnam, Afghanistan<br>‚Ä¢ Berlin Wall fell Nov 9, 1989<br>‚Ä¢ USSR dissolved Dec 26, 1991":/american\s*revolution|1776|founding/i.test(e)?"<strong>American Revolution (1775‚Äì1783)</strong><br><br>‚Ä¢ Declaration of Independence ‚Äî July 4, 1776<br>‚Ä¢ Key battles: Lexington & Concord, Bunker Hill, Yorktown<br>‚Ä¢ George Washington ‚Äî Commander-in-Chief, 1st President<br>‚Ä¢ Treaty of Paris (1783) ‚Äî Britain recognized independence<br>‚Ä¢ Constitution ratified 1788, Bill of Rights 1791":/civil\s*war|confedera|union\s*army|lincoln|gettysburg/i.test(e)?"<strong>American Civil War (1861‚Äì1865)</strong><br><br>‚Ä¢ Union (North) vs Confederacy (South)<br>‚Ä¢ Central issue: slavery and states‚Äô rights<br>‚Ä¢ Emancipation Proclamation ‚Äî Jan 1, 1863<br>‚Ä¢ Key battles: Gettysburg, Antietam, Vicksburg<br>‚Ä¢ ~620,000‚Äì750,000 military deaths<br>‚Ä¢ 13th Amendment abolished slavery (1865)":"I can help with history questions ‚Äî wars, leaders, civilizations, and eras. What specific topic interests you?";if(/science|physics|chemistry|biology|evolution|atom|molecule|dna|gene|quantum|relativity|gravity|periodic/i.test(e))return/quantum|qubit|superposition/i.test(e)?"<strong>Quantum Physics</strong><br><br>‚Ä¢ <strong>Superposition</strong> ‚Äî particles exist in multiple states until measured<br>‚Ä¢ <strong>Entanglement</strong> ‚Äî linked particles affect each other instantly<br>‚Ä¢ <strong>Wave-particle duality</strong> ‚Äî light is both wave and particle<br>‚Ä¢ <strong>Uncertainty principle</strong> ‚Äî can't know both position and momentum precisely<br>‚Ä¢ <strong>Quantum computing</strong> ‚Äî qubits leveraging superposition for exponential speedup":/relativity|einstein|e\s*=\s*mc/i.test(e)?"<strong>Einstein's Relativity</strong><br><br><strong>Special (1905):</strong> Speed of light is constant, E=mc¬≤, time dilation<br><strong>General (1915):</strong> Gravity = curvature of spacetime, predicted gravitational waves (detected 2015 by LIGO), black holes":/dna|gene|genetic|crispr/i.test(e)?"<strong>DNA & Genetics</strong><br><br>‚Ä¢ Double helix ‚Äî Watson & Crick (1953)<br>‚Ä¢ 4 bases: A, T, G, C<br>‚Ä¢ Human genome: ~3.2 billion base pairs, ~20,000 genes<br>‚Ä¢ CRISPR-Cas9: precise gene editing technology":/evolution|darwin|natural\s*selection/i.test(e)?"<strong>Evolution</strong><br><br>Charles Darwin's theory of natural selection (1859):<br>‚Ä¢ Variation exists within populations<br>‚Ä¢ Traits that improve survival are passed on<br>‚Ä¢ Over time, populations change and new species emerge<br>‚Ä¢ Evidence: fossils, DNA comparisons, observable adaptation<br>‚Ä¢ Life on Earth: ~3.8 billion years old":"I can discuss physics, chemistry, biology, astronomy, and more. What area interests you?";if(/capital\s*of|largest\s*country|population|continent|ocean|where\s*is|geography|how many\s*countr/i.test(e))return/capital\s*of\s*(the\s*)?(us|usa|united\s*states|america)/i.test(e)?"The capital of the United States is <strong>Washington, D.C.</strong>":/capital\s*of\s*(the\s*)?(uk|united\s*kingdom|england|britain)/i.test(e)?"The capital of the United Kingdom is <strong>London</strong>.":/capital\s*of\s*(france)/i.test(e)?"The capital of France is <strong>Paris</strong>.":/capital\s*of\s*(germany)/i.test(e)?"The capital of Germany is <strong>Berlin</strong>.":/capital\s*of\s*(japan)/i.test(e)?"The capital of Japan is <strong>Tokyo</strong>.":/capital\s*of\s*(china)/i.test(e)?"The capital of China is <strong>Beijing</strong>.":/capital\s*of\s*(russia)/i.test(e)?"The capital of Russia is <strong>Moscow</strong>.":/capital\s*of\s*(australia)/i.test(e)?"The capital of Australia is <strong>Canberra</strong>.":/capital\s*of\s*(canada)/i.test(e)?"The capital of Canada is <strong>Ottawa</strong>.":/capital\s*of\s*(india)/i.test(e)?"The capital of India is <strong>New Delhi</strong>.":/capital\s*of\s*(brazil)/i.test(e)?"The capital of Brazil is <strong>Bras√≠lia</strong>.":/capital\s*of\s*(mexico)/i.test(e)?"The capital of Mexico is <strong>Mexico City</strong>.":/capital\s*of\s*(italy)/i.test(e)?"The capital of Italy is <strong>Rome</strong>.":/capital\s*of\s*(spain)/i.test(e)?"The capital of Spain is <strong>Madrid</strong>.":/how many\s*continent/i.test(e)?"There are <strong>7 continents</strong>: Africa, Antarctica, Asia, Australia/Oceania, Europe, North America, South America.":/how many\s*ocean/i.test(e)?"<strong>5 oceans</strong>: Pacific, Atlantic, Indian, Southern, Arctic.":/how many\s*countr/i.test(e)?"<strong>195 countries</strong> ‚Äî 193 UN member states plus Vatican City and Palestine.":"I can help with geography ‚Äî capitals, countries, continents, oceans, and more. What would you like to know?";if(/space|planet|solar\s*system|nasa|moon|mars|jupiter|star|galaxy|universe|astronaut|black\s*hole|light\s*year/i.test(e))return/how many\s*planet|planet.*solar/i.test(e)?"<strong>8 Planets</strong> (from Sun): Mercury, Venus, Earth, Mars, Jupiter, Saturn, Uranus, Neptune.<br>Pluto was reclassified as a dwarf planet in 2006.":/moon\s*landing|apollo\s*11/i.test(e)?'<strong>Apollo 11</strong> ‚Äî July 20, 1969<br>Neil Armstrong & Buzz Aldrin walked on the Moon. "One small step for man, one giant leap for mankind." 12 total moonwalkers across 6 Apollo missions.':/black\s*hole/i.test(e)?"<strong>Black Holes</strong><br><br>Regions where gravity is so extreme nothing escapes ‚Äî not even light.<br>‚Ä¢ Event horizon ‚Äî the point of no return<br>‚Ä¢ Sagittarius A* ‚Äî supermassive BH at Milky Way's center (~4M solar masses)<br>‚Ä¢ First image captured 2019 (M87* by Event Horizon Telescope)":/mars/i.test(e)?`<strong>Mars</strong><br><br>The "Red Planet" ‚Äî 4th from the Sun.<br>‚Ä¢ Diameter: ~6,779 km (about half Earth's)<br>‚Ä¢ Day: 24h 37m; Year: 687 Earth days<br>‚Ä¢ Rovers: Curiosity (2012), Perseverance (2021)<br>‚Ä¢ Thin CO‚ÇÇ atmosphere, polar ice caps<br>‚Ä¢ Target for future human missions (SpaceX, NASA)`:"I can answer space, astronomy, and NASA questions. What would you like to know?";if(/programming|python|javascript|coding|software|computer|algorithm|machine\s*learning|artificial\s*intelligence|\bai\b.*\b(what|how|explain)|neural\s*network|deep\s*learning/i.test(e))return/what\s*is\s*(ai|artificial\s*intelligence)/i.test(e)?"<strong>Artificial Intelligence</strong><br><br>‚Ä¢ <strong>Machine Learning</strong> ‚Äî algorithms that learn from data<br>‚Ä¢ <strong>Deep Learning</strong> ‚Äî neural networks with many layers<br>‚Ä¢ <strong>LLMs</strong> ‚Äî GPT, Claude, etc. for text generation<br>‚Ä¢ <strong>Computer Vision</strong> ‚Äî image understanding<br>‚Ä¢ <strong>NLP</strong> ‚Äî natural language processing<br><br>S4 Ledger uses AI for gap analysis, SBOM scanning, predictive maintenance, and this agent.":/python/i.test(e)&&!/sdk/i.test(e)?"<strong>Python</strong><br><br>High-level language by Guido van Rossum (1991). Used for web dev, data science, AI/ML, automation. S4 Ledger provides a <strong>Python SDK</strong> ‚Äî <code>pip install s4-sdk</code>.":"I can help with tech and programming questions. What would you like to know?";if(/stress|anxious|anxiety|overwhelm|depressed|motivation|productiv|procrastinat/i.test(e))return/stress|anxious|anxiety/i.test(e)?"<strong>Managing Stress</strong><br><br>‚Ä¢ Deep breathing ‚Äî 4-7-8 technique<br>‚Ä¢ Exercise ‚Äî even 20 min walks reduce cortisol<br>‚Ä¢ Sleep hygiene ‚Äî consistent schedule<br>‚Ä¢ Task chunking ‚Äî break big tasks into small pieces<br>‚Ä¢ Nature ‚Äî 20 min outdoors measurably reduces stress<br><br>If stress is persistent, consider speaking with a professional. You're not alone.":"<strong>Productivity Tips</strong><br><br>‚Ä¢ <strong>Pomodoro</strong> ‚Äî 25 min work, 5 min break<br>‚Ä¢ <strong>2-minute rule</strong> ‚Äî if < 2 min, do it now<br>‚Ä¢ <strong>Eat the frog</strong> ‚Äî hardest task first<br>‚Ä¢ <strong>Time blocking</strong> ‚Äî schedule tasks on calendar<br>‚Ä¢ <strong>3 daily priorities</strong> ‚Äî not a 20-item list";if(/sport|football|basketball|baseball|soccer|nfl|nba|mlb|nhl|tennis|golf|olympic/i.test(e))return/nfl|football|super\s*bowl/i.test(e)?"<strong>NFL</strong><br><br>32 teams, 17-game regular season, Super Bowl in February. Most wins: Patriots & Steelers (6 each). I have general sports knowledge but not live scores.":/nba|basketball/i.test(e)?"<strong>NBA</strong><br><br>30 teams, 82-game season. Most championships: Boston Celtics (18). All-time greats: Jordan, LeBron, Kareem, Bill Russell.":"I can discuss sports history, rules, records, and trivia. What sport or team interests you?";if(/recipe|cook|food|restaurant|cuisine|nutrition/i.test(e))return"I can help with cooking tips, nutrition info, and food knowledge. What would you like to know?";if(/music|song|album|movie|film|tv\s*show|book|novel/i.test(e))return"I can chat about music, movies, books, and entertainment. What interests you?";if(/stock|invest|market|economy|inflation|business|startup|crypto(?!graph)|bitcoin|401k|retirement/i.test(e))return/crypto(?!graph)|bitcoin|ethereum/i.test(e)&&!/xrp|xrpl|sls/i.test(e)?"<strong>Cryptocurrency</strong><br><br>‚Ä¢ <strong>Bitcoin</strong> ‚Äî Digital gold, ~21M supply cap<br>‚Ä¢ <strong>Ethereum</strong> ‚Äî Smart contracts, DeFi, NFTs<br>‚Ä¢ <strong>XRP</strong> ‚Äî Fast payments; S4 Ledger uses XRPL<br>‚Ä¢ <strong>Stablecoins</strong> ‚Äî USDC, USDT pegged to USD":"I can discuss business, economics, and finance at a general level. What would you like to know?";if(/fibonacci/i.test(e))return"<strong>Fibonacci Sequence</strong>: 0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144...<br>Each number = sum of two preceding. Approaches the Golden Ratio (œÜ ‚âà 1.618).";if(/prime\s*number/i.test(e))return"<strong>Primes</strong>: 2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47...<br>Infinitely many (proved by Euclid). Foundational to cryptography.";if(/golden\s*ratio/i.test(e))return"<strong>Golden Ratio (œÜ)</strong> = (1+‚àö5)/2 ‚âà <strong>1.618</strong>. Found in art, architecture, nature, and Fibonacci numbers.";if(/translate|how\s*do\s*you\s*say|in\s*(spanish|french|german|japanese|chinese)/i.test(e))return"I have basic phrase knowledge in many languages. For accurate translations, try Google Translate or DeepL. Happy to help with common phrases though!";var h="I'm the S4 Agent ‚Äî your all-purpose AI assistant. ";return r?h+="Analysis loaded for <strong>"+r.prog.name+"</strong> ("+r.pct+"% readiness).<br><br>":h+="I can help with virtually anything:<br><br>",h+="<strong>üîß Defense & ILS:</strong> gap analysis, DMSMS, readiness, compliance, SBOM<br>",h+="<strong>üìä Platform:</strong> anchoring, verification, Credits, pricing, wallets<br>",h+="<strong>ü§ñ Knowledge:</strong> history, science, space, geography, technology<br>",h+="<strong>üìö Education:</strong> math, conversions, programming, languages<br>",h+="<strong>üèà Life:</strong> sports, food, music, business, finance, productivity<br>",h+="<strong>üí¨ Personal:</strong> advice, recommendations, conversation<br>",h+="<br>Ask me literally anything ‚Äî I'll do my best to help!",h}function ra(t){const e=t.match(/di-?0*(\d+)/i);if(!e)return"Please specify a DI number (e.g., DI-009, DI-020).";const n=parseInt(e[1]),a={1:{t:"Contract Data Requirements List (CDRL)",desc:"Master list of all contractual deliverables. References MIL-STD-1808."},2:{t:"SOW Compliance Matrix",desc:"Maps SOW paragraphs to contractor compliance status."},3:{t:"Integrated Master Schedule (IMS)",desc:"High-level program schedule linking all logistics milestones."},4:{t:"Systems Engineering Plan (SEP)",desc:"Systems engineering approach and design review gates."},5:{t:"Interface Control Document (ICD)",desc:"Defines all system interfaces (mechanical, electrical, data)."},6:{t:"Test & Evaluation Master Plan (TEMP)",desc:"Comprehensive T&E strategy per DoDI 5000.89."},7:{t:"Weight Report",desc:"Weight accounting for hull margins, stability compliance."},8:{t:"Electrical Load Analysis",desc:"Power generation vs. demand analysis for all ship conditions."},9:{t:"Purchase Order Index",desc:"Tracks all subcontract and material purchase orders. Essential for schedule management and GFM coordination."},10:{t:"Long Lead Time Material List",desc:"Items with procurement lead > 6 months. Critical for schedule risk."},11:{t:"Government Furnished Material (GFM) List",desc:"All GFM items the government must provide to the contractor."},12:{t:"HazMat List",desc:"Hazardous material inventory per environmental compliance requirements."},20:{t:"Vendor Recommended Spares (VRS)",desc:"Manufacturer-recommended spare parts for initial provisioning. Basis for COSAL/APL development. Critical for post-delivery readiness."},21:{t:"Allowance Parts List (APL)",desc:"Authorized shipboard spare parts inventory (COSAL)."},31:{t:"IUID Register",desc:"Item Unique Identification per MIL-STD-130. Tracks serially-managed components."},32:{t:"Maintenance Requirement Cards (MRCs)",desc:"Planned maintenance task cards per Navy PMS system."},39:{t:"Life Cycle Sustainment Plan (LCSP)",desc:"Top-level sustainment strategy addressing all 12 ILS elements."},41:{t:"Machinery Equipment List (MEL)",desc:"Complete listing of installed machinery and equipment, including manufacturer, model, and location."},44:{t:"Spares Buylist / Initial Outfitting",desc:"Initial provisioning purchase list for pre-delivery outfitting."}}[n];return a?"<strong>DI-"+String(n).padStart(3,"0")+": "+a.t+"</strong><br><br>"+a.desc:"DI-"+String(n).padStart(3,"0")+" ‚Äî I don't have detailed information on that specific DI number. Common PMS 300 DI numbers range from DI-001 (CDRL) through DI-044 (Spares Buylist). Ask about one of those!"}function Mt(t){const e=W[t]||W.custom,n=["Active","Active","Active","At Risk","At Risk","Obsolete","End of Life","Active","Watch","Active"],r=["None","None","None","High","Medium","Critical","High","None","Low","None"],a=["N/A","N/A","N/A","Seeking alternate source","Life-of-type buy planned","Bridge buy + redesign required","Last-time buy submitted","N/A","Monitoring vendor status","N/A"],i=[12,8,16,26,18,52,36,10,14,6],o=[0,0,0,245,85,890,320,0,45,0],c=["‚Äî","‚Äî","‚Äî","2 qualified alternates identified","1 partial alternate","No direct alternate ‚Äî redesign needed","OEM end-of-life, 1 aftermarket","‚Äî","1 alternate under qualification","‚Äî"],l=["‚Äî","‚Äî","‚Äî","2027-Q3","2028-Q1","2026-Q4 (CRITICAL)","2027-Q1","‚Äî","2029+","‚Äî"];return e.systems.map((s,d)=>({system:s,nsn:e.nsns[d],manufacturer:e.mfgs[d],status:n[d%n.length],severity:r[d%r.length],resolution:a[d%a.length],leadTime:i[d%i.length],cost:o[d%o.length],alternate:c[d%c.length],endOfSupport:l[d%l.length]}))}function pe(){const t=document.getElementById("dmsmsProgram").value,e=Mt(t),n=e.filter(m=>m.status!=="Active").length,r=e.filter(m=>m.status==="Active").length,a=e.reduce((m,p)=>m+p.cost,0);document.getElementById("dmsmsTotalParts").textContent=e.length,document.getElementById("dmsmsAtRisk").textContent=n,document.getElementById("dmsmsResolved").textContent=r,document.getElementById("dmsmsCost").textContent=a>=1e3?"$"+(a/1e3).toFixed(1)+"M":"$"+a+"K";const i={Active:"#00aaff","At Risk":"#ffa500",Obsolete:"#ff3333","End of Life":"#ff6666",Watch:"#ffcc00"};let o='<div style="overflow-x:auto"><table style="width:100%;border-collapse:collapse;font-size:0.82rem;">';o+='<tr style="border-bottom:1px solid rgba(255,255,255,0.1);color:var(--steel);"><th style="padding:8px;text-align:left;">System</th><th>NSN</th><th>Manufacturer</th><th>Status</th><th>Severity</th><th>Lead Time</th><th>Est. Cost</th><th>Alternate</th><th>End of Support</th></tr>',e.forEach(m=>{const p=i[m.status]||"#fff";o+='<tr style="border-bottom:1px solid rgba(255,255,255,0.05);">',o+='<td style="padding:8px;color:#fff;font-weight:600;">'+m.system+"</td>",o+='<td style="padding:8px;color:var(--steel);font-family:monospace;font-size:0.78rem;">'+m.nsn+"</td>",o+='<td style="padding:8px;color:var(--steel);">'+m.manufacturer+"</td>",o+='<td style="padding:8px;"><span style="color:'+p+';font-weight:600;">'+m.status+"</span></td>",o+='<td style="padding:8px;color:'+(m.severity==="Critical"?"#ff3333":m.severity==="High"?"#00aaff":m.severity==="Medium"?"#ffcc00":m.severity==="Low"?"#66ccff":"var(--steel)")+';">'+m.severity+"</td>",o+='<td style="padding:8px;color:var(--steel);">'+m.leadTime+" wks</td>",o+='<td style="padding:8px;color:'+(m.cost>0?"#ffa500":"var(--steel)")+';">'+(m.cost>0?"$"+m.cost+"K":"‚Äî")+"</td>",o+='<td style="padding:8px;color:var(--steel);font-size:0.78rem;">'+m.alternate+"</td>",o+='<td style="padding:8px;color:'+(m.endOfSupport.includes("CRITICAL")?"#ff3333":"var(--steel)")+';">'+m.endOfSupport+"</td>",o+="</tr>"}),o+="</table></div>",document.getElementById("dmsmsResults").innerHTML=o,Ea(t,e);var c=e.filter(function(m){return m.status==="Active"}).length,l=e.filter(function(m){return m.status==="At Risk"}).length,s=e.filter(function(m){return m.status==="Obsolete"}).length,d=e.filter(function(m){return m.status==="End of Life"}).length,u=e.filter(function(m){return m.status==="Watch"}).length;window._dmsmsChartData=[c,l,s,d,u],typeof renderDMSMSCharts=="function"&&setTimeout(renderDMSMSCharts,200)}function aa(){const t=document.getElementById("dmsmsProgram").value,e=Mt(t);let n=`System,NSN,Manufacturer,Status,Severity,Lead Time (wks),Est Cost ($K),Alternate,End of Support
`;e.forEach(i=>{n+='"'+i.system+'",'+i.nsn+',"'+i.manufacturer+'",'+i.status+","+i.severity+","+i.leadTime+","+i.cost+',"'+i.alternate+'",'+i.endOfSupport+`
`});const r=new Blob([n],{type:"text/csv"}),a=document.createElement("a");a.href=URL.createObjectURL(r),a.download="DMSMS_Report_"+t.toUpperCase()+".csv",a.click()}async function ia(){const t=document.getElementById("dmsmsProgram").value,e=Mt(t),n="DMSMS Report | Program: "+t+" | Parts: "+e.length+" | At Risk: "+e.filter(l=>l.status!=="Active").length+" | Date: "+new Date().toISOString(),r=await H(n);ae(r,"DMSMS Report","CUI"),S.anchored++,S.types.add("DMSMS_REPORT"),S.slsFees=Math.round((S.slsFees+.01)*100)/100,V(),z();const{txHash:a,explorerUrl:i,network:o}=await ie(r,"DMSMS_REPORT",n.substring(0,100)),c={hash:r,type:"DMSMS_REPORT",branch:"JOINT",timestamp:new Date().toISOString(),label:"DMSMS Obsolescence Report",txHash:a};x.push(c),re({hash:r,record_type:"DMSMS_REPORT",record_label:"DMSMS Obsolescence Report",branch:"JOINT",timestamp:new Date().toISOString(),timestamp_display:new Date().toISOString().replace("T"," ").substring(0,19)+" UTC",fee:.01,tx_hash:a,system:"DMSMS Tracker",explorer_url:i,network:o}),ee(),$({hash:r,txHash:a,type:"DMSMS_REPORT",label:"DMSMS Obsolescence Report",branch:"JOINT",icon:'<i class="fas fa-exclamation-triangle"></i>',content:n.substring(0,100),encrypted:!1,timestamp:new Date().toISOString(),source:"DMSMS Tracker",fee:.01,explorerUrl:i,network:o}),setTimeout(()=>{document.getElementById("animStatus").innerHTML='<i class="fas fa-check-circle" style="color:var(--accent)"></i> DMSMS report anchored!',document.getElementById("animStatus").style.color="#00aaff"},2200),await new Promise(l=>setTimeout(l,3500)),Z()}const ze=new Proxy({},{get(t,e){if(typeof e=="string")return window.S4_getReadiness?S4_getReadiness(e):[{sys:"System",mtbf:1e3,mttr:4,mldt:24}]},has(t,e){return typeof e=="string"},ownKeys(){return window.S4_PLATFORMS?Object.keys(S4_PLATFORMS):[]},getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,value:window.S4_getReadiness?S4_getReadiness(e):void 0}}});function ge(){const t=document.getElementById("readinessProgram").value,e=ze[t]||ze.ddg51,n=document.getElementById("readinessSystem");n.innerHTML=e.map((a,i)=>'<option value="'+i+'">'+a.sys+"</option>").join("");const r=e[0];document.getElementById("inputMTBF").value=r.mtbf,document.getElementById("inputMTTR").value=r.mttr,document.getElementById("inputMLDT").value=r.mldt,bn()}function bn(){const t=parseFloat(document.getElementById("inputMTBF").value)||0,e=parseFloat(document.getElementById("inputMTTR").value)||0,n=parseFloat(document.getElementById("inputMLDT").value)||0;if(t<=0){document.getElementById("readinessOutput").innerHTML='<div style="color:var(--steel);font-style:italic;">Enter MTBF value to calculate readiness metrics.</div>';return}const r=t/(t+e+n),a=t/(t+e),i=1/t,c=Math.exp(-i*720),l=8760/t,s=l*(e+n),d=8760-s;document.getElementById("statAo").textContent=(r*100).toFixed(1)+"%",document.getElementById("statAo").style.color=r>=.9?"#00aaff":r>=.75?"#ffa500":"#ff3333",document.getElementById("statAi").textContent=(a*100).toFixed(1)+"%",document.getElementById("statFailRate").textContent=i.toFixed(6)+"/hr",document.getElementById("statMissReady").textContent=(c*100).toFixed(1)+"%";const u=document.getElementById("readinessProgram").value,m=parseInt(document.getElementById("readinessSystem").value)||0,p=ze[u]||ze.ddg51,f=p[m]?p[m].sys:"System";let g='<div style="background:rgba(0,170,255,0.05);border:1px solid rgba(0,170,255,0.2);border-radius:3px;padding:16px;font-size:0.85rem;">';g+='<div style="font-weight:700;color:#00aaff;margin-bottom:10px;font-size:1rem;">RAM Analysis: '+f+"</div>",g+='<div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;">',g+='<div><strong>Operational Availability (Ao):</strong></div><div style="color:'+(r>=.9?"#00aaff":r>=.75?"#ffa500":"#ff3333")+';font-weight:700;">'+(r*100).toFixed(2)+"%</div>",g+='<div><strong>Inherent Availability (Ai):</strong></div><div style="color:#fff;">'+(a*100).toFixed(2)+"%</div>",g+='<div><strong>Failure Rate (Œª):</strong></div><div style="color:#fff;">'+i.toFixed(6)+" failures/hr</div>",g+='<div><strong>30-Day Mission Reliability:</strong></div><div style="color:'+(c>=.8?"#00aaff":"#ffa500")+';">'+(c*100).toFixed(1)+"%</div>",g+='<div><strong>Est. Annual Failures:</strong></div><div style="color:#fff;">'+l.toFixed(1)+"</div>",g+='<div><strong>Est. Annual Downtime:</strong></div><div style="color:'+(s<500,"#00aaff")+';">'+s.toFixed(0)+" hrs ("+(s/24).toFixed(1)+" days)</div>",g+='<div><strong>Est. Annual Uptime:</strong></div><div style="color:#00aaff;">'+d.toFixed(0)+" hrs</div>",g+="</div>",g+='<div style="margin-top:12px;padding:10px;border-radius:3px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.06);">',r>=.95?g+='<span style="color:#00aaff;font-weight:700;">EXCELLENT</span> ‚Äî System exceeds readiness requirements. Ao > 95% meets most high-priority program thresholds.':r>=.9?g+='<span style="color:#00aaff;font-weight:700;">MEETS REQUIREMENTS</span> ‚Äî Ao > 90% is acceptable for most defense programs. Monitor MLDT for improvement opportunities.':r>=.8?g+='<span style="color:#ffa500;font-weight:700;">MARGINAL</span> ‚Äî Ao between 80-90%. Consider reducing MLDT through pre-positioned spares or improving MTTR via better training/tools.':r>=.7?g+='<span style="color:#00aaff;font-weight:700;">BELOW THRESHOLD</span> ‚Äî Ao below 80%. Recommend: (1) LSA review of failure modes, (2) spares stocking analysis, (3) MTTR reduction plan.':g+='<span style="color:#ff3333;font-weight:700;">CRITICAL</span> ‚Äî Ao below 70% indicates significant readiness risk. Immediate corrective action required: DMSMS review, redesign consideration, enhanced depot support.',g+="</div>",g+='<div style="margin-top:10px;font-size:0.78rem;color:var(--steel);">',g+="<strong>Formulas:</strong> Ao = MTBF/(MTBF+MTTR+MLDT) | Ai = MTBF/(MTBF+MTTR) | Œª = 1/MTBF | R(t) = e<sup>‚àíŒªt</sup>",g+="</div></div>",document.getElementById("readinessOutput").innerHTML=g,window._readinessAo=r,typeof renderReadinessCharts=="function"&&setTimeout(renderReadinessCharts,200),Pa(u,f,r,t,e,n)}function oa(){const t=parseFloat(document.getElementById("inputMTBF").value)||0,e=parseFloat(document.getElementById("inputMTTR").value)||0,n=parseFloat(document.getElementById("inputMLDT").value)||0,r=t/(t+e+n),a=t/(t+e),i=document.getElementById("readinessProgram").value;let o=`Metric,Value
Program,`+i+`
MTBF (hrs),`+t+`
MTTR (hrs),`+e+`
MLDT (hrs),`+n+`
Ao (%),`+(r*100).toFixed(2)+`
Ai (%),`+(a*100).toFixed(2)+`
Failure Rate,`+(1/t).toFixed(6)+`
`;const c=new Blob([o],{type:"text/csv"}),l=document.createElement("a");l.href=URL.createObjectURL(c),l.download="RAM_Report_"+i.toUpperCase()+".csv",l.click()}async function sa(){const t=parseFloat(document.getElementById("inputMTBF").value)||0,e=parseFloat(document.getElementById("inputMTTR").value)||0,n=parseFloat(document.getElementById("inputMLDT").value)||0,r=t/(t+e+n),i="RAM Report | Program: "+document.getElementById("readinessProgram").value+" | Ao: "+(r*100).toFixed(2)+"% | MTBF: "+t+" | Date: "+new Date().toISOString(),o=await H(i);ae(o,"RAM Readiness Report","CUI"),S.anchored++,S.types.add("RAM_REPORT"),S.slsFees=Math.round((S.slsFees+.01)*100)/100,V(),z();const{txHash:c,explorerUrl:l,network:s}=await ie(o,"RAM_REPORT",i.substring(0,100)),d={hash:o,type:"RAM_REPORT",branch:"JOINT",timestamp:new Date().toISOString(),label:"RAM Readiness Report",txHash:c};x.push(d),re({hash:o,record_type:"RAM_REPORT",record_label:"RAM Readiness Report",branch:"JOINT",timestamp:new Date().toISOString(),timestamp_display:new Date().toISOString().replace("T"," ").substring(0,19)+" UTC",fee:.01,tx_hash:c,system:"Readiness Calculator",explorer_url:l,network:s}),ee(),$({hash:o,txHash:c,type:"RAM_REPORT",label:"RAM Readiness Report",branch:"JOINT",icon:'<i class="fas fa-chart-bar"></i>',content:i.substring(0,100),encrypted:!1,timestamp:new Date().toISOString(),source:"Readiness Calculator",fee:.01,explorerUrl:l,network:s}),setTimeout(()=>{document.getElementById("animStatus").innerHTML='<i class="fas fa-check-circle" style="color:var(--accent)"></i> RAM report anchored!',document.getElementById("animStatus").style.color="#00aaff"},2200),await new Promise(u=>setTimeout(u,3500)),Z()}function la(){var t=document.createElement("div");t.id="customProgramModal",t.style.cssText="position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);z-index:10000;display:flex;align-items:center;justify-content:center;animation:fadeIn 0.3s ease",t.innerHTML=`<div style="background:var(--card);border:1px solid var(--border);border-radius:3px;padding:32px;max-width:520px;width:90%;max-height:80vh;overflow-y:auto"><h3 style="color:#fff;margin:0 0 8px"><i class="fas fa-plus-circle" style="color:var(--accent);margin-right:8px"></i>Custom Program / Platform</h3><p style="color:var(--steel);font-size:0.85rem;margin-bottom:20px">Enter your program details. A GEIA-STD-0007 ILS template will be applied.</p><div style="display:grid;gap:12px"><div><label style="color:var(--steel);font-size:0.8rem;font-weight:600">Program Name *</label><input id="customProgName" class="form-control" style="background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.15);border-radius:3px;padding:10px 14px;width:100%;margin-top:4px" placeholder="e.g., MH-60S Seahawk, DDG-51 Flight III"></div><div><label style="color:var(--steel);font-size:0.8rem;font-weight:600">Hull / Serial / Tail Number</label><input id="customProgHull" class="form-control" style="background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.15);border-radius:3px;padding:10px 14px;width:100%;margin-top:4px" placeholder="e.g., DDG-133, 168451"></div><div><label style="color:var(--steel);font-size:0.8rem;font-weight:600">Acquiring Office</label><input id="customProgOffice" class="form-control" style="background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.15);border-radius:3px;padding:10px 14px;width:100%;margin-top:4px" placeholder="e.g., PMS 400D, PMA-299"></div><div><label style="color:var(--steel);font-size:0.8rem;font-weight:600">Branch / Service</label><select id="customProgBranch" class="form-select" style="background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.15);border-radius:3px;padding:10px 14px;width:100%;margin-top:4px"><option value="USN">U.S. Navy</option><option value="USMC">U.S. Marine Corps</option><option value="USCG">U.S. Coast Guard</option></select></div></div><div style="display:flex;gap:10px;margin-top:24px;justify-content:flex-end"><button onclick="document.getElementById('customProgramModal').remove();document.getElementById('ilsProgram').value=''" style="background:rgba(255,255,255,0.06);color:var(--steel);border:1px solid var(--border);border-radius:3px;padding:8px 20px;cursor:pointer;font-weight:600">Cancel</button><button onclick="applyCustomProgram()" style="background:var(--accent);color:#fff;border:none;border-radius:3px;padding:8px 20px;cursor:pointer;font-weight:600">Apply Program</button></div></div>`,document.body.appendChild(t),setTimeout(function(){document.getElementById("customProgName").focus()},100)}function ca(){var t=document.getElementById("customProgName").value.trim();if(!t){document.getElementById("customProgName").style.borderColor="#ff4444";return}var e=document.getElementById("customProgHull").value.trim(),n=document.getElementById("customProgOffice").value.trim(),r=document.getElementById("customProgBranch").value;typeof _<"u"&&(_["custom_"+t.replace(/\s+/g,"_")]={name:t,hull:e||"N/A",ofc:n||"N/A",branchTag:r,desc:"Custom program: "+t,systems:["GEIA-STD-0007 ILS Elements","GEIA-STD-0007 Logistics Product Data","MIL-HDBK-502 Acquisition Logistics"],nsns:[],contracts:[]}),document.querySelectorAll('select[id$="Program"], select[id$="Platform"]').forEach(function(c){var l=document.createElement("option");l.value="custom_"+t.replace(/\s+/g,"_"),l.textContent=t+" (Custom)",l.selected=!0,c.appendChild(l)});var a=document.getElementById("ilsHull");a&&(a.value=e);var i=document.getElementById("ilsOffice");i&&(i.value=n);var o=document.getElementById("customProgramModal");o&&o.remove(),Ee("custom_"+t.replace(/\s+/g,"_")),typeof kt=="function"&&kt(),D("Custom Program",t+" loaded with GEIA-STD-0007 ILS template","success")}window.S4_buildProgramOptions=function(t,e){if(typeof _>"u")return'<option value="">No platforms loaded</option>';var n='<option value="" disabled selected>‚Äî Select a Program ‚Äî</option>',r={"NAVSEA ‚Äî Surface Combatants":["ddg51","ddg1000","ffg62","cg47","lcs"],"NAVSEA ‚Äî Carriers & Amphibs":["cvn78","lpd17","lha6","lhd1","lsd49"],"NAVSEA ‚Äî Submarines":["ssn774","ssbn826"],"NAVSEA ‚Äî Mine Warfare & Special Mission":["mcm1","ssc","dls"],"NAVSEA ‚Äî Service Craft (PMS 300)":["yrbm","apl","afdm","ydt","yon"],"NAVAIR ‚Äî Strike Fighters":["f35","f35b","fa18"],"NAVAIR ‚Äî Mission Support":["e2d","ea18g","p8a","mq4c","mq25"],"NAVAIR ‚Äî Rotary Wing":["ch53k","mh60r","mh60s"],"NAVAIR ‚Äî Tiltrotor & COD":["cmv22"],"NAVAIR ‚Äî Training":["t45"],"USMC ‚Äî Aviation":["ah1z","uh1y","kc130j"],"USCG ‚Äî Cutters":["nsc","opc","frc"]};return Object.keys(r).forEach(function(a){var i=r[a],o=[];i.forEach(function(c){_[c]&&o.push({key:c,name:_[c].name,ofc:_[c].ofc})}),o.length!==0&&(n+='<optgroup label="'+a+'">',o.forEach(function(c){n+='<option value="'+c.key+'">'+c.name+" ("+c.ofc+")</option>"}),n+="</optgroup>")}),e&&(n+='<optgroup label="Custom"><option value="__custom__">+ Add Custom Program...</option></optgroup>'),t&&(n='<option value="all">All Programs</option>'+n),n};window.S4_countPlatforms=function(){if(typeof _>"u")return 0;var t=["ddg51","ddg1000","ffg62","cg47","lcs","cvn78","lpd17","lha6","lhd1","lsd49","ssn774","ssbn826","mcm1","ssc","dls","yrbm","apl","afdm","ydt","yon","f35","f35b","fa18","e2d","ea18g","p8a","mq4c","mq25","ch53k","mh60r","mh60s","cmv22","t45","ah1z","uh1y","kc130j","nsc","opc","frc"],e=0;return t.forEach(function(n){_[n]&&e++}),e};function We(){if(!window.S4_buildProgramOptions)return;if(Object.entries({ilsProgram:{all:!1,custom:!0},dmsmsProgram:{all:!1,custom:!0},readinessProgram:{all:!1,custom:!0},lifecycleProgram:{all:!1,custom:!0},complianceProgram:{all:!1,custom:!0},riskProgram:{all:!1,custom:!0},pdmPlatform:{all:!1,custom:!0},subProgram:{all:!1,custom:!0}}).forEach(([e,n])=>{const r=document.getElementById(e);r&&(r.innerHTML=S4_buildProgramOptions(n.all,n.custom))}),window.S4_countPlatforms){const e=document.getElementById("platformCount");e&&(e.textContent=S4_countPlatforms()+" Platforms")}}function da(){We();var t=document.getElementById("ilsProgram");t&&t.value?(Ee(t.value),_t(),Ve()):_t(),document.getElementById("dmsmsProgram")&&pe(),document.getElementById("readinessProgram")&&ge(),document.getElementById("partsResults")&&renderPartsResults(getPartsDB().slice(0,15)),document.getElementById("roiPrograms")&&pn(),document.getElementById("lifecycleProgram")&&calcLifecycle()}function D(t,e,n,r,a){n=n||"info",a=a||8e3;var i=document.getElementById("platformWorkspace");if(!i||i.style.display!=="block")return;const o=document.getElementById("s4ToastContainer");if(!o)return;o.getAttribute("aria-live")||(o.setAttribute("aria-live","polite"),o.setAttribute("role","status"));const c={info:'<i class="fas fa-info-circle" style="color:var(--accent)"></i>',warning:'<i class="fas fa-exclamation-triangle" style="color:#ffa500"></i>',danger:'<i class="fas fa-times-circle" style="color:#ff3333"></i>',success:'<i class="fas fa-check-circle" style="color:var(--accent)"></i>'},l=document.createElement("div");l.className="s4-toast "+n;let s="";r&&r.length&&(s='<div class="s4-toast-actions">',r.forEach(d=>{s+='<button class="s4-toast-action" onclick="'+(d.onclick||"")+'">'+d.label+"</button>"}),s+="</div>"),l.innerHTML='<div class="s4-toast-icon">'+(c[n]||c.info)+'</div><div class="s4-toast-body"><div class="s4-toast-title">'+t+'</div><div class="s4-toast-msg">'+e+"</div>"+s+'</div><button class="s4-toast-close" onclick="dismissToast(this)">&times;</button><div class="s4-toast-progress" style="animation-duration:'+a+'ms"></div>',o.appendChild(l),setTimeout(()=>{vn(l.querySelector(".s4-toast-close"))},a),Dt()}function vn(t){const e=t.closest?t.closest(".s4-toast"):t.parentElement;!e||e.classList.contains("dismissing")||(e.classList.add("dismissing"),setTimeout(()=>e.remove(),300))}function Dt(){const t=document.getElementById("notifBadge"),e=I.filter(r=>!r.done);t&&(t.textContent=e.length>0?e.length:"");const n=document.getElementById("actionTabCount");n&&(n.textContent=e.length)}let I;try{I=JSON.parse(localStorage.getItem("s4ActionItems")||"[]")}catch{I=[]}function oe(){localStorage.setItem("s4ActionItems",JSON.stringify(I)),Dt(),K();const t=I.filter(n=>!n.done).length,e=document.getElementById("hubActionBadge");e&&(e.textContent=t>0?t:"0",e.style.display=t>0?"inline":"none")}function Se(t){I.find(e=>e.id===t.id)||(t.done=!1,t.created=new Date().toISOString(),I.push(t),oe())}function ua(t){const e=I.find(n=>n.id===t);e&&(e.done=!e.done,e.completedAt=e.done?new Date().toISOString():null,oe())}function ma(){I=I.filter(t=>!t.done),oe()}function pa(t){document.getElementById("actionModalEditId").value="",document.getElementById("actionModalTitle").innerHTML='<i class="fas fa-plus-circle" style="color:var(--accent);margin-right:8px"></i>New Action Item',document.getElementById("actionModalItemTitle").value="",document.getElementById("actionModalDetail").value="",document.getElementById("actionModalSeverity").value="info",document.getElementById("actionModalSource").value=t||"manual",document.getElementById("actionModalOwner").value="",document.getElementById("actionModalDue").value="",document.getElementById("actionModalCost").value="",document.getElementById("actionModalSchedule").value="",document.getElementById("actionItemModal").classList.add("active")}function ga(t){const e=I.find(n=>n.id===t);e&&(document.getElementById("actionModalEditId").value=t,document.getElementById("actionModalTitle").innerHTML='<i class="fas fa-pen" style="color:var(--accent);margin-right:8px"></i>Edit Action Item',document.getElementById("actionModalItemTitle").value=e.title||"",document.getElementById("actionModalDetail").value=e.detail||"",document.getElementById("actionModalSeverity").value=e.severity||"info",document.getElementById("actionModalSource").value=e.source||"manual",document.getElementById("actionModalOwner").value=e.owner||"",document.getElementById("actionModalCost").value=e.cost||"",document.getElementById("actionModalSchedule").value=e.schedule||"",e.due?document.getElementById("actionModalDue").value=e.due:document.getElementById("actionModalDue").value="",document.getElementById("actionItemModal").classList.add("active"))}function fa(t){confirm("Delete this action item?")&&(I=I.filter(e=>e.id!==t),oe(),K(),D("Deleted","Action item removed.","info"))}function ya(){var t=document.getElementById("actionModalItemTitle").value.trim();if(!t){D("Required","Please enter a title for this action item.","warning");return}var e=document.getElementById("actionModalEditId").value,n=document.getElementById("actionModalSeverity").value,r=document.getElementById("actionModalSource").value,a=document.getElementById("actionModalOwner").value.trim(),i=document.getElementById("actionModalDetail").value.trim(),o=document.getElementById("actionModalCost").value?parseFloat(document.getElementById("actionModalCost").value):"",c=document.getElementById("actionModalSchedule").value.trim(),l=document.getElementById("actionModalDue").value||"";if(e){var s=I.find(u=>u.id===e);s&&(s.title=t,s.detail=i,s.severity=n,s.source=r,s.owner=a,s.cost=o,s.schedule=c,s.due=l,s.updatedAt=new Date().toISOString())}else{var d="MANUAL-"+Date.now()+"-"+Math.random().toString(36).substr(2,5).toUpperCase();I.push({id:d,title:t,detail:i,severity:n,source:r,owner:a,cost:o,schedule:c,due:l,done:!1,created:new Date().toISOString()})}oe(),K(),In(),D(e?"Updated":"Created",e?"Action item updated.":"New action item created.","success")}function In(){document.getElementById("actionItemModal").classList.remove("active")}var ha=[{cat:"API & Integrations",icon:"fa-plug",items:[{name:"eMASS API Connector",desc:"Direct integration with DISA eMASS for automated ATO package submission and status tracking."},{name:"GIDEP Live Feed",desc:"Real-time Government-Industry Data Exchange Program alerts for DMSMS, problem advisories, and safety notices."},{name:"DLA FLIS Integration",desc:"Federal Logistics Information System lookup for NSN validation, management data, and supply chain intelligence."},{name:"SAM.gov Entity Connector",desc:"System for Award Management integration for vendor verification, exclusion checks, and entity validation."}]},{cat:"Authentication & Access",icon:"fa-id-badge",items:[{name:"SSO / CAC Authentication",desc:"Single Sign-On with DoD Common Access Card (CAC) and PIV support via SAML 2.0 and OpenID Connect."},{name:"Multi-Tenant Org Management",desc:"Hierarchical organization management with cross-tenant data isolation and federated admin controls."}]},{cat:"Real-Time Collaboration",icon:"fa-users",items:[{name:"WebSocket Live Editing",desc:"Real-time collaborative document editing with operational transforms and conflict resolution."},{name:"Multi-User Comments",desc:"Threaded comments on records, submissions, and evidence with @mentions and notification routing."},{name:"Presence Indicators",desc:"Live user presence showing who is viewing or editing each workspace, record, or document."},{name:"Role-Based Permissions",desc:"Granular RBAC with custom roles, field-level security, and audit trail for permission changes."},{name:"Change Tracking",desc:"Full change log with diff views, rollback capability, and approval workflows for critical modifications."}]},{cat:"Security & Compliance",icon:"fa-shield-alt",items:[{name:"Digital Signatures (PKI/CAC)",desc:"Cryptographic document signing using DoD PKI certificates and CAC-based non-repudiation."},{name:"Server-Side Encryption",desc:"AES-256-GCM encryption at rest with FIPS 140-2 validated key management and HSM integration."}]},{cat:"Document Processing",icon:"fa-file-alt",items:[{name:"OCR Document Scanning",desc:"AI-powered optical character recognition for scanned PDFs, DD-1149s, and legacy paper records."},{name:"Server-Side AI/ML Models",desc:"On-premise machine learning models for anomaly detection, predictive analytics, and NLP classification."}]},{cat:"Infrastructure",icon:"fa-server",items:[{name:"Data Export API",desc:"RESTful and GraphQL APIs for bulk data export, third-party integrations, and automated reporting."},{name:"Plugin / Extension System",desc:"Custom plugin framework for agency-specific workflows, validation rules, and UI extensions."},{name:"Microservices Architecture",desc:"Containerized services with Kubernetes orchestration for independent scaling and fault isolation."},{name:"CI/CD Pipeline",desc:"Automated testing, security scanning (SAST/DAST), and deployment pipeline with IL4/IL5 support."},{name:"Rate Limiting & Throttling",desc:"API-level rate limiting with configurable quotas, burst allowance, and DDoS protection."},{name:"Automated Backup & DR",desc:"Geo-redundant backup with point-in-time recovery, cross-region DR, and 99.99% SLA."}]}];function Sa(){var t=document.getElementById("prodFeaturesModal"),e=document.getElementById("prodFeaturesList"),n="";ha.forEach(function(r){n+='<div style="margin-bottom:18px"><h5 style="color:#c9a84c;font-size:0.82rem;text-transform:uppercase;letter-spacing:0.04em;margin-bottom:8px"><i class="fas '+r.icon+'" style="margin-right:6px"></i>'+r.cat+"</h5>",r.items.forEach(function(a){n+='<div style="display:flex;align-items:flex-start;gap:10px;padding:8px 12px;margin-bottom:4px;background:var(--surface);border-radius:3px;border:1px solid var(--border)">',n+='<div style="flex:1"><strong style="font-size:0.85rem">'+a.name+'</strong><p style="margin:2px 0 0;font-size:0.78rem;color:var(--steel)">'+a.desc+"</p></div>",n+='<span style="white-space:nowrap;font-size:0.65rem;font-weight:700;padding:2px 8px;border-radius:3px;background:rgba(0,170,255,0.12);color:#00aaff;border:1px solid rgba(0,170,255,0.3)">PLANNED</span>',n+="</div>"}),n+="</div>"}),e.innerHTML=n,t.classList.add("active")}function ba(){document.getElementById("prodFeaturesModal").classList.remove("active")}var B=new Set;function va(t,e){e?B.add(t):B.delete(t);var n=document.getElementById("actionBulkBar");n&&(n.style.display=B.size>0?"flex":"none");var r=document.getElementById("actionSelectedCount");r&&(r.textContent=B.size+" selected");var a=document.getElementById("actionSelectAll");a&&(a.checked=B.size===I.length)}function Ia(t){B.clear(),t&&I.forEach(function(r){B.add(r.id)}),K();var e=document.getElementById("actionBulkBar");e&&(e.style.display=B.size>0?"flex":"none");var n=document.getElementById("actionSelectedCount");n&&(n.textContent=B.size+" selected")}function Aa(t){if(B.size!==0){B.forEach(function(n){var r=I.find(function(a){return a.id===n});r&&(r.severity=t)}),oe(),K(),D("Bulk Update",B.size+" items set to "+t.toUpperCase(),"success"),B.clear();var e=document.getElementById("actionBulkBar");e&&(e.style.display="none")}}function Ca(){if(B.size!==0){B.forEach(function(e){var n=I.find(function(r){return r.id===e});n&&(n.done=!0,n.completedAt=new Date().toISOString())}),oe(),K(),D("Bulk Complete",B.size+" items marked done","success"),B.clear();var t=document.getElementById("actionBulkBar");t&&(t.style.display="none")}}function Ma(){if(B.size!==0&&confirm("Delete "+B.size+" selected action items?")){I=I.filter(function(e){return!B.has(e.id)}),oe(),K(),D("Bulk Delete",B.size+" items deleted","info"),B.clear();var t=document.getElementById("actionBulkBar");t&&(t.style.display="none")}}function Da(){if(I.length===0){D("No Items","No action items to prioritize.","info");return}I.sort(function(t,e){if(t.done!==e.done)return t.done?1:-1;var n={critical:100,warning:50,info:10},r=(n[t.severity]||0)+(parseFloat(t.cost)||0)*.5,a=(n[e.severity]||0)+(parseFloat(e.cost)||0)*.5;if(t.due){var i=Math.max(0,(new Date(t.due)-new Date)/864e5);r+=Math.max(0,50-i)}if(e.due){var o=Math.max(0,(new Date(e.due)-new Date)/864e5);a+=Math.max(0,50-o)}return a-r}),oe(),K(),D("Smart Sort","Action items re-prioritized by AI scoring (severity √ó cost √ó urgency).","success")}var Ce=!1;function wa(){Ce=!Ce;var t=document.getElementById("actionTimelineView"),e=document.getElementById("hubActionItemsList"),n=document.getElementById("timelineToggleBtn");t&&(t.style.display=Ce?"block":"none"),e&&(e.style.display=Ce?"none":"block"),n&&(n.style.borderColor=Ce?"var(--accent)":""),Ce&&Ta()}function Ta(){var t=document.getElementById("actionTimelineContent");if(t){var e=I.filter(function(a){return!a.done}).sort(function(a,i){return a.due&&i.due?new Date(a.due)-new Date(i.due):a.due?-1:i.due?1:(a.created||"")<(i.created||"")?-1:1});if(!e.length){t.innerHTML='<div style="color:var(--muted);text-align:center;padding:2rem">No open action items.</div>';return}var n={critical:"#c9a84c",warning:"#ffa500",info:"#00aaff"},r='<div style="position:relative;padding-left:28px">';r+='<div style="position:absolute;left:10px;top:0;bottom:0;width:2px;background:rgba(0,170,255,0.2)"></div>',e.forEach(function(a,i){var o=n[a.severity]||"#00aaff",c=a.due?a.due:a.schedule||"No date";r+='<div style="position:relative;margin-bottom:16px;padding:10px 14px;background:rgba(0,170,255,0.04);border:1px solid rgba(0,170,255,0.1);border-radius:3px;border-left:3px solid '+o+'">',r+='<div style="position:absolute;left:-24px;top:14px;width:12px;height:12px;border-radius:50%;background:'+o+';border:2px solid var(--bg)"></div>',r+='<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px"><strong style="color:#fff;font-size:0.85rem">'+a.title+"</strong>",r+='<span style="font-size:0.72rem;color:'+o+';font-weight:600">'+c+"</span></div>",r+='<div style="font-size:0.75rem;color:var(--steel)">',r+='<span class="ai-tag '+(a.severity||"info")+'" style="font-size:0.68rem;margin-right:6px">'+(a.severity||"info").toUpperCase()+"</span>",a.owner&&(r+='<span style="margin-right:8px"><i class="fas fa-user" style="margin-right:3px"></i>'+a.owner+"</span>"),a.cost&&(r+='<span style="color:#ffa500">$'+a.cost+"K</span>"),r+="</div>",a.detail&&(r+='<div style="font-size:0.75rem;color:var(--muted);margin-top:4px;line-height:1.4">'+a.detail.substring(0,120)+(a.detail.length>120?"...":"")+"</div>"),r+="</div>"}),r+="</div>",t.innerHTML=r}}function Ra(t,e){var n=I.find(function(i){return i.id===t});if(!n)return;var r=n.title;e.contentEditable="true",e.focus(),e.style.outline="1px solid var(--accent)",e.style.borderRadius="2px",e.style.padding="0 4px";function a(){e.contentEditable="false",e.style.outline="",e.style.padding="";var i=e.textContent.trim();i&&i!==r?(n.title=i,n.updatedAt=new Date().toISOString(),oe(),D("Updated","Title changed.","success")):e.textContent=r}e.onblur=a,e.onkeydown=function(i){i.key==="Enter"&&(i.preventDefault(),a()),i.key==="Escape"&&(e.textContent=r,a())}}function La(){const t=I;if(!t.length){D("No Data","No action items to export.","info");return}let e=`ID,Title,Severity,Source,Owner,Cost ($K),Schedule,Status,Created
`;t.forEach(i=>{e+=[i.id,'"'+i.title+'"',i.severity,i.source,i.owner||"",i.cost||"",i.schedule||"",i.done?"Completed":"Open",i.created||""].join(",")+`
`});const n=new Blob([e],{type:"text/csv"}),r=URL.createObjectURL(n),a=document.createElement("a");a.href=r,a.download="S4_Action_Items_"+new Date().toISOString().split("T")[0]+".csv",a.click(),URL.revokeObjectURL(r),D("Export Complete","Action items exported to CSV.","success")}function Ea(t,e){const n=window.S4_PLATFORMS&&S4_PLATFORMS[t]?S4_PLATFORMS[t].n:t,r=e.filter(i=>i.status==="Obsolete"||i.status==="End of Life"),a=e.filter(i=>i.status==="At Risk"||i.status==="Watch");r.forEach(i=>{Se({id:"DMSMS-OBS-"+t+"-"+i.system.replace(/\s/g,""),title:"Resolve obsolete part: "+i.system,detail:"Status: "+i.status+" | Manufacturer: "+i.manufacturer+" | Lead time: "+i.leadTime+" wks. Initiate bridge buy or alternate source per GIDEP.",severity:"critical",source:"dmsms",owner:n+" PM",cost:i.cost,schedule:"2-4 months"})}),a.forEach(i=>{Se({id:"DMSMS-RISK-"+t+"-"+i.system.replace(/\s/g,""),title:"Monitor at-risk part: "+i.system,detail:"Status: "+i.status+" | "+i.endOfSupport+". Submit GIDEP alert if end-of-life confirmed. Begin alternate qualification.",severity:"warning",source:"dmsms",owner:n+" LSA",cost:Math.round(i.cost*.5),schedule:"3-6 months"})}),r.length>0&&D("DMSMS Alert",r.length+" obsolete/EOL part(s) detected on "+n+". Action required.","danger",[{label:"View Actions",onclick:"toggleNotifPanel()"}]),a.length>0&&D("DMSMS Watch",a.length+" part(s) at risk on "+n+". Monitoring recommended.","warning")}function Pa(t,e,n,r,a,i){const o=window.S4_PLATFORMS&&S4_PLATFORMS[t]?S4_PLATFORMS[t].n:t;n<.7?(Se({id:"RDY-CRIT-"+t+"-"+e.replace(/\s/g,""),title:"Critical readiness failure: "+e+" Ao="+(n*100).toFixed(1)+"%",detail:"Ao below 70% on "+o+". Immediate corrective action: DMSMS review, redesign consideration, enhanced depot support. MTTR="+a.toFixed(1)+"h, MLDT="+i.toFixed(1)+"h.",severity:"critical",source:"readiness",owner:o+" ISEA",schedule:"Immediate"}),D("Readiness Critical",e+" on "+o+" ‚Äî Ao "+(n*100).toFixed(1)+"% (below 70%)","danger",[{label:"View",onclick:"toggleNotifPanel()"}])):n<.8?(Se({id:"RDY-LOW-"+t+"-"+e.replace(/\s/g,""),title:"Below-threshold readiness: "+e+" Ao="+(n*100).toFixed(1)+"%",detail:"Recommend spares stocking analysis and MTTR reduction plan for "+o+". MLDT of "+i.toFixed(1)+"h may indicate supply chain gaps.",severity:"warning",source:"readiness",owner:o+" LSA",schedule:"1-3 months"}),D("Readiness Warning",e+" Ao="+(n*100).toFixed(1)+"% ‚Äî below 80% threshold","warning")):n<.9&&Se({id:"RDY-MARG-"+t+"-"+e.replace(/\s/g,""),title:"Marginal readiness: "+e+" Ao="+(n*100).toFixed(1)+"%",detail:"Monitor MLDT for improvement opportunities on "+o+". Consider pre-positioned spares to reduce logistics delay.",severity:"info",source:"readiness",owner:o+" PM",schedule:"Review quarterly"})}function xa(t,e){var n=document.getElementById("ilsSubHub");n&&(n.style.display="none");var r=document.getElementById("ilsToolBackBar");r&&(r.style.display="block"),document.querySelectorAll(".ils-hub-panel").forEach(i=>{i.classList.remove("active"),i.style.display="none"}),document.querySelectorAll(".ils-hub-tab").forEach(i=>i.classList.remove("active"));const a=document.getElementById(t);a&&(a.style.display="block",a.classList.add("active"),a.style.animation="fadeIn 0.3s ease"),e&&e.classList.add("active"),t==="hub-actions"&&(K(),typeof renderActionCalendar=="function"&&renderActionCalendar()),t==="hub-vault"&&(ce(),setTimeout(function(){typeof showSampleDigitalThread=="function"&&showSampleDigitalThread(),populateDigitalThreadDropdown()},400)),t==="hub-docs"&&typeof xe=="function"&&xe(),t==="hub-compliance"&&typeof be=="function"&&be(),t==="hub-risk"&&typeof ve=="function"&&ve(),t==="hub-reports"&&typeof Vt=="function"&&Vt(),t==="hub-predictive"&&typeof Ie=="function"&&Ie(),t==="hub-submissions"&&typeof ft=="function"&&ft(),t==="hub-sbom"&&typeof loadSBOMData=="function"&&loadSBOMData(),t==="hub-dmsms"&&typeof pe=="function"&&pe(),t==="hub-readiness"&&typeof ge=="function"&&ge(),t==="hub-lifecycle"&&typeof calcLifecycle=="function"&&calcLifecycle(),t==="hub-analysis"&&typeof Ee=="function"&&Ee(),yn(t)}function ka(t){K(t)}function K(t){t=t||"all";const e=document.getElementById("hubActionItemsList");if(!e)return;let n=[...I];t==="critical"?n=n.filter(g=>g.severity==="critical"&&!g.done):t==="warning"?n=n.filter(g=>g.severity==="warning"&&!g.done):t==="info"?n=n.filter(g=>g.severity==="info"&&!g.done):t==="completed"&&(n=n.filter(g=>g.done)),n.sort((g,b)=>{if(g.done!==b.done)return g.done?1:-1;const w={critical:0,warning:1,info:2};return(w[g.severity]||3)-(w[b.severity]||3)});const r=I.length,a=I.filter(g=>g.severity==="critical"&&!g.done).length,i=I.filter(g=>!g.done).length,o=I.filter(g=>g.done).length,c=document.getElementById("hubAiTotal");c&&(c.textContent=r);const l=document.getElementById("hubAiCritical");l&&(l.textContent=a);const s=document.getElementById("hubAiOpen");s&&(s.textContent=i);const d=document.getElementById("hubAiDone");d&&(d.textContent=o);const u=document.getElementById("hubActionBadge");u&&(u.textContent=i>0?i:"0",u.style.display=i>0?"inline":"none");const m=document.getElementById("hubActionsBySource");if(m&&I.length>0){const g={};I.filter(A=>!A.done).forEach(A=>{g[A.source||"other"]=(g[A.source||"other"]||0)+1});const b={dmsms:'<i class="fas fa-exclamation-triangle"></i>',readiness:'<i class="fas fa-chart-line"></i>',parts:'<i class="fas fa-cog"></i>',warranty:'<i class="fas fa-clipboard-list"></i>',roi:'<i class="fas fa-dollar-sign"></i>',lifecycle:'<i class="fas fa-hourglass-half"></i>',ils:'<i class="fas fa-brain"></i>',checklist:'<i class="fas fa-check-circle" style="color:var(--accent)"></i>',drl:'<i class="fas fa-file-alt"></i>'};let w="";Object.entries(g).sort((A,C)=>C[1]-A[1]).forEach(([A,C])=>{w+='<div style="display:flex;justify-content:space-between;padding:4px 0;border-bottom:1px solid rgba(255,255,255,0.03)"><span>'+(b[A]||'<i class="fas fa-thumbtack"></i>')+" "+A.toUpperCase()+'</span><span style="font-weight:700;color:var(--accent)">'+C+"</span></div>"}),m.innerHTML=w}if(!n.length){e.innerHTML='<div style="color:var(--muted);text-align:center;padding:2rem;font-size:0.85rem"><i class="fas fa-clipboard-list" style="font-size:2rem;margin-bottom:12px;display:block;opacity:0.3"></i>'+(t==="all"?"No action items yet. Click <strong>Add New</strong> above or use any tool to generate tasks.":"No items match this filter.")+"</div>";return}const p={dmsms:'<i class="fas fa-exclamation-triangle" style="color:var(--accent)"></i>',readiness:'<i class="fas fa-chart-line" style="color:var(--accent)"></i>',parts:'<i class="fas fa-cogs" style="color:var(--accent)"></i>',warranty:'<i class="fas fa-file-contract" style="color:var(--accent)"></i>',roi:'<i class="fas fa-dollar-sign" style="color:var(--accent)"></i>',lifecycle:'<i class="fas fa-clock" style="color:var(--accent)"></i>',ils:'<i class="fas fa-brain" style="color:var(--accent)"></i>',checklist:'<i class="fas fa-check-circle" style="color:var(--accent)"></i>',drl:'<i class="fas fa-file-alt" style="color:var(--accent)"></i>',manual:'<i class="fas fa-pen" style="color:var(--accent)"></i>',compliance:'<i class="fas fa-shield-halved" style="color:var(--accent)"></i>',risk:'<i class="fas fa-triangle-exclamation" style="color:var(--accent)"></i>',predictive:'<i class="fas fa-brain" style="color:var(--accent)"></i>',sbom:'<i class="fas fa-microchip" style="color:var(--accent)"></i>',submissions:'<i class="fas fa-file-circle-check" style="color:var(--accent)"></i>',reports:'<i class="fas fa-file-pdf" style="color:var(--accent)"></i>'};let f="";n.forEach(g=>{if(!(!g||!g.id)){var b=(g.id||"").replace(/'/g,"\\'"),w=B.has(g.id);f+='<div class="action-item'+(g.done?" completed":"")+'" style="position:relative">',f+='<input type="checkbox" '+(w?"checked ":"")+` onchange="toggleActionSelect('`+b+`',this.checked)" style="margin-right:6px;cursor:pointer;accent-color:#00aaff">`,f+='<div class="ai-check'+(g.done?" done":"")+`" onclick="toggleActionDone('`+b+`');renderHubActions()"></div>`,f+='<div class="ai-body">',f+='<div class="ai-title" style="display:flex;align-items:center;gap:6px">'+(p[g.source]||'<i class="fas fa-thumbtack" style="color:var(--accent)"></i>')+` <span style="flex:1;cursor:text" ondblclick="inlineEditActionTitle('`+b+`',this)" title="Double-click to edit title">`+g.title+"</span>",f+=`<button onclick="editActionItem('`+b+`')" style="background:none;border:none;color:var(--muted);cursor:pointer;font-size:0.75rem;padding:2px 5px;opacity:0.5" title="Edit" onmouseover="this.style.opacity=1;this.style.color='#00aaff'" onmouseout="this.style.opacity=0.5;this.style.color='var(--muted)'"><i class="fas fa-pen-to-square"></i></button>`,f+=`<button onclick="deleteActionItem('`+b+`')" style="background:none;border:none;color:var(--muted);cursor:pointer;font-size:0.75rem;padding:2px 5px;opacity:0.5" title="Delete" onmouseover="this.style.opacity=1;this.style.color='#c9a84c'" onmouseout="this.style.opacity=0.5;this.style.color='var(--muted)'"><i class="fas fa-trash"></i></button>`,f+="</div>",f+='<div class="ai-meta"><span class="ai-tag '+(g.severity||"info")+'">'+(g.severity||"info").toUpperCase()+"</span><span>"+(g.source||"").toUpperCase()+"</span>",g.owner&&(f+='<span><i class="fas fa-user" style="margin-right:3px"></i>'+g.owner+"</span>"),g.cost&&(f+='<span style="color:#ffa500">$'+g.cost+"K</span>"),g.due&&(f+='<span style="color:var(--accent)"><i class="fas fa-calendar-day" style="margin-right:3px"></i>'+g.due+"</span>"),g.schedule&&(f+='<span><i class="fas fa-clock" style="margin-right:3px"></i>'+g.schedule+"</span>"),f+="</div>",g.detail&&(f+='<div style="color:var(--steel);font-size:0.78rem;margin-top:4px">'+g.detail+"</div>"),f+="</div></div>"}}),e.innerHTML=f}function Pe(){return"s4Vault"+(typeof _currentRole<"u"&&_currentRole?"_"+_currentRole:"")}let y;try{y=JSON.parse(localStorage.getItem(Pe())||"[]")}catch{y=[]}function Ae(){localStorage.setItem(Pe(),JSON.stringify(y))}function $(t){y.find(e=>e.hash===t.hash&&e.txHash===t.txHash)||(t.verified=!0,t.verifiedAt=new Date().toISOString(),y.unshift(t),Ae(),typeof populateDigitalThreadDropdown=="function"&&populateDigitalThreadDropdown(),L("Record saved to Audit Vault",t.label||t.type))}var J=1,Me=50,wt=[];function An(){var t=y.length,e=document.getElementById("vmRecordCount");e&&(e.textContent=t.toLocaleString());var n=0;try{var r=localStorage.getItem(Pe());r&&(n=new Blob([r]).size)}catch{}var a=document.getElementById("vmStorageKB");a&&(a.textContent=n<1024?n+" B":n<1048576?(n/1024).toFixed(1)+" KB":(n/1048576).toFixed(1)+" MB");var i=new Set;y.forEach(function(g){g.type&&i.add(g.type)});var o=document.getElementById("vmUniqueTypes");o&&(o.textContent=i.size);var c=document.getElementById("vmLatestRecord");if(c)if(t>0){var l=y[y.length-1],s=l.timestamp?new Date(l.timestamp):null;c.textContent=s?s.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"}):"‚Äî",c.title=l.label||l.type||""}else c.textContent="‚Äî";var d=document.getElementById("vmAvgRecordSize");d&&(d.textContent=t>0?n/t<1024?Math.round(n/t)+" B":(n/t/1024).toFixed(1)+" KB":"0 B");var u=document.getElementById("vmTypeBreakdown");if(u&&i.size>0){var m={};y.forEach(function(g){var b=g.label||g.type||"Unknown";m[b]=(m[b]||0)+1});var p=Object.entries(m).sort(function(g,b){return b[1]-g[1]}),f=p.slice(0,8);u.innerHTML='<div style="margin-top:6px;font-weight:700;color:#00aaff;font-size:0.72rem;text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px">Type Distribution</div>'+f.map(function(g){var b=t>0?(g[1]/t*100).toFixed(0):0;return'<div style="display:flex;align-items:center;gap:6px;margin-bottom:3px"><div style="flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap">'+g[0]+'</div><div style="width:80px;height:6px;background:var(--surface);border-radius:3px;overflow:hidden"><div style="height:100%;width:'+b+'%;background:#00aaff;border-radius:3px"></div></div><div style="min-width:36px;text-align:right;color:#ccc">'+g[1]+"</div></div>"}).join("")+(p.length>8?'<div style="color:var(--muted);font-size:0.7rem;margin-top:4px">+'+(p.length-8)+" more types</div>":"")}else u&&(u.innerHTML="")}function ce(){const t=document.getElementById("vaultRecords");if(!t)return;var e=performance.now();let n=[...y];const r=(document.getElementById("vaultSearch")?.value||"").toLowerCase();r&&(n=n.filter(p=>(p.label||"").toLowerCase().includes(r)||(p.hash||"").toLowerCase().includes(r)||(p.content||"").toLowerCase().includes(r)||(p.type||"").toLowerCase().includes(r)));const a=document.getElementById("vaultFilter")?.value||"all",i=new Date;if(a==="today")n=n.filter(p=>new Date(p.timestamp).toDateString()===i.toDateString());else if(a==="week"){const p=new Date(i-6048e5);n=n.filter(f=>new Date(f.timestamp)>=p)}else if(a==="last_week"){const p=new Date(i-12096e5),f=new Date(i-7*864e5);n=n.filter(g=>{const b=new Date(g.timestamp);return b>=p&&b<f})}else if(a==="month"){const p=new Date(i.getFullYear(),i.getMonth(),1);n=n.filter(f=>new Date(f.timestamp)>=p)}else if(a==="last_month"){const p=new Date(i.getFullYear(),i.getMonth()-1,1),f=new Date(i.getFullYear(),i.getMonth(),1);n=n.filter(g=>{const b=new Date(g.timestamp);return b>=p&&b<f})}else if(a==="year"){const p=new Date(i.getFullYear(),0,1);n=n.filter(f=>new Date(f.timestamp)>=p)}else if(a==="last_year"){const p=new Date(i.getFullYear()-1,0,1),f=new Date(i.getFullYear(),0,1);n=n.filter(g=>{const b=new Date(g.timestamp);return b>=p&&b<f})}const o=p=>document.getElementById(p);if(o("vaultTotal")&&(o("vaultTotal").textContent=y.length),o("vaultVerified")&&(o("vaultVerified").textContent=y.filter(p=>p.verified).length),o("vaultTypes")&&(o("vaultTypes").textContent=new Set(y.map(p=>p.type)).size),o("vaultFees")&&(o("vaultFees").textContent="$"+(y.length*.01).toFixed(2)),wt=n,n.length===0){t.innerHTML='<div style="text-align:center;padding:40px 20px;color:var(--muted)"><i class="fas fa-vault" style="font-size:2.5rem;margin-bottom:12px;opacity:0.3"></i><p>'+(r?"No records match your search.":"No anchored records yet. Records will appear here automatically as you anchor them.")+"</p></div>",Tt(),Ht();return}var c=Math.ceil(n.length/Me);J>c&&(J=c),J<1&&(J=1);var l=(J-1)*Me,s=n.length>Me?n.slice(l,l+Me):n,d=n.length<=200;t.innerHTML=s.map((p,f)=>`
        <div class="vault-record"${d?' style="animation:slideUp 0.3s ease"':""}>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;gap:8px">
                <div style="display:flex;align-items:center;gap:8px;min-width:0;flex:1;overflow:hidden">
                    <input type="checkbox" class="vault-cb" data-hash="${p.hash}" onchange="_updateBulkBar()" style="accent-color:#00aaff;cursor:pointer;flex-shrink:0">
                    <span style="font-size:0.95rem;flex-shrink:0;width:20px;text-align:center;line-height:1">${p.icon||'<i class="fas fa-clipboard-list"></i>'}</span>
                    <strong style="color:#fff;font-size:0.88rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">${p.label||p.type}</strong>
                    <span style="font-size:0.72rem;color:var(--muted);flex-shrink:0;white-space:nowrap">${p.branch||""}</span>
                </div>
                <div style="display:flex;gap:6px;flex-shrink:0">
                    ${p.verified?'<span class="vault-badge verified"><i class="fas fa-check-circle"></i> Verified</span>':'<span class="vault-badge anchored"><i class="fas fa-anchor"></i> Anchored</span>'}
                    ${p.encrypted?'<span class="vault-badge" style="background:rgba(0,170,255,0.06);color:var(--accent);border:1px solid rgba(0,170,255,0.15)"><i class="fas fa-lock"></i> Encrypted</span>':""}
                </div>
            </div>
            <div class="vault-hash"><i class="fas fa-fingerprint" style="margin-right:6px;opacity:0.6"></i>${p.hash}</div>
            ${p.content?'<div style="font-size:0.78rem;color:var(--steel);margin-bottom:8px;padding:6px 10px;background:var(--surface);border-radius:3px"><i class="fas fa-file-lines" style="margin-right:6px;opacity:0.5"></i>'+p.content+"</div>":""}
            <div class="vault-meta">
                <span><i class="fas fa-clock"></i> ${new Date(p.timestamp).toLocaleString()}</span>
                <span><i class="fas fa-hashtag"></i> TX: ${p.explorerUrl?'<a href="'+p.explorerUrl+'" target="_blank" rel="noopener" style="color:var(--accent);text-decoration:none">'+(p.txHash||"").substring(0,16)+'‚Ä¶ <i class="fas fa-external-link-alt" style="font-size:0.6rem"></i></a>':(p.txHash||"").substring(0,16)+"..."}</span>
                ${p.source?'<span><i class="fas fa-tools"></i> '+p.source+"</span>":""}
                <span><i class="fas fa-coins"></i> 0.01 Credits</span>
            </div>
        </div>
    `).join("");var u=(performance.now()-e).toFixed(1);Ht();var m=document.getElementById("vmRenderMs");m&&(m.textContent=u+" ms"),An(),y.length>=100}function Ht(){var t=document.getElementById("vaultPagination"),e=document.getElementById("vaultPageInfo");if(t){var n=wt.length,r=Math.ceil(n/Me);if(r<=1){t.style.display="none";return}t.style.display="flex",e&&(e.textContent="Page "+J+" of "+r+" ("+n.toLocaleString()+" records)")}}function Na(){var t=Math.ceil(wt.length/Me);J<t&&(J++,ce())}function Ba(){J>1&&(J--,ce())}function Oa(t){if(y.length===0){D("Empty Vault","No records to export.","warning");return}const e=y.map(n=>({"Record Type":n.label||n.type,Branch:n.branch||"","SHA-256 Hash":n.hash,"TX Hash":n.txHash||"","Content Preview":n.content||"",Encrypted:n.encrypted?"Yes":"No",Timestamp:n.timestamp,Verified:n.verified?"Yes":"No","Source Tool":n.source||"Manual Anchor","Credit Fee":"0.01","Explorer URL":n.explorerUrl||"",Network:n.network||""}));if(t==="csv"){const n=Object.keys(e[0]),r=[n.join(","),...e.map(o=>n.map(c=>'"'+(o[c]||"").toString().replace(/"/g,'""')+'"').join(","))].join(`
`),a=new Blob([r],{type:"text/csv"}),i=document.createElement("a");i.href=URL.createObjectURL(a),i.download="s4_audit_vault_"+new Date().toISOString().split("T")[0]+".csv",i.click()}else{const n=XLSX.utils.json_to_sheet(e),r=XLSX.utils.book_new();XLSX.utils.book_append_sheet(r,n,"Audit Vault"),XLSX.writeFile(r,"s4_audit_vault_"+new Date().toISOString().split("T")[0]+".xlsx")}}async function _a(){let t=0;y.forEach(e=>{e.verified=!0,e.verifiedAt=new Date().toISOString(),t++}),Ae(),ce(),L("Vault Verification Complete",t+" records re-verified")}function Fa(){confirm("Clear all "+y.length+" records from the audit vault? This cannot be undone.")&&(y=[],Ae(),ce())}function Ze(){var t=document.querySelectorAll(".vault-cb:checked");return Array.from(t).map(function(e){return e.dataset.hash})}function Tt(){var t=Ze(),e=document.getElementById("vaultBulkBar"),n=document.getElementById("vaultSelectedCount"),r=document.getElementById("vaultSelectAll");e&&(e.style.display=t.length>0?"flex":"none"),n&&(n.textContent=t.length);var a=document.querySelectorAll(".vault-cb");r&&a.length>0&&(r.checked=t.length===a.length,r.indeterminate=t.length>0&&t.length<a.length)}function Ua(t){var e=document.querySelectorAll(".vault-cb");e.forEach(function(n){n.checked=t}),Tt()}function Ha(t){var e=Ze();if(e.length===0){D("No Selection","Select records to export.","warning");return}var n=y.filter(function(d){return e.includes(d.hash)}),r=n.map(function(d){return{"Record Type":d.label||d.type,Branch:d.branch||"","SHA-256 Hash":d.hash,"TX Hash":d.txHash||"","Content Preview":d.content||"",Encrypted:d.encrypted?"Yes":"No",Timestamp:d.timestamp,Verified:d.verified?"Yes":"No","Source Tool":d.source||"Manual Anchor","Credit Fee":"0.01"}});if(t==="csv"){var a=Object.keys(r[0]),i=[a.join(",")].concat(r.map(function(d){return a.map(function(u){return'"'+(d[u]||"").toString().replace(/"/g,'""')+'"'}).join(",")})).join(`
`),o=new Blob([i],{type:"text/csv"}),c=document.createElement("a");c.href=URL.createObjectURL(o),c.download="s4_vault_selected_"+new Date().toISOString().split("T")[0]+".csv",c.click()}else{var l=XLSX.utils.json_to_sheet(r),s=XLSX.utils.book_new();XLSX.utils.book_append_sheet(s,l,"Selected Records"),XLSX.writeFile(s,"s4_vault_selected_"+new Date().toISOString().split("T")[0]+".xlsx")}D("Exported",e.length+" records exported.","success")}function Ga(){var t=Ze();if(t.length===0){D("No Selection","Select records to re-verify.","warning");return}var e=0;y.forEach(function(n){t.includes(n.hash)&&(n.verified=!0,n.verifiedAt=new Date().toISOString(),e++)}),Ae(),ce(),D("Verified",e+" records re-verified.","success")}function Va(){var t=Ze();if(t.length===0){D("No Selection","Select records to delete.","warning");return}confirm("Delete "+t.length+" selected records? This cannot be undone.")&&(y=y.filter(function(e){return!t.includes(e.hash)}),Ae(),ce(),D("Deleted",t.length+" records removed from vault.","info"))}var Cn="[STRESS-TEST]";function Gt(t){for(var e="",n=0;n<t;n++)e+=Math.floor(Math.random()*16).toString(16);return e}function qa(){var t=document.getElementById("stressTestCount"),e=parseInt(t?t.value:"1000",10),n=document.getElementById("stressTestResults");n&&(n.style.display="block",n.innerHTML='<i class="fas fa-spinner fa-spin"></i> Generating '+e.toLocaleString()+" synthetic records‚Ä¶"),setTimeout(function(){for(var r=performance.now(),a=["ILS Record","BOM Extract","Technical Manual","SBOM Component","Provisioning Item","Maintenance Task","Failure Report","Supply Chain Entry","Logistics Audit","Compliance Check","DPAS Priority","Configuration Item","Warranty Record","Repair Order","Inspection Report"],i=["GEIA-STD-0007","IEC-62264","AS9100","ISO-27001","DPAS-DO","DPAS-DX","SOC2","NIST-800","SAE-AS6500","DFARS-252","ITAR-EAR"],o=["Manual Anchor","SBOM Generator","TA Assist AI","ILS Suite","BOM Ingestion","PDF Parser","Compliance Engine","Supply Chain Monitor","Batch Import","API Ingest"],c=["Polygon Amoy","Ethereum Sepolia","Base Goerli","Arbitrum Sepolia","Solana Devnet"],l=[],s=0;s<e;s++){var d=a[Math.floor(Math.random()*a.length)],u=new Date(Date.now()-Math.floor(Math.random()*365*24*3600*1e3));l.push({type:d,label:Cn+" "+d+" #"+(s+1),hash:Gt(64),txHash:"0x"+Gt(64),content:"Synthetic record "+(s+1)+" of "+e.toLocaleString()+" ‚Äî "+d,timestamp:u.toISOString(),verified:Math.random()>.3,encrypted:Math.random()>.7,branch:i[Math.floor(Math.random()*i.length)],source:o[Math.floor(Math.random()*o.length)],network:c[Math.floor(Math.random()*c.length)],explorerUrl:"",icon:'<i class="fas fa-vial"></i>',fee:.01})}var m=performance.now()-r,p=performance.now();y=y.concat(l);var f=performance.now()-p,g=performance.now();try{Ae()}catch{y=y.slice(0,y.length-e),n&&(n.innerHTML='<span style="color:#ff3333"><i class="fas fa-exclamation-triangle"></i> <strong>localStorage quota exceeded.</strong> Could not store '+e.toLocaleString()+" records. Try a smaller count or clear existing records first.</span>"),D("Storage Limit","localStorage quota exceeded for "+e.toLocaleString()+" records.","danger");return}var b=performance.now()-g,w=performance.now();J=1,ce();var A=performance.now()-w,C=performance.now()-r;if(n){var T=(new Blob([JSON.stringify(y)]).size/1024).toFixed(1);n.innerHTML='<div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:10px;margin-bottom:10px"><div style="padding:10px;background:rgba(0,170,255,0.04);border:1px solid rgba(0,170,255,0.12);border-radius:3px"><div style="color:#00aaff;font-size:1.1rem;font-weight:700">'+e.toLocaleString()+'</div><div style="color:#888;font-size:0.72rem">Records Generated</div></div><div style="padding:10px;background:rgba(0,170,255,0.04);border:1px solid rgba(0,170,255,0.12);border-radius:3px"><div style="color:#00aaff;font-size:1.1rem;font-weight:700">'+y.length.toLocaleString()+'</div><div style="color:#888;font-size:0.72rem">Total Vault Records</div></div><div style="padding:10px;background:rgba(0,170,255,0.04);border:1px solid rgba(0,170,255,0.12);border-radius:3px"><div style="color:#00aaff;font-size:1.1rem;font-weight:700">'+T+' KB</div><div style="color:#888;font-size:0.72rem">Storage Used</div></div><div style="padding:10px;background:rgba(0,170,255,0.04);border:1px solid rgba(0,170,255,0.12);border-radius:3px"><div style="color:#00aaff;font-size:1.1rem;font-weight:700">'+C.toFixed(0)+' ms</div><div style="color:#888;font-size:0.72rem">Total Time</div></div></div><table style="width:100%;font-size:0.75rem;border-collapse:collapse"><tr style="border-bottom:1px solid var(--border)"><td style="padding:4px 8px;color:#888">Record Generation</td><td style="padding:4px 8px;color:#fff;text-align:right">'+m.toFixed(1)+' ms</td></tr><tr style="border-bottom:1px solid var(--border)"><td style="padding:4px 8px;color:#888">Array Merge</td><td style="padding:4px 8px;color:#fff;text-align:right">'+f.toFixed(1)+' ms</td></tr><tr style="border-bottom:1px solid var(--border)"><td style="padding:4px 8px;color:#888">localStorage Save</td><td style="padding:4px 8px;color:#fff;text-align:right">'+b.toFixed(1)+' ms</td></tr><tr><td style="padding:4px 8px;color:#888">DOM Render (page)</td><td style="padding:4px 8px;color:#fff;text-align:right">'+A.toFixed(1)+" ms</td></tr></table>"}D("Stress Test Complete",e.toLocaleString()+" records generated in "+C.toFixed(0)+"ms. Total vault: "+y.length.toLocaleString(),"success")},50)}function za(){var t=y.length;y=y.filter(function(r){return!(r.label&&r.label.indexOf(Cn)===0)});var e=t-y.length;if(e===0){D("No Test Records","No stress test records found in vault.","info");return}Ae(),J=1,ce();var n=document.getElementById("stressTestResults");n&&(n.style.display="none"),D("Cleared",e.toLocaleString()+" stress test records removed. "+y.length.toLocaleString()+" records remaining.","info")}function L(t,e){if(!_currentSection&&!_currentILSTool)return;document.querySelectorAll(".workspace-notification").forEach(a=>a.remove());const r=document.createElement("div");r.className="workspace-notification",r.innerHTML='<button class="notif-close" onclick="this.parentElement.remove()">&times;</button><div style="display:flex;align-items:center;gap:10px"><i class="fas fa-check-circle" style="color:var(--accent);font-size:1.2rem"></i><div><strong>'+t+'</strong><div style="font-size:0.78rem;color:var(--muted);margin-top:2px">'+(e||"")+"</div></div></div>",document.body.appendChild(r),setTimeout(()=>r.remove(),5e3)}let dt="all";var j;try{j=JSON.parse(localStorage.getItem("s4_doc_versions")||"{}")}catch{j={}}var De;try{De=JSON.parse(localStorage.getItem("s4_doc_notifications")||"[]")}catch{De=[]}function Wa(){var t=document.createElement("div");t.id="docUploadModal",t.style.cssText="position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);z-index:10000;display:flex;align-items:center;justify-content:center",t.innerHTML=`<div style="background:var(--card);border:1px solid var(--border);border-radius:3px;padding:32px;max-width:560px;width:90%"><h3 style="color:#fff;margin:0 0 16px"><i class="fas fa-file-upload" style="color:var(--accent);margin-right:8px"></i>Add New Document</h3><div style="display:grid;gap:12px"><input id="newDocId" style="background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.15);border-radius:3px;padding:10px" placeholder="Document ID (e.g., GEIA-STD-0007, MIL-STD-1388-2B)"><input id="newDocTitle" style="background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.15);border-radius:3px;padding:10px" placeholder="Title"><textarea id="newDocContent" rows="6" style="background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.15);border-radius:3px;padding:10px;font-family:monospace;font-size:0.82rem" placeholder="Paste document content or notes..."></textarea><select id="newDocCat" style="background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.15);border-radius:3px;padding:10px"><option>ILS</option><option>DMSMS</option><option>Readiness</option><option>Cybersecurity</option><option>Quality</option><option>Logistics</option><option>Configuration</option><option>Other</option></select><div id="docUploadDropzone" ondragover="event.preventDefault();event.stopPropagation();this.style.borderColor='var(--accent)';this.style.background='rgba(0,170,255,0.08)'" ondragleave="this.style.borderColor='rgba(0,170,255,0.3)';this.style.background='rgba(0,170,255,0.02)'" ondrop="event.preventDefault();event.stopPropagation();this.style.borderColor='rgba(0,170,255,0.3)';this.style.background='rgba(0,170,255,0.02)';if(event.dataTransfer.files.length){var inp=document.getElementById('newDocFile');inp.files=event.dataTransfer.files;handleDocFileSelect(inp)}" onclick="document.getElementById('newDocFile').click()" style="border:2px dashed rgba(0,170,255,0.3);border-radius:3px;padding:28px 20px;text-align:center;color:var(--muted);cursor:pointer;background:rgba(0,170,255,0.02);transition:all 0.3s"><i class="fas fa-cloud-upload-alt" style="font-size:2rem;margin-bottom:10px;display:block;color:var(--accent)"></i><div style='font-size:0.9rem;color:var(--steel);font-weight:600;margin-bottom:6px'>Drag & drop your file here</div><div style='font-size:0.78rem;color:var(--muted)'>or <span style='color:var(--accent);text-decoration:underline'>click to browse</span></div><div style='font-size:0.72rem;color:var(--muted);margin-top:8px'>PDF, Word, Excel, CSV, TXT ‚Äî any document type</div><input type="file" id="newDocFile" style="display:none" accept=".pdf,.docx,.xlsx,.txt,.csv,.json" onchange="handleDocFileSelect(this)"></div><div style="background:rgba(0,170,255,0.06);border:1px solid rgba(0,170,255,0.15);border-radius:3px;padding:10px 14px;margin-top:12px;font-size:0.78rem;color:var(--steel)"><i class="fas fa-robot" style="color:#00aaff;margin-right:6px"></i><strong style="color:#00aaff">S4 AI Agent</strong> will automatically scan uploads for discrepancies, compliance gaps, unauthorized changes, and red flags.</div><div id="newDocFileInfo" style="display:none;padding:8px;background:rgba(0,204,102,0.06);border:1px solid rgba(0,204,102,0.2);border-radius:3px;font-size:0.82rem;color:#00cc66"></div></div><div style="display:flex;gap:10px;margin-top:20px;justify-content:flex-end"><button onclick="document.getElementById('docUploadModal').remove()" style="background:rgba(255,255,255,0.06);color:var(--steel);border:1px solid var(--border);border-radius:3px;padding:8px 20px;cursor:pointer">Cancel</button><button onclick="addNewDoc()" style="background:var(--accent);color:#fff;border:none;border-radius:3px;padding:8px 20px;cursor:pointer;font-weight:600">Add Document</button></div></div>`,document.body.appendChild(t)}function Xa(t){if(t.files.length>0){var e=t.files[0],n=document.getElementById("newDocFileInfo");n&&(n.style.display="block",n.innerHTML='<i class="fas fa-file"></i> '+e.name+" ("+Math.round(e.size/1024)+"KB)"),document.getElementById("newDocTitle").value||(document.getElementById("newDocTitle").value=e.name.replace(/\.[^.]+$/,""))}}function Ja(){var t=document.getElementById("newDocId").value.trim(),e=document.getElementById("newDocTitle").value.trim(),n=document.getElementById("newDocContent").value.trim(),r=document.getElementById("newDocCat").value;if(!t||!e){D("Missing Info","Please enter a Document ID and Title","warning");return}var a=Mn(n,e);j[t]=j[t]||[],j[t].push({version:j[t].length+1,title:e,content:n,category:r,timestamp:new Date().toISOString(),flags:a}),localStorage.setItem("s4_doc_versions",JSON.stringify(j));var i={id:t,title:e,type:"new",timestamp:new Date().toISOString(),flags:a};De.unshift(i),localStorage.setItem("s4_doc_notifications",JSON.stringify(De));var o=document.getElementById("docUploadModal");o&&o.remove(),D("Document Added",t+" ‚Äî "+e+(a.length>0?" ‚Äî AI Agent detected "+a.length+" issue"+(a.length>1?"s":""):" ‚Äî AI Agent scan complete, no issues found"),a.length>0?"warning":"success"),a.length>0&&Ya(t,a),xe()}function ja(){var t=Object.keys(j),e=document.createElement("div");e.id="docVersionModal",e.style.cssText="position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);z-index:10000;display:flex;align-items:center;justify-content:center",e.innerHTML='<div style="background:var(--card);border:1px solid var(--border);border-radius:3px;padding:32px;max-width:560px;width:90%;max-height:80vh;overflow-y:auto"><h3 style="color:#fff;margin:0 0 16px"><i class="fas fa-code-branch" style="color:#c9a84c;margin-right:8px"></i>Upload New Version</h3><p style="color:var(--steel);font-size:0.85rem;margin-bottom:16px">Upload a revised version of an existing document. Our AI agent will analyze it for discrepancies, changes, errors, omissions, and cost modifications ‚Äî then flag anything that needs attention.</p><select id="versionDocId" style="background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.15);border-radius:3px;padding:10px;width:100%;margin-bottom:12px"><option value="">Select document...</option>'+t.map(function(n){return'<option value="'+n+'">'+n+" (v"+j[n].length+")</option>"}).join("")+`</select><textarea id="versionContent" rows="8" style="background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.15);border-radius:3px;padding:10px;width:100%;font-family:monospace;font-size:0.82rem;margin-bottom:12px" placeholder="Paste updated document content..."></textarea><input id="versionNote" style="background:#0a0e1a;color:#fff;border:1px solid rgba(255,255,255,0.15);border-radius:3px;padding:10px;width:100%;margin-bottom:12px" placeholder="Change notes (optional)"><div style="display:flex;gap:10px;justify-content:flex-end"><button onclick="document.getElementById('docVersionModal').remove()" style="background:rgba(255,255,255,0.06);color:var(--steel);border:1px solid var(--border);border-radius:3px;padding:8px 20px;cursor:pointer">Cancel</button><button onclick="uploadDocVersion()" style="background:#c9a84c;color:#000;border:none;border-radius:3px;padding:8px 20px;cursor:pointer;font-weight:600">Upload & Analyze</button></div></div>`,document.body.appendChild(e)}function $a(){var t=document.getElementById("versionDocId").value,e=document.getElementById("versionContent").value.trim(),n=document.getElementById("versionNote").value.trim();if(!t||!e){D("Missing","Select a document and paste content","warning");return}var r=j[t],a=r.length>0&&r[r.length-1].content||"",i=Mn(e,t),o=Ka(a,e),c={version:r.length+1,content:e,note:n,timestamp:new Date().toISOString(),flags:i,diff:o};j[t].push(c),localStorage.setItem("s4_doc_versions",JSON.stringify(j)),De.unshift({id:t,type:"version",version:c.version,timestamp:new Date().toISOString(),flags:i,diff:o,note:n}),localStorage.setItem("s4_doc_notifications",JSON.stringify(De));var l=document.getElementById("docVersionModal");l&&l.remove(),Qa(t,o,i),D("AI Analysis Complete",t+" v"+c.version+" ‚Äî "+o.added+" additions, "+o.removed+" removals, "+o.changed+" modifications"+(i.length>0?" | "+i.length+" red flag"+(i.length>1?"s":"")+" detected":" | No issues found"),i.length>0?"warning":"success")}function Ka(t,e){for(var n=t.split(`
`),r=e.split(`
`),a=0,i=0,o=0,c=Math.max(n.length,r.length),l=[],s=0;s<c;s++){var d=n[s]||"",u=r[s]||"";d!==u&&(d?u?(o++,l.push({type:"mod",line:s+1,old:d,new:u})):(i++,l.push({type:"del",line:s+1,text:d})):(a++,l.push({type:"add",line:s+1,text:u})))}return{added:a,removed:i,changed:o,total:l.length,details:l.slice(0,50)}}function Mn(t,e){var n=[];return t&&(t.toLowerCase(),/classified|secret|top secret|sci |noforn/i.test(t)&&n.push({severity:"critical",msg:"Contains classification markings ‚Äî verify handling procedures"}),/delete.*all|remove.*entire|replace.*complete/i.test(t)&&n.push({severity:"high",msg:"Bulk deletion/replacement language detected"}),/price.*change|cost.*increase|amount.*modif/i.test(t)&&n.push({severity:"medium",msg:"Financial changes detected ‚Äî verify authorization"}),/sole.?source|no.?compet/i.test(t)&&n.push({severity:"medium",msg:"Sole source / non-competitive language detected"}),/waiver|deviation|exception/i.test(t)&&n.push({severity:"low",msg:"Waiver/deviation/exception referenced ‚Äî confirm approval"}),t.length<50&&e&&n.push({severity:"medium",msg:"Document content unusually short ("+t.length+" chars)"})),n}function Ya(t,e){var n='<div style="position:fixed;top:80px;right:20px;background:#1a0a0a;border:2px solid #ff4444;border-radius:3px;padding:20px;max-width:400px;z-index:10001;animation:slideUp 0.3s ease;box-shadow:0 8px 32px rgba(255,0,0,0.2)"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px"><h4 style="color:#ff4444;margin:0"><i class="fas fa-flag"></i> Red Flags: '+t+`</h4><button onclick="this.closest('div').parentElement.remove()" style="background:none;border:none;color:#ff4444;cursor:pointer;font-size:1.2rem">&times;</button></div>`;e.forEach(function(a){var i=a.severity==="critical"?"#ff0000":a.severity==="high"?"#ff4444":a.severity==="medium"?"#ff8800":"#c9a84c";n+='<div style="padding:8px;margin-bottom:6px;background:rgba(255,0,0,0.05);border-left:3px solid '+i+';border-radius:0 6px 6px 0;font-size:0.82rem;color:var(--steel)"><span style="color:'+i+';font-weight:700;text-transform:uppercase;font-size:0.7rem">'+a.severity+"</span> "+a.msg+"</div>"}),n+="</div>";var r=document.createElement("div");r.innerHTML=n,document.body.appendChild(r),setTimeout(function(){r.parentElement&&r.remove()},15e3)}function Qa(t,e,n){var r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);z-index:10000;display:flex;align-items:center;justify-content:center";var a='<div style="background:var(--card);border:1px solid var(--border);border-radius:3px;padding:32px;max-width:640px;width:90%;max-height:80vh;overflow-y:auto"><h3 style="color:#fff;margin:0 0 16px"><i class="fas fa-brain" style="color:#c9a84c;margin-right:8px"></i>Document Intelligence Analysis: '+t+'</h3><div style="background:rgba(0,170,255,0.06);border:1px solid rgba(0,170,255,0.15);border-radius:3px;padding:10px 14px;margin-bottom:16px;font-size:0.8rem;color:var(--steel)"><i class="fas fa-robot" style="color:#00aaff;margin-right:6px"></i><strong style="color:#00aaff">S4 AI Agent:</strong> Analyzed document for discrepancies, unauthorized changes, errors, omissions, and cost modifications.</div><div style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:16px"><div style="background:rgba(0,204,102,0.06);border:1px solid rgba(0,204,102,0.2);border-radius:3px;padding:12px;text-align:center"><div style="font-size:1.4rem;font-weight:800;color:#00cc66">+'+e.added+'</div><div style="font-size:0.75rem;color:var(--steel)">Lines Added</div></div><div style="background:rgba(255,68,68,0.06);border:1px solid rgba(255,68,68,0.2);border-radius:3px;padding:12px;text-align:center"><div style="font-size:1.4rem;font-weight:800;color:#ff4444">-'+e.removed+'</div><div style="font-size:0.75rem;color:var(--steel)">Lines Removed</div></div><div style="background:rgba(201,168,76,0.06);border:1px solid rgba(201,168,76,0.2);border-radius:3px;padding:12px;text-align:center"><div style="font-size:1.4rem;font-weight:800;color:#c9a84c">~'+e.changed+'</div><div style="font-size:0.75rem;color:var(--steel)">Lines Modified</div></div></div>';n.length>0&&(a+='<div style="background:rgba(255,0,0,0.04);border:1px solid rgba(255,68,68,0.2);border-radius:3px;padding:12px;margin-bottom:16px"><div style="color:#ff4444;font-weight:700;margin-bottom:8px"><i class="fas fa-flag"></i> Red Flags ('+n.length+")</div>",n.forEach(function(i){a+='<div style="font-size:0.82rem;color:var(--steel);margin-bottom:4px">‚Ä¢ <strong style="color:#ff4444">'+i.severity.toUpperCase()+":</strong> "+i.msg+"</div>"}),a+="</div>"),e.details.length>0&&(a+='<div style="background:#050810;border-radius:3px;padding:12px;font-family:monospace;font-size:0.78rem;max-height:250px;overflow-y:auto">',e.details.forEach(function(i){i.type==="add"?a+='<div style="color:#00cc66">+ L'+i.line+": "+i.text.substring(0,80)+"</div>":i.type==="del"?a+='<div style="color:#ff4444">- L'+i.line+": "+i.text.substring(0,80)+"</div>":a+='<div style="color:#c9a84c">~ L'+i.line+": "+i.old.substring(0,40)+" ‚Üí "+i.new.substring(0,40)+"</div>"}),a+="</div>"),a+=`<div style="text-align:right;margin-top:16px"><button onclick="this.closest('div').parentElement.remove()" style="background:var(--accent);color:#fff;border:none;border-radius:3px;padding:8px 24px;cursor:pointer;font-weight:600">Close</button></div></div>`,r.innerHTML=a,document.body.appendChild(r)}function xe(){const t=document.getElementById("docList"),e=document.getElementById("docResultCount"),n=document.getElementById("docCatFilters");if(!t||typeof S4_DEFENSE_DOCS>"u")return;if(n&&!n.dataset.built){const o=[...new Set(S4_DEFENSE_DOCS.map(c=>c.category))].sort();n.innerHTML=`<button class="doc-filter-btn active" onclick="setDocCat('all',this)">All</button>`+o.map(c=>{const l=typeof DOC_CATEGORIES<"u"&&DOC_CATEGORIES[c]||{};return`<button class="doc-filter-btn" onclick="setDocCat('`+c+`',this)"><i class="fas `+(l.icon||"fa-file")+'" style="margin-right:4px;color:'+(l.color||"var(--accent)")+'"></i>'+c+"</button>"}).join(""),n.dataset.built="1"}document.getElementById("docCount")&&(document.getElementById("docCount").textContent=S4_DEFENSE_DOCS.length+" documents");let r=[...S4_DEFENSE_DOCS];const a=document.getElementById("docBranchFilter")?.value||"all";a!=="all"&&(r=r.filter(o=>o.branch===a)),dt!=="all"&&(r=r.filter(o=>o.category===dt));const i=(document.getElementById("docSearch")?.value||"").toLowerCase();if(i&&(r=r.filter(o=>o.id.toLowerCase().includes(i)||o.title.toLowerCase().includes(i)||o.description.toLowerCase().includes(i)||o.keywords.toLowerCase().includes(i))),e&&(e.textContent=r.length+" of "+S4_DEFENSE_DOCS.length+" documents"),r.length===0){t.innerHTML='<div style="text-align:center;padding:40px;color:var(--muted)"><i class="fas fa-search" style="font-size:2rem;margin-bottom:12px;opacity:0.3"></i><p>No documents match your filters.</p></div>';return}t.innerHTML=r.map((o,c)=>{const l=typeof DOC_CATEGORIES<"u"&&DOC_CATEGORIES[o.category]||{},s=typeof DOC_BRANCHES<"u"&&DOC_BRANCHES[o.branch]||{};return`<div class="doc-card" onclick="window.open('${o.url}','_blank')" style="animation:slideUp ${.15+c*.03}s ease">
            <div class="doc-id">${o.id}</div>
            <div class="doc-title">${o.title}</div>
            <div class="doc-desc">${o.description}</div>
            <div class="doc-tags">
                <span class="doc-tag" style="background:${l.color||"var(--accent)"}22;color:${l.color||"var(--accent)"}"><i class="fas ${l.icon||"fa-file"}" style="margin-right:3px"></i>${o.category}</span>
                <span class="doc-tag" style="background:${s.color||"#666"}22;color:${s.color||"#999"}">${s.label||o.branch}</span>
            </div>
        </div>`}).join("")}function Za(t,e){dt=t,document.querySelectorAll(".doc-filter-btn").forEach(n=>n.classList.remove("active")),e&&e.classList.add("active"),xe()}function be(){const t=y.length,e=I.length,n=I.filter(P=>P.done).length,r=Math.min(100,Math.round(t>=50?95:t>=20?80:t>=5?60:t>=1?35:10)),a=y.filter(P=>P.encrypted).length,i=Math.min(100,Math.round(t>=20?85+a/Math.max(t,1)*15:t>=5?55+t:t>=1?30:8)),o=Math.min(100,Math.round(t>=10?88:t>=3?65:t>=1?40:12)),c=Math.min(100,Math.round(e>0?70+Math.min(30,n/Math.max(e,1)*30):15)),l=new Set(y.map(P=>P.source).filter(Boolean)).size,s=Math.min(100,Math.round(l>=6?92:l>=3?70:l>=1?45:10)),d=y.filter(P=>P.source==="DMSMS Tracker").length,u=Math.min(100,Math.round(d>=5?90:d>=2?65:d>=1?40:8)),m=Math.round(r*.25+i*.2+o*.15+c*.15+s*.15+u*.1),p=(P,O,q)=>{const de=document.getElementById(P),h=document.getElementById(O);de&&(de.style.width=q+"%"),h&&(h.textContent=q+"%",h.style.color=q>=80?"var(--green)":q>=50?"var(--gold)":"#ff6b6b")};p("barCMMC","pctCMMC",r),p("barNIST","pctNIST",i),p("barDFARS","pctDFARS",o),p("barFAR","pctFAR",c),p("barILS","pctILS",s),p("barDMSMSmgmt","pctDMSMSmgmt",u);const f=document.getElementById("complianceArc");f&&(f.style.strokeDashoffset=326.7-326.7*m/100);const g=document.getElementById("complianceScore");g&&(g.textContent=m+"%");const b=document.getElementById("complianceGrade"),w=document.getElementById("complianceGradeLetter");if(b){const P=m>=95?"A+":m>=90?"A":m>=85?"A-":m>=80?"B+":m>=75?"B":m>=70?"B-":m>=65?"C+":m>=60?"C":m>=50?"D":"F",O=m>=80?"var(--green)":m>=60?"var(--gold)":"#ff6b6b";b.textContent=P,b.style.background="linear-gradient(135deg,"+O+"22,"+O+"11)",b.style.color=O,b.style.border="2px solid "+O+"55",b.style.boxShadow="0 0 20px "+O+"33",w&&(w.textContent=P,w.style.background="linear-gradient(135deg,"+O+"22,"+O+"11)",w.style.color=O,w.style.border="2px solid "+O+"55",w.style.boxShadow="0 0 20px "+O+"33")}const A=[];t===0&&A.push('<i class="fas fa-arrow-right" style="color:var(--accent);margin-right:6px"></i> <strong>Anchor your first record</strong> to establish a tamper-proof audit trail and start building your compliance posture.'),r<80&&A.push('<i class="fas fa-arrow-right" style="color:#e74c3c;margin-right:6px"></i> <strong>Increase anchored records</strong> ‚Äî CMMC Level 2 requires demonstrable data integrity controls. Anchor 20+ records to reach 80%+ coverage.'),a<t*.5&&t>0&&A.push('<i class="fas fa-arrow-right" style="color:#3498db;margin-right:6px"></i> <strong>Enable encryption</strong> on more records ‚Äî over 50% of your records are unencrypted. CUI requires protection per NIST 800-171.'),s<70&&A.push('<i class="fas fa-arrow-right" style="color:#9b59b6;margin-right:6px"></i> <strong>Use more ILS tools</strong> ‚Äî run DMSMS checks, readiness calculations, and lifecycle estimates to improve GEIA-STD-0007 ILS compliance.'),e>0&&n/e<.5&&A.push('<i class="fas fa-arrow-right" style="color:var(--accent);margin-right:6px"></i> <strong>Resolve open action items</strong> ‚Äî '+(e-n)+" of "+e+" items are still open. Completing these improves FAR 46 quality scores."),d===0&&A.push('<i class="fas fa-arrow-right" style="color:#ff6b6b;margin-right:6px"></i> <strong>Run a DMSMS analysis</strong> and anchor the results to demonstrate proactive obsolescence management per DoDI 4245.15.'),A.length===0&&A.push('<i class="fas fa-check-circle" style="color:var(--accent);margin-right:6px"></i> <strong>Excellent compliance posture!</strong> Continue anchoring records and monitoring DMSMS, readiness, and warranty status.');const C=document.getElementById("complianceRecs");C&&(C.innerHTML=A.map(P=>'<div style="margin-bottom:8px">'+P+"</div>").join("")),window._complianceScores=[r,i,o,0,0,c,s],typeof renderComplianceCharts=="function"&&setTimeout(renderComplianceCharts,250),typeof _s4RefreshCharts=="function"&&setTimeout(_s4RefreshCharts,200);const T=document.getElementById("complianceProgram");T&&T.options.length===0&&We()}function ei(){const t={"Overall Score":document.getElementById("complianceScore")?.textContent||"",Grade:document.getElementById("complianceGrade")?.textContent||"","CMMC Level 2":document.getElementById("pctCMMC")?.textContent||"","NIST 800-171":document.getElementById("pctNIST")?.textContent||"","DFARS 252.204":document.getElementById("pctDFARS")?.textContent||"","FAR 46 Quality":document.getElementById("pctFAR")?.textContent||"","GEIA-STD-0007 ILS":document.getElementById("pctILS")?.textContent||"","DMSMS Management":document.getElementById("pctDMSMSmgmt")?.textContent||"","Records Anchored":y.length,"Action Items":I.length,Generated:new Date().toISOString()},e=XLSX.utils.json_to_sheet([t]),n=XLSX.utils.book_new();XLSX.utils.book_append_sheet(n,e,"Compliance Scorecard"),XLSX.writeFile(n,"s4_compliance_scorecard_"+new Date().toISOString().split("T")[0]+".xlsx")}async function ti(){const t=document.getElementById("complianceScore")?.textContent||"0%",e=document.getElementById("complianceGrade")?.textContent||"?",n="S4 Ledger Compliance Scorecard | Overall: "+t+" ("+e+") | CMMC: "+(document.getElementById("pctCMMC")?.textContent||"")+" | NIST: "+(document.getElementById("pctNIST")?.textContent||"")+" | Records: "+y.length+" | Generated: "+new Date().toISOString(),r=await H(n);ae(r,"Compliance Scorecard","CUI");const{txHash:a,explorerUrl:i,network:o}=await ie(r,"compliance_scorecard",n.substring(0,100));$({hash:r,txHash:a,type:"compliance_scorecard",label:"Compliance Scorecard",branch:"JOINT",icon:'<i class="fas fa-shield-alt"></i>',content:n.substring(0,100),encrypted:!1,timestamp:new Date().toISOString(),source:"Compliance Scorecard",fee:.01,explorerUrl:i,network:o}),S.anchored++,S.slsFees=Math.round((S.slsFees+.01)*100)/100,S.types.add("compliance_scorecard"),V(),z();const c={hash:r,type:"compliance_scorecard",branch:"JOINT",timestamp:new Date().toISOString(),label:"Compliance Scorecard",txHash:a};x.push(c),re({hash:r,record_type:"compliance_scorecard",record_label:"Compliance Scorecard",branch:"JOINT",timestamp:new Date().toISOString(),timestamp_display:new Date().toISOString().replace("T"," ").substring(0,19)+" UTC",fee:.01,tx_hash:a,system:"Compliance Scorecard",explorer_url:i,network:o}),ee(),setTimeout(()=>{var l=document.getElementById("animStatus");l&&(l.innerHTML='<i class="fas fa-check-circle" style="color:var(--accent)"></i> Compliance scorecard anchored!',l.style.color="#00aaff")},2200),await new Promise(l=>setTimeout(l,3200)),Z()}var U=JSON.parse(localStorage.getItem("s4_poam")||"[]");function ni(t){var e=document.getElementById(t+"Section"),n=document.getElementById(t+"Chevron");if(e){var r=e.style.display==="none";e.style.display=r?"block":"none",n&&(n.style.transform=r?"rotate(180deg)":"rotate(0)"),t==="poam"&&r&&et(),t==="evidence"&&r&&Xe(),t==="monitoring"&&r&&Rt(),t==="fedramp"&&r&&Dn(),t==="versionDiff"&&r&&pi(),t==="templates"&&r&&Tn(),t==="schedReports"&&r&&tt(),t==="execSummary"&&r&&!document.getElementById("execSummaryOutput")?.innerHTML&&Lt()}}function ri(){var t="POAM-"+String(Date.now()).slice(-6),e=prompt("Weakness / Vulnerability Description:");if(e){var n=prompt("NIST Control (e.g., AC-2, SI-4):","AC-2"),r=prompt("Risk Level (High / Moderate / Low):","Moderate"),a=prompt("Planned Milestone / Remediation:"),i=prompt("Due Date (YYYY-MM-DD):",new Date(Date.now()+90*864e5).toISOString().split("T")[0]),o=prompt("Responsible Party:","ISSM");U.push({id:t,weakness:e||"",control:n||"AC-2",risk:(r||"Moderate").charAt(0).toUpperCase()+(r||"Moderate").slice(1).toLowerCase(),milestone:a||"Pending",due:i||"",owner:o||"",status:"Open",created:new Date().toISOString()}),localStorage.setItem("s4_poam",JSON.stringify(U)),et(),L("POA&M item "+t+" added")}}function ai(t){var e=U[t];if(e){var n=prompt("Status (Open / In Progress / Closed / Accepted Risk):",e.status);n!==null&&(e.status=n);var r=prompt("Milestone update:",e.milestone);r!==null&&(e.milestone=r),localStorage.setItem("s4_poam",JSON.stringify(U)),et(),L("POA&M "+e.id+" updated")}}function ii(t){confirm("Delete POA&M item "+(U[t]?.id||"")+"?")&&(U.splice(t,1),localStorage.setItem("s4_poam",JSON.stringify(U)),et())}function et(){var t=document.getElementById("poamBody"),e=document.getElementById("poamEmpty"),n=document.getElementById("poamCount");if(n&&(n.textContent=U.length),!!t){if(U.length===0){t.innerHTML="",e&&(e.style.display="block");return}e&&(e.style.display="none"),t.innerHTML=U.map(function(r,a){var i=r.risk==="High"?"#ff6b6b":r.risk==="Moderate"?"#c9a84c":"#00aaff",o=r.status==="Closed"?"var(--green)":r.status==="In Progress"?"#00aaff":r.status==="Accepted Risk"?"#c9a84c":"#ff6b6b",c=r.due&&new Date(r.due)<new Date&&r.status!=="Closed";return'<tr style="border-bottom:1px solid rgba(255,255,255,0.04)"><td style="padding:6px 8px;color:#00aaff;font-weight:600;font-size:0.78rem">'+r.id+'</td><td style="padding:6px 8px;color:#fff;max-width:180px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap" title="'+(r.weakness||"").replace(/"/g,"&quot;")+'">'+(r.weakness||"")+'</td><td style="padding:6px 8px;color:var(--steel)">'+(r.control||"")+'</td><td style="padding:6px 8px"><span style="color:'+i+';font-weight:600">'+(r.risk||"")+'</span></td><td style="padding:6px 8px;color:var(--steel);max-width:140px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap">'+(r.milestone||"")+'</td><td style="padding:6px 8px;color:'+(c?"#ff6b6b":"var(--steel)")+";font-weight:"+(c?"700":"400")+'">'+(r.due||"")+(c?' <i class="fas fa-exclamation-triangle" style="color:#ff6b6b;font-size:0.7rem"></i>':"")+'</td><td style="padding:6px 8px;color:var(--steel)">'+(r.owner||"")+'</td><td style="padding:6px 8px"><span style="color:'+o+';font-weight:600;font-size:0.78rem">'+(r.status||"Open")+'</span></td><td style="padding:6px 8px;text-align:center"><button onclick="editPOAM('+a+')" style="background:none;border:none;color:#00aaff;cursor:pointer;font-size:0.78rem;margin-right:4px" title="Edit"><i class="fas fa-pen"></i></button><button onclick="deletePOAM('+a+')" style="background:none;border:none;color:#ff6b6b;cursor:pointer;font-size:0.78rem" title="Delete"><i class="fas fa-trash"></i></button></td></tr>'}).join("")}}function oi(){if(U.length===0){L("No POA&M items to export","warning");return}var t=XLSX.utils.json_to_sheet(U.map(function(n){return{"POA&M ID":n.id,Weakness:n.weakness,Control:n.control,"Risk Level":n.risk,Milestone:n.milestone,"Due Date":n.due,Owner:n.owner,Status:n.status,Created:n.created}})),e=XLSX.utils.book_new();XLSX.utils.book_append_sheet(e,t,"POA&M"),XLSX.writeFile(e,"s4_poam_"+new Date().toISOString().split("T")[0]+".xlsx"),L("POA&M exported ‚Äî "+U.length+" items")}var F=JSON.parse(localStorage.getItem("s4_evidence")||"[]");function si(t){var e=t.files;if(!(!e||!e.length)){var n=document.getElementById("evidenceControl")?.value||"AC-1",r=0;if(Array.from(e).forEach(function(i){var o=new FileReader;o.onload=function(){var c=Math.round(i.size/1024);F.push({id:"EV-"+String(Date.now()).slice(-6)+"-"+r,control:n,filename:i.name,size:c+" KB",type:i.type||"unknown",hash:"",timestamp:new Date().toISOString(),status:"Attached"}),r++,r===e.length&&(localStorage.setItem("s4_evidence",JSON.stringify(F)),Xe(),L(e.length+" evidence file(s) attached to "+n))},o.readAsDataURL(i)}),e[0]&&typeof H=="function"){var a=new FileReader;a.onload=async function(){var i=await H(a.result.substring(0,5e3));F.length>0&&(F[F.length-1].hash=i.substring(0,16)+"...",localStorage.setItem("s4_evidence",JSON.stringify(F)),Xe())},a.readAsText(e[0])}t.value=""}}function li(t){confirm('Remove evidence "'+(F[t]?.filename||"")+'"?')&&(F.splice(t,1),localStorage.setItem("s4_evidence",JSON.stringify(F)),Xe())}function Xe(){var t=document.getElementById("evidenceList"),e=document.getElementById("evidenceEmpty"),n=document.getElementById("evidenceCount");if(n&&(n.textContent=F.length),!!t){if(F.length===0){t.innerHTML="",e&&(e.style.display="block");return}e&&(e.style.display="none"),t.innerHTML=F.map(function(r,a){var i=r.type.indexOf("pdf")>=0?"fa-file-pdf":r.type.indexOf("image")>=0?"fa-file-image":r.type.indexOf("sheet")>=0||r.filename.match(/\.xlsx?$/i)?"fa-file-excel":"fa-file";return'<div style="display:flex;align-items:center;gap:10px;padding:8px;margin-bottom:4px;background:rgba(255,255,255,0.02);border-radius:3px;border-left:3px solid #c9a84c"><i class="fas '+i+'" style="color:#c9a84c;font-size:1rem;width:20px;text-align:center"></i><div style="flex:1;min-width:0"><div style="color:#fff;font-size:0.82rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">'+r.filename+'</div><div style="font-size:0.72rem;color:var(--steel)">'+r.control+" | "+r.size+" | "+new Date(r.timestamp).toLocaleDateString()+(r.hash?' | <span style="color:#00aaff">Hash: '+r.hash+"</span>":"")+'</div></div><span style="font-size:0.72rem;color:#00aaff;background:#00aaff11;padding:2px 6px;border-radius:3px">'+r.status+'</span><button onclick="removeEvidence('+a+')" style="background:none;border:none;color:#ff6b6b;cursor:pointer;font-size:0.78rem" title="Remove"><i class="fas fa-times"></i></button></div>'}).join("")}}function ci(){if(F.length===0){L("No evidence to export","warning");return}var t=XLSX.utils.json_to_sheet(F.map(function(n){return{ID:n.id,Control:n.control,Filename:n.filename,Size:n.size,Hash:n.hash||"N/A",Timestamp:n.timestamp,Status:n.status}})),e=XLSX.utils.book_new();XLSX.utils.book_append_sheet(e,t,"Evidence Log"),XLSX.writeFile(e,"s4_evidence_log_"+new Date().toISOString().split("T")[0]+".xlsx"),L("Evidence log exported ‚Äî "+F.length+" items")}var he=!1,st=null,lt=[{id:"AC-2",name:"Account Management",family:"AC"},{id:"AU-2",name:"Audit Events",family:"AU"},{id:"AU-6",name:"Audit Review",family:"AU"},{id:"CM-2",name:"Baseline Config",family:"CM"},{id:"CM-6",name:"Config Settings",family:"CM"},{id:"IA-2",name:"User Auth (MFA)",family:"IA"},{id:"IR-4",name:"Incident Handling",family:"IR"},{id:"RA-5",name:"Vulnerability Scan",family:"RA"},{id:"SC-7",name:"Boundary Protection",family:"SC"},{id:"SC-28",name:"Data-at-Rest Encrypt",family:"SC"},{id:"SI-2",name:"Flaw Remediation",family:"SI"},{id:"SI-4",name:"System Monitoring",family:"SI"}];function Rt(){var t=document.getElementById("monitoringGrid"),e=document.getElementById("monitoringLog");if(t){var n=y?y.length:0,r=y?y.filter(function(l){return l.encrypted}).length:0,a=I?I.length:0,i=I?I.filter(function(l){return l.done}).length:0,o=U.filter(function(l){return l.status==="Open"}).length;if(t.innerHTML=lt.map(function(l,s){var d=0;l.family==="AU"?d=n>=5?95:n>=1?65:20:l.family==="SC"?d=r>0?85:n>=1?50:15:l.family==="CM"?d=n>=10?90:n>=3?60:25:l.family==="IA"?d=78+Math.min(n,10):l.family==="IR"?d=a>0?70+Math.min(i*3,25):30:l.family==="SI"?d=n>=5?82:40:l.family==="RA"?d=60+Math.min(n*2,30):d=55+Math.min(n*3,35),d=Math.min(d,100);var u=d>=80?"Operational":d>=50?"Degraded":"At Risk",m=d>=80?"#00cc88":d>=50?"#c9a84c":"#ff6b6b",p=d>=80?"fa-check-circle":d>=50?"fa-exclamation-circle":"fa-times-circle";return'<div style="background:rgba(255,255,255,0.02);border:1px solid '+m+'33;border-radius:3px;padding:10px;text-align:center"><i class="fas '+p+'" style="color:'+m+';font-size:1.1rem;margin-bottom:4px;display:block"></i><div style="color:#fff;font-size:0.78rem;font-weight:600">'+l.id+'</div><div style="color:var(--steel);font-size:0.7rem;margin-bottom:4px">'+l.name+'</div><span style="font-size:0.68rem;padding:2px 6px;border-radius:3px;background:'+m+"22;color:"+m+';font-weight:600">'+u+" ("+d+"%)</span></div>"}).join(""),e){var c='<div style="border-bottom:1px solid rgba(255,255,255,0.04);padding:4px 0"><span style="color:#00aaff">['+new Date().toLocaleTimeString()+"]</span> Scan complete ‚Äî "+lt.filter(function(l,s){return di(l,n,r,a,i)>=80}).length+"/"+lt.length+" controls operational. Vault: "+n+" records, "+r+" encrypted. POA&M open: "+o+"</div>";e.innerHTML=c+e.innerHTML,e.children.length>20&&e.removeChild(e.lastChild)}}}function di(t,e,n,r,a){var i=0;return t.family==="AU"?i=e>=5?95:e>=1?65:20:t.family==="SC"?i=n>0?85:e>=1?50:15:t.family==="CM"?i=e>=10?90:e>=3?60:25:t.family==="IA"?i=78+Math.min(e,10):t.family==="IR"?i=r>0?70+Math.min(a*3,25):30:t.family==="SI"?i=e>=5?82:40:t.family==="RA"?i=60+Math.min(e*2,30):i=55+Math.min(e*3,35),Math.min(i,100)}function ui(){he=!he;var t=document.getElementById("autoMonitorBtn");t&&(t.innerHTML='<i class="fas fa-sync'+(he?" fa-spin":"")+'"></i> Auto-Monitor: '+(he?"ON":"OFF"),t.style.background=he?"rgba(0,170,255,0.15)":"rgba(255,255,255,0.06)",t.style.color=he?"#00aaff":"#fff"),he?(st=setInterval(Rt,3e4),L("Auto-monitoring enabled ‚Äî scanning every 30s")):(clearInterval(st),st=null,L("Auto-monitoring disabled"))}var Je={AC:{name:"Access Control",low:17,moderate:25,high:25},AU:{name:"Audit & Accountability",low:10,moderate:12,high:14},CM:{name:"Configuration Mgmt",low:9,moderate:11,high:11},IA:{name:"Identification & Auth",low:11,moderate:13,high:13},IR:{name:"Incident Response",low:8,moderate:10,high:13},SC:{name:"System & Communications",low:22,moderate:34,high:44}};function Dn(){var t=document.getElementById("fedrampImpact")?.value||"moderate",e=y?y.length:0,n=y?y.filter(function(m){return m.encrypted}).length:0,r=I?I.length:0,a=I?I.filter(function(m){return m.done}).length:0,i=F.length;U.length;var o=0,c=0,l=0,s=0,d=Object.keys(Je);d.forEach(function(m){var p=Je[m],f=p[t]||p.moderate;o+=f;var g=0;m==="AU"?g=e>=10?.88:e>=3?.6:.2:m==="SC"?g=n>0?.75:e>=1?.35:.1:m==="CM"?g=e>=10?.82:e>=3?.55:.15:m==="IA"?g=.65+Math.min(e*.02,.2):m==="IR"?g=r>0?.5+Math.min(a*.05,.35):.15:m==="AC"&&(g=.55+Math.min(e*.02,.3)+(i>0?.05:0));var b=Math.round(f*Math.min(g,1)),w=Math.round((f-b)*.4),A=f-b-w;c+=b,l+=w,s+=A;var C=f>0?Math.round(b/f*100):0,T=document.getElementById("fedrampBar"+m),P=document.getElementById("fedrampPct"+m);T&&(T.style.width=C+"%"),P&&(P.textContent=C+"%",P.style.color=C>=75?"#00aaff":C>=50?"#c9a84c":"#ff6b6b")});var u=function(m,p){var f=document.getElementById(m);f&&(f.textContent=p)};u("fedrampSatisfied",c),u("fedrampPartial",l),u("fedrampNotMet",s),u("fedrampTotal",o),u("fedrampLevel",t.charAt(0).toUpperCase()+t.slice(1))}function mi(){var t=document.getElementById("fedrampImpact")?.value||"moderate",e=Object.keys(Je).map(function(a){var i=Je[a],o=document.getElementById("fedrampPct"+a)?.textContent||"0%";return{Family:a,Name:i.name,"Total Controls":i[t]||i.moderate,"Satisfied %":o,"Impact Level":t.toUpperCase()}}),n=XLSX.utils.json_to_sheet(e),r=XLSX.utils.book_new();XLSX.utils.book_append_sheet(r,n,"FedRAMP"),XLSX.writeFile(r,"s4_fedramp_"+t+"_"+new Date().toISOString().split("T")[0]+".xlsx"),L("FedRAMP mapping exported")}function pi(){var t=document.getElementById("diffVersionA"),e=document.getElementById("diffVersionB");if(!(!t||!e)){var n=y?y.filter(function(i){return i.source==="Submissions & PTD"||i.type==="submission"}):[];if(n.length<2){var r=[{label:"VRSL v1.0 ‚Äî 2024-01-15",id:"v1"},{label:"VRSL v1.1 ‚Äî 2024-03-22",id:"v2"},{label:"VRSL v2.0 ‚Äî 2024-06-10",id:"v3"},{label:"PTD v1.0 ‚Äî 2024-02-01",id:"v4"},{label:"PTD v1.1 ‚Äî 2024-05-18",id:"v5"}];t.innerHTML='<option value="">Version A (Base)</option>'+r.map(function(i){return'<option value="'+i.id+'">'+i.label+"</option>"}).join(""),e.innerHTML='<option value="">Version B (New)</option>'+r.map(function(i){return'<option value="'+i.id+'">'+i.label+"</option>"}).join("")}else{var a=n.map(function(i,o){return'<option value="sub'+o+'">'+(i.label||"Submission")+" ‚Äî "+new Date(i.timestamp).toLocaleDateString()+"</option>"}).join("");t.innerHTML='<option value="">Version A (Base)</option>'+a,e.innerHTML='<option value="">Version B (New)</option>'+a}}}function gi(){var t=document.getElementById("diffVersionA")?.value,e=document.getElementById("diffVersionB")?.value,n=document.getElementById("diffOutput");if(n){if(!t||!e){n.innerHTML='<div style="color:#c9a84c;padding:12px">Please select both Version A and Version B to compare.</div>';return}if(t===e){n.innerHTML='<div style="color:var(--steel);padding:12px">Same version selected. No differences.</div>';return}var r=[{field:"NSN 5985-01-678-4321",type:"modified",old:"Qty: 12, Unit Price: $4,230.00",new_val:"Qty: 14, Unit Price: $4,580.00"},{field:"NSN 2840-01-480-6710",type:"added",old:"",new_val:"LM2500 Turbine Blade ‚Äî Qty: 6, Unit Price: $18,750.00"},{field:"NSN 1005-01-398-7722",type:"removed",old:"Mk 45 Barrel Liner ‚Äî Discontinued",new_val:""},{field:"NSN 6110-01-557-2288",type:"modified",old:"Lead Time: 90 days",new_val:"Lead Time: 145 days"},{field:"NSN 5895-01-645-9012",type:"modified",old:"Source: Mercury Systems",new_val:"Source: Mercury Systems (GIDEP Alert)"},{field:"Header ‚Äî Submitter",type:"modified",old:"Huntington Ingalls Industries",new_val:"HII Mission Technologies"},{field:"NSN 9515-01-320-4567",type:"modified",old:"Spec: MIL-S-16216K",new_val:"Spec: MIL-S-16216L (Rev)"},{field:"NSN 1440-01-555-8790",type:"added",old:"",new_val:"MK 41 VLS Canister Seal ‚Äî Qty: 24, Unit Price: $890.00"}],a='<div style="margin-bottom:8px;color:var(--steel);font-size:0.78rem"><strong>Comparing:</strong> '+(document.getElementById("diffVersionA")?.selectedOptions[0]?.text||t)+" ‚Üí "+(document.getElementById("diffVersionB")?.selectedOptions[0]?.text||e)+"</div>";a+='<div style="display:flex;gap:12px;margin-bottom:10px"><span style="color:#00cc88;font-size:0.78rem"><i class="fas fa-plus-circle"></i> '+r.filter(function(i){return i.type==="added"}).length+' Added</span><span style="color:#ff6b6b;font-size:0.78rem"><i class="fas fa-minus-circle"></i> '+r.filter(function(i){return i.type==="removed"}).length+' Removed</span><span style="color:#c9a84c;font-size:0.78rem"><i class="fas fa-pen-to-square"></i> '+r.filter(function(i){return i.type==="modified"}).length+" Modified</span></div>",r.forEach(function(i){var o=i.type==="added"?"#00cc88":i.type==="removed"?"#ff6b6b":"#c9a84c",c=i.type==="added"?"+":i.type==="removed"?"-":"~";a+='<div style="margin-bottom:4px;padding:6px 8px;background:'+o+"08;border-left:3px solid "+o+';border-radius:0 3px 3px 0">',a+='<div style="color:'+o+';font-weight:600">'+c+" "+i.field+"</div>",i.old&&(a+='<div style="color:#ff6b6b;opacity:0.8">  - '+i.old+"</div>"),i.new_val&&(a+='<div style="color:#00cc88;opacity:0.8">  + '+i.new_val+"</div>"),a+="</div>"}),n.innerHTML=a,L("Version diff complete ‚Äî "+r.length+" changes found")}}function Lt(){var t=document.getElementById("execSummaryOutput");if(t){var e=y?y.length:0,n=y?y.filter(function(m){return m.encrypted}).length:0,r=I?I.length:0,a=I?I.filter(function(m){return m.done}).length:0,i=U.filter(function(m){return m.status!=="Closed"}).length,o=F.length,c=document.getElementById("complianceScore")?.textContent||"N/A",l=document.getElementById("complianceGrade")?.textContent||"N/A",s=new Date,d=Math.round((e*850+a*1200+o*400)/1e3),u='<div style="border:1px solid rgba(0,170,255,0.2);border-radius:3px;overflow:hidden">';u+='<div style="background:rgba(0,170,255,0.08);padding:16px;border-bottom:1px solid rgba(0,170,255,0.15)">',u+='<div style="display:flex;justify-content:space-between;align-items:center"><strong style="color:#fff;font-size:1.05rem"><i class="fas fa-file-lines" style="color:#00aaff;margin-right:8px"></i>S4 Ledger ‚Äî Executive Summary</strong><span style="color:var(--steel);font-size:0.78rem">'+s.toLocaleDateString()+"</span></div></div>",u+='<div style="padding:16px">',u+='<div style="margin-bottom:16px"><strong style="color:#00aaff;font-size:0.88rem">1. Compliance Posture</strong><div style="margin-top:6px">Overall compliance score: <strong style="color:#fff">'+c+" (Grade "+l+")</strong>. ",u+=e>0?e+" records blockchain-anchored with "+n+" encrypted.":"No records anchored yet ‚Äî initial baseline pending.",u+=i>0?' <span style="color:#c9a84c">'+i+" open POA&M items require attention.</span>":" All POA&M items resolved.",u+="</div></div>",u+='<div style="margin-bottom:16px"><strong style="color:#00aaff;font-size:0.88rem">2. Action Item Status</strong><div style="margin-top:6px">'+r+' total action items tracked. <strong style="color:#fff">'+a+" completed</strong>"+(r>0?" ("+Math.round(a/r*100)+"% completion rate)":"")+".",r-a>0&&(u+=' <span style="color:#c9a84c">'+(r-a)+" items still open.</span>"),u+="</div></div>",u+='<div style="margin-bottom:16px"><strong style="color:#00aaff;font-size:0.88rem">3. Evidence & Audit Readiness</strong><div style="margin-top:6px">'+o+" evidence artifacts attached to compliance controls. ",u+=o>=5?'<span style="color:var(--green)">Audit package is well-documented.</span>':'<span style="color:#c9a84c">Additional evidence artifacts recommended for audit readiness.</span>',u+="</div></div>",u+='<div style="margin-bottom:16px"><strong style="color:#00aaff;font-size:0.88rem">4. Financial Impact</strong><div style="margin-top:6px">Estimated cost avoidance: <strong style="color:#fff">$'+d+"K</strong> through automated compliance tracking, blockchain-anchored records, and reduced audit preparation labor. Traditional manual processes would require 3-5x more FTE hours.</div></div>",u+='<div style="padding:10px;background:rgba(0,170,255,0.06);border-radius:3px;border-left:3px solid #00aaff"><strong style="color:#00aaff">Recommendation:</strong> ',e<5?u+="Increase record anchoring activity to establish a stronger compliance baseline.":i>3?u+="Prioritize closing open POA&M items to reduce risk exposure.":o<3?u+="Attach additional evidence artifacts to strengthen audit readiness.":u+="Maintain current trajectory. Consider expanding to additional programs and scheduling recurring compliance checks.",u+="</div>",u+="</div></div>",t.innerHTML=u,window._lastExecSummary={vault:e,actions:r,done:a,compScore:c,grade:l,poamOpen:i,evCount:o,savings:d,date:s.toISOString()},L("Executive summary generated")}}function fi(){window._lastExecSummary||Lt();var t=window._lastExecSummary||{},e=`S4 LEDGER ‚Äî EXECUTIVE SUMMARY
Generated: `+(t.date||new Date().toISOString())+`

`;e+=`1. COMPLIANCE POSTURE
Overall Score: `+(t.compScore||"N/A")+" (Grade "+(t.grade||"N/A")+`)
Records Anchored: `+(t.vault||0)+`
POA&M Open: `+(t.poamOpen||0)+`

`,e+=`2. ACTION ITEMS
Total: `+(t.actions||0)+" | Completed: "+(t.done||0)+" | Open: "+((t.actions||0)-(t.done||0))+`

`,e+="3. EVIDENCE ARTIFACTS: "+(t.evCount||0)+`

`,e+="4. ESTIMATED COST AVOIDANCE: $"+(t.savings||0)+`K
`;var n=new Blob([e],{type:"text/plain"}),r=document.createElement("a");r.href=URL.createObjectURL(n),r.download="S4_Executive_Summary_"+new Date().toISOString().split("T")[0]+".txt",r.click()}var ne=JSON.parse(localStorage.getItem("s4_sched_reports")||"[]");function yi(){var t=document.getElementById("schedReportType")?.value||"full_audit",e=document.getElementById("schedReportFreq")?.value||"weekly",n={full_audit:"Full Audit",compliance:"Compliance",supply_chain:"Supply Chain",executive:"Executive Summary"};ne.push({id:"SR-"+String(Date.now()).slice(-6),type:t,label:n[t]||t,frequency:e,created:new Date().toISOString(),lastRun:null,nextRun:hi(e),active:!0}),localStorage.setItem("s4_sched_reports",JSON.stringify(ne)),tt(),L("Scheduled "+e+" "+(n[t]||t)+" report")}function hi(t){var e=new Date;return t==="daily"?e.setDate(e.getDate()+1):t==="weekly"?e.setDate(e.getDate()+7):t==="monthly"?e.setMonth(e.getMonth()+1):t==="quarterly"&&e.setMonth(e.getMonth()+3),e.toISOString().split("T")[0]}function Si(t){ne.splice(t,1),localStorage.setItem("s4_sched_reports",JSON.stringify(ne)),tt()}function bi(t){ne[t].active=!ne[t].active,localStorage.setItem("s4_sched_reports",JSON.stringify(ne)),tt()}function tt(){var t=document.getElementById("schedReportList"),e=document.getElementById("schedReportEmpty"),n=document.getElementById("schedReportCount");if(n&&(n.textContent=ne.length),!!t){if(ne.length===0){t.innerHTML="",e&&(e.style.display="block");return}e&&(e.style.display="none"),t.innerHTML=ne.map(function(r,a){var i=r.active?"#00aaff":"var(--steel)";return'<div style="display:flex;align-items:center;gap:10px;padding:8px;margin-bottom:4px;background:rgba(255,255,255,0.02);border-radius:3px;border-left:3px solid '+i+'"><i class="fas fa-calendar-check" style="color:'+i+'"></i><div style="flex:1"><div style="color:#fff;font-size:0.82rem">'+r.label+' <span style="color:var(--steel);font-size:0.72rem">('+r.frequency+')</span></div><div style="font-size:0.72rem;color:var(--steel)">Next: '+r.nextRun+'</div></div><button onclick="toggleScheduledReport('+a+')" style="background:none;border:none;color:'+(r.active?"#00aaff":"var(--steel)")+';cursor:pointer;font-size:0.78rem" title="Toggle"><i class="fas fa-'+(r.active?"toggle-on":"toggle-off")+'"></i></button><button onclick="removeScheduledReport('+a+')" style="background:none;border:none;color:#ff6b6b;cursor:pointer;font-size:0.78rem" title="Delete"><i class="fas fa-trash"></i></button></div>'}).join("")}}function vi(){var t=document.getElementById("fleetCompareOutput");if(t){var e=[{name:"DDG-51 Flight III",compliance:87,readiness:82,risk:"Moderate",actions:14,resolved:11,dmsms:3,savings:"$2.1M"},{name:"CVN-78 Ford Class",compliance:91,readiness:78,risk:"Low",actions:22,resolved:19,dmsms:7,savings:"$4.8M"},{name:"F-35 JSF",compliance:79,readiness:85,risk:"High",actions:31,resolved:20,dmsms:12,savings:"$8.2M"},{name:"SSN-774 Virginia",compliance:93,readiness:90,risk:"Low",actions:8,resolved:7,dmsms:2,savings:"$1.6M"},{name:"LCS Freedom",compliance:72,readiness:68,risk:"High",actions:18,resolved:9,dmsms:9,savings:"$1.2M"},{name:"CH-53K King Stallion",compliance:84,readiness:76,risk:"Moderate",actions:16,resolved:12,dmsms:5,savings:"$3.1M"}];y&&y.length;var n=I?I.length:0,r=I?I.filter(function(i){return i.done}).length:0;e[0].compliance=parseInt(document.getElementById("complianceScore")?.textContent)||e[0].compliance,e[0].actions=Math.max(n,e[0].actions),e[0].resolved=Math.max(r,e[0].resolved);var a='<table style="width:100%;border-collapse:collapse;font-size:0.78rem">';a+='<thead><tr style="background:rgba(0,170,255,0.08);color:#00aaff">',a+='<th style="padding:8px;text-align:left">Program</th><th style="padding:8px;text-align:center">Compliance</th><th style="padding:8px;text-align:center">Readiness</th><th style="padding:8px;text-align:center">Risk</th><th style="padding:8px;text-align:center">Actions</th><th style="padding:8px;text-align:center">DMSMS</th><th style="padding:8px;text-align:right">Savings</th>',a+="</tr></thead><tbody>",e.forEach(function(i){var o=i.compliance>=85?"#00cc88":i.compliance>=70?"#c9a84c":"#ff6b6b",c=i.readiness>=80?"#00cc88":i.readiness>=60?"#c9a84c":"#ff6b6b",l=i.risk==="Low"?"#00cc88":i.risk==="Moderate"?"#c9a84c":"#ff6b6b";a+='<tr style="border-bottom:1px solid rgba(255,255,255,0.04)">',a+='<td style="padding:8px;color:#fff;font-weight:600">'+i.name+"</td>",a+='<td style="padding:8px;text-align:center;color:'+o+';font-weight:600">'+i.compliance+"%</td>",a+='<td style="padding:8px;text-align:center;color:'+c+'">'+i.readiness+"%</td>",a+='<td style="padding:8px;text-align:center"><span style="padding:2px 8px;border-radius:3px;background:'+l+"22;color:"+l+';font-size:0.72rem;font-weight:600">'+i.risk+"</span></td>",a+='<td style="padding:8px;text-align:center;color:var(--steel)">'+i.resolved+"/"+i.actions+"</td>",a+='<td style="padding:8px;text-align:center;color:'+(i.dmsms>5?"#ff6b6b":"#c9a84c")+'">'+i.dmsms+" items</td>",a+='<td style="padding:8px;text-align:right;color:#00aaff;font-weight:600">'+i.savings+"</td>",a+="</tr>"}),a+="</tbody></table>",t.innerHTML=a,L("Fleet comparison generated ‚Äî "+e.length+" programs")}}function Ii(){var t=document.getElementById("heatMapOutput");if(t){var e=[{name:"Electronics / EW",suppliers:["Raytheon","L3Harris","Mercury Systems","Leonardo DRS"],risk:78},{name:"Propulsion",suppliers:["GE Aerospace","Pratt & Whitney","Rolls-Royce","Curtiss-Wright"],risk:62},{name:"Structural / Hull",suppliers:["Huntington Ingalls","General Dynamics NASSCO","Austal USA"],risk:45},{name:"Weapons Systems",suppliers:["Lockheed Martin","Northrop Grumman","BAE Systems"],risk:71},{name:"Software / C4ISR",suppliers:["Palantir","Leidos","SAIC","Raytheon IIS"],risk:55},{name:"Rare Earth / Materials",suppliers:["Various China-dependent","MP Materials","Lynas Corp"],risk:92},{name:"Microelectronics",suppliers:["Intel","GlobalFoundries","TSMC (allied)","SkyWater"],risk:85},{name:"Bearings / Mechanical",suppliers:["Timken","SKF","Moog Inc","TransDigm"],risk:38}],n='<div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:8px">';e.forEach(function(r){var a=r.risk>=80?"#ff3333":r.risk>=60?"#ff6b6b":r.risk>=40?"#c9a84c":"#00cc88",i=r.risk>=80?"rgba(255,51,51,0.12)":r.risk>=60?"rgba(255,107,107,0.08)":r.risk>=40?"rgba(201,168,76,0.06)":"rgba(0,204,136,0.06)",o=r.risk>=80?"CRITICAL":r.risk>=60?"HIGH":r.risk>=40?"MODERATE":"LOW";n+='<div style="background:'+i+";border:1px solid "+a+'33;border-radius:3px;padding:12px;text-align:center">',n+='<div style="font-size:1.4rem;font-weight:800;color:'+a+'">'+r.risk+"</div>",n+='<div style="color:#fff;font-size:0.8rem;font-weight:600;margin:4px 0">'+r.name+"</div>",n+='<div style="font-size:0.68rem;color:'+a+';font-weight:700;margin-bottom:6px">'+o+"</div>",n+='<div style="font-size:0.68rem;color:var(--steel);line-height:1.4">'+r.suppliers.slice(0,3).join(", ")+"</div>",n+="</div>"}),n+="</div>",n+='<div style="margin-top:10px;display:flex;gap:12px;font-size:0.72rem;color:var(--steel)"><span><span style="display:inline-block;width:10px;height:10px;border-radius:2px;background:#ff3333;margin-right:4px"></span>Critical (80+)</span><span><span style="display:inline-block;width:10px;height:10px;border-radius:2px;background:#ff6b6b;margin-right:4px"></span>High (60-79)</span><span><span style="display:inline-block;width:10px;height:10px;border-radius:2px;background:#c9a84c;margin-right:4px"></span>Moderate (40-59)</span><span><span style="display:inline-block;width:10px;height:10px;border-radius:2px;background:#00cc88;margin-right:4px"></span>Low (&lt;40)</span></div>',t.innerHTML=n,L("Risk heat map generated ‚Äî "+e.length+" categories analyzed")}}function Ai(){var t=document.getElementById("remediationOutput");if(t){var e=[{risk:"Single-source SPY-6 T/R Module",severity:"Critical",steps:["Identify qualified alternate: Northrop Grumman AN/SPQ-9B compatible module","Request DMSMS waiver for 18-month bridge buy from current source","Issue RFI to 3 qualified suppliers for form-fit-function replacement","Establish safety stock: 12-month buffer at $4.2M estimated cost","Target timeline: 24 months to second-source qualification"],cost:"$4.2M bridge + $1.8M qualification",timeline:"24 months"},{risk:"GIDEP Alert ‚Äî Mercury Systems processor",severity:"High",steps:["Review GIDEP alert details and affected lot numbers","Quarantine affected inventory (est. 14 units)","Contact Mercury Systems for corrective action plan","Evaluate alternate: Curtiss-Wright COTS processor board","Submit ECP if redesign required"],cost:"$680K remediation",timeline:"6 months"},{risk:"DLA lead time spike ‚Äî HY-80 steel plate",severity:"High",steps:["Confirm lead time with DLA contracting officer","Explore commercial equivalents (ASTM A543 Type B)","Pre-order 18-month supply at current pricing","Coordinate with NAVSEA for material substitution approval","Monitor DLA FLIS for lead time normalization"],cost:"$1.1M pre-buy",timeline:"3 months"},{risk:"Foreign ownership change ‚Äî Elbit Systems",severity:"Moderate",steps:["Review CFIUS notification requirements","Verify no ITAR/EAR data exposure","Assess technology transfer risk per NISPOM","Identify domestic alternates if divestiture required","Monitor news and SEC filings quarterly"],cost:"$50K due diligence",timeline:"Ongoing"}],n=e.map(function(r){var a=r.severity==="Critical"?"#ff3333":r.severity==="High"?"#ff6b6b":"#c9a84c";return'<div style="margin-bottom:10px;border:1px solid '+a+'33;border-radius:3px;overflow:hidden"><div style="padding:10px 14px;background:'+a+'08;display:flex;align-items:center;gap:8px"><span style="background:'+a+"22;color:"+a+';padding:2px 8px;border-radius:3px;font-size:0.7rem;font-weight:700">'+r.severity+'</span><strong style="color:#fff;font-size:0.82rem">'+r.risk+'</strong><span style="margin-left:auto;color:var(--steel);font-size:0.72rem">'+r.timeline+" | "+r.cost+'</span></div><div style="padding:10px 14px">'+r.steps.map(function(i,o){return'<div style="padding:3px 0;color:var(--steel);font-size:0.78rem"><span style="color:#00aaff;margin-right:6px;font-weight:700">'+(o+1)+".</span>"+i+"</div>"}).join("")+"</div></div>"}).join("");t.innerHTML=n,L("AI generated "+e.length+" remediation plans")}}function Ci(){var t=document.getElementById("anomalyOutput");if(t){var e=y?y.length:0;I&&I.length;var n=[];if(y){var r={};y.forEach(function(u){r[u.source]=(r[u.source]||0)+1});var a=Object.keys(r).sort(function(u,m){return r[m]-r[u]})[0];a&&r[a]>e*.6&&e>3&&n.push({type:"Distribution Skew",severity:"Low",desc:'Over 60% of anchored records come from "'+a+'". Consider diversifying tool usage for balanced compliance coverage.',icon:"fa-chart-pie",color:"#c9a84c"});var i=Date.now(),o=y.filter(function(u){return i-new Date(u.timestamp).getTime()<36e5}).length;o>10&&n.push({type:"Burst Activity",severity:"Medium",desc:o+" records anchored in the last hour. Unusual volume may indicate automated or duplicate submissions.",icon:"fa-bolt",color:"#ff6b6b"});var c=y.filter(function(u){return!u.hash||u.hash.length<10}).length;c>0&&n.push({type:"Integrity Gap",severity:"High",desc:c+" vault record(s) have missing or incomplete hashes. Re-anchor these records for full integrity verification.",icon:"fa-shield-halved",color:"#ff3333"})}if(I){var l=I.filter(function(u){return!u.done&&u.due&&new Date(u.due)<new Date}).length;l>0&&n.push({type:"Overdue Actions",severity:"Medium",desc:l+" action item(s) are past their due date. Overdue items degrade compliance scores and increase audit risk.",icon:"fa-clock",color:"#ff6b6b"})}var s=U.filter(function(u){return u.status!=="Closed"&&u.due&&new Date(u.due)<new Date}).length;s>0&&n.push({type:"POA&M Overdue",severity:"High",desc:s+" POA&M milestone(s) overdue. This is a compliance finding that will be flagged by C3PAO assessors.",icon:"fa-triangle-exclamation",color:"#ff3333"}),n.push({type:"Encryption Audit",severity:e>0?"Info":"Medium",desc:"Checked "+e+" vault records for encryption status. "+(y?y.filter(function(u){return u.encrypted}).length:0)+" encrypted, "+(y?y.filter(function(u){return!u.encrypted}).length:0)+" unencrypted.",icon:"fa-lock",color:"#00aaff"}),n.push({type:"Hash Integrity",severity:"Info",desc:"All "+e+" vault records have valid SHA-256 anchoring hashes. No tampering detected.",icon:"fa-fingerprint",color:"#00cc88"});var d='<div style="margin-bottom:8px;display:flex;gap:10px;font-size:0.78rem"><span style="color:#ff3333"><i class="fas fa-circle"></i> '+n.filter(function(u){return u.severity==="High"||u.severity==="Critical"}).length+' High</span><span style="color:#ff6b6b"><i class="fas fa-circle"></i> '+n.filter(function(u){return u.severity==="Medium"}).length+' Medium</span><span style="color:#00aaff"><i class="fas fa-circle"></i> '+n.filter(function(u){return u.severity==="Low"||u.severity==="Info"}).length+" Info</span></div>";d+=n.map(function(u){return'<div style="display:flex;gap:10px;padding:8px;margin-bottom:4px;background:'+u.color+"08;border-left:3px solid "+u.color+';border-radius:0 3px 3px 0"><i class="fas '+u.icon+'" style="color:'+u.color+';font-size:1rem;margin-top:2px"></i><div><div style="color:#fff;font-size:0.82rem;font-weight:600">'+u.type+' <span style="color:'+u.color+';font-size:0.7rem;font-weight:400">'+u.severity+'</span></div><div style="color:var(--steel);font-size:0.78rem;margin-top:2px">'+u.desc+"</div></div></div>"}).join(""),t.innerHTML=d,L("Anomaly scan complete ‚Äî "+n.length+" findings")}}function Mi(){var t=document.getElementById("budgetForecastOutput");if(t){var e=parseInt(document.getElementById("budgetForecastYears")?.value)||5,n=y?y.length:0,r=2.4,a=.032,i=.045,o=.12,c='<table style="width:100%;border-collapse:collapse;font-size:0.78rem">';c+='<thead><tr style="background:rgba(201,168,76,0.08);color:#c9a84c">',c+='<th style="padding:8px;text-align:left">Year</th><th style="padding:8px;text-align:right">Procurement</th><th style="padding:8px;text-align:right">Sustainment</th><th style="padding:8px;text-align:right">DMSMS/Obsol.</th><th style="padding:8px;text-align:right">S4 Savings</th><th style="padding:8px;text-align:right;color:#fff">Net Forecast</th>',c+="</tr></thead><tbody>";for(var l=0,s=0,d=1;d<=e;d++){var u=r*Math.pow(1+a,d),m=u*.35,p=u*.08*Math.pow(1+i,d),f=u+m+p,g=f*o*(1+n*.005),b=f-g;l+=b,s+=g,c+='<tr style="border-bottom:1px solid rgba(255,255,255,0.04)">',c+='<td style="padding:6px 8px;color:#fff;font-weight:600">FY'+(new Date().getFullYear()+d).toString().slice(-2)+"</td>",c+='<td style="padding:6px 8px;text-align:right;color:var(--steel)">$'+u.toFixed(1)+"M</td>",c+='<td style="padding:6px 8px;text-align:right;color:var(--steel)">$'+m.toFixed(1)+"M</td>",c+='<td style="padding:6px 8px;text-align:right;color:#ff6b6b">$'+p.toFixed(1)+"M</td>",c+='<td style="padding:6px 8px;text-align:right;color:#00cc88">-$'+g.toFixed(1)+"M</td>",c+='<td style="padding:6px 8px;text-align:right;color:#fff;font-weight:600">$'+b.toFixed(1)+"M</td>",c+="</tr>"}c+='<tr style="border-top:2px solid rgba(201,168,76,0.3);font-weight:700">',c+='<td style="padding:8px;color:#c9a84c">'+e+'-Year Total</td><td colspan="3"></td>',c+='<td style="padding:8px;text-align:right;color:#00cc88">-$'+s.toFixed(1)+"M</td>",c+='<td style="padding:8px;text-align:right;color:#fff;font-size:0.88rem">$'+l.toFixed(1)+"M</td>",c+="</tr></tbody></table>",c+='<div style="margin-top:8px;font-size:0.72rem;color:var(--steel)">Forecast assumes '+(a*100).toFixed(1)+"% annual inflation, "+(i*100).toFixed(1)+"% obsolescence growth, and "+o*100+"% S4 automation savings. Adjust inputs in Lifecycle Cost Calculator for program-specific projections.</div>",t.innerHTML=c,L(e+"-year budget forecast generated ‚Äî $"+s.toFixed(1)+"M in projected savings")}}function Di(t){var e=t.files&&t.files[0];if(e){var n=new FileReader;n.onload=function(){var r=n.result;wn(r,e.name)},n.readAsText(e),t.value=""}}function wi(){var t=`CDRL A003 ‚Äî Vendor Recommended Spares List
Program: DDG-51 Flight III
Date: 2024-06-15
Contract: N00024-22-C-6318
CAGE: 27014 (Huntington Ingalls Industries)

Line 001: NSN 5985-01-678-4321, SPY-6 T/R Module, Qty 12, Unit Price $4,230.00
Line 002: NSN 2840-01-480-6710, LM2500 Turbine Blade, Qty 6, Unit Price $18,750.00
Line 003: NSN 1440-01-555-8790, MK 41 VLS Rail, Qty 24, Unit Price $890.00
Line 004: NSN 6110-01-557-2288, CIWS Phalanx Motor, Qty 3, Unit Price $42,500.00

Total Estimated Cost: $376,890.00
Submission prepared per GEIA-STD-0007 (formerly MIL-STD-1388-2B), DI-ALSS-81529A`;wn(t,"CDRL_A003_DDG51_VRSL.txt")}function wn(t,e){var n=document.getElementById("docAIOutput");if(n){var r=t.match(/\d{4}-\d{2}-\d{3}-\d{4}/g)||[],a=t.match(/CAGE[:\s]+(\d{5})/gi)||[],i=t.match(/\$[\d,]+\.?\d*/g)||[],o=t.match(/\d{4}-\d{2}-\d{2}/g)||[],c=t.match(/[A-Z]\d{5}-\d{2}-[A-Z]-\d{4}/g)||[],l=t.match(/MIL-[A-Z]+-\d+[A-Z]*/gi)||[],s=t.match(/DI-[A-Z]+-\d+[A-Z]*/gi)||[],d='<div style="border:1px solid rgba(0,170,255,0.2);border-radius:3px;overflow:hidden">';d+='<div style="padding:10px 14px;background:rgba(0,170,255,0.08);border-bottom:1px solid rgba(0,170,255,0.15)"><strong style="color:#fff"><i class="fas fa-file-invoice" style="color:#00aaff;margin-right:6px"></i>'+e+'</strong> <span style="color:var(--steel);font-size:0.72rem">('+t.length+" chars)</span></div>",d+='<div style="padding:12px 14px">';var u=[{label:"NSNs Detected",items:r,color:"#00aaff",icon:"fa-barcode"},{label:"CAGE Codes",items:a,color:"#c9a84c",icon:"fa-building"},{label:"Dollar Amounts",items:i,color:"#00cc88",icon:"fa-dollar-sign"},{label:"Dates",items:o,color:"#00aaff",icon:"fa-calendar"},{label:"Contract Numbers",items:c,color:"#ff6b6b",icon:"fa-file-contract"},{label:"MIL-STD References",items:l,color:"#c9a84c",icon:"fa-shield-halved"},{label:"DI Codes",items:s,color:"#00aaff",icon:"fa-hashtag"}];u.forEach(function(p){p.items.length!==0&&(d+='<div style="margin-bottom:8px"><div style="color:'+p.color+';font-size:0.78rem;font-weight:600;margin-bottom:4px"><i class="fas '+p.icon+'" style="margin-right:4px"></i>'+p.label+" ("+p.items.length+")</div>",d+='<div style="display:flex;flex-wrap:wrap;gap:4px">'+p.items.map(function(f){return'<span style="background:'+p.color+"11;color:"+p.color+';padding:2px 8px;border-radius:3px;font-size:0.72rem;font-family:monospace">'+f+"</span>"}).join("")+"</div></div>")});var m=u.reduce(function(p,f){return p+f.items.length},0);d+='<div style="margin-top:10px;padding:8px;background:rgba(0,170,255,0.06);border-radius:3px;font-size:0.78rem;color:var(--steel)"><strong style="color:#00aaff">'+m+" data points</strong> extracted from document. In production, extracted data auto-populates CDRL tracking, procurement forms, and compliance evidence.</div>",d+="</div></div>",n.innerHTML=d,L("AI extracted "+m+" data points from "+e)}}var ut=[{id:"TPL-001",name:"Corrective Action Request (CAR)",category:"contract",icon:"fa-file-circle-exclamation",desc:"Standard CAR form for documenting nonconformances, root cause analysis, and corrective actions per AS9100/ISO 9001.",fields:["Nonconformance Description","Root Cause","Corrective Action","Prevention Plan","Due Date","Responsible Party"]},{id:"TPL-002",name:"Engineering Change Proposal (ECP)",category:"engineering",icon:"fa-file-pen",desc:"ECP template per MIL-STD-480B for proposing design changes to baselined configurations.",fields:["Change Description","Affected Documents","Cost Impact","Schedule Impact","Risk Assessment","Approval Authority"]},{id:"TPL-003",name:"CDRL Status Tracker",category:"contract",icon:"fa-file-circle-check",desc:"Contract Data Requirements List tracker for monitoring deliverable status across all CDRL line items.",fields:["CDRL Number","DI Number","Title","Due Date","Status","Submission Date","Government Action"]},{id:"TPL-004",name:"Statement of Work (SOW)",category:"contract",icon:"fa-file-contract",desc:"SOW template with standard DoD sections for defining contractor work requirements.",fields:["Scope","Applicable Documents","Requirements","Deliverables","Period of Performance","Place of Performance"]},{id:"TPL-005",name:"Provisioning Parts List (PPL)",category:"logistics",icon:"fa-boxes-stacked",desc:"PPL template per GEIA-STD-0007 (formerly MIL-STD-1388-2B) for initial provisioning of repair parts and special tools.",fields:["NSN","Part Number","Nomenclature","Qty Per Assembly","Unit Price","SMR Code","Source Code"]},{id:"TPL-006",name:"DMSMS Case Report",category:"engineering",icon:"fa-triangle-exclamation",desc:"Obsolescence case report template for documenting DMSMS resolution actions per SD-22.",fields:["Part Affected","Impact Assessment","Resolution Options","Selected Resolution","Cost Estimate","Implementation Timeline"]},{id:"TPL-007",name:"Supply Support Request (SSR)",category:"logistics",icon:"fa-truck",desc:"SSR form for requesting supply support for new/modified equipment per NAVSUP procedures.",fields:["Equipment Description","Support Concept","Repair Level","Spares Requirements","Technical Data","Training Requirements"]},{id:"TPL-008",name:"POA&M Template",category:"compliance",icon:"fa-list-check",desc:"Plan of Action & Milestones template per NIST SP 800-53 for tracking security weaknesses and remediation.",fields:["Weakness ID","Description","NIST Control","Risk Level","Milestones","Due Date","Resources Required"]},{id:"TPL-009",name:"System Security Plan (SSP)",category:"compliance",icon:"fa-shield-halved",desc:"SSP outline template per NIST SP 800-171 for documenting CUI security implementation.",fields:["System Description","Authorization Boundary","Control Implementation","Roles & Responsibilities","Incident Response","Continuous Monitoring"]},{id:"TPL-010",name:"Test & Evaluation Plan",category:"engineering",icon:"fa-flask",desc:"T&E plan template for developmental and operational testing per DoD 5000 series.",fields:["Test Objectives","Test Design","Resources Required","Schedule","Data Collection","Success Criteria"]},{id:"TPL-011",name:"Failure Review Board (FRB) Report",category:"engineering",icon:"fa-bug",desc:"FRB report template for documenting failure investigations, root cause, and corrective actions.",fields:["Failure Description","Investigation Findings","Root Cause","Contributing Factors","Corrective Actions","Effectiveness Verification"]},{id:"TPL-012",name:"Warranty Claim Form",category:"contract",icon:"fa-certificate",desc:"Warranty claim template for exercising contractor warranty provisions per FAR/DFARS.",fields:["Contract Number","Item Description","Defect Description","Date Discovered","Warranty Period","Claim Amount"]},{id:"TPL-013",name:"Risk Assessment Matrix",category:"compliance",icon:"fa-table-cells",desc:"5x5 risk matrix template per DoD Risk Management Framework for likelihood/consequence scoring.",fields:["Risk Description","Likelihood","Consequence","Risk Score","Mitigation Plan","Residual Risk"]},{id:"TPL-014",name:"FRACAS Report",category:"engineering",icon:"fa-chart-bar",desc:"Failure Reporting, Analysis, and Corrective Action System report template per MIL-STD-2155.",fields:["Failure Mode","Affected System","Operating Hours","Environment","Analysis Method","Corrective Action"]},{id:"TPL-015",name:"ILS Certification Checklist",category:"logistics",icon:"fa-clipboard-check",desc:"ILS element verification checklist per GEIA-STD-0007 for certifying supportability requirements are met.",fields:["ILS Element","Requirement","Evidence","Status","Certifier","Date"]}],mt="all";function Ti(t){mt=t,Tn()}function Tn(){var t=document.getElementById("templateList");if(t){var e=mt==="all"?ut:ut.filter(function(n){return n.category===mt});t.innerHTML=e.map(function(n){var r=n.category==="contract"?"#c9a84c":n.category==="engineering"||n.category==="logistics"?"#00aaff":"#00cc88";return'<div style="display:flex;align-items:flex-start;gap:10px;padding:10px;margin-bottom:4px;background:rgba(255,255,255,0.02);border-radius:3px;border-left:3px solid '+r+'"><i class="fas '+n.icon+'" style="color:'+r+';font-size:1.1rem;margin-top:2px"></i><div style="flex:1"><div style="color:#fff;font-size:0.82rem;font-weight:600">'+n.name+' <span style="color:var(--steel);font-size:0.68rem;font-weight:400">'+n.id+'</span></div><div style="color:var(--steel);font-size:0.75rem;margin-top:2px">'+n.desc+'</div><div style="display:flex;flex-wrap:wrap;gap:4px;margin-top:6px">'+n.fields.map(function(a){return'<span style="background:'+r+"11;color:"+r+';padding:1px 6px;border-radius:3px;font-size:0.68rem">'+a+"</span>"}).join("")+`</div></div><button onclick="downloadTemplate('`+n.id+`')" style="background:none;border:1px solid `+r+"44;color:"+r+';cursor:pointer;border-radius:3px;padding:4px 10px;font-size:0.72rem;white-space:nowrap" title="Download"><i class="fas fa-download"></i> Get</button></div>'}).join("")}}function Ri(t){var e=ut.find(function(i){return i.id===t});if(e){var n=e.name.toUpperCase()+`
`+"=".repeat(e.name.length)+`
Template ID: `+e.id+`
Generated: `+new Date().toISOString()+`

`;e.fields.forEach(function(i,o){n+=o+1+". "+i+`:
   [Enter `+i.toLowerCase()+` here]

`}),n+=`
---
Generated by S4 Ledger Template Library
`;var r=new Blob([n],{type:"text/plain"}),a=document.createElement("a");a.href=URL.createObjectURL(r),a.download="S4_"+e.id+"_"+e.name.replace(/[^a-zA-Z0-9]/g,"_")+".txt",a.click(),L("Template downloaded: "+e.name)}}let ke={};function Et(t){const e=t.split("").reduce((c,l)=>c+l.charCodeAt(0),0),n=c=>(e*131+c*997)%1e4/1e4,r=["Raytheon","BAE Systems","L3Harris","Northrop Grumman","General Dynamics","Honeywell","Collins Aerospace","Curtiss-Wright","Leonardo DRS","Elbit Systems","Safran","Thales","Ultra Electronics","Mercury Systems","Ducommun","Moog Inc","Kaman Aerospace","TransDigm","Heico Corp","Crane Co","Lockheed Martin","Boeing Defense","Huntington Ingalls","Pratt & Whitney","GE Aerospace","Rolls-Royce Defence","BWX Technologies","Oshkosh Defense","Bell Textron","Palantir Technologies","Anduril Industries","Kongsberg Defence","Aerojet Rocketdyne","Leidos","SAIC","Textron Systems","Sierra Nevada Corp"],a=["Single-source dependency","GIDEP Alert #2024-","DLA lead time spike +","Financial distress signal","CAGE code inactive","Foreign ownership change","Counterfeit risk ‚Äî ERAI alert","Sub-tier supplier failure","Capacity constraint","Export control restriction","Cybersecurity incident","Material shortage ‚Äî rare earth","Quality escape ‚Äî nonconformance","Production line shutdown","Workforce reduction >25%"],i={ddg51:[{p:"SPY-6 T/R Module",n:"5985-01-678-4321"},{p:"MK 41 VLS Rail",n:"1440-01-555-8790"},{p:"AN/SQQ-89 Sonar Array",n:"5845-01-602-3344"},{p:"LM2500 Turbine Blade",n:"2840-01-480-6710"},{p:"SEWIP Block III Antenna",n:"5985-01-690-1234"},{p:"Mk 45 Gun Barrel Liner",n:"1005-01-398-7722"},{p:"CIWS Phalanx Motor",n:"6110-01-557-2288"},{p:"Hull Steel Plate HY-80",n:"9515-01-320-4567"},{p:"SLQ-32(V)6 Processor",n:"5895-01-645-9012"},{p:"AN/SPG-62 Illuminator",n:"5840-01-234-5678"},{p:"Pratt & Whitney FT4A6",n:"2815-01-345-6789"},{p:"SSDS Mk 2 Server",n:"7021-01-567-8901"},{p:"Mk 34 GWS Console",n:"5830-01-456-7890"},{p:"Fin Stabilizer Actuator",n:"2040-01-678-0123"},{p:"CBRN Detection Unit",n:"6665-01-789-0124"}],cvn78:[{p:"EMALS Linear Motor",n:"2040-01-699-1234"},{p:"AAG Turbine Assembly",n:"1680-01-700-5678"},{p:"A1B Reactor Pump",n:"2815-01-710-4321"},{p:"Dual Band Radar Panel",n:"5840-01-705-8765"},{p:"Flight Deck Coating",n:"8010-01-695-2345"},{p:"Weapons Elevator Motor",n:"3950-01-698-7890"},{p:"JPALS Antenna Unit",n:"5985-01-712-3456"},{p:"Ship Self-Defense Controller",n:"5895-01-708-6543"},{p:"Catapult Steam Valve",n:"4820-01-650-9012"},{p:"Fresh Water Distiller",n:"4610-01-680-4567"},{p:"Nuclear Shielding Panel",n:"9515-01-720-1234"},{p:"Aviation Fuel Pump",n:"4320-01-690-5678"}],f35:[{p:"F135 Fan Blade",n:"2840-01-680-1111"},{p:"AN/APG-81 AESA Module",n:"5840-01-690-2222"},{p:"HMDS II Helmet Display",n:"1240-01-695-3333"},{p:"EOTS Sensor Window",n:"5860-01-700-4444"},{p:"Structural Fuselage Panel",n:"1560-01-705-5555"},{p:"Ejection Seat Motor",n:"1680-01-710-6666"},{p:"DAS Sensor Unit",n:"5860-01-715-7777"},{p:"Fuel Bladder Cell",n:"1560-01-720-8888"},{p:"CNI Avionics Module",n:"5895-01-725-9999"},{p:"Landing Gear Actuator",n:"1620-01-730-1010"},{p:"Stealth Coating Material",n:"8010-01-735-1111"},{p:"Wing Fold Mechanism",n:"1560-01-740-1212"}],ch53k:[{p:"T408-GE-400 Engine",n:"2840-01-750-1234"},{p:"Main Rotor Head",n:"1615-01-755-5678"},{p:"Fly-by-Wire Actuator",n:"1680-01-760-9012"},{p:"Cargo Hook Assembly",n:"1670-01-765-3456"},{p:"Blade Fold System",n:"1615-01-770-7890"},{p:"APU TF50",n:"2835-01-775-2345"},{p:"Glass Cockpit Display",n:"1270-01-780-6789"},{p:"Infrared Suppressor",n:"1560-01-785-0123"},{p:"Sponson Fuel Cell",n:"1560-01-790-4567"},{p:"External Cargo Mirror",n:"1240-01-795-8901"}],ssn774:[{p:"S9G Reactor Component",n:"2815-01-800-1234"},{p:"Torpedo Tube Breech",n:"1095-01-805-5678"},{p:"BQQ-10 Sonar Array",n:"5845-01-810-9012"},{p:"Photonics Mast Assembly",n:"5820-01-815-3456"},{p:"Propulsor Blade",n:"2040-01-820-7890"},{p:"Atmosphere Monitor",n:"6665-01-825-2345"},{p:"Periscope Hoist Motor",n:"5820-01-830-6789"},{p:"Submarine Escape Trunk",n:"4220-01-835-0123"},{p:"Ballast Tank Valve",n:"4820-01-840-4567"},{p:"Hull Array Sensor",n:"5845-01-845-8901"}],m1a2:[{p:"AGT-1500 Turbine Engine",n:"2815-01-150-2345"},{p:"M256 120mm Smoothbore",n:"1015-01-380-7890"},{p:"CITV Commander Sight",n:"1240-01-410-1234"},{p:"Track Shoe Assembly T-158",n:"2530-01-245-5678"},{p:"Ballistic Computer Unit",n:"5895-01-520-9012"},{p:"Turret Traverse Motor",n:"6110-01-390-3456"},{p:"Fire Control Sensor",n:"5860-01-460-7890"},{p:"NBC Protection System",n:"6665-01-280-2345"},{p:"Hydrokinetic Transmission",n:"2520-01-310-6789"},{p:"FLIR Thermal Sight (GPSE)",n:"5855-01-425-0123"},{p:"Auxiliary Power Unit",n:"2835-01-350-4567"},{p:"Hull Armor Panel",n:"9515-01-290-8901"}],m2a3:[{p:"Cummins VTA-903T Engine",n:"2815-01-260-1234"},{p:"M242 25mm Chain Gun",n:"1010-01-320-5678"},{p:"ISU Integrated Sight Unit",n:"1240-01-450-9012"},{p:"TOW Missile Launcher",n:"1440-01-370-3456"},{p:"HMPT-500 Transmission",n:"2520-01-280-7890"},{p:"Track Assembly T-150",n:"2530-01-230-2345"},{p:"Ramp Hydraulic Actuator",n:"1680-01-340-6789"},{p:"FBCB2 Blue Force Tracker",n:"5895-01-510-0123"},{p:"Turret Drive Assembly",n:"6110-01-380-4567"},{p:"Smoke Generator System",n:"1365-01-290-8901"}],stryker:[{p:"Caterpillar C7 ACERT Engine",n:"2815-01-530-1234"},{p:"Allison 3200SP Transmission",n:"2520-01-540-5678"},{p:"Central Tire Inflation System",n:"2530-01-545-9012"},{p:"RWS Remote Weapon Station",n:"1005-01-550-3456"},{p:"DVH Hull Panel",n:"9515-01-555-7890"},{p:"LRAS3 Long Range Sight",n:"5855-01-560-2345"},{p:"Vehicle Intercom System",n:"5895-01-565-6789"},{p:"NBC Overpressure System",n:"6665-01-570-0123"},{p:"Run-Flat Tire Assembly",n:"2610-01-575-4567"},{p:"Power Distribution Unit",n:"6110-01-580-8901"}],himars:[{p:"GMLRS Rocket Pod",n:"1320-01-590-1234"},{p:"ATACMS Launcher Rail",n:"1410-01-595-5678"},{p:"Fire Control Computer",n:"5895-01-600-9012"},{p:"Cab Armor Kit",n:"9515-01-605-3456"},{p:"Launcher Hydraulic Cylinder",n:"1680-01-610-7890"},{p:"FMTV 5-ton Chassis",n:"2320-01-615-2345"},{p:"GPS/INS Navigation Unit",n:"5826-01-620-6789"},{p:"Communications Suite",n:"5895-01-625-0123"}],patriot:[{p:"AN/MPQ-65 Radar Antenna",n:"5840-01-630-1234"},{p:"PAC-3 MSE Interceptor",n:"1410-01-635-5678"},{p:"Engagement Control Station",n:"5895-01-640-9012"},{p:"Generator Set MEP-12A",n:"6115-01-645-3456"},{p:"Launching Station M903",n:"1440-01-650-7890"},{p:"IFF Interrogator",n:"5840-01-655-2345"},{p:"Fiber Optic Cable Set",n:"6145-01-660-6789"},{p:"Battery Command Post",n:"5895-01-665-0123"}],ah64e:[{p:"T700-GE-701D Engine",n:"2840-01-670-1234"},{p:"M230E1 30mm Chain Gun",n:"1010-01-675-5678"},{p:"AN/APG-78 Longbow Radar",n:"5840-01-680-9012"},{p:"TADS/PNVS Sight System",n:"1240-01-685-3456"},{p:"Hellfire Missile Launcher",n:"1440-01-690-7890"},{p:"Main Rotor Blade",n:"1615-01-695-2345"},{p:"Tail Rotor Drivetrain",n:"1615-01-700-6789"},{p:"CMWS Missile Warning",n:"5895-01-705-0123"},{p:"Flight Control Computer",n:"5895-01-710-4567"},{p:"Stub Wing Pylon",n:"1560-01-715-8901"}],f22a:[{p:"F119-PW-100 Engine",n:"2840-01-470-1234"},{p:"AN/APG-77 AESA Radar",n:"5840-01-475-5678"},{p:"Stealth Coating (RAM)",n:"8010-01-480-9012"},{p:"Canopy Assembly",n:"1560-01-485-3456"},{p:"Thrust Vector Nozzle",n:"2840-01-490-7890"},{p:"JHMCS Helmet Sight",n:"1240-01-495-2345"},{p:"ECS Air Cycle Machine",n:"1680-01-500-6789"},{p:"Weapons Bay Door Actuator",n:"1680-01-505-0123"},{p:"ALR-94 EW Receiver",n:"5895-01-510-4567"},{p:"Main Landing Gear",n:"1620-01-515-8901"}],f15ex:[{p:"F110-GE-129 Engine",n:"2840-01-520-1234"},{p:"AN/APG-82(V)1 AESA Radar",n:"5840-01-525-5678"},{p:"AMBER Mission Computer",n:"5895-01-530-9012"},{p:"CFT Conformal Fuel Tank",n:"1560-01-535-3456"},{p:"JHMCS II Helmet",n:"1240-01-540-7890"},{p:"Weapons Pylon Station",n:"1560-01-545-2345"},{p:"EPAWSS EW Suite",n:"5895-01-550-6789"},{p:"Canopy Transparency",n:"1560-01-555-0123"},{p:"Nose Gear Assembly",n:"1620-01-560-4567"},{p:"Fly-by-Wire Computer",n:"5895-01-565-8901"}],b21:[{p:"F135 Derivative Engine",n:"2840-01-850-1234"},{p:"Stealth Structure Panel",n:"1560-01-855-5678"},{p:"Mission Computer Suite",n:"5895-01-860-9012"},{p:"Weapons Bay Rotary Launcher",n:"1440-01-865-3456"},{p:"EO/IR Sensor Ball",n:"5860-01-870-7890"},{p:"Communications System",n:"5895-01-875-2345"},{p:"Landing Gear Strut",n:"1620-01-880-6789"},{p:"Inlet Duct Assembly",n:"1560-01-885-0123"}],b52h:[{p:"TF33-P-3/103 Turbofan",n:"2840-01-140-1234"},{p:"AN/ASQ-176 OAS Computer",n:"5895-01-145-5678"},{p:"CSRL Launcher Rack",n:"1440-01-150-9012"},{p:"Fuel Cell Bladder",n:"1560-01-155-3456"},{p:"AESA Radar Upgrade",n:"5840-01-160-7890"},{p:"Structural Wing Box",n:"1560-01-165-2345"},{p:"Alternator Assembly",n:"6110-01-170-6789"},{p:"Bomb Bay Door Actuator",n:"1680-01-175-0123"},{p:"Tail Gunner Radar (Deleted)",n:"5840-01-180-4567"},{p:"Crew Ejection Seat",n:"1680-01-185-8901"}],kc46a:[{p:"PW4062 Turbofan Engine",n:"2840-01-750-1234"},{p:"Centerline Drogue Unit",n:"1560-01-755-5678"},{p:"Remote Vision System",n:"5860-01-760-9012"},{p:"Boom Telescope Assembly",n:"1560-01-765-3456"},{p:"Wing Aerial Refueling Pod",n:"1560-01-770-7890"},{p:"Cargo Floor System",n:"1560-01-775-2345"},{p:"Fuel Transfer Pump",n:"4320-01-780-6789"},{p:"Flight Deck Display",n:"1270-01-785-0123"}],v22:[{p:"T406-AD-400 Engine",n:"2840-01-420-1234"},{p:"Proprotor Assembly",n:"1615-01-425-5678"},{p:"Swashplate Mechanism",n:"1615-01-430-9012"},{p:"Tilt Mechanism Gearbox",n:"1615-01-435-3456"},{p:"Flight Control Computer",n:"5895-01-440-7890"},{p:"Cargo Hook Assembly",n:"1670-01-445-2345"},{p:"IR Suppressor",n:"1560-01-450-6789"},{p:"Nacelle Conversion System",n:"1615-01-455-0123"},{p:"Glass Cockpit Display",n:"1270-01-460-4567"},{p:"External Fuel Tank",n:"1560-01-465-8901"}],acv:[{p:"Cummins C9.3 Engine",n:"2815-01-900-1234"},{p:"Marine Propulsion Water Jet",n:"2040-01-905-5678"},{p:"Hull Protection System",n:"9515-01-910-9012"},{p:"RWS Weapon Station",n:"1005-01-915-3456"},{p:"CBRN Protection",n:"6665-01-920-7890"},{p:"Troop Compartment Seats",n:"2540-01-925-2345"},{p:"Vision Block Assembly",n:"1240-01-930-6789"},{p:"Communication System",n:"5895-01-935-0123"}],wmsl750:[{p:"MT30 Gas Turbine",n:"2840-01-940-1234"},{p:"Mk 110 57mm Gun",n:"1015-01-945-5678"},{p:"TRS-4D Radar Array",n:"5840-01-950-9012"},{p:"MH-65E Helo Support",n:"1615-01-955-3456"},{p:"C4ISR Suite",n:"5895-01-960-7890"},{p:"Stern Launch Ramp",n:"1905-01-965-2345"},{p:"Hull Steel Plating",n:"9515-01-970-6789"},{p:"Diesel Generator Set",n:"6115-01-975-0123"}],gpsiii:[{p:"Navigation Payload",n:"5826-01-980-1234"},{p:"Solar Array Panel",n:"6130-01-985-5678"},{p:"Atomic Clock Rubidium",n:"6645-01-990-9012"},{p:"Hall-Effect Thruster",n:"2840-01-995-3456"},{p:"Star Tracker Assembly",n:"6650-01-998-7890"},{p:"Signal Security Module",n:"5895-01-997-2345"}],thaad:[{p:"AN/TPY-2 X-Band Radar",n:"5840-01-870-1234"},{p:"THAAD Interceptor",n:"1410-01-875-5678"},{p:"TFCC Fire Control",n:"5895-01-880-9012"},{p:"Launcher Assembly M1075",n:"1440-01-885-3456"},{p:"Generator MEP-PU-810",n:"6115-01-890-7890"},{p:"Battery Operations Center",n:"5895-01-895-2345"}]},o=(i[t]||i.ddg51).map((c,l)=>{const s=Math.round(n(l)*100),d=s>=85?"critical":s>=70?"high":s>=45?"medium":"low",u=d==="critical"?3:d==="high"?2:1;let m=[];for(let f=0;f<u;f++){let g=a[Math.floor(n(l*10+f)*a.length)];g.includes("#2024-")&&(g+=Math.floor(1e3+n(l+f)*9e3)),g.includes("spike +")&&(g+=Math.floor(20+n(l+f)*200)+"%"),m.push(g)}const p=d==="critical"?Math.floor(30+n(l)*60):d==="high"?Math.floor(60+n(l)*120):d==="medium"?Math.floor(90+n(l)*180):0;return{part:c.p,nsn:c.n,supplier:r[Math.floor(n(l*7)*r.length)],score:s,level:d,factors:m,etaImpact:p?"+"+p+" days":"None"}});return o.sort((c,l)=>l.score-c.score),o}function ve(){const t=document.getElementById("riskProgram")?.value||"ddg51",e=document.getElementById("riskThreshold")?.value||"all";let n=Et(t);ke={progKey:t,items:n},e==="critical"?n=n.filter(u=>u.level==="critical"):e==="high"?n=n.filter(u=>u.level==="critical"||u.level==="high"):e==="medium"&&(n=n.filter(u=>u.level!=="low"));const r=n.filter(u=>u.level==="critical").length,a=n.filter(u=>u.level==="high").length,i=n.filter(u=>u.level==="medium").length,o=n.filter(u=>u.level==="low").length;document.getElementById("riskCritical").textContent=r,document.getElementById("riskHigh").textContent=a,document.getElementById("riskMedium").textContent=i,document.getElementById("riskLow").textContent=o;const c={critical:"#ff3b30",high:"#ff9500",medium:"#ffcc00",low:"#34c759"};let l="";n.forEach(u=>{l+='<tr style="border-bottom:1px solid rgba(255,255,255,0.04);">',l+='<td style="padding:10px 8px;"><div style="color:#fff;font-weight:600;font-size:0.85rem;">'+u.part+'</div><div style="color:var(--text-muted);font-family:monospace;font-size:0.72rem;">'+u.nsn+"</div></td>",l+='<td style="padding:10px 8px;color:var(--steel);font-size:0.82rem;">'+u.supplier+"</td>",l+='<td style="padding:10px 8px;text-align:center;"><div style="display:inline-block;padding:4px 12px;border-radius:3px;font-weight:700;font-size:0.82rem;background:'+c[u.level]+"22;color:"+c[u.level]+";border:1px solid "+c[u.level]+'44;">'+u.score+"</div></td>",l+='<td style="padding:10px 8px;font-size:0.78rem;color:var(--steel);">'+u.factors.map(m=>'<div style="margin-bottom:2px;">‚Ä¢ '+m+"</div>").join("")+"</td>",l+='<td style="padding:10px 8px;text-align:center;font-weight:600;color:'+(u.etaImpact==="None"?"var(--text-muted)":"#ff9500")+';font-size:0.82rem;">'+u.etaImpact+"</td>",l+="</tr>"}),document.getElementById("riskTableBody").innerHTML=l||'<tr><td colspan="5" style="text-align:center;padding:30px;color:var(--text-muted)">No risks found at selected threshold.</td></tr>',L("Risk analysis loaded ‚Äî "+r+" critical, "+a+" high risk items");var s={};n.forEach(function(u){u.factors.forEach(function(m){var p=m.toLowerCase().indexOf("supply")>=0?"Supply Chain":m.toLowerCase().indexOf("cyber")>=0||m.toLowerCase().indexOf("data")>=0?"Cyber/Data":m.toLowerCase().indexOf("obsol")>=0||m.toLowerCase().indexOf("dmsms")>=0?"Obsolescence":m.toLowerCase().indexOf("cost")>=0||m.toLowerCase().indexOf("budget")>=0?"Financial":m.toLowerCase().indexOf("regulat")>=0||m.toLowerCase().indexOf("compli")>=0?"Regulatory":"Operational";s[p]||(s[p]=[]),s[p].push(u.score)})});var d=["Supply Chain","Cyber/Data","Obsolescence","Financial","Regulatory","Operational"];window._riskChartScores=d.map(function(u){var m=s[u];return m&&m.length>0?Math.round(m.reduce(function(p,f){return p+f},0)/m.length):Math.floor(Math.random()*30)+30}),typeof renderRiskCharts=="function"&&setTimeout(renderRiskCharts,200)}function Li(){const t=ke.items||Et("ddg51");let e=`Part,NSN,Supplier,Risk Score,Risk Level,Risk Factors,ETA Impact
`;t.forEach(a=>{e+='"'+a.part+'",'+a.nsn+',"'+a.supplier+'",'+a.score+","+a.level.toUpperCase()+',"'+a.factors.join("; ")+'",'+a.etaImpact+`
`});const n=new Blob([e],{type:"text/csv"}),r=document.createElement("a");r.href=URL.createObjectURL(n),r.download="Supply_Chain_Risk_"+(ke.progKey||"DDG51").toUpperCase()+".csv",r.click(),L("Risk report exported ‚Äî "+t.length+" items")}async function Ei(){const t=ke.progKey||"ddg51",e=ke.items||Et(t),n=e.filter(s=>s.level==="critical").length,r=e.filter(s=>s.level==="high").length,a="S4 Ledger Supply Chain Risk Report | Program: "+t.toUpperCase()+" | Total Parts: "+e.length+" | Critical: "+n+" | High: "+r+" | Generated: "+new Date().toISOString(),i=await H(a);ae(i,"Supply Chain Risk Report","CUI");const{txHash:o,explorerUrl:c,network:l}=await ie(i,"risk_report",a.substring(0,100));$({hash:i,txHash:o,type:"risk_report",label:"Supply Chain Risk Report ‚Äî "+t.toUpperCase(),branch:"JOINT",icon:'<i class="fas fa-exclamation-triangle"></i>',content:a.substring(0,100),encrypted:!1,timestamp:new Date().toISOString(),source:"AI Supply Chain Risk Engine",fee:.01,explorerUrl:c,network:l}),S.anchored++,S.slsFees=Math.round((S.slsFees+.01)*100)/100,S.types.add("risk_report"),V(),z(),re({hash:i,tx_hash:o,record_type:"risk_report",record_label:"Supply Chain Risk Report ‚Äî "+t.toUpperCase(),branch:"JOINT",timestamp:new Date().toISOString(),timestamp_display:new Date().toLocaleString(),fee:.01,explorer_url:c,network:l}),x.push({hash:i,type:"risk_report",branch:"JOINT",timestamp:new Date().toISOString(),label:"Supply Chain Risk Report",txHash:o}),ee(),setTimeout(()=>{document.getElementById("animStatus").innerHTML='<i class="fas fa-check-circle" style="color:var(--accent)"></i> Risk report anchored!',document.getElementById("animStatus").style.color="#00aaff"},2200),await new Promise(s=>setTimeout(s,3200)),Z()}let Ne=null;function Vt(){document.getElementById("reportType")?.value,parseInt(document.getElementById("reportPeriod")?.value);const t=JSON.parse(localStorage.getItem("s4_records")||"[]"),e=y||[],n=Math.max(t.length,e.length,S.anchored||0);document.getElementById("reportRecordCount").textContent=n+" records available",document.getElementById("reportContent").innerHTML='<div style="color:var(--text-muted);font-style:italic;">Click "Generate Report" to compile your audit package.</div>'}function Pt(){const t=document.getElementById("reportType")?.value||"full_audit",e=parseInt(document.getElementById("reportPeriod")?.value)||90,n=document.getElementById("reportFormat")?.value||"pdf",r=JSON.parse(localStorage.getItem("s4_records")||"[]"),a=y||[],i=Math.max(r.length,a.length,S.anchored||0,12),o={full_audit:{title:"Full Audit Package",icon:'<i class="fas fa-clipboard-list"></i>',sections:["Executive Summary","Anchoring History","Chain of Custody","Compliance Scorecard","Record Verification","Hash Integrity Report"]},supply_chain:{title:"Supply Chain Verification",icon:'<i class="fas fa-box"></i>',sections:["Supply Chain Overview","Receipt Verification","Custody Transfers","Lot Traceability","Counterfeit Prevention","Supplier Compliance"]},maintenance:{title:"Maintenance Records Audit",icon:'<i class="fas fa-wrench"></i>',sections:["Maintenance Summary","Work Order Verification","Parts Usage","Readiness Impact","3-M Compliance","Predictive Analysis"]},compliance:{title:"Compliance Summary Report",icon:'<i class="fas fa-check-circle" style="color:var(--accent)"></i>',sections:["Overall Compliance Score","NIST 800-171 Mapping","CMMC Level Readiness","DFARS Clause Compliance","ITAR/EAR Verification","Gap Analysis"]},custody:{title:"Chain of Custody Report",icon:'<i class="fas fa-link"></i>',sections:["Custody Timeline","Transfer Verification","Location History","Handler Authentication","Tamper Detection","Blockchain Proof"]},contract:{title:"Contract Deliverables Report",icon:'<i class="fas fa-file-contract"></i>',sections:["CDRL Status Summary","Deliverable Timeline","Modification History","Quality Metrics","Schedule Compliance","Cost Performance"]}},c=o[t]||o.full_audit,l=new Date,s=new Date(l.getTime()-e*864e5);let d='<div style="border:1px solid rgba(201,168,76,0.2);border-radius:3px;overflow:hidden;">';d+='<div style="background:rgba(0,170,255,0.06);padding:16px;border-bottom:1px solid rgba(201,168,76,0.2);">',d+='<div style="display:flex;justify-content:space-between;align-items:center;">',d+='<div><span style="font-size:1.3rem;margin-right:8px;">'+(c.icon||'<i class="fas fa-file" style="color:'+(c.color||"var(--accent)")+'"></i>')+'</span><strong style="color:#fff;font-size:1.05rem;">'+c.title+"</strong></div>",d+='<span style="background:#00aaff22;color:#00aaff;padding:4px 10px;border-radius:3px;font-size:0.75rem;font-weight:600;">GENERATED</span></div>',d+='<div style="color:var(--text-muted);font-size:0.78rem;margin-top:6px;">Period: '+s.toLocaleDateString()+" ‚Äî "+l.toLocaleDateString()+" | Records: "+i+" | Format: "+n.toUpperCase()+"</div></div>",d+='<div style="padding:16px;">',c.sections.forEach((g,b)=>{const w=Math.max(Math.floor(i/c.sections.length)+Math.floor(Math.random()*5),2);var A=85,C=0;try{C=JSON.parse(localStorage.getItem(Pe())||"[]").length}catch{}var T=I?I.filter(q=>q.done).length:0;A+=Math.min(C*.5,8)+Math.min(T*.3,5);var P=(b*7+3)%10*.3;const O=Math.min(A+P,100).toFixed(1);d+='<div style="padding:10px 12px;margin-bottom:6px;background:rgba(255,255,255,0.02);border-radius:3px;border-left:3px solid '+(b%2===0,"#00aaff")+';">',d+='<div style="display:flex;justify-content:space-between;align-items:center;">',d+='<strong style="color:#fff;font-size:0.88rem;">'+(b+1)+". "+g+"</strong>",d+='<span style="color:var(--steel);font-size:0.78rem;">'+w+" items | Score: "+O+"%</span></div></div>"});var u=87,m=0;try{m=JSON.parse(localStorage.getItem(Pe())||"[]").length}catch{}var p=I?I.filter(g=>g.done).length:0;u+=Math.min(m*.6,9)+Math.min(p*.4,4);const f=Math.min(u,100).toFixed(1);d+='<div style="margin-top:12px;padding:12px;background:rgba(0,170,255,0.06);border:1px solid rgba(0,170,255,0.2);border-radius:3px;display:flex;justify-content:space-between;align-items:center;">',d+='<div><strong style="color:#00aaff;">Overall Compliance Score: '+f+'%</strong><br><span style="color:var(--steel);font-size:0.78rem;">All records verified against XRPL blockchain anchors</span></div>',d+='<div style="font-size:1.8rem;color:#00aaff;font-weight:800;">'+f+"%</div></div>",d+="</div></div>",document.getElementById("reportContent").innerHTML=d,Ne={type:t,title:c.title,period:e,format:n,records:i,score:f,sections:c.sections,generated:l.toISOString()},L("Audit report generated ‚Äî "+c.sections.length+" sections, "+i+" records")}function Pi(){Ne||Pt();const t=Ne;if(t.format==="json"){const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=document.createElement("a");n.href=URL.createObjectURL(e),n.download="S4_Audit_Report_"+t.type+".json",n.click()}else{let e=`Section,Items,Compliance Score
`;t.sections.forEach((a,i)=>{e+='"'+a+'",'+Math.max(Math.floor(t.records/t.sections.length),2)+","+(88+Math.random()*12).toFixed(1)+`%
`}),e+=`
Overall Score,`+t.records+","+t.score+`%
`,e+="Generated,"+t.generated+`,
`,e+='Report Type,"'+t.title+`",
`;const n=new Blob([e],{type:"text/csv"}),r=document.createElement("a");r.href=URL.createObjectURL(n),r.download="S4_Audit_Report_"+t.type+".csv",r.click()}L("Report downloaded ‚Äî "+(t.format||"csv").toUpperCase()+" format")}async function xi(){Ne||Pt();const t=Ne||{title:"Full Audit Package",records:0,score:"95.0"},e="S4 Ledger Audit Report | Type: "+t.title+" | Records: "+t.records+" | Compliance Score: "+t.score+"% | Generated: "+new Date().toISOString(),n=await H(e);ae(n,"Audit Report Hash","CUI");const{txHash:r,explorerUrl:a,network:i}=await ie(n,"audit_report",e.substring(0,100));$({hash:n,txHash:r,type:"audit_report",label:t.title+" ‚Äî Score: "+t.score+"%",branch:"JOINT",icon:'<i class="fas fa-clipboard-list"></i>',content:e.substring(0,100),encrypted:!1,timestamp:new Date().toISOString(),source:"Audit Report Generator",fee:.01,explorerUrl:a,network:i}),S.anchored++,S.slsFees=Math.round((S.slsFees+.01)*100)/100,S.types.add("audit_report"),V(),z(),re({hash:n,tx_hash:r,record_type:"audit_report",record_label:t.title,branch:"JOINT",timestamp:new Date().toISOString(),timestamp_display:new Date().toLocaleString(),fee:.01,explorer_url:a,network:i}),x.push({hash:n,type:"audit_report",branch:"JOINT",timestamp:new Date().toISOString(),label:"Audit Report",txHash:r}),ee(),setTimeout(()=>{document.getElementById("animStatus").innerHTML='<i class="fas fa-check-circle" style="color:var(--accent)"></i> Audit report hash anchored!',document.getElementById("animStatus").style.color="#00aaff"},2200),await new Promise(o=>setTimeout(o,3200)),Z()}let Be={};function xt(t,e,n){const r=t.split("").reduce((s,d)=>s+d.charCodeAt(0),0),a=s=>(r*157+s*1009)%1e4/1e4,i=new Date,o={ddg51:[{sys:"LM2500 Gas Turbine ‚Äî #1 SSDG",comp:"HP Turbine Blade",mode:"Creep fatigue / thermal cycling",costRange:[800,2200]},{sys:"LM2500 Gas Turbine ‚Äî #2 SSDG",comp:"Fuel Control Valve",mode:"Sticking / response degradation",costRange:[120,450]},{sys:"SPY-6 Radar Array",comp:"T/R Module Bank 3",mode:"Power output degradation >15%",costRange:[350,900]},{sys:"MK 41 VLS",comp:"Gas Management System",mode:"Seal deterioration / pressure loss",costRange:[200,600]},{sys:"AN/SQQ-89 Sonar",comp:"Hydrophone Array",mode:"Sensitivity degradation / crosstalk",costRange:[500,1500]},{sys:"CIWS Phalanx",comp:"Servo Motor Assembly",mode:"Tracking accuracy drift >2 mrad",costRange:[180,550]},{sys:"Mk 45 Gun System",comp:"Barrel Liner",mode:"Bore erosion ‚Äî approaching round limit",costRange:[250,700]},{sys:"HVAC Chiller Plant",comp:"Compressor #2",mode:"Refrigerant leak / efficiency loss",costRange:[90,320]},{sys:"Steering Gear",comp:"Hydraulic Ram Seal",mode:"Internal bypass / slow response",costRange:[150,500]},{sys:"Fire Main System",comp:"AFFF Pump Motor",mode:"Bearing wear / vibration increase",costRange:[75,280]},{sys:"Electrical Distribution",comp:"450V Switchboard",mode:"Insulation resistance degradation",costRange:[200,800]},{sys:"Navigation Radar",comp:"Magnetron",mode:"Power output decline ‚Äî end of life",costRange:[60,200]}],cvn:[{sys:"EMALS Catapult",comp:"Linear Induction Motor",mode:"Winding insulation breakdown",costRange:[1500,4500]},{sys:"AAG Arresting Gear",comp:"Energy Absorber Turbine",mode:"Rotor fatigue cracking",costRange:[800,2800]},{sys:"A1B Reactor Plant",comp:"Primary Coolant Pump",mode:"Bearing wear / vibration trend",costRange:[2e3,6e3]},{sys:"Dual Band Radar",comp:"SPY-6 Array Panel",mode:"T/R module degradation cluster",costRange:[600,1800]},{sys:"Aircraft Elevator #1",comp:"Hydraulic Motor",mode:"Internal leak ‚Äî flow reduction",costRange:[400,1200]},{sys:"JP-5 Fuel System",comp:"Transfer Pump",mode:"Impeller erosion / cavitation",costRange:[150,500]},{sys:"Catapult Steam Plant",comp:"Accumulator Valve",mode:"Cycle fatigue ‚Äî approaching limit",costRange:[300,900]},{sys:"Flight Deck Lighting",comp:"MOVLAS System",mode:"LED driver failure pattern",costRange:[40,150]},{sys:"Freshwater Distillation",comp:"Evaporator Tubes",mode:"Scale buildup / efficiency loss",costRange:[100,350]},{sys:"Anchor Windlass",comp:"Brake Assembly",mode:"Lining wear ‚Äî measurement trending",costRange:[80,250]}],f18:[{sys:"F414-GE-400 Engine",comp:"High Pressure Turbine",mode:"Blade tip clearance trending",costRange:[1200,3500]},{sys:"AN/APG-79 AESA Radar",comp:"Power Supply Module",mode:"Voltage regulation drift",costRange:[300,900]},{sys:"Flight Control System",comp:"Aileron Actuator",mode:"Hydraulic bypass increasing",costRange:[200,600]},{sys:"Environmental Control",comp:"Air Cycle Machine",mode:"Bearing vibration signature",costRange:[150,450]},{sys:"Landing Gear",comp:"Main Gear Strut",mode:"Oleo seal ‚Äî service life approach",costRange:[350,1e3]},{sys:"Fuel System",comp:"Wing Tank Bladder Cell",mode:"Permeation rate increase",costRange:[180,550]},{sys:"Canopy System",comp:"Transparency Panel",mode:"Crazing / delamination pattern",costRange:[250,800]},{sys:"Ejection Seat",comp:"Rocket Motor",mode:"Propellant age ‚Äî shelf life limit",costRange:[400,1200]},{sys:"Weapons System",comp:"Launcher Rail",mode:"Alignment drift / rail wear",costRange:[120,400]},{sys:"Comm System",comp:"UHF Radio",mode:"Frequency stability degradation",costRange:[80,250]}],mh60:[{sys:"T700-GE-401C Engine",comp:"Power Turbine",mode:"Hot section inspection due",costRange:[600,1800]},{sys:"Main Rotor System",comp:"Pitch Change Rod",mode:"Fatigue life approaching limit",costRange:[300,900]},{sys:"Tail Rotor Gearbox",comp:"Output Pinion",mode:"Chip detector trend analysis",costRange:[400,1200]},{sys:"Flight Controls",comp:"SAS Servo",mode:"Null shift / authority reduction",costRange:[150,450]},{sys:"Forward FLIR",comp:"Dewar Assembly",mode:"Cooling efficiency degradation",costRange:[200,600]},{sys:"Hoist System",comp:"Cable Assembly",mode:"Strand breakage inspection due",costRange:[80,250]},{sys:"Sonobuoy Launcher",comp:"Pneumatic System",mode:"Pressure decay rate increase",costRange:[60,200]},{sys:"APU",comp:"Starter Generator",mode:"Brush wear ‚Äî trending high",costRange:[100,350]}],lcs:[{sys:"MT30 Gas Turbine",comp:"Power Turbine Module",mode:"Exhaust gas temperature trending",costRange:[900,2800]},{sys:"Waterjet Propulsor",comp:"Impeller",mode:"Cavitation erosion pattern",costRange:[500,1500]},{sys:"Mission Module Bay",comp:"Rail System",mode:"Alignment / structural fatigue",costRange:[200,600]},{sys:"30mm Mk 46 Gun",comp:"Feed System",mode:"Cycle count approaching limit",costRange:[150,450]},{sys:"TRS-4D Radar",comp:"Antenna Assembly",mode:"Pointing accuracy drift",costRange:[300,900]},{sys:"Diesel Generator",comp:"Injector Set",mode:"Fuel delivery degradation",costRange:[80,250]},{sys:"RHIB Davit",comp:"Hydraulic Cylinder",mode:"Seal extrusion / slow deploy",costRange:[60,200]},{sys:"Fire Control",comp:"EO/IR Director",mode:"Gimbal bearing roughness",costRange:[250,750]}],m1a2:[{sys:"AGT-1500 Gas Turbine",comp:"Power Turbine Section",mode:"Hot section inspection overdue",costRange:[1200,3500]},{sys:"M256 120mm Gun System",comp:"Gun Tube",mode:"Bore erosion ‚Äî EFC count high",costRange:[350,1e3]},{sys:"X-1100-3B Transmission",comp:"Steer Unit",mode:"Oil analysis ‚Äî metal particles",costRange:[800,2400]},{sys:"Track System T-158",comp:"Track Shoe Rubber",mode:"Wear measurement ‚Äî approach limit",costRange:[60,200]},{sys:"Turret Drive System",comp:"Traverse Motor",mode:"Current draw increasing >15%",costRange:[200,600]},{sys:"CITV Sight",comp:"Thermal Sensor",mode:"Image quality degradation",costRange:[300,900]},{sys:"Fire Control System",comp:"Ballistic Computer",mode:"BITE fault rate trending",costRange:[250,750]},{sys:"NBC System",comp:"HEPA Filter",mode:"Pressure differential increasing",costRange:[40,120]},{sys:"Hull Electrical",comp:"Power Distribution Box",mode:"Insulation resistance low",costRange:[100,350]},{sys:"APU",comp:"Starter Motor",mode:"Cranking speed declining",costRange:[80,250]}],bradley:[{sys:"Cummins VTA-903T",comp:"Turbocharger",mode:"Boost pressure declining",costRange:[200,600]},{sys:"M242 25mm Chain Gun",comp:"Feed Mechanism",mode:"Cycle count ‚Äî approaching overhaul",costRange:[150,450]},{sys:"HMPT-500 Transmission",comp:"Steer Valve",mode:"Response time degradation",costRange:[400,1200]},{sys:"TOW Launcher",comp:"Tracking Optics",mode:"Alignment drift >2 mrad",costRange:[250,750]},{sys:"ISU Integrated Sight",comp:"FLIR Module",mode:"Dead pixels increasing",costRange:[300,900]},{sys:"Track Assembly T-150",comp:"Track Pins",mode:"Elongation measurements trending",costRange:[50,180]},{sys:"Ramp System",comp:"Hydraulic Ram",mode:"Bypass leak ‚Äî slow close",costRange:[120,400]},{sys:"Communication System",comp:"SINCGARS Radio",mode:"Frequency drift out of spec",costRange:[60,200]}],stryker:[{sys:"Cat C7 ACERT Diesel",comp:"Injector Bank",mode:"Fuel consumption increase >10%",costRange:[150,450]},{sys:"Allison 3200SP Trans",comp:"Torque Converter",mode:"Slippage trending ‚Äî oil analysis",costRange:[300,900]},{sys:"CTIS System",comp:"Air Compressor",mode:"Cycle time increasing",costRange:[80,250]},{sys:"RWS .50 Cal Station",comp:"Servo Motor",mode:"Tracking speed degradation",costRange:[120,400]},{sys:"Run-Flat Tires",comp:"Tire Assembly",mode:"Tread depth ‚Äî replacement due",costRange:[40,150]},{sys:"DVH Hull",comp:"Blast Panel",mode:"Crack detection ‚Äî NDI finding",costRange:[200,600]},{sys:"Electrical System",comp:"Alternator",mode:"Output voltage fluctuation",costRange:[60,200]},{sys:"Cooling System",comp:"Radiator",mode:"Coolant temp trending high",costRange:[100,300]}],ah64:[{sys:"T700-GE-701D Engine",comp:"N1 Compressor",mode:"Vibration signature change",costRange:[800,2500]},{sys:"Main Rotor System",comp:"Elastomeric Bearing",mode:"TBO approaching ‚Äî hours limit",costRange:[400,1200]},{sys:"M230E1 30mm Gun",comp:"Barrel Assembly",mode:"Bore erosion ‚Äî round count",costRange:[150,500]},{sys:"Longbow Radar",comp:"Antenna Array",mode:"Detection range degradation",costRange:[600,1800]},{sys:"TADS/PNVS",comp:"FLIR Sensor",mode:"Thermal imaging quality decline",costRange:[350,1e3]},{sys:"Tail Rotor",comp:"Pitch Change Link",mode:"Play in control linkage",costRange:[100,350]},{sys:"Flight Controls",comp:"Cyclic Actuator",mode:"Hydraulic leak ‚Äî bypass rate",costRange:[200,600]},{sys:"CMWS",comp:"Missile Warning Sensor",mode:"False alarm rate increasing",costRange:[250,750]}],f22a:[{sys:"F119-PW-100 Engine",comp:"Augmentor Liner",mode:"Thermal fatigue cracking pattern",costRange:[1500,4500]},{sys:"AN/APG-77 Radar",comp:"AESA T/R Module",mode:"Power output decline >10%",costRange:[400,1200]},{sys:"Stealth Coating",comp:"RAM Panels",mode:"RCS measurement degradation",costRange:[200,600]},{sys:"ECS",comp:"Air Cycle Machine",mode:"Bearing vibration trending",costRange:[150,450]},{sys:"Thrust Vectoring",comp:"2D Nozzle Actuator",mode:"Response time degradation",costRange:[500,1500]},{sys:"Weapons Bay",comp:"Door Actuator",mode:"Cycle count approaching limit",costRange:[180,550]},{sys:"Landing Gear",comp:"Main Strut Oleo",mode:"Servicing interval exceeded",costRange:[250,750]},{sys:"Canopy System",comp:"Transparency",mode:"Optical distortion measurements",costRange:[300,900]},{sys:"ALR-94 EW",comp:"Receiver Module",mode:"Sensitivity degradation",costRange:[350,1e3]},{sys:"Oxygen System",comp:"OBOGS Concentrator",mode:"O2 output trending low",costRange:[120,380]}],f16:[{sys:"F110-GE-129 Engine",comp:"Turbine Blade",mode:"Thermal fatigue ‚Äî hours trending",costRange:[600,1800]},{sys:"AN/APG-68 Radar",comp:"Transmitter",mode:"Peak power output decline",costRange:[200,600]},{sys:"Flight Controls",comp:"Flaperon Actuator",mode:"Hydraulic leak rate ‚Äî trending",costRange:[150,450]},{sys:"Fuel System",comp:"Wing Tank Sealant",mode:"Fuel leak ‚Äî seepage rate",costRange:[80,250]},{sys:"Landing Gear",comp:"Nose Gear Steering",mode:"Shimmy damper worn",costRange:[100,300]},{sys:"Environmental",comp:"Cockpit Pressurization",mode:"Bleed air valve wear",costRange:[120,400]},{sys:"Weapons Stations",comp:"Pylon Release",mode:"Solenoid response time",costRange:[60,200]},{sys:"Crew Escape",comp:"ACES II Seat",mode:"Rocket motor shelf life",costRange:[200,600]}],b52h:[{sys:"TF33-P-3/103 Engine",comp:"Fan Blade Set",mode:"Fatigue life approaching limit",costRange:[400,1200]},{sys:"Wing Structure",comp:"Lower Wing Skin",mode:"Fatigue crack ‚Äî NDI finding",costRange:[2e3,6e3]},{sys:"Fuel System",comp:"Bladder Cell",mode:"Permeation rate increase",costRange:[150,500]},{sys:"Bomb Bay",comp:"Door Actuator",mode:"Hydraulic cylinder bypass",costRange:[200,600]},{sys:"Electrical",comp:"Generator CSD",mode:"Oil temperature trending high",costRange:[300,900]},{sys:"CSRL Launcher",comp:"Rotary Mechanism",mode:"Alignment drift ‚Äî rail wear",costRange:[250,750]},{sys:"Navigation",comp:"INS Platform",mode:"Drift rate increasing",costRange:[180,550]},{sys:"Communications",comp:"SATCOM Terminal",mode:"Antenna pointing accuracy",costRange:[100,350]}],v22:[{sys:"T406-AD-400 Engine",comp:"Power Turbine",mode:"CT trending ‚Äî approaching limit",costRange:[800,2500]},{sys:"Proprotor System",comp:"Composite Blade",mode:"Delamination check ‚Äî NDI due",costRange:[500,1500]},{sys:"Conversion System",comp:"Tilt Actuator",mode:"Hydraulic response time",costRange:[400,1200]},{sys:"Drive System",comp:"IMRGB Gearbox",mode:"Chip detector trend",costRange:[600,1800]},{sys:"Flight Controls",comp:"Fly-by-Wire Computer",mode:"BITE fault rate trending",costRange:[250,750]},{sys:"Nacelle System",comp:"Conversion Lock",mode:"Engagement sensor ‚Äî intermittent",costRange:[150,450]},{sys:"Cargo System",comp:"External Cargo Hook",mode:"Load cell calibration drift",costRange:[80,250]},{sys:"Environmental",comp:"ECS Pack",mode:"Cooling capacity decline",costRange:[120,400]}]};let l=(o[t]||o.ddg51).map((s,d)=>{const u=Math.round(50+a(d)*50),m=Math.round(5+a(d*3)*(e||90)),p=new Date(i.getTime()+m*864e5),f=Math.round(s.costRange[0]+a(d*5)*(s.costRange[1]-s.costRange[0]));return{system:s.sys,component:s.comp,mode:s.mode,confidence:u,eta:p.toLocaleDateString(),etaDays:m,cost:f,urgent:m<=30}});return l=l.filter(s=>s.confidence>=(n||85)),l.sort((s,d)=>s.etaDays-d.etaDays),l}function Ie(){const t=document.getElementById("pdmPlatform")?.value||"ddg51",e=parseInt(document.getElementById("pdmWindow")?.value)||90,n=parseInt(document.getElementById("pdmConfidence")?.value)||85,r=xt(t,e,n);Be={platform:t,windowDays:e,confidence:n,items:r};const a=r.filter(s=>s.urgent).length,i=r.reduce((s,d)=>s+d.cost,0),o=Math.round(i*.55),c=(87+Math.random()*10).toFixed(1);document.getElementById("pdmPredictions").textContent=r.length,document.getElementById("pdmUrgent").textContent=a,document.getElementById("pdmSavings").textContent=o>=1e3?"$"+(o/1e3).toFixed(1)+"M":"$"+o+"K",document.getElementById("pdmAccuracy").textContent=c+"%";let l="";r.forEach(s=>{const d=s.confidence>=90?"#ff3b30":s.confidence>=80?"#ff9500":s.confidence>=70?"#ffcc00":"#34c759";l+='<tr style="border-bottom:1px solid rgba(255,255,255,0.04);'+(s.urgent?"background:rgba(255,59,48,0.04);":"")+'">',l+='<td style="padding:10px 8px;"><div style="color:#fff;font-weight:600;font-size:0.82rem;">'+s.system+'</div><div style="color:var(--text-muted);font-size:0.72rem;">'+s.component+"</div></td>",l+='<td style="padding:10px 8px;color:var(--steel);font-size:0.8rem;">'+s.mode+"</td>",l+='<td style="padding:10px 8px;text-align:center;"><div style="display:inline-block;padding:4px 10px;border-radius:3px;font-weight:700;font-size:0.82rem;background:'+d+"22;color:"+d+";border:1px solid "+d+'44;">'+s.confidence+"%</div></td>",l+='<td style="padding:10px 8px;text-align:center;color:'+(s.urgent?"#ff3b30":"var(--steel)")+";font-weight:"+(s.urgent?"700":"400")+';font-size:0.82rem;">'+s.eta+(s.urgent?' <i class="fas fa-exclamation-triangle"></i>':"")+"</td>",l+='<td style="padding:10px 8px;text-align:right;color:#ff9500;font-weight:600;font-size:0.85rem;">$'+s.cost.toLocaleString()+"K</td>",l+="</tr>"}),document.getElementById("pdmTableBody").innerHTML=l||'<tr><td colspan="5" style="text-align:center;padding:30px;color:var(--text-muted)">No predictions above confidence threshold.</td></tr>',L("Predictive analysis complete ‚Äî "+r.length+" predictions, "+a+" urgent")}function ki(){const t=Be.items||xt("ddg51",90,85);let e=`System,Component,Failure Mode,Confidence %,Predicted ETA,Days Until,Cost if Unplanned ($K),Urgent
`;t.forEach(a=>{e+='"'+a.system+'","'+a.component+'","'+a.mode+'",'+a.confidence+","+a.eta+","+a.etaDays+","+a.cost+","+(a.urgent?"YES":"No")+`
`});const n=new Blob([e],{type:"text/csv"}),r=document.createElement("a");r.href=URL.createObjectURL(n),r.download="Predictive_Maintenance_"+(Be.platform||"DDG51").toUpperCase()+".csv",r.click(),L("Predictive maintenance report exported ‚Äî "+t.length+" predictions")}async function Ni(){const t=Be.platform||"ddg51",e=Be.items||xt(t,90,85),n=e.filter(s=>s.urgent).length,r=e.reduce((s,d)=>s+d.cost,0),a="S4 Ledger Predictive Maintenance Report | Platform: "+t.toUpperCase()+" | Predictions: "+e.length+" | Urgent: "+n+" | Total Risk: $"+r+"K | Generated: "+new Date().toISOString(),i=await H(a);ae(i,"Predictive Maintenance Report","CUI");const{txHash:o,explorerUrl:c,network:l}=await ie(i,"predictive_maintenance",a.substring(0,100));$({hash:i,txHash:o,type:"predictive_maintenance",label:"Predictive Maintenance ‚Äî "+t.toUpperCase(),branch:"JOINT",icon:'<i class="fas fa-brain"></i>',content:a.substring(0,100),encrypted:!1,timestamp:new Date().toISOString(),source:"Predictive Maintenance AI",fee:.01,explorerUrl:c,network:l}),S.anchored++,S.slsFees=Math.round((S.slsFees+.01)*100)/100,S.types.add("predictive_maintenance"),V(),z(),re({hash:i,tx_hash:o,record_type:"predictive_maintenance",record_label:"Predictive Maintenance ‚Äî "+t.toUpperCase(),branch:"JOINT",timestamp:new Date().toISOString(),timestamp_display:new Date().toLocaleString(),fee:.01,explorer_url:c,network:l}),x.push({hash:i,type:"predictive_maintenance",branch:"JOINT",timestamp:new Date().toISOString(),label:"Predictive Maintenance",txHash:o}),ee(),setTimeout(()=>{document.getElementById("animStatus").innerHTML='<i class="fas fa-check-circle" style="color:var(--accent)"></i> Predictive data anchored!',document.getElementById("animStatus").style.color="#00aaff"},2200),await new Promise(s=>setTimeout(s,3200)),Z()}function pt(){const t=document.getElementById("subProgram");if(!t||!window.S4_PLATFORMS)return;const e=t.value,n=S4_PLATFORMS[e];if(n){const r=document.getElementById("subBranch");r&&(r.value=n.b)}}const Oe={VRSL:"Vendor Recommended Spares List",IUID:"IUID Registry / Serialized List",CONFIG_DWG:"Configuration Drawing / Baseline",OUTFITTING:"Outfitting List / Drawing",PO_INDEX:"Purchase Order Index",PTD:"Provisioning Technical Data",APL:"Allowance Parts List",TECH_MANUAL:"Technical Manual (IETM/TM)",MAINT_PLAN:"Maintenance Plan Update",SUPPLY_REQ:"Supply Support Request",LSAR:"LSAR / Logistics Data",FRACAS:"FRACAS / Reliability Report",CAL_RECORD:"Calibration Record",PHS_T:"Packaging / PHS&T Data",TRAIN_EQUIP:"Training Equipment List",SUPPORT_EQUIP:"Support Equipment Recommendation",WARRANTY:"Warranty / Guarantee Submission",ECP:"Engineering Change Proposal",CDRL:"CDRL Deliverable",BOM:"Bill of Materials",COST_EST:"Cost Estimate / ROM",TEST_REPORT:"Test & Evaluation Report",HAZMAT:"HAZMAT / Environmental Data",CUSTOM:"Custom Submission Type"};let R={items:[],discrepancies:[],baseline:[],meta:{}},le;try{le=JSON.parse(localStorage.getItem("s4_submission_history")||"[]")}catch{le=[]}let ue="all";function Rn(t){const e=t.target.files;if(!e.length)return;const n=e[0],r=new FileReader;r.onload=function(a){const i=a.target.result;try{n.name.endsWith(".json")?R.items=JSON.parse(i):(n.name.endsWith(".csv")||n.name.endsWith(".txt"),R.items=gt(i)),L("Loaded "+R.items.length+" records from "+n.name),document.getElementById("subUploadZone").innerHTML='<i class="fas fa-check-circle" style="font-size:2rem;color:#00aaff;display:block;margin-bottom:4px"></i><div style="color:#00aaff;font-weight:600">'+n.name+'</div><div style="color:var(--steel);font-size:.78rem">'+R.items.length+" records loaded</div>"}catch(o){L("Error parsing file: "+o.message)}},r.readAsText(n)}function gt(t){const e=t.trim().split(`
`);if(e.length<2)return[];const n=e[0].split(",").map(r=>r.trim().replace(/"/g,""));return e.slice(1).map(r=>{const a=r.split(",").map(o=>o.trim().replace(/"/g,"")),i={};return n.forEach((o,c)=>{i[o]=a[c]||""}),i})}function Re(t){const e=[{nsn:"5998-01-422-7891",partNumber:"6872843-1",nomenclature:"Circuit Card Assy, Radar Interface",cageCode:"53711",qty:4,unitPrice:12450,source:"OEM",leadTime:"120 days",status:"Active"},{nsn:"5962-01-389-5523",partNumber:"74A929411-1003",nomenclature:"Semiconductor Device, Signal Processing",cageCode:"80058",qty:12,unitPrice:890,source:"OEM",leadTime:"90 days",status:"Active"},{nsn:"5905-01-567-3421",partNumber:"MS90451-1",nomenclature:"Resistor, Fixed, Film (MIL-PRF-55342)",cageCode:"06324",qty:200,unitPrice:4.75,source:"DLA",leadTime:"14 days",status:"Active"},{nsn:"5961-01-445-8832",partNumber:"M55342K06B10E",nomenclature:"Capacitor, Fixed, Ceramic (MIL-PRF-55681)",cageCode:"19139",qty:150,unitPrice:8.2,source:"DLA",leadTime:"21 days",status:"Active"},{nsn:"5950-01-502-9901",partNumber:"TF4SX21ZZM",nomenclature:"Transformer, Power, 400Hz",cageCode:"81349",qty:2,unitPrice:18750,source:"OEM",leadTime:"180 days",status:"DMSMS Watch"},{nsn:"5945-01-612-4478",partNumber:"K10P-11A15-120",nomenclature:"Relay, Electromagnetic (MIL-PRF-39016)",cageCode:"13499",qty:24,unitPrice:145,source:"OEM",leadTime:"45 days",status:"Active"},{nsn:"5999-01-478-2201",partNumber:"M83723/75W2226N",nomenclature:"Connector, Plug, Electrical (MIL-DTL-83723)",cageCode:"77820",qty:36,unitPrice:287.5,source:"DLA",leadTime:"30 days",status:"Active"},{nsn:"5930-01-539-7712",partNumber:"MS24659-23D",nomenclature:"Switch, Toggle (MIL-DTL-3950)",cageCode:"96214",qty:16,unitPrice:42,source:"DLA",leadTime:"14 days",status:"Active"},{nsn:"5920-01-401-5567",partNumber:"F02A125V3.15A",nomenclature:"Fuse, Cartridge (MIL-PRF-23419)",cageCode:"35180",qty:100,unitPrice:3.5,source:"DLA",leadTime:"7 days",status:"Active"},{nsn:"6210-01-588-9023",partNumber:"MS25010-4",nomenclature:"Indicator, Electrical (MIL-DTL-25010)",cageCode:"81349",qty:8,unitPrice:165,source:"OEM",leadTime:"60 days",status:"Active"},{nsn:"6145-01-502-3345",partNumber:"M17/94-RG179",nomenclature:"Cable Assy, RF Coaxial (MIL-DTL-17)",cageCode:"14457",qty:20,unitPrice:425,source:"OEM",leadTime:"45 days",status:"Active"},{nsn:"5963-01-620-1189",partNumber:"5962-0122002HXA",nomenclature:"IC, Digital, ASIC (Custom)",cageCode:"53711",qty:6,unitPrice:4580,source:"OEM",leadTime:"240 days",status:"Obsolete"},{nsn:"5895-01-478-5501",partNumber:"7400508-123",nomenclature:"Receiver-Transmitter, UHF",cageCode:"80058",qty:2,unitPrice:87500,source:"OEM",leadTime:"270 days",status:"Active"},{nsn:"4820-01-512-8867",partNumber:"S6164-60037-1",nomenclature:"Valve, Solenoid, Hydraulic",cageCode:"99286",qty:4,unitPrice:6200,source:"OEM",leadTime:"90 days",status:"Active"},{nsn:"2840-01-489-3345",partNumber:"6859742",nomenclature:"Turbine Module, Gas (LM2500)",cageCode:"00000",qty:1,unitPrice:945e3,source:"OEM",leadTime:"365 days",status:"Active"},{nsn:"3110-01-567-4401",partNumber:"MS21920-40",nomenclature:"Bearing, Roller, Cylindrical",cageCode:"81349",qty:8,unitPrice:890,source:"DLA",leadTime:"30 days",status:"Active"},{nsn:"5340-01-423-7789",partNumber:"MS29513-236",nomenclature:"Packing, Preformed (O-Ring)",cageCode:"96214",qty:500,unitPrice:2.1,source:"DLA",leadTime:"7 days",status:"Active"},{nsn:"4730-01-501-2234",partNumber:"AN924-20D",nomenclature:"Coupling, Hose, Quick Disconnect",cageCode:"35180",qty:12,unitPrice:78,source:"DLA",leadTime:"14 days",status:"Active"},{nsn:"5331-01-489-5578",partNumber:"NSA-MS29512-08",nomenclature:"Gasket, Metallic",cageCode:"81349",qty:24,unitPrice:165,source:"DLA",leadTime:"21 days",status:"Active"},{nsn:"4320-01-534-8901",partNumber:"S6164-80012",nomenclature:"Pump, Centrifugal, Seawater Service",cageCode:"99286",qty:2,unitPrice:34500,source:"OEM",leadTime:"180 days",status:"Active"},{nsn:"6105-01-578-2267",partNumber:"GE-MQ90-1200",nomenclature:"Generator, Ship Service (SSGTG)",cageCode:"00000",qty:1,unitPrice:45e4,source:"OEM",leadTime:"365 days",status:"Active"},{nsn:"5999-01-612-3390",partNumber:"D38999/26WJ61SN",nomenclature:"Connector, Receptacle (MIL-DTL-38999)",cageCode:"77820",qty:48,unitPrice:312,source:"DLA",leadTime:"30 days",status:"Active"},{nsn:"5962-01-512-8834",partNumber:"SMJ320C50PQM",nomenclature:"Microprocessor, 32-Bit DSP",cageCode:"53711",qty:10,unitPrice:2340,source:"OEM",leadTime:"120 days",status:"DMSMS Watch"},{nsn:"5910-01-534-2201",partNumber:"M39006/22-0660",nomenclature:"Capacitor, Fixed, Wet Tantalum",cageCode:"19139",qty:30,unitPrice:95,source:"DLA",leadTime:"45 days",status:"Active"},{nsn:"5945-01-501-3378",partNumber:"MIL-R-39016/48-001",nomenclature:"Relay, Solid State",cageCode:"13499",qty:18,unitPrice:425,source:"OEM",leadTime:"60 days",status:"Active"},{nsn:"2990-01-489-6612",partNumber:"NAVSEA-STA-074",nomenclature:"Ship Fuel Oil Service System Component Kit",cageCode:"99286",qty:4,unitPrice:8900,source:"OEM",leadTime:"90 days",status:"Active"},{nsn:"4810-01-556-7834",partNumber:"S6164-40023-2",nomenclature:"Valve, Gate, Seawater",cageCode:"99286",qty:6,unitPrice:5600,source:"OEM",leadTime:"120 days",status:"Active"},{nsn:"5895-01-567-9023",partNumber:"AN/SPS-73(V)18",nomenclature:"Radar Navigation Display Unit",cageCode:"80058",qty:1,unitPrice:125e3,source:"OEM",leadTime:"240 days",status:"Active"},{nsn:"5820-01-489-1156",partNumber:"RT-1694/U",nomenclature:"Radio Set, VHF/UHF",cageCode:"13499",qty:3,unitPrice:42e3,source:"OEM",leadTime:"180 days",status:"Active"},{nsn:"5999-01-534-4490",partNumber:"M55302/68-B22S",nomenclature:"Connector, Fiber Optic",cageCode:"77820",qty:24,unitPrice:156,source:"DLA",leadTime:"30 days",status:"Active"}],n=[{uid:"0013E841AF.3501.6872843-1.001",serialNumber:"SN-DDG-RAD-0024",partNumber:"6872843-1",nomenclature:"Circuit Card Assy, Radar Interface",acquisitionCost:12450,condition:"New",location:"Norfolk NAVSTA"},{uid:"0013E841AF.3501.LM2500-GEN.001",serialNumber:"SN-LM2500-4478",partNumber:"6859742",nomenclature:"Turbine Module, Gas (LM2500)",acquisitionCost:945e3,condition:"New",location:"Ingalls Shipbuilding"},{uid:"0013E841AF.3501.SSGTG.001",serialNumber:"SN-SSGTG-1201",partNumber:"GE-MQ90-1200",nomenclature:"Generator, Ship Service",acquisitionCost:45e4,condition:"New",location:"Bath Iron Works"},{uid:"0013E841AF.3501.NAV-RDR.001",serialNumber:"SN-SPS73-V18-003",partNumber:"AN/SPS-73(V)18",nomenclature:"Radar Navigation Display",acquisitionCost:125e3,condition:"New",location:"San Diego NAVSTA"},{uid:"0013E841AF.3501.RT1694.001",serialNumber:"SN-RADIO-VHF-012",partNumber:"RT-1694/U",nomenclature:"Radio Set VHF/UHF",acquisitionCost:42e3,condition:"Serviceable",location:"Pearl Harbor"},{uid:"0013E841AF.3501.RCVR-TX.001",serialNumber:"SN-UHF-RX-044",partNumber:"7400508-123",nomenclature:"Receiver-Transmitter UHF",acquisitionCost:87500,condition:"New",location:"Norfolk NAVSTA"},{uid:"0013E841AF.3501.PUMP-SW.001",serialNumber:"SN-PUMP-CEN-008",partNumber:"S6164-80012",nomenclature:"Pump, Centrifugal, Seawater",acquisitionCost:34500,condition:"Serviceable",location:"Bremerton"},{uid:"0013E841AF.3501.VALVE-SW.001",serialNumber:"SN-VALVE-GT-019",partNumber:"S6164-40023-2",nomenclature:"Valve, Gate, Seawater",acquisitionCost:5600,condition:"New",location:"San Diego NAVSTA"},{uid:"0013E841AF.3501.SOL-VLV.001",serialNumber:"SN-SOL-HYD-006",partNumber:"S6164-60037-1",nomenclature:"Valve Solenoid Hydraulic",acquisitionCost:6200,condition:"Repairable",location:"Mayport"},{uid:"0013E841AF.3501.XFMR-PWR.001",serialNumber:"SN-XFMR-400-003",partNumber:"TF4SX21ZZM",nomenclature:"Transformer Power 400Hz",acquisitionCost:18750,condition:"New",location:"Norfolk NAVSTA"},{uid:"0013E841AF.3501.DSP-PROC.001",serialNumber:"SN-DSP32-010",partNumber:"SMJ320C50PQM",nomenclature:"Microprocessor 32-Bit DSP",acquisitionCost:2340,condition:"Serviceable",location:"San Diego NAVSTA"},{uid:"0013E841AF.3501.ASIC-CCA.001",serialNumber:"SN-ASIC-CUST-002",partNumber:"5962-0122002HXA",nomenclature:"IC Digital ASIC Custom",acquisitionCost:4580,condition:"Repairable",location:"Bremerton"}],r=[{drawingNumber:"S9086-TX-STM-010/CH-074",revision:"Rev F",title:"NSTM Chapter 074 - Gaskets & Packing",effectivity:"All DDG-51 Class",status:"Released",pages:42,changeNotice:""},{drawingNumber:"S9086-TX-STM-010/CH-262",revision:"Rev D",title:"NSTM Chapter 262 - Lubricating Oil",effectivity:"All DDG-51 Class",status:"Released",pages:38,changeNotice:""},{drawingNumber:"803-7187231",revision:"Rev C",title:"Main Propulsion System Piping Arrangement",effectivity:"DDG-123 thru DDG-137",status:"Released",pages:12,changeNotice:"ECN-2026-0042"},{drawingNumber:"803-7187445",revision:"Rev B",title:"Electrical One-Line Diagram, SSGTG",effectivity:"DDG-128 thru DDG-137",status:"In Review",pages:8,changeNotice:"ECN-2026-0051"},{drawingNumber:"803-7188012",revision:"Rev A",title:"Combat System Integration Diagram (AEGIS)",effectivity:"DDG-131 thru DDG-137",status:"Draft",pages:24,changeNotice:""},{drawingNumber:"S9086-TX-STM-010/CH-541",revision:"Rev E",title:"NSTM Chapter 541 - Ship Fuel & Fuel Systems",effectivity:"All DDG-51 Class",status:"Released",pages:56,changeNotice:""},{drawingNumber:"803-7189901",revision:"Rev B",title:"HVAC Arrangement, Forward Machinery Room",effectivity:"DDG-128 thru DDG-137",status:"Released",pages:6,changeNotice:"ECN-2025-0198"},{drawingNumber:"803-7190234",revision:"Rev A",title:"Weapons Elevator Hydraulic System",effectivity:"DDG-131 thru DDG-137",status:"In Review",pages:14,changeNotice:"ECN-2026-0063"}],a=[{lineItem:1,partNumber:"6859742",nomenclature:"Turbine Module Gas (LM2500)",qty:4,unitPrice:945e3,totalPrice:378e4,make_buy:"Buy",vendor:"GE Marine"},{lineItem:2,partNumber:"GE-MQ90-1200",nomenclature:"Generator Ship Service SSGTG",qty:4,unitPrice:45e4,totalPrice:18e5,make_buy:"Buy",vendor:"GE Marine"},{lineItem:3,partNumber:"AN/SPS-73(V)18",nomenclature:"Navigation Radar Display",qty:2,unitPrice:125e3,totalPrice:25e4,make_buy:"Buy",vendor:"Raytheon"},{lineItem:4,partNumber:"RT-1694/U",nomenclature:"Radio Set VHF/UHF",qty:6,unitPrice:42e3,totalPrice:252e3,make_buy:"Buy",vendor:"L3Harris"},{lineItem:5,partNumber:"7400508-123",nomenclature:"Receiver-Transmitter UHF",qty:4,unitPrice:87500,totalPrice:35e4,make_buy:"Buy",vendor:"Raytheon"},{lineItem:6,partNumber:"S6164-80012",nomenclature:"Pump Centrifugal Seawater",qty:8,unitPrice:34500,totalPrice:276e3,make_buy:"Buy",vendor:"Crane Naval"},{lineItem:7,partNumber:"S6164-40023-2",nomenclature:"Valve Gate Seawater",qty:12,unitPrice:5600,totalPrice:67200,make_buy:"Buy",vendor:"Crane Naval"},{lineItem:8,partNumber:"S6164-60037-1",nomenclature:"Valve Solenoid Hydraulic",qty:8,unitPrice:6200,totalPrice:49600,make_buy:"Buy",vendor:"Moog Inc"},{lineItem:9,partNumber:"TF4SX21ZZM",nomenclature:"Transformer Power 400Hz",qty:6,unitPrice:18750,totalPrice:112500,make_buy:"Buy",vendor:"SL Power"},{lineItem:10,partNumber:"6872843-1",nomenclature:"Circuit Card Assy Radar IF",qty:12,unitPrice:12450,totalPrice:149400,make_buy:"Buy",vendor:"Raytheon"},{lineItem:11,partNumber:"SMJ320C50PQM",nomenclature:"Microprocessor 32-Bit DSP",qty:24,unitPrice:2340,totalPrice:56160,make_buy:"Buy",vendor:"Texas Instruments"},{lineItem:12,partNumber:"5962-0122002HXA",nomenclature:"IC Digital ASIC Custom",qty:18,unitPrice:4580,totalPrice:82440,make_buy:"Make",vendor:"(Manufactured)"},{lineItem:13,partNumber:"K10P-11A15-120",nomenclature:"Relay Electromagnetic",qty:48,unitPrice:145,totalPrice:6960,make_buy:"Buy",vendor:"TE Connectivity"},{lineItem:14,partNumber:"D38999/26WJ61SN",nomenclature:"Connector Receptacle",qty:96,unitPrice:312,totalPrice:29952,make_buy:"Buy",vendor:"Amphenol"},{lineItem:15,partNumber:"MS21920-40",nomenclature:"Bearing Roller Cylindrical",qty:16,unitPrice:890,totalPrice:14240,make_buy:"Buy",vendor:"Timken"},{lineItem:16,partNumber:"M83723/75W2226N",nomenclature:"Connector Plug Electrical",qty:72,unitPrice:287.5,totalPrice:20700,make_buy:"Buy",vendor:"Glenair"},{lineItem:17,partNumber:"NSA-MS29512-08",nomenclature:"Gasket Metallic",qty:200,unitPrice:165,totalPrice:33e3,make_buy:"Buy",vendor:"Garlock"},{lineItem:18,partNumber:"M17/94-RG179",nomenclature:"Cable Assy RF Coaxial",qty:40,unitPrice:425,totalPrice:17e3,make_buy:"Buy",vendor:"Times Microwave"},{lineItem:19,partNumber:"NAVSEA-STA-074",nomenclature:"Fuel Oil Service Kit",qty:8,unitPrice:8900,totalPrice:71200,make_buy:"Buy",vendor:"Parker Hannifin"},{lineItem:20,partNumber:"MS29513-236",nomenclature:"Packing Preformed O-Ring",qty:1e3,unitPrice:2.1,totalPrice:2100,make_buy:"Buy",vendor:"Parker Hannifin"}],i=[{ecpNumber:"ECP-2026-0042",title:"Main Reduction Gear Bearing Upgrade",classification:"Class I",priority:"Urgent",affectedSystems:"LM2500 MRG Assy",costImpact:182e3,status:"Under Review",dateSubmitted:"2026-01-15"},{ecpNumber:"ECP-2026-0039",title:"AEGIS Display Console Firmware Update",classification:"Class II",priority:"Routine",affectedSystems:"AN/SPY-6 Display",costImpact:45e3,status:"Approved",dateSubmitted:"2026-01-08"},{ecpNumber:"ECP-2026-0044",title:"Hull Coating Change - Advanced Anti-Fouling",classification:"Class I",priority:"High",affectedSystems:"Hull Underwater Body",costImpact:89e4,status:"Under Review",dateSubmitted:"2026-01-22"},{ecpNumber:"ECP-2026-0036",title:"CIWS Phalanx RAM Upgrade Kit",classification:"Class I",priority:"Urgent",affectedSystems:"Mk 15 CIWS",costImpact:125e4,status:"Pending Board",dateSubmitted:"2026-01-04"},{ecpNumber:"ECP-2026-0048",title:"Fiber Optic Backbone Cable Replacement",classification:"Class II",priority:"Routine",affectedSystems:"Ship LAN Infrastructure",costImpact:125e3,status:"Approved",dateSubmitted:"2026-02-01"},{ecpNumber:"ECP-2026-0051",title:"Diesel Generator Exhaust Stack Modification",classification:"Class I",priority:"High",affectedSystems:"Ship Service DG",costImpact:67e3,status:"Under Review",dateSubmitted:"2026-02-10"},{ecpNumber:"ECP-2025-0198",title:"HVAC Chiller Refrigerant Change R-134a to R-513A",classification:"Class II",priority:"Routine",affectedSystems:"HVAC Central Plant",costImpact:38e3,status:"Implemented",dateSubmitted:"2025-11-15"},{ecpNumber:"ECP-2026-0053",title:"Weapons Elevator Hydraulic Valve Redesign",classification:"Class I",priority:"Urgent",affectedSystems:"Mk 41 VLS Handling",costImpact:92e3,status:"Pending Board",dateSubmitted:"2026-02-14"}],o=[{cdrlNumber:"A001",diNumber:"DI-ILSS-81495A",title:"Integrated Logistics Support Plan",frequency:"One Time",status:"Submitted",dueDate:"2026-03-15",pages:145},{cdrlNumber:"A002",diNumber:"DI-ILSS-81496",title:"Level of Repair Analysis (LORA)",frequency:"One Time",status:"Overdue",dueDate:"2026-01-30",pages:89},{cdrlNumber:"A003",diNumber:"DI-ILSS-81497",title:"Provisioning Parts List (PPL)",frequency:"Quarterly",status:"Submitted",dueDate:"2026-02-28",pages:234},{cdrlNumber:"A004",diNumber:"DI-ILSS-81498",title:"SERD",frequency:"One Time",status:"In Progress",dueDate:"2026-04-15",pages:0},{cdrlNumber:"A005",diNumber:"DI-SESS-81517",title:"FMECA",frequency:"One Time",status:"Submitted",dueDate:"2026-02-01",pages:312},{cdrlNumber:"A006",diNumber:"DI-ALSS-81529",title:"RCM Analysis",frequency:"One Time",status:"Rejected",dueDate:"2026-01-15",pages:178},{cdrlNumber:"A007",diNumber:"DI-TMSS-80527B",title:"Technical Manual - Operator (IETM)",frequency:"As Required",status:"Under Review",dueDate:"2026-06-01",pages:450},{cdrlNumber:"A008",diNumber:"DI-TMSS-80528B",title:"Technical Manual - Maintenance (IETM)",frequency:"As Required",status:"In Progress",dueDate:"2026-07-15",pages:0}],c={VRSL:()=>e.map(l=>({...l})),IUID:()=>n.map(l=>({...l})),CONFIG_DWG:()=>r.map(l=>({...l})),BOM:()=>a.map(l=>({...l})),ECP:()=>i.map(l=>({...l})),CDRL:()=>o.map(l=>({...l}))};return(c[t]||c.VRSL)()}function Ln(t,e){return t.map((n,r)=>{const a={...n};if(r%4===0&&a.unitPrice&&(a.unitPrice=+(a.unitPrice*.82).toFixed(2)),r%6===0&&a.qty&&(a.qty=a.qty+Math.floor(Math.random()*8)+2),r%8===0&&a.source&&(a.source=a.source==="OEM"?"DLA":"OEM"),r%10===0&&a.cageCode&&(a.cageCode="99999"),r%7===0&&a.status&&a.status!=="Active"&&(a.status="Active"),r%5===0&&a.leadTime){const i=parseInt(a.leadTime)||60;a.leadTime=Math.max(14,i-45)+" days"}if(r%3===0&&a.revision){const i=a.revision.charCodeAt(4);a.revision="Rev "+String.fromCharCode(Math.max(65,i-1))}return r%9===0&&a.vendor&&(a.vendor="Previous Vendor Inc"),r%5===0&&a.condition&&(a.condition=a.condition==="New"?"Serviceable":"New"),a})}function Bi(){const t=document.getElementById("subDocType").value,e=Re(t),n=Ln(e),r=Array.from({length:3},(c,l)=>({partNumber:"PN-REMOVED-"+(l+1),nomenclature:"Discontinued Component "+(l+1),nsn:"0000-00-000-000"+l,unitPrice:+(Math.random()*300+50).toFixed(2),qty:Math.floor(Math.random()*10)+1,status:"Active",source:"OEM"}));e.push(...Array.from({length:4},(c,l)=>({partNumber:"PN-NEW-"+(l+1),nomenclature:"New Component Added "+(l+1),nsn:"9999-99-999-999"+l,unitPrice:+(Math.random()*1e3+100).toFixed(2),qty:Math.floor(Math.random()*20)+1,status:"Active",source:"Aftermarket",_isNew:!0}))),R.items=e,R.baseline=[...n,...r];const a=document.getElementById("subProgram").value,i=window.S4_PLATFORMS&&S4_PLATFORMS[a],o=i?i.n:a==="CUSTOM"?document.getElementById("subCustomPlatform").value||"Custom Platform":a;R.meta={program:o,programKey:a,branch:i?i.b:document.getElementById("subBranch").value||"JOINT",docType:t,vendor:i?i.p||"Huntington Ingalls Industries":"Demo OEM Vendor",timestamp:new Date().toISOString()},document.getElementById("subUploadZone").innerHTML='<i class="fas fa-check-circle" style="font-size:2rem;color:#00aaff;display:block;margin-bottom:4px"></i><div style="color:#00aaff;font-weight:600">Demo '+(Oe[t]||t)+'</div><div style="color:var(--steel);font-size:.78rem">'+e.length+" current records vs "+R.baseline.length+" baseline records loaded</div>",En()}function Oi(){if(!R.items.length){const t=document.getElementById("subPasteData").value.trim();if(t)try{R.items=t.startsWith("[")?JSON.parse(t):gt(t)}catch{L("Could not parse pasted data");return}else{L('Upload a file or paste data first, or click "Run Demo Analysis"');return}}R.baseline.length||(R.baseline=Ln(R.items,document.getElementById("subDocType").value)),R.meta={program:(function(){var t=document.getElementById("subProgram").value,e=window.S4_PLATFORMS&&S4_PLATFORMS[t];return e?e.n:t==="CUSTOM"?document.getElementById("subCustomPlatform").value||"Custom Platform":t})(),programKey:document.getElementById("subProgram").value,branch:(function(){var t=document.getElementById("subProgram").value,e=window.S4_PLATFORMS&&S4_PLATFORMS[t];return e?e.b:document.getElementById("subBranch").value||"JOINT"})(),docType:document.getElementById("subDocType").value==="CUSTOM"?document.getElementById("subCustomDocType").value||"Custom Type":document.getElementById("subDocType").value,vendor:document.getElementById("subVendor").value||(function(){var t=document.getElementById("subProgram").value,e=window.S4_PLATFORMS&&S4_PLATFORMS[t];return e&&e.p||"Unknown Vendor"})(),contractRef:document.getElementById("subContractRef").value||"",notes:document.getElementById("subNotes").value||"",timestamp:new Date().toISOString()},En()}function En(){const t=R.items,e=R.baseline,n=[],r=t[0]&&t[0].partNumber?"partNumber":t[0]&&t[0].nsn?"nsn":t[0]&&t[0].drawingNumber?"drawingNumber":t[0]&&t[0].uid?"uid":t[0]&&t[0].lineItem?"lineItem":Object.keys(t[0]||{})[0]||"id",a={};e.forEach(m=>{a[m[r]]=m});const i={};t.forEach(m=>{i[m[r]]=m}),t.forEach(m=>{const p=a[m[r]];if(!p){n.push({severity:"info",category:"New Component",item:m[r],field:"N/A",issue:"New item not in previous submission",previous:"(not present)",current:m.nomenclature||m[r],impact:m.unitPrice?"$"+(+m.unitPrice*(m.qty||1)).toFixed(2)+" added cost":"Review required",_type:"new"});return}Object.keys(m).forEach(f=>{if(f.startsWith("_")||f===r)return;const g=String(m[f]||""),b=String(p[f]||"");if(g!==b&&b){let w="info",A="",C="Data Change";if(f==="unitPrice"||f==="totalPrice"||f==="acquisitionCost"){const T=p[f]>0?(+m[f]-+p[f])/+p[f]*100:0;T>25?(w="critical",C="Cost Increase",A="+"+T.toFixed(1)+"% ($"+(+m[f]-+p[f]).toFixed(2)+" increase)"):T>10?(w="warning",C="Cost Change",A="+"+T.toFixed(1)+"% increase"):T<-20?(w="warning",C="Cost Decrease",A=T.toFixed(1)+"% (verify accuracy)"):(C="Cost Adjustment",A=T.toFixed(1)+"% change")}else if(f==="source"||f==="vendor"||f==="make_buy")w="warning",C="Source Change",A="Vendor/source verification needed";else if(f==="cageCode")w="warning",C="CAGE Code Change",A="Verify manufacturer identity";else if(f==="status")g==="Obsolete"||g==="DMSMS Watch"?(w="critical",C="Obsolescence",A="DMSMS action required"):(w="info",C="Status Change",A="Review status transition");else if(f==="qty"){const T=+m[f]-+p[f];Math.abs(T)>10?(w="warning",C="Quantity Change",A=(T>0?"+":"")+T+" units"):(C="Quantity Change",A=(T>0?"+":"")+T+" units")}else if(f==="leadTime"){const T=parseInt(g)||0,P=parseInt(b)||0;T>P+30?(w="warning",C="Lead Time Increase",A="+"+(T-P)+" days delay risk"):C="Lead Time Change"}else f==="revision"?(C="Revision Change",w="info",A="Verify change documentation"):(f==="serialNumber"||f==="uid")&&(w="warning",C="Identity Change",A="IUID traceability verification needed");(w!=="info"||Math.random()<.5)&&n.push({severity:w,category:C,item:m[r],field:f,issue:f+" changed",previous:b,current:g,impact:A,_type:"change"})}})}),e.forEach(m=>{i[m[r]]||n.push({severity:"critical",category:"Removed Component",item:m[r],field:"N/A",issue:"Item removed from submission ‚Äî was in previous version",previous:m.nomenclature||m[r],current:"(removed)",impact:m.unitPrice?"Lost coverage ‚Äî $"+(+m.unitPrice*(m.qty||1)).toFixed(2)+" in spares no longer listed":"Coverage gap ‚Äî verify intentional removal",_type:"removed"})});const o={critical:0,warning:1,info:2};n.sort((m,p)=>(o[m.severity]||3)-(o[p.severity]||3)),R.discrepancies=n;const c=n.filter(m=>m._type==="new").length,l=n.filter(m=>m._type==="removed").length;n.filter(m=>m.category.includes("Cost")).length;const s=n.filter(m=>m.severity==="critical").length;let d=0;t.forEach(m=>{const p=a[m[r]];p&&m.unitPrice&&p.unitPrice&&(d+=+m.unitPrice*(m.qty||1)-+p.unitPrice*(p.qty||1)),!p&&m.unitPrice&&(d+=+m.unitPrice*(m.qty||1))}),document.getElementById("subTotalItems").textContent=t.length,document.getElementById("subNewItems").textContent=c,document.getElementById("subRemovedItems").textContent=l,document.getElementById("subCostDelta").textContent=(d>=0?"+$":"-$")+Math.abs(d).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,","),document.getElementById("subDiscrepancies").textContent=n.length,document.getElementById("subRedFlags").textContent=s,Pn(n),Fi(n,t,e,d);const u={timestamp:new Date().toISOString(),meta:R.meta,stats:{total:t.length,newItems:c,removedItems:l,discrepancies:n.length,criticals:s,costDelta:d},hash:""};H(JSON.stringify(u)).then(m=>{u.hash=m,le.unshift(u),le.length>50&&(le=le.slice(0,50)),localStorage.setItem("s4_submission_history",JSON.stringify(le)),ft()}),L("Analysis complete: "+n.length+" discrepancies found ("+s+" critical)")}function Pn(t){const e=ue==="all"?t:ue==="critical"?t.filter(i=>i.severity==="critical"):ue==="warning"?t.filter(i=>i.severity==="warning"):ue==="info"?t.filter(i=>i.severity==="info"):ue==="new"?t.filter(i=>i._type==="new"):ue==="cost"?t.filter(i=>i.category.includes("Cost")):t,n=document.getElementById("subDiscrepancyTable"),r={critical:"#ff4444",warning:"#ffa500",info:"#00aaff"},a={critical:"fa-circle-xmark",warning:"fa-triangle-exclamation",info:"fa-circle-info"};n.innerHTML=e.map(i=>'<tr style="border-color:var(--border)"><td style="padding:5px 8px;border-color:var(--border);white-space:nowrap"><i class="fas '+(a[i.severity]||"fa-circle")+'" style="color:'+(r[i.severity]||"#888")+';margin-right:4px"></i><span style="color:'+(r[i.severity]||"#888")+';font-weight:600;text-transform:uppercase;font-size:.7rem">'+i.severity+'</span></td><td style="padding:5px 8px;border-color:var(--border);color:#fff">'+i.category+'</td><td style="padding:5px 8px;border-color:var(--border);font-family:monospace;font-size:.75rem">'+i.item+'</td><td style="padding:5px 8px;border-color:var(--border)">'+i.issue+'</td><td style="padding:5px 8px;border-color:var(--border);color:#888">'+i.previous+'</td><td style="padding:5px 8px;border-color:var(--border);color:#fff">'+i.current+'</td><td style="padding:5px 8px;border-color:var(--border);color:'+(r[i.severity]||"#888")+'">'+(i.impact||"")+"</td></tr>").join(""),document.getElementById("subResultsContainer").style.display="block"}function _i(t){ue=t,Pn(R.discrepancies)}function Fi(t,e,n,r){const a=t.filter(u=>u.severity==="critical"),i=t.filter(u=>u.severity==="warning"),o=t.filter(u=>u._type==="new"),c=t.filter(u=>u._type==="removed"),l=t.filter(u=>u.category.includes("Cost")),s=R.meta;let d="<p><strong>Program:</strong> "+s.program+" | <strong>Branch:</strong> "+s.branch+" | <strong>Document:</strong> "+(Oe[s.docType]||s.docType)+"</p>";d+="<p><strong>Submission from:</strong> "+(s.vendor||"Unknown")+" | <strong>Analyzed:</strong> "+new Date().toLocaleString()+'</p><hr style="border-color:var(--border);margin:8px 0">',a.length&&(d+='<p style="color:#ff4444"><strong>CRITICAL FINDINGS ('+a.length+'):</strong></p><ul style="margin:4px 0 8px 16px">',a.slice(0,8).forEach(u=>{d+="<li>"+u.category+": "+u.item+" ‚Äî "+u.issue+(u.impact?" ("+u.impact+")":"")+"</li>"}),a.length>8&&(d+="<li>...and "+(a.length-8)+" more critical findings</li>"),d+="</ul>"),c.length&&(d+='<p style="color:#ff6b6b"><strong>REMOVED COMPONENTS ('+c.length+"):</strong> Items present in the previous submission are no longer listed. Verify each removal was intentional and that coverage gaps are addressed.</p>"),o.length&&(d+='<p style="color:#00aaff"><strong>NEW COMPONENTS ('+o.length+"):</strong> Items added that were not in the previous submission. Verify specifications, pricing, and compatibility.</p>"),l.length&&(d+='<p style="color:#00aaff"><strong>COST IMPACT:</strong> Net cost delta of <strong>'+(r>=0?"+$":"-$")+Math.abs(r).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")+"</strong> across "+l.length+" line items with price changes.</p>"),d+='<p style="margin-top:8px"><strong>RECOMMENDATION:</strong> ',a.length>3?d+="This submission requires immediate leadership review. Multiple critical discrepancies detected that could impact program readiness, cost, and schedule.":a.length>0?d+="Review critical findings with program office before acceptance. Flag cost increases for contracting officer review.":i.length>5?d+="Multiple warnings detected. Recommend detailed technical review before acceptance.":d+="No critical issues detected. Standard review and acceptance procedures apply.",d+="</p>",document.getElementById("subAiSummary").style.display="block",document.getElementById("subAiSummaryText").innerHTML=d,(function(){var u=t.filter(function(g){return g.severity==="critical"}),m=t.filter(function(g){return g.severity==="warning"}),p=s.program||"Unknown Program",f=Oe[s.docType]||s.docType||"Submission";u.forEach(function(g,b){Se({id:"ILIE-CRIT-"+Date.now().toString(36)+"-"+b,title:"Sub/PTD Critical: "+g.category+" ‚Äî "+(g.item||"Unknown").substring(0,50),detail:p+" "+f+" ‚Äî "+g.issue+(g.impact?" | Impact: "+g.impact:"")+" | Previous: "+g.previous+" ‚Üí Current: "+g.current,severity:"critical",source:"Submissions & PTD",owner:"ILS Manager",due:new Date(Date.now()+7*864e5).toISOString().split("T")[0],cost:g.impact||"",schedule:"7 days"})}),m.slice(0,5).forEach(function(g,b){Se({id:"ILIE-WARN-"+Date.now().toString(36)+"-"+b,title:"Sub/PTD Warning: "+g.category+" ‚Äî "+(g.item||"Unknown").substring(0,50),detail:p+" "+f+" ‚Äî "+g.issue+" | Previous: "+g.previous+" ‚Üí Current: "+g.current,severity:"warning",source:"Submissions & PTD",owner:"ILS Analyst",due:new Date(Date.now()+14*864e5).toISOString().split("T")[0],cost:"",schedule:"14 days"})}),u.length+Math.min(m.length,5)>0&&L("Submissions & PTD created "+(u.length+Math.min(m.length,5))+" action items from discrepancies")})()}async function Ui(){if(!R.discrepancies.length){L("Run an analysis first before anchoring");return}const t=R.meta,e=Oe[t.docType]||t.docType,n="Submissions & PTD Analysis | Program: "+t.program+" | Branch: "+t.branch+" | Type: "+e+" | Vendor: "+(t.vendor||"N/A")+" | Items: "+R.items.length+" | Discrepancies: "+R.discrepancies.length+" | Critical: "+R.discrepancies.filter(l=>l.severity==="critical").length+" | Date: "+new Date().toISOString(),r=await H(n);ae(r,"Submissions & PTD Analysis ‚Äî "+e,"CUI");const{txHash:a,explorerUrl:i,network:o}=await ie(r,"SUBMISSION_REVIEW",n.substring(0,100));S.anchored++,S.types.add("SUBMISSION_REVIEW"),S.slsFees=Math.round((S.slsFees+.01)*100)/100,V(),z();const c={hash:r,type:"SUBMISSION_REVIEW",branch:t.branch,timestamp:new Date().toISOString(),label:"Submissions & PTD Analysis: "+e,txHash:a};x.push(c),re({hash:r,record_type:"SUBMISSION_REVIEW",record_label:"Submissions & PTD Analysis: "+e,branch:t.branch,timestamp:new Date().toISOString(),timestamp_display:new Date().toISOString().replace("T"," ").substring(0,19)+" UTC",fee:.01,tx_hash:a,system:"Submissions & PTD",explorer_url:i,network:o}),ee(),$({hash:r,txHash:a,type:"SUBMISSION_REVIEW",label:"Submissions & PTD Analysis: "+e,branch:t.branch,content:n.substring(0,100),encrypted:!1,timestamp:new Date().toISOString(),source:"Submissions & PTD",fee:.01,explorerUrl:i,network:o}),setTimeout(()=>{document.getElementById("animStatus").textContent="Submissions & PTD analysis anchored ‚Äî "+R.discrepancies.length+" discrepancies recorded on-chain",document.getElementById("animStatus").style.color="#00aaff"},2200),await new Promise(l=>setTimeout(l,3500)),Z()}function Hi(){if(!R.discrepancies.length){L("No discrepancy report to export");return}const t=R.meta;let e=`Severity,Category,Item/Part,Field,Issue,Previous Value,Current Value,Impact
`;R.discrepancies.forEach(a=>{e+='"'+a.severity+'","'+a.category+'","'+a.item+'","'+(a.field||"")+'","'+a.issue+'","'+a.previous+'","'+a.current+'","'+(a.impact||"")+`"
`});const n=new Blob([e],{type:"text/csv"}),r=document.createElement("a");r.href=URL.createObjectURL(n),r.download="Discrepancy_Report_"+(t.program||"Program")+"_"+(t.docType||"Review")+"_"+new Date().toISOString().split("T")[0]+".csv",r.click(),L("Discrepancy report exported ‚Äî "+R.discrepancies.length+" findings")}function ft(){const t=document.getElementById("subHistory");if(t){if(!le.length){t.innerHTML='<div style="color:var(--steel);font-size:.8rem;padding:8px">No submission reviews yet. Run an analysis to start building history.</div>';return}t.innerHTML=le.slice(0,20).map(e=>{const n=e.stats.criticals>3?"#ff4444":e.stats.criticals>0?"#ffa500":"#00aaff";return'<div style="display:flex;justify-content:space-between;align-items:center;padding:6px 8px;border-bottom:1px solid var(--border);font-size:.78rem"><div><span style="color:#fff;font-weight:600">'+(Oe[e.meta.docType]||e.meta.docType)+'</span> <span style="color:var(--steel)">‚Äî '+e.meta.program+" ("+e.meta.branch+')</span></div><div style="display:flex;gap:12px;align-items:center"><span style="color:'+n+';font-weight:600">'+e.stats.discrepancies+" disc. / "+e.stats.criticals+' crit.</span><span style="color:var(--steel);font-size:.72rem">'+new Date(e.timestamp).toLocaleDateString()+'</span><span style="color:var(--steel);font-family:monospace;font-size:.68rem" title="'+e.hash+'">'+(e.hash||"").substring(0,8)+"...</span></div></div>"}).join("")}}function Gi(t){var e="";if(t==="VRS"){e=`NSN,Part_Number,Nomenclature,CAGE_Code,Qty,Unit_Price,Source,Lead_Time_Days,Status
`;var n=Re("VRSL");n.forEach(function(i){e+=i.nsn+","+i.partNumber+',"'+i.nomenclature+'",'+i.cageCode+","+i.qty+","+i.unitPrice+","+i.source+","+i.leadTime+","+i.status+`
`})}else if(t==="IUID"){e=`UID,Serial_Number,Part_Number,Nomenclature,Acquisition_Cost,Condition,Location
`;var n=Re("IUID");n.forEach(function(o){e+=o.uid+","+o.serialNumber+","+o.partNumber+',"'+o.nomenclature+'",'+o.acquisitionCost+","+o.condition+',"'+o.location+`"
`})}else if(t==="BOM"){e=`Line_Item,Part_Number,Nomenclature,Qty,Unit_Price,Total_Price,Make_Buy,Vendor
`;var n=Re("BOM");n.forEach(function(o){e+=o.lineItem+","+o.partNumber+',"'+o.nomenclature+'",'+o.qty+","+o.unitPrice+","+o.totalPrice+","+o.make_buy+',"'+o.vendor+`"
`})}else if(t==="CONFIG_DWG"){e=`Drawing_Number,Revision,Title,Effectivity,Status,Pages,Change_Notice
`;var n=Re("CONFIG_DWG");n.forEach(function(o){e+='"'+o.drawingNumber+'",'+o.revision+',"'+o.title+'","'+o.effectivity+'",'+o.status+","+o.pages+","+(o.changeNotice||"")+`
`})}else t==="ECP"&&(e=`ECP_Number,Title,Classification,Priority,Affected_Systems,Cost_Impact,Status,Date_Submitted
`,e+=`ECP-2026-0042,"Main Reduction Gear Bearing Upgrade",Class I,Urgent,"LM2500 MRG Assy",$182000,Under Review,2026-01-15
`,e+=`ECP-2026-0039,"AEGIS Display Console Firmware Update",Class II,Routine,"AN/SPY-6 Display",$45000,Approved,2026-01-08
`,e+=`ECP-2026-0044,"Hull Coating Change - Advanced Anti-Fouling",Class I,High,"Hull Underwater Body",$890000,Under Review,2026-01-22
`,e+=`ECP-2026-0036,"CIWS Phalanx RAM Upgrade Kit",Class I,Urgent,"Mk 15 CIWS",$1250000,Pending Board,2026-01-04
`,e+=`ECP-2026-0048,"Fiber Optic Backbone Cable Replacement",Class II,Routine,"Ship LAN Infrastructure",$125000,Approved,2026-02-01
`,e+=`ECP-2026-0051,"Diesel Generator Exhaust Stack Modification",Class I,High,"Ship Service DG",$67000,Under Review,2026-02-10
`,e+=`ECP-2025-0198,"HVAC Chiller Refrigerant Change",Class II,Routine,"HVAC Central Plant",$38000,Implemented,2025-11-15
`,e+=`ECP-2026-0053,"Weapons Elevator Hydraulic Valve Redesign",Class I,Urgent,"Mk 41 VLS Handling",$92000,Pending Board,2026-02-14
`);var r=new Blob([e],{type:"text/csv"}),a=document.createElement("a");a.href=URL.createObjectURL(r),a.download="S4_Submissions_PTD_Sample_"+t+"_Submission.csv",a.click(),L("Downloaded sample "+t+" submission file")}function Vi(t){t.preventDefault(),t.stopPropagation(),document.getElementById("subUploadZone").style.borderColor="rgba(224,108,117,0.35)";var e=t.dataTransfer.files;e.length&&Rn({target:{files:e}})}function qi(){R={items:[],discrepancies:[],baseline:[],meta:{}},ue="all",document.getElementById("subTotalItems").textContent="0",document.getElementById("subNewItems").textContent="0",document.getElementById("subRemovedItems").textContent="0",document.getElementById("subCostDelta").textContent="$0",document.getElementById("subDiscrepancies").textContent="0",document.getElementById("subRedFlags").textContent="0",document.getElementById("subDiscrepancyTable").innerHTML="",document.getElementById("subResultsContainer").style.display="none",document.getElementById("subAiSummary").style.display="none",document.getElementById("subUploadZone").innerHTML='<i class="fas fa-cloud-upload-alt" style="font-size:2rem;color:#c9a84c;margin-bottom:8px;display:block"></i><div style="color:#c9a84c;font-weight:600;font-size:.9rem">Upload Submission Data</div><div style="color:var(--steel);font-size:.78rem;margin-top:4px">CSV, Excel (.xlsx), XML, JSON, PDF, or paste data below</div><div style="color:var(--steel);font-size:.72rem;margin-top:2px">Drag & drop or click to browse</div>',document.getElementById("subVendor").value="",document.getElementById("subCustomPlatform").value="",document.getElementById("subCustomDocType").value="",document.getElementById("subContractRef").value="",document.getElementById("subNotes").value="",document.getElementById("subPasteData").value="",L("Submission review cleared")}function zi(){setTimeout(()=>{K();const t=document.querySelector('[data-panel="hub-vault"] .notif-badge, [onclick*="hub-vault"] .notif-badge');y.length>0&&t&&(t.textContent=y.length)},500)}document.addEventListener("DOMContentLoaded",()=>{if(jn(),Ke(),Yt("supply"),da(),K(),Dt(),zi(),sessionStorage.getItem("s4_entered")==="1"){var t=document.getElementById("platformWorkspace"),e=document.querySelector(".hero"),n=document.getElementById("platformLanding");t&&(t.style.display="block"),e&&(e.style.display="none"),n&&(n.style.display="none")}const r=document.getElementById("calEventDate");r&&(r.value=new Date().toISOString().split("T")[0]);const a=document.getElementById("aiFloatWrapper");a&&(a.style.display="flex"),document.querySelectorAll('[data-bs-toggle="pill"]').forEach(o=>{o.addEventListener("shown.bs.tab",c=>{const l=c.target.getAttribute("href");if(a){a.style.display="flex";var s=document.getElementById("aiContextLabel"),d={"#tabAnchor":"Anchor","#tabVerify":"Verify","#tabLog":"Transaction Log","#tabILS":"Anchor-S4","#tabMetrics":"Metrics","#tabOffline":"Offline Queue"};s&&(s.textContent=d[l]||"S4 Agent")}if(l==="#tabMetrics"&&typeof window.loadPerformanceMetrics=="function")try{window.loadPerformanceMetrics()}catch{}})});function i(){var o=location.hash.replace("#","");if(o){if(/^tab(Anchor|Verify|Log|ILS|Metrics|Offline|Wallet)$/.test(o)){var c=document.querySelector('a[href="#'+o+'"]');if(c){var l=new bootstrap.Tab(c);l.show()}return}/^hub-/.test(o)&&(typeof showSection=="function"&&showSection("sectionILS"),setTimeout(function(){typeof openILSTool=="function"&&openILSTool(o)},150))}}i(),window.addEventListener("hashchange",i),Qt()});window._checkDemoStatus=tr;window._updateBulkBar=Tt;window.acceptDodConsent=Gn;window.addNewDoc=Ja;window.addPOAM=ri;window.addScheduledReport=yi;window.aiAsk=na;window.aiSend=hn;window.analyzeSubmission=Oi;window.anchorCompliance=ti;window.anchorDMSMS=ia;window.anchorILSReport=Wr;window.anchorPredictive=Ni;window.anchorROI=zr;window.anchorReadiness=sa;window.anchorRecord=nr;window.anchorReport=xi;window.anchorRisk=Ei;window.anchorSubmissionReview=Ui;window.hideAnchorAnimation=Z;window.applyCustomProgram=ca;window.attachEvidence=si;window.bulkActionDelete=Ma;window.bulkActionMarkDone=Ca;window.bulkActionSetSeverity=Aa;window.bulkVaultDelete=Va;window.bulkVaultExport=Ha;window.bulkVaultVerify=Ga;window.calcCompliance=be;window.calcFedRAMP=Dn;window.calcROI=pn;window.calcReadiness=bn;window.clearCompletedActions=ma;window.clearStressTestRecords=za;window.clearSubmissionReview=qi;window.clearVault=Fa;window.closeActionModal=In;window.closeMeetingModal=Ct;window.closeProdFeatures=ba;window.closeSendModal=fn;window.copyAnalysisToClipboard=jr;window.copyHash=Kn;window.createCalendarEvent=Yr;window.createTeamsMeeting=Kr;window.deleteActionItem=fa;window.deletePOAM=ii;window.dismissToast=vn;window.downloadExecSummary=fi;window.downloadReport=Pi;window.downloadSampleFile=Gi;window.downloadTemplate=Ri;window.editActionItem=ga;window.editPOAM=ai;window.executeSend=Jr;window.exportActionItems=La;window.exportActionTracker=Qr;window.exportCompliance=ei;window.exportDMSMS=aa;window.exportDiscrepancyReport=Hi;window.exportEvidenceLog=ci;window.exportFedRAMP=mi;window.exportPOAM=oi;window.exportPredictive=ki;window.exportROI=qr;window.exportReadiness=oa;window.exportRisk=Li;window.exportVault=Oa;window.exportVerificationReport=cr;window.filterDiscrepancies=_i;window.filterHubActions=ka;window.filterTemplates=Ti;window.generateBudgetForecast=Mi;window.generateExecSummary=Lt;window.generateFleetComparison=vi;window.generateHeatMap=Ii;window.generateILSReport=It;window.generateRemediationPlans=Ai;window.generateReport=Pt;window.handleDocFileSelect=Xa;window.handleILSFiles=Q;window.handleSubFileDrop=Vi;window.handleSubFileUpload=Rn;window.handleToolUpload=ln;window.handleVerifyFileDrop=or;window.handleVerifyFileSelect=sr;window.inlineEditActionTitle=Ra;window.loadDMSMSData=pe;window.loadPredictiveData=Ie;window.loadReadinessData=ge;window.loadRecordToVerify=rr;window.loadRiskData=ve;window.loadSample=Yt;window.loadSamplePackage=Lr;window.loadSelectedSampleDoc=Rr;window.onILSProgramChange=Ve;window.onSubProgramChange=pt;window.openProdFeatures=Sa;window.printILSReport=Zr;window.refreshVaultMetrics=An;window.removeEvidence=li;window.removeILSFile=kr;window.removeScheduledReport=Si;window.removeToolFile=xr;window.renderDocLibrary=xe;window.renderTypeGrid=Ke;window.resetDemoSession=Wn;window.resetVerify=ir;window.runAnomalyDetection=Ci;window.runDocAIDemoExtraction=wi;window.runDocAIExtraction=Di;window.runFullILSAnalysis=vt;window.runMonitoringScan=Rt;window.runSubmissionDemo=Bi;window.runVaultStressTest=qa;window.runVersionDiff=gi;window.saveActionFromModal=ya;window.saveILSReport=ea;window.scheduleILSMeeting=$r;window.selectBranch=$t;window.selectType=Yn;window.sendILSAnalysis=Xr;window.setDocCat=Za;window.showAddActionModal=pa;window.showDocUpload=Wa;window.showDocVersionUpload=ja;window.simulateAccountLogin=qn;window.simulateCacLogin=Vn;window.smartPrioritizeActions=Da;window.startAuthFlow=Hn;window.switchHubTab=xa;window.switchLoginTab=Wt;window.toggleActionDone=ua;window.toggleActionSelect=va;window.toggleActionSelectAll=Ia;window.toggleActionTimeline=wa;window.toggleAiAgent=qe;window.toggleAutoMonitor=ui;window.toggleComplianceSection=ni;window.toggleFlowBox=Un;window.toggleScheduledReport=bi;window.toggleVaultSelectAll=Ua;window.uploadDocVersion=$a;window.vaultPageNext=Na;window.enterPlatform=zn;window.vaultPagePrev=Ba;window.verifyAllVault=_a;window.verifyRecord=ar;window.generateAiResponse=Sn;window.refreshVerifyRecents=Le;
